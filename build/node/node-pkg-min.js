/*
Copyright 2010, KISSY UI Library v1.1.7dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("node",function(a){function i(c,f,j){if(!(this instanceof i))return new i(c,f,j);if(c){if(a.isString(c)){c=p.create(c,f,j);if(c.nodeType===11)return new a.NodeList(c.childNodes)}else if(c instanceof i)return c;else c=c;this[0]=c}else this.length=0}var p=a.DOM;i.TYPE="-ks-Node";a.augment(i,{length:1,getDOMNode:function(){return this[0]},nodeType:i.TYPE});a.one=function(c,f){var j=a.get(c,f);return j?new i(j):null};a.Node=i});
KISSY.add("nodelist",function(a){function i(f){if(!(this instanceof i))return new i(f);p.push.apply(this,a.makeArray(f)||[])}var p=Array.prototype,c=a.DOM._isElementNode;a.mix(i.prototype,{length:0,item:function(f){var j=null,n,g;if(c(f)){n=0;for(g=this.length;n<g;n++)if(f===this[n]){f=n;break}}if(c(this[f]))j=new a.Node(this[f]);return j},getDOMNodes:function(){return p.slice.call(this)},each:function(f,j){var n=this.length,g=0,o;for(o=new a.Node(this[0]);g<n&&f.call(j||o,o,g,this)!==false;o=new a.Node(this[++g]));
return this}});a.all=function(f,j){return new i(a.query(f,j,true))};a.NodeList=i});
KISSY.add("node-attach",function(a,i){function p(b,d,e,h){b=[this[b?u:s]()].concat(a.makeArray(d));if(d[e]===i)return h.apply(g,b);else{h.apply(g,b);return this}}function c(b,d){a.each(b,function(e){a.each([q,v],function(h,k){h[e]=function(m){switch(d){case t:return function(){return p.call(this,k,arguments,1,m)};case r:return function(){return p.call(this,k,arguments,0,m)};case x:return function(){var l=this[k?u:s]();return(l=m.apply(g,[l].concat(a.makeArray(arguments))))?new (a[a.isArray(l)?"NodeList":
"Node"])(l):null};default:return function(){var l=this[k?u:s]();l=m.apply(g,[l].concat(a.makeArray(arguments)));return l===i?this:l}}}(g[e])})})}function f(b,d,e){b&&a.each(this,function(h){var k;if(d||a.isString(b))k=g.create(b);else{if(y(b,1)||y(b,3))k=b;if(B(b))k=b[0]}g[e](k,h)});return this}function j(b,d){if((b=a.get(b))&&b.appendChild)a.each(this,function(e){g[d](e,b)});return this}function n(b,d){b.__wrap=b.__wrap||[];b.__wrap.push(d)}var g=a.DOM,o=a.Event,y=g._nodeTypeIs,B=g._isKSNode,z=a.EventTarget,
w=a.Node,A=a.NodeList,q=w.prototype,v=A.prototype,s="getDOMNode",u=s+"s",t=1,r=2,x=4;a.mix(q,{one:function(b){return a.one(b,this[0])},all:function(b){return a.all(b,this[0])}});c(["data","removeData"],t);c(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);c(["attr","removeAttr"],t);c(["val","text"],r);c(["css"],t);c(["width","height"],r);c(["offset"],r);c(["scrollIntoView"]);c(["parent","next","prev","siblings","children"],x);c(["contains"]);c(["html"],r);c(["remove"]);a.each(["insertBefore",
"insertAfter"],function(b){q[b]=function(d){g[b].call(g,this[0],d);return this}});a.each([q,v],function(b,d){a.each(["append","prepend"],function(e){b[e]=function(h){return f.call(this,h,d,e)};b[e+"To"]=function(h){return j.call(this,h,e)}})});a.augment(w,z,{fire:null,on:function(b,d,e){function h(m){var l=a.makeArray(arguments);l.shift();m.target=new w(m.target);l.unshift(m);return d.apply(e||k,l)}var k=this;o.add(this[0],b,h,e);n(d,h);return this},detach:function(b,d,e){if(a.isFunction(d)){d=d.__wrap||
[];for(var h=0;h<d.length;h++)o.remove(this[0],b,d[h],e)}else o.remove(this[0],b,d,e);return this}});a.augment(A,z,{fire:null});q._supportSpecialEvent=true;a.each({on:"add",detach:"remove"},function(b,d){v[d]=function(e,h,k){for(var m=0;m<this.length;m++)this.item(m).on(e,h,k)}})});
