/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 520 Apr 2 22:21
*/
KISSY.add("datalazyload",function(k,o){function m(f,a){if(!(this instanceof m))return new m(f,a);if(a===o){a=f;f=[b]}l.isArray(f)||(f=[g.get(f)||b]);this.containers=f;this.config=k.merge(n,a||{});this.callbacks={els:[],fns:[]};this._init()}var r=YAHOO.util,g=r.Dom,j=r.Event,l=YAHOO.lang,i=window,b=document,e={AUTO:"auto",MANUAL:"manual"},n={mod:e.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"};k.mix(m.prototype,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function f(){c||(c=setTimeout(function(){a();c=null},100))}function a(){d._loadItems();if(d._getItemsLength()===0){j.removeListener(i,"scroll",f);j.removeListener(i,"resize",f)}}var c,d=this;j.on(i,"scroll",f);j.on(i,"resize",function(){d.threshold=d._getThreshold();f()});d._getItemsLength()&&j.onDOMReady(function(){a()})},_filterItems:function(){var f=this.containers,a=this.threshold,c=this.config.placeholder,
d=this.config.mod===e.MANUAL,h,p,s,t,q,u,v,w=[],x=[];h=0;for(p=f.length;h<p;++h){s=f[h].getElementsByTagName("img");t=0;for(q=s.length;t<q;++t){u=s[t];v=u.getAttribute("data-lazyload-src");if(d){if(v){u.src=c;w.push(u)}}else if(g.getY(u)>a&&!v){u.setAttribute("data-lazyload-src",u.src);u.src=c;w.push(u)}}s=f[h].getElementsByTagName("textarea");t=0;for(q=s.length;t<q;++t){u=s[t];g.hasClass(u,"ks-datalazyload")&&x.push(u)}}this.images=w;this.areaes=x},_loadItems:function(){this._loadImgs();this._loadAreaes();
this._fireCallbacks()},_loadImgs:function(){var f=this.images,a=this.threshold+g.getDocumentScrollTop(),c,d,h=[];for(c=0;d=f[c++];)g.getY(d)<=a?this._loadImgSrc(d):h.push(d);this.images=h},_loadImgSrc:function(f,a){a=a||"data-lazyload-src";var c=f.getAttribute(a);if(c&&f.src!=c){f.src=c;f.removeAttribute(a)}},_loadAreaes:function(){var f=this.areaes,a=this.threshold+g.getDocumentScrollTop(),c,d,h,p=[];for(c=0;d=f[c++];){h=d.parentNode;g.getY(h)<=a?this._loadDataFromArea(h,d):p.push(d)}this.areaes=
p},_loadDataFromArea:function(f,a){var c=document.createElement("DIV");c.innerHTML=a.value;a.style.display="none";a.className="";f.appendChild(c)},_fireCallbacks:function(){var f=this.callbacks,a=f.els,c=f.fns,d=this.threshold+g.getDocumentScrollTop(),h,p,s,t=[],q=[];for(h=0;(p=a[h])&&(s=c[h++]);)if(g.getY(p)<=d)s.call(p);else{t.push(p);q.push(s)}f.els=t;f.fns=q},addCallback:function(f,a){if((f=g.get(f))&&typeof a==="function"){this.callbacks.els.push(f);this.callbacks.fns.push(a)}},_getThreshold:function(){var f=
this.config.diff,a=g.getViewportHeight();return f==="default"?2*a:a+f},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(f,a,c){var d=this,h,p;l.isArray(f)||(f=[g.get(f)]);k.each(f,function(s){switch(a){case "textarea-data":if((h=s.getElementsByTagName("textarea")[0])&&g.hasClass(h,c||"ks-datalazyload-custom"))d._loadDataFromArea(s,h);break;default:p=s.nodeName==="IMG"?[s]:s.getElementsByTagName("img");s=0;for(var t=p.length;s<
t;s++)d._loadImgSrc(p[s],c||"data-lazyload-src-custom")}})}});k.mix(m,m.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);k.DataLazyload=m});
KISSY.add("suggest",function(k,o){function m(a,c,d){if(!(this instanceof m))return new m(a,c,d);this.textInput=g.get(a);this.dataSource=c;this.JSONDataSource=l.isObject(c)?c:null;this.returnedData=null;this.config=l.merge(f,d||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var r=YAHOO.util,g=r.Dom,
j=r.Event,l=YAHOO.lang,i=window,b=document,e=b.getElementsByTagName("head")[0],n=YAHOO.env.ua.ie,f={containerClass:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:n===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};k.mix(m.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this.createEvent("beforeDataRequest");this.createEvent("onDataReturn");this.createEvent("beforeShow");
this.createEvent("onItemSelect");this._initResizeEvent()},_initTextInput:function(){var a=this;a.textInput.setAttribute("autocomplete","off");j.on(a.textInput,"blur",function(){a.stop();a.hide()});a.config.autoFocus&&a.textInput.focus();var c=0;j.on(a.textInput,"keydown",function(d){d=d.keyCode;switch(d){case 27:a.hide();a.textInput.value=a.query;break;case 13:a.textInput.blur();a._onKeyboardSelecting&&a.textInput.value==a._getSelectedItemKey()&&a.fireEvent("onItemSelect",a.textInput.value);a._submitForm();
break;case 40:case 38:if(c++==0){a._isRunning&&a.stop();a._onKeyboardSelecting=true;a.selectItem(d==40)}else if(c==3)c=0;break}if(d!=40&&d!=38){a._isRunning||a.start();a._onKeyboardSelecting=false}});j.on(a.textInput,"keyup",function(){c=0})},_initContainer:function(){var a=b.createElement("div"),c=this.config.containerClass;a.className="suggest-container";if(c)a.className+=" "+c;a.style.position="absolute";a.style.visibility="hidden";this.container=a;this._setContainerRegion();this._initContainerEvent();
b.body.insertBefore(a,b.body.firstChild)},_setContainerRegion:function(){var a=g.getRegion(this.textInput),c=a.left,d=a.right-c-2;d=d>0?d:0;if(b.documentMode===7&&(n===7||n===8))c-=2;else YAHOO.env.ua.gecko&&c++;this.container.style.left=c+"px";this.container.style.top=a.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?d+"px":this.config.containerWidth},_initContainerEvent:function(){var a=this;j.on(a.container,"mousemove",function(d){d=j.getTarget(d);if(d.nodeName!="LI")d=
g.getAncestorByTagName(d,"li");if(g.isAncestor(a.container,d))if(d!=a.selectedItem){a._removeSelectedItem();a._setSelectedItem(d)}});var c=null;a.container.onmousedown=function(d){d=d||i.event;c=d.target||d.srcElement;a.textInput.onbeforedeactivate=function(){i.event.returnValue=false;a.textInput.onbeforedeactivate=null};return false};j.on(a.container,"mouseup",function(d){if(a._isInContainer(j.getXY(d))){d=j.getTarget(d);if(d==c)if(d.className=="suggest-close-btn")a.hide();else{if(d.nodeName!="LI")d=
g.getAncestorByTagName(d,"li");if(g.isAncestor(a.container,d)){a._updateInputFromSelectItem(d);a.fireEvent("onItemSelect",a.textInput.value);a.textInput.blur();a._submitForm()}}}})},_submitForm:function(){if(this.config.submitFormOnClickSelect){var a=this.textInput.form;if(a){if(b.createEvent){var c=b.createEvent("MouseEvents");c.initEvent("submit",true,false);a.dispatchEvent(c)}else b.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_isInContainer:function(a){var c=g.getRegion(this.container);
return a[0]>=c.left&&a[0]<=c.right&&a[1]>=c.top&&a[1]<=c.bottom},_initShim:function(){var a=b.createElement("iframe");a.src="about:blank";a.className="suggest-shim";a.style.position="absolute";a.style.visibility="hidden";a.style.border="none";this.container.shim=a;this._setShimRegion();b.body.insertBefore(a,b.body.firstChild)},_setShimRegion:function(){var a=this.container,c=a.shim;if(c){c.style.left=parseInt(a.style.left)-2+"px";c.style.top=a.style.top;c.style.width=parseInt(a.style.width)+2+"px"}},
_initStyle:function(){var a=g.get("suggest-style");if(!a){a=b.createElement("style");a.id="suggest-style";e.appendChild(a);if(a.styleSheet)a.styleSheet.cssText=".suggest-container{background:white;border:1px solid #999;z-index:99999}.suggest-shim{z-index:99998}.suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.suggest-container li.selected{background-color:#39F;cursor:default}.suggest-key{float:left;text-align:left;padding-left:5px}.suggest-result{float:right;text-align:right;padding-right:5px;color:green}.suggest-container li.selected span{color:#FFF;cursor:default}.suggest-bottom{padding:0 5px 5px}.suggest-close-btn{float:right}.suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}";
else a.appendChild(b.createTextNode(".suggest-container{background:white;border:1px solid #999;z-index:99999}.suggest-shim{z-index:99998}.suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.suggest-container li.selected{background-color:#39F;cursor:default}.suggest-key{float:left;text-align:left;padding-left:5px}.suggest-result{float:right;text-align:right;padding-right:5px;color:green}.suggest-container li.selected span{color:#FFF;cursor:default}.suggest-bottom{padding:0 5px 5px}.suggest-close-btn{float:right}.suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}"))}},
_initResizeEvent:function(){var a=this,c;j.on(i,"resize",function(){c&&clearTimeout(c);c=setTimeout(function(){a._setContainerRegion();a._setShimRegion()},50)})},start:function(){var a=this;m.focusInstance=a;a._timer=setTimeout(function(){a.updateContent();a._timer=setTimeout(arguments.callee,a.config.timerDelay)},a.config.timerDelay);a._isRunning=true},stop:function(){m.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var a=this.container,
c=a.shim;a.style.visibility="";if(c){if(!c.style.height){a=g.getRegion(a);c.style.height=a.bottom-a.top-2+"px"}c.style.visibility=""}}},hide:function(){if(this.isVisible()){var a=this.container,c=a.shim;if(c)c.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var a=this.query;if(l.trim(a).length)if(this._dataCache[a]!==o){this.returnedData=
"using cache";this._fillContainer(this._dataCache[a]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[a]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var a=this;if(!n)a.dataScript=null;if(!a.dataScript){var c=b.createElement("script");c.type="text/javascript";c.charset="utf-8";e.insertBefore(c,e.firstChild);a.dataScript=c;if(!n){var d=(new Date).getTime();
a._latestScriptTime=d;c.setAttribute("time",d);j.on(c,"load",function(){a._scriptDataIsOut=c.getAttribute("time")!=a._latestScriptTime})}}a.queryParams="q="+encodeURIComponent(a.query)+"&code=utf-8&callback=g_ks_suggest_callback";a.fireEvent("beforeDataRequest",a.query);a.dataScript.src=a.dataSource+"?"+a.queryParams},handleResponse:function(a){if(!this._scriptDataIsOut){this.returnedData=a;this.fireEvent("onDataReturn",a);this.returnedData=this.formatData(this.returnedData);var c="";a=this.returnedData.length;
if(a>0){c=b.createElement("ol");for(var d=0;d<a;++d){var h=this.returnedData[d],p=this.formatItem(h.key,h.result);p.setAttribute("key",h.key);c.appendChild(p)}c=c}this._fillContainer(c);a>0&&this.appendBottom();l.trim(this.container.innerHTML)&&this.fireEvent("beforeShow",this.container);this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(a){var c=[];if(!a)return c;if(l.isArray(a.result))a=a.result;var d=a.length;if(!d)return c;for(var h,p=0;p<d;++p){h=
a[p];c[p]=l.isString(h)?{key:h}:l.isArray(h)&&h.length>=2?{key:h[0],result:h[1]}:h}return c},formatItem:function(a,c){var d=b.createElement("li"),h=b.createElement("span");h.className="suggest-key";h.appendChild(b.createTextNode(a));d.appendChild(h);if(c!==o){a=this.config.resultFormat.replace("%result%",c);if(l.trim(a)){c=b.createElement("span");c.className="suggest-result";c.appendChild(b.createTextNode(a));d.appendChild(c)}}return d},appendBottom:function(){var a=b.createElement("div");a.className=
"suggest-bottom";if(this.config.showCloseBtn){var c=b.createElement("a");c.href="javascript: void(0)";c.setAttribute("target","_self");c.className="suggest-close-btn";c.appendChild(b.createTextNode(this.config.closeBtnText));a.appendChild(c)}l.trim(a.innerHTML)&&this.container.appendChild(a)},_fillContainer:function(a){if(a.nodeType==1){this.container.innerHTML="";this.container.appendChild(a)}else this.container.innerHTML=a;this.selectedItem=null},_displayContainer:function(){k.trim(this.container.innerHTML)?
this.show():this.hide()},selectItem:function(a){var c=this.container.getElementsByTagName("li");if(c.length!=0)if(this.isVisible()){if(this.selectedItem){a=g[a?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=c[a?0:c.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){g.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(a){g.addClass(a,
"selected");this.selectedItem=a},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});k.augment(m,r.EventProvider);i.g_ks_suggest_callback=function(a){m.focusInstance&&setTimeout(function(){m.focusInstance.handleResponse(a)},0)};k.Suggest=m});
KISSY.add("switchable",function(k,o){function m(b,e){e=e||{};if(!("mackupType"in e))if(e.panelCls)e.mackupType=1;else if(e.panels)e.mackupType=2;e=k.merge(m.Config,e);this.container=k.get(b);this.config=e;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===o)this.activeIndex=e.activeIndex;this._init()}var r=YAHOO.util,g=r.Dom,j=r.Event,l=YAHOO.lang,i=document;m.Config={mackupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",
panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};m.Plugins=[];k.mix(m.prototype,{_init:function(){var b=this,e=b.config;b.panels.length===0&&b._parseMackup();b.createEvent("beforeSwitch");b.createEvent("onSwitch");e.hasTriggers&&b._bindTriggers();k.each(m.Plugins,function(n){n.init&&n.init(b)})},_parseMackup:function(){var b=this.container,e=this.config,n=e.hasTriggers,f,a=[],c=[];switch(e.mackupType){case 0:if(f=
k.get("."+e.navCls,b))a=g.getChildren(f);f=k.get("."+e.contentCls,b);c=g.getChildren(f);break;case 1:a=k.query("."+e.triggerCls,b);c=k.query("."+e.panelCls,b);break;case 2:a=e.triggers;c=e.panels;break}b=c.length;this.length=b/e.steps;if(n&&b>0&&a.length===0)a=this._generateTriggersMackup(this.length);if(n){e=0;for(n=a.length;e<n;e++)this.triggers.push(a[e])}for(e=0;e<b;e++)this.panels.push(c[e]);this.content=f||c[0].parentNode},_generateTriggersMackup:function(b){var e=this.config,n=i.createElement("UL"),
f,a;n.className=e.navCls;for(a=0;a<b;a++){f=i.createElement("LI");if(a===this.activeIndex)f.className=e.activeTriggerCls;f.innerHTML=a+1;n.appendChild(f)}this.container.appendChild(n);return g.getChildren(n)},_bindTriggers:function(){var b=this,e=b.config,n=b.triggers,f,a,c=n.length;for(a=0;a<c;a++)(function(d){f=n[d];j.on(f,"click",function(){b._onFocusTrigger(d)});j.on(f,"focus",function(){b._onFocusTrigger(d)});if(e.triggerType==="mouse"){j.on(f,"mouseenter",function(){b._onMouseEnterTrigger(d)});
j.on(f,"mouseleave",function(){b._onMouseLeaveTrigger(d)})}})(a)},_onFocusTrigger:function(b){if(this.activeIndex!==b){this.switchTimer&&this.switchTimer.cancel();this.switchTo(b)}},_onMouseEnterTrigger:function(b){var e=this;if(e.activeIndex!==b)e.switchTimer=l.later(e.config.delay*1E3,e,function(){e.switchTo(b)})},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(b,e){var n=this.config,f=this.triggers,a=this.panels,c=this.activeIndex,d=n.steps,h=c*d,
p=b*d;if(b===c)return this;if(!this.fireEvent("beforeSwitch",b))return this;if(n.hasTriggers)this._switchTrigger(c>-1?f[c]:null,f[b]);if(e===o)e=b>c?"forward":"forward";this._switchView(a.slice(h,h+d),a.slice(p,p+d),b,e);this.activeIndex=b;return this},_switchTrigger:function(b,e){var n=this.config.activeTriggerCls;b&&g.removeClass(b,n);g.addClass(e,n)},_switchView:function(b,e,n){g.setStyle(b,"display","none");g.setStyle(e,"display","block");this.fireEvent("onSwitch",n)},prev:function(){var b=this.activeIndex;
this.switchTo(b>0?b-1:this.length-1,"backward")},next:function(){var b=this.activeIndex;this.switchTo(b<this.length-1?b+1:0,"forward")}});k.augment(m,r.EventProvider);k.Switchable=m});
KISSY.add("switchable-autoplay",function(k){var o=YAHOO.util.Event,m=YAHOO.lang,r=k.Switchable;k.mix(r.Config,{autoplay:false,interval:5,pauseOnHover:true});r.Plugins.push({name:"autoplay",init:function(g){var j=g.config;if(j.autoplay){if(j.pauseOnHover){o.on(g.container,"mouseenter",function(){g.paused=true});o.on(g.container,"mouseleave",function(){setTimeout(function(){g.paused=false},j.interval*1E3)})}g.autoplayTimer=m.later(j.interval*1E3,g,function(){g.paused||g.switchTo(g.activeIndex<g.length-
1?g.activeIndex+1:0)},null,true)}}})});
KISSY.add("switchable-effect",function(k){var o=YAHOO.util,m=o.Dom,r=k.Switchable,g;k.mix(r.Config,{effect:"none",duration:0.5,easing:o.Easing.easeNone});r.Effects={none:function(j,l,i){m.setStyle(j,"display","none");m.setStyle(l,"display","block");i()},fade:function(j,l,i){if(j.length!==1)throw new Error("fade effect only supports steps == 1.");var b=this,e=b.config,n=j[0],f=l[0];b.anim&&b.anim.stop();m.setStyle(f,"opacity",1);b.anim=new o.Anim(n,{opacity:{to:0}},e.duration,e.easing);b.anim.onComplete.subscribe(function(){b.anim=
null;m.setStyle(f,"z-index",9);m.setStyle(n,"z-index",1);i()});b.anim.animate()},scroll:function(j,l,i,b){var e=this;j=e.config;l=j.effect==="scrollx";var n={};n[l?"left":"top"]={to:-(e.viewSize[l?0:1]*b)};e.anim&&e.anim.stop();e.anim=new o.Anim(e.content,n,j.duration,j.easing);e.anim.onComplete.subscribe(function(){e.anim=null;i()});e.anim.animate()}};g=r.Effects;g.scrollx=g.scrolly=g.scroll;r.Plugins.push({name:"effect",init:function(j){var l=j.config,i=l.effect,b=j.panels,e=l.steps,n=j.activeIndex*
e,f=n+e-1,a=b.length;j.viewSize=[l.viewSize[0]||b[0].offsetWidth*e,l.viewSize[0]||b[0].offsetHeight*e];if(i!=="none"){for(l=0;l<a;l++)b[l].style.display="block";switch(i){case "scrollx":case "scrolly":j.content.style.position="absolute";j.content.parentNode.style.position="relative";if(i==="scrollx"){m.setStyle(b,"float","left");j.content.style.width=j.viewSize[0]*(a/e)+"px"}break;case "fade":for(l=0;l<a;l++){m.setStyle(b[l],"opacity",l>=n&&l<=f?1:0);b[l].style.position="absolute";b[l].style.zIndex=
l>=n&&l<=f?9:1}break}}}});k.mix(r.prototype,{_switchView:function(j,l,i,b){var e=this,n=e.config.effect;(typeof n==="function"?n:g[n]).call(e,j,l,function(){e.fireEvent("onSwitch",i)},i,b)}})});
KISSY.add("switchable-circular",function(k){function o(d,h,p,s,t){var q=this;d=q.config;h=q.length;var u=q.activeIndex,v=d.scrollType===a,w=v?l:i,x=q.viewSize[v?0:1];v=-x*s;var z={},A,y=t===f;if(A=y&&u===0&&s===h-1||t===n&&u===h-1&&s===0)v=m.call(q,q.panels,s,y,w,x);z[w]={to:v};q.anim&&q.anim.stop();q.anim=new g.Anim(q.content,z,d.duration,d.easing);q.anim.onComplete.subscribe(function(){A&&r.call(q,q.panels,s,y,w,x);q.anim=null;p()});q.anim.animate()}function m(d,h,p,s,t){var q=this.config.steps;
h=this.length;var u=p?h-1:0,v=(u+1)*q;for(q=u*q;q<v;q++){d[q].style.position=j;d[q].style[s]=(p?"-":e)+t*h+b}return p?t:-t*h}function r(d,h,p,s,t){var q=this.config.steps;h=this.length;var u=p?h-1:0,v=(u+1)*q;for(q=u*q;q<v;q++){d[q].style.position=e;d[q].style[s]=e}this.content.style[s]=p?-t*(h-1)+b:e}var g=YAHOO.util,j="relative",l="left",i="top",b="px",e="",n="forward",f="backward",a="scrollx",c=k.Switchable;k.mix(c.Config,{circular:false});c.Plugins.push({name:"circular",init:function(d){d=d.config;
if(d.circular&&(d.effect===a||d.effect==="scrolly")){d.scrollType=d.effect;d.effect=o}}})});
KISSY.add("switchable-lazyload",function(k){var o=YAHOO.util.Dom,m="beforeSwitch",r="img-src",g="textarea-data",j={},l=k.Switchable,i=k.DataLazyload;j[r]="data-lazyload-src-custom";j[g]="ks-datalazyload-custom";k.mix(l.Config,{lazyDataType:"",lazyDataFlag:""});l.Plugins.push({name:"autoplay",init:function(b){function e(d){var h=f.steps;d=d*h;i.loadCustomLazyData(b.panels.slice(d,d+h),a,c);n()&&b.unsubscribe(m,e)}function n(){var d,h,p;if(a===r){d=b.container.getElementsByTagName("img");h=0;for(p=
d.length;h<p;h++)if(d[h].getAttribute(c))return false}else if(a===g){d=b.container.getElementsByTagName("textarea");h=0;for(p=d.length;h<p;h++)if(o.hasClass(d[h],c))return false}return true}var f=b.config,a=f.lazyDataType,c=f.lazyDataFlag||j[a];!i||!a||!c||b.subscribe(m,e)}})});KISSY.add("tabs",function(k){function o(m,r){if(!(this instanceof o))return new o(m,r);o.superclass.constructor.call(this,m,r)}k.extend(o,k.Switchable);k.Tabs=o});
KISSY.add("slide",function(k){function o(r,g){if(!(this instanceof o))return new o(r,g);g=k.merge(m,g||{});o.superclass.constructor.call(this,r,g)}var m={autoplay:true,circular:true};k.extend(o,k.Switchable);k.Slide=o});KISSY.add("carousel",function(k){function o(r,g){if(!(this instanceof o))return new o(r,g);g=k.merge(m,g||{});o.superclass.constructor.call(this,r,g)}var m={circular:true};k.extend(o,k.Switchable);k.Carousel=o});
KISSY.add("megamenu",function(k){function o(i,b){if(!(this instanceof o))return new o(i,b);b=k.merge(l,b||{});o.superclass.constructor.call(this,i,b);this._initView();this.config.showCloseBtn&&this._initCloseBtn()}var m=YAHOO.util,r=m.Dom,g=m.Event,j=YAHOO.lang,l={hideDelay:0.5,viewCls:"ks-megamenu-view",closeBtnCls:"ks-megamenu-closebtn",showCloseBtn:true,activeIndex:-1};k.extend(o,k.Switchable);k.mix(o.prototype,{_onFocusTrigger:function(i){if(this.activeIndex!==i){this.switchTimer&&this.switchTimer.cancel();
this.hideTimer&&this.hideTimer.cancel();this.switchTo(i)}},_onMouseEnterTrigger:function(i){var b=this;b.hideTimer&&b.hideTimer.cancel();b.switchTimer=j.later(b.config.delay*1E3,b,function(){b.switchTo(i)})},_onMouseLeaveTrigger:function(){var i=this;i.switchTimer&&i.switchTimer.cancel();i.hideTimer=j.later(i.config.hideDelay*1E3,i,function(){i.hide()})},_initView:function(){var i=this,b=i.config,e=r.getElementsByClassName(b.viewCls,"*",i.container)[0];if(!e){e=document.createElement("DIV");e.className=
b.viewCls;i.container.appendChild(e)}g.on(e,"mouseenter",function(){i.hideTimer&&i.hideTimer.cancel()});g.on(e,"mouseleave",function(){i.hideTimer=j.later(b.hideDelay*1E3,i,"hide")});i.viewContent=e;i.view=e},_initCloseBtn:function(){var i=this,b,e=i.view;e.innerHTML="<span class='{hook_cls}'></span>".replace("{hook_cls}",i.config.closeBtnCls);g.on(e.firstChild,"click",function(){i.hide()});b=document.createElement("div");e.appendChild(b);i.viewContent=b},_switchView:function(i,b,e){this.view.style.display=
"block";this.viewContent.innerHTML=b[0].innerHTML;this.fireEvent("onSwitch",e)},hide:function(){r.removeClass(this.triggers[this.activeIndex],this.config.activeTriggerCls);this.view.style.display="none";this.activeIndex=-1}});k.MegaMenu=o});
