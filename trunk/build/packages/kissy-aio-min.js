/*
Copyright 2010, KISSY UI Library v1.0.3
MIT Licensed
build: 469 Mar 9 17:12
*/
(function(m,r,t){if(m[r]===t)m[r]={};r=m[r];var u=m.document,n=Array.prototype,p=n.forEach,k=n.indexOf,q=/^\s+|\s+$/g,d=function(a,e,c,i){if(!e||!a)return a;if(c===t)c=true;var o,b,l;if(i&&(l=i.length))for(o=0;o<l;o++){b=i[o];if(b in e)if(c||!(b in a))a[b]=e[b]}else for(b in e)if(c||!(b in a))a[b]=e[b];return a},g=false,h=[],f=false;d(r,{version:"1.0.3",_init:function(){this.Env={mods:{}};this.Config={debug:true}},add:function(a,e){var c=this;c.Env.mods[a]={name:a,fn:e};e(c);return c},ready:function(a){f||
this._bindReady();g?a.call(m,this):h.push(a);return this},_bindReady:function(){var a=this,e=u.documentElement.doScroll,c=e?"onreadystatechange":"DOMContentLoaded";f=true;if(u.attachEvent){if(m!=m.top){function i(){if(u.readyState==="complete"){u.detachEvent(c,i);a._fireReady()}}u.attachEvent(c,i)}else{function o(){try{e("left");a._fireReady()}catch(l){setTimeout(o,1)}}o()}m.attachEvent("onload",a._fireReady)}else{function b(){u.removeEventListener(c,b,false);a._fireReady()}u.addEventListener(c,b,
false)}},_fireReady:function(){if(!g){g=true;if(h){for(var a,e=0;a=h[e++];)a.call(m,this);h=null}}},mix:d,merge:function(){var a=arguments,e={},c,i=a.length;for(c=0;c<i;++c)d(e,a[c]);return e},extend:function(a,e,c,i){if(!e||!a)return a;var o=Object.prototype,b=e.prototype,l=function(j){function v(){}v.prototype=j;return new v}(b);a.prototype=l;l.constructor=a;a.superclass=b;if(e!==Object&&b.constructor===o.constructor)b.constructor=e;c&&d(l,c);i&&d(a,i);return a},augment:function(a,e,c,i){return d(a.prototype,
e.prototype,c,i)},weave:function(a,e,c,i){var o=[c[i],a];e==="before"&&o.reverse();c[i]=function(){for(var b=0,l;b<2;++b)l=o[b].apply(this,arguments);return l};return this},cloneTo:function(a){var e=m[a]||{};d(e,this);e._init();d(e.Env.mods,this.Env.mods);return m[a]=e},namespace:function(){var a=arguments,e=a.length,c=null,i,o,b;for(i=0;i<e;++i){b=(""+a[i]).split(".");c=this;for(o=m[b[0]]===c?1:0;o<b.length;++o)c=c[b[o]]=c[b[o]]||{}}return c},each:p?function(a,e,c){p.call(a,e,c);return this}:function(a,
e,c){var i=a&&a.length||0,o;for(o=0;o<i;++o)e.call(c||this,a[o],o,a);return this},indexOf:k?function(a,e){return k.call(e,a)}:function(a,e){for(var c=0,i=e.length;c<i;++c)if(e[c]===a)return c;return-1},trim:String.prototype.trim?function(a){return(a||"").trim()}:function(a){return(a||"").replace(q,"")},log:function(a,e,c){if(this.Config.debug){c&&(a=c+": "+a);if(m.console!==t&&console.log)console[e&&console[e]?e:"log"](a)}return this}});r._init()})(window,"KISSY");
KISSY.add("selector",function(m,r){function t(b,l,j){var v,s=[],w,x;if(typeof b===f){b=m.trim(b);if(c.test(b)){if(l=n(b.slice(1)))s=[l]}else if(v=i.exec(b)){w=v[1];x=v[2];v=v[3];if(l=w?n(w):u(l))if(v){if(!w||b.indexOf(a)!==-1)s=k(v,x,l)}else if(x)s=p(l,x)}else if(b.indexOf(",")>-1)if(h.querySelectorAll)s=h.querySelectorAll(b);else{w=b.split(",");x=[];s=0;for(b=w.length;s<b;++s)x=x.concat(t(w[s],l));s=d(x)}}else if(b&&b.nodeType)s=[b];else if(b&&b.item)s=b;if(s.item)s=q(s);j||g(s);return s}function u(b){if(b===
r)b=h;else if(typeof b===f&&c.test(b))b=n(b.slice(1));else if(b&&b.nodeType!==1&&b.nodeType!==9)b=null;return b}function n(b){return h.getElementById(b)}function p(b,l){return b.getElementsByTagName(l)}function k(b,l,j){j=b=j.getElementsByClassName(b);var v=0,s=0,w=b.length,x;if(l&&l!==e){j=[];for(l=l.toUpperCase();v<w;++v){x=b[v];if(x.tagName===l)j[s++]=x}}return j}function q(b){return Array.prototype.slice.call(b)}function d(b){var l=false;b.sort(function(v,s){v=v.sourceIndex-s.sourceIndex;if(v===
0)l=true;return v});if(l)for(var j=1;j<b.length;j++)b[j]===b[j-1]&&b.splice(j--,1);return b}function g(b){b.each=function(l,j){m.each(b,l,j)}}var h=document,f="string",a=" ",e="*",c=/^#[\w-]+$/,i=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var b=h.createElement("div");b.appendChild(h.createComment(""));if(b.getElementsByTagName(e).length>0)p=function(l,j){l=l.getElementsByTagName(j);if(j===e){j=[];for(var v=0,s=0,w;w=l[v++];)if(w.nodeType===1)j[s++]=w;l=j}return l}})();h.getElementsByClassName||
(k=h.querySelectorAll?function(b,l,j){return j.querySelectorAll((l?l:"")+"."+b)}:function(b,l,j){l=j.getElementsByTagName(l||e);j=[];var v=0,s=0,w=l.length,x,y;for(b=a+b+a;v<w;++v){x=l[v];if((y=x.className)&&(a+y+a).indexOf(b)>-1)j[s++]=x}return j});try{q(h.documentElement.childNodes)}catch(o){q=function(b){for(var l=[],j=0,v=b.length;j<v;++j)l[j]=b[j];return l}}m.query=t;m.get=function(b,l){return t(b,l,true)[0]||null}});
KISSY.add("dom-base",function(m,r){var t=document.documentElement.textContent!==r?"textContent":"innerText";m.Dom={query:m.query,get:m.get,attr:function(k,q,d){if(k&&k.getAttribute){if(d===r)return k.getAttribute(attr)||"";k.setAttribute(attr,d)}},removeAttr:function(k,q){k&k.removeAttribute&&k.removeAttribute(q)},hasClass:function(k,q){if(!q||!k.className)return false;return(" "+k.className+" ").indexOf(" "+q+" ")>-1},addClass:function(k,q){if(q)u(k,q)||(k.className+=" "+q)},removeClass:function(k,
q){if(u(k,q)){k.className=(" "+k.className+" ").replace(" "+q+" "," ");u(k,q)&&p(k,q)}},replaceClass:function(k,q,d){p(k,q);n(k,d)},toggleClass:function(k,q,d){(d!==r?d:!u(k,q))?n(k,q):p(k,q)},css:function(){},text:function(k,q){if(q===r)return(k||{})[t]||"";if(k)k[t]=q},html:function(){},val:function(){},create:function(){}};var u=m.Dom.hasClass,n=m.Dom.addClass,p=m.Dom.removeClass});
KISSY.add("datalazyload",function(m,r){function t(f,a){var e=this;if(!(e instanceof t))return new t(f,a);if(a===r){a=f;f=[d]}k.isArray(f)||(f=[n.get(f)||d]);e.containers=f;e.config=m.merge(h,a||{});e.callbacks={els:[],fns:[]};e._init()}var u=YAHOO.util,n=u.Dom,p=u.Event,k=YAHOO.lang,q=window,d=document,g={AUTO:"auto",MANUAL:"manual"},h={mod:g.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.2/build/datalazyload/dot.gif"};m.mix(t.prototype,{_init:function(){var f=this;f.threshold=f._getThreshold();
f._filterItems();f._getItemsLength()&&f._initLoadEvent()},_initLoadEvent:function(){function f(){e||(e=setTimeout(function(){a();e=null},100))}function a(){c._loadItems();if(c._getItemsLength()===0){p.removeListener(q,"scroll",f);p.removeListener(q,"resize",f)}}var e,c=this;p.on(q,"scroll",f);p.on(q,"resize",function(){c.threshold=c._getThreshold();f()});c._getItemsLength()&&p.onDOMReady(function(){a()})},_filterItems:function(){var f=this,a=f.containers,e=f.threshold,c=f.config.placeholder,i=f.config.mod===
g.MANUAL,o,b,l,j,v,s,w,x=[],y=[];o=0;for(b=a.length;o<b;++o){l=a[o].getElementsByTagName("img");j=0;for(v=l.length;j<v;++j){s=l[j];w=s.getAttribute("data-lazyload-src");if(i){if(w){s.src=c;x.push(s)}}else if(n.getY(s)>e&&!w){s.setAttribute("data-lazyload-src",s.src);s.src=c;x.push(s)}}l=a[o].getElementsByTagName("textarea");j=0;for(v=l.length;j<v;++j){s=l[j];n.hasClass(s,"ks-datalazyload")&&y.push(s)}}f.images=x;f.areaes=y},_loadItems:function(){var f=this;f._loadImgs();f._loadAreaes();f._fireCallbacks()},
_loadImgs:function(){var f=this,a=f.images,e=n.getDocumentScrollTop();e=f.threshold+e;var c,i,o=[];for(c=0;i=a[c++];)n.getY(i)<=e?f._loadImgSrc(i):o.push(i);f.images=o},_loadImgSrc:function(f,a){a=a||"data-lazyload-src";var e=f.getAttribute(a);if(e&&f.src!=e){f.src=e;f.removeAttribute(a)}},_loadAreaes:function(){var f=this,a=f.areaes,e=n.getDocumentScrollTop();e=f.threshold+e;var c,i,o,b=[];for(c=0;i=a[c++];){o=i.parentNode;n.getY(o)<=e?f._loadDataFromArea(o,i):b.push(i)}f.areaes=b},_loadDataFromArea:function(f,
a){var e=document.createElement("DIV");e.innerHTML=a.value;a.style.display="none";a.className="";f.appendChild(e)},_fireCallbacks:function(){var f=this,a=f.callbacks,e=a.els,c=a.fns,i=n.getDocumentScrollTop();f=f.threshold+i;var o,b,l=[],j=[];for(i=0;(o=e[i])&&(b=c[i++]);)if(n.getY(o)<=f)b.call(o);else{l.push(o);j.push(b)}a.els=l;a.fns=j},addCallback:function(f,a){if((f=n.get(f))&&typeof a==="function"){this.callbacks.els.push(f);this.callbacks.fns.push(a)}},_getThreshold:function(){var f=this.config.diff,
a=n.getViewportHeight();return f==="default"?2*a:a+f},_getItemsLength:function(){var f=this;return f.images.length+f.areaes.length+f.callbacks.els.length},loadCustomLazyData:function(f,a,e){var c=this,i,o;k.isArray(f)||(f=[n.get(f)]);m.each(f,function(b){switch(a){case "textarea-data":if((i=b.getElementsByTagName("textarea")[0])&&n.hasClass(i,e||"ks-datalazyload-custom"))c._loadDataFromArea(b,i);break;default:o=b.nodeName==="IMG"?[b]:b.getElementsByTagName("img");b=0;for(var l=o.length;b<l;b++)c._loadImgSrc(o[b],
e||"data-lazyload-src-custom")}})}});m.mix(t,t.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);m.DataLazyload=t});
KISSY.add("switchable",function(m,r){function t(d,g){var h=this;g=g||{};if(!("mackupType"in g))if(g.panelCls)g.mackupType=1;else if(g.panels)g.mackupType=2;g=m.merge(t.Config,g);h.container=m.get(d);h.config=g;h.triggers=h.triggers||[];h.panels=h.panels||[];if(h.activeIndex===r)h.activeIndex=g.activeIndex;h._init()}var u=YAHOO.util,n=u.Dom,p=u.Event,k=YAHOO.lang,q=document;t.Config={mackupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",
triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};t.Plugins=[];m.mix(t.prototype,{_init:function(){var d=this,g=d.config;d.panels.length===0&&d._parseMackup();d.createEvent("beforeSwitch");d.createEvent("onSwitch");g.hasTriggers&&d._bindTriggers();m.each(t.Plugins,function(h){h.init&&h.init(d)})},_parseMackup:function(){var d=this,g=d.container,h=d.config,f=h.hasTriggers,a,e=[],c=[];switch(h.mackupType){case 0:if(a=m.get("."+
h.navCls,g))e=n.getChildren(a);a=m.get("."+h.contentCls,g);c=n.getChildren(a);break;case 1:e=m.query("."+h.triggerCls,g);c=m.query("."+h.panelCls,g);break;case 2:e=h.triggers;c=h.panels;break}g=c.length;d.length=g/h.steps;if(f&&g>0&&e.length===0)e=d._generateTriggersMackup(d.length);if(f){h=0;for(f=e.length;h<f;h++)d.triggers.push(e[h])}for(h=0;h<g;h++)d.panels.push(c[h]);d.content=a||c[0].parentNode},_generateTriggersMackup:function(d){var g=this,h=g.config,f=q.createElement("UL"),a,e;f.className=
h.navCls;for(e=0;e<d;e++){a=q.createElement("LI");if(e===g.activeIndex)a.className=h.activeTriggerCls;a.innerHTML=e+1;f.appendChild(a)}g.container.appendChild(f);return n.getChildren(f)},_bindTriggers:function(){var d=this,g=d.config,h=d.triggers,f,a,e=h.length;for(a=0;a<e;a++)(function(c){f=h[c];p.on(f,"click",function(){d._onFocusTrigger(c)});p.on(f,"focus",function(){d._onFocusTrigger(c)});if(g.triggerType==="mouse"){p.on(f,"mouseenter",function(){d._onMouseEnterTrigger(c)});p.on(f,"mouseleave",
function(){d._onMouseLeaveTrigger(c)})}})(a)},_onFocusTrigger:function(d){var g=this;if(g.activeIndex!==d){g.switchTimer&&g.switchTimer.cancel();g.switchTo(d)}},_onMouseEnterTrigger:function(d){var g=this;if(g.activeIndex!==d)g.switchTimer=k.later(g.config.delay*1E3,g,function(){g.switchTo(d)})},_onMouseLeaveTrigger:function(){var d=this;d.switchTimer&&d.switchTimer.cancel()},switchTo:function(d,g){var h=this,f=h.config,a=h.triggers,e=h.panels,c=h.activeIndex,i=f.steps,o=c*i,b=d*i;if(d===c)return h;
if(!h.fireEvent("beforeSwitch",d))return h;if(f.hasTriggers)h._switchTrigger(c>-1?a[c]:null,a[d]);if(g===r)g=d>c?"forward":"forward";h._switchView(e.slice(o,o+i),e.slice(b,b+i),d,g);h.activeIndex=d;return h},_switchTrigger:function(d,g){var h=this.config.activeTriggerCls;d&&n.removeClass(d,h);n.addClass(g,h)},_switchView:function(d,g,h){n.setStyle(d,"display","none");n.setStyle(g,"display","block");this.fireEvent("onSwitch",h)},prev:function(){var d=this,g=d.activeIndex;d.switchTo(g>0?g-1:d.length-
1,"backward")},next:function(){var d=this,g=d.activeIndex;d.switchTo(g<d.length-1?g+1:0,"forward")}});m.augment(t,u.EventProvider);m.Switchable=t});
KISSY.add("switchable-autoplay",function(m){var r=YAHOO.util.Event,t=YAHOO.lang,u=m.Switchable;m.mix(u.Config,{autoplay:false,interval:5,pauseOnHover:true});u.Plugins.push({name:"autoplay",init:function(n){var p=n.config;if(p.autoplay){if(p.pauseOnHover){r.on(n.container,"mouseenter",function(){n.paused=true});r.on(n.container,"mouseleave",function(){setTimeout(function(){n.paused=false},p.interval*1E3)})}n.autoplayTimer=t.later(p.interval*1E3,n,function(){n.paused||n.switchTo(n.activeIndex<n.length-
1?n.activeIndex+1:0)},null,true)}}})});
KISSY.add("switchable-effect",function(m){var r=YAHOO.util,t=r.Dom,u=m.Switchable,n;m.mix(u.Config,{effect:"none",duration:0.5,easing:r.Easing.easeNone});u.Effects={none:function(p,k,q){t.setStyle(p,"display","none");t.setStyle(k,"display","block");q()},fade:function(p,k,q){if(p.length!==1)throw new Error("fade effect only supports steps == 1.");var d=this,g=d.config,h=p[0],f=k[0];d.anim&&d.anim.stop();t.setStyle(f,"opacity",1);d.anim=new r.Anim(h,{opacity:{to:0}},g.duration,g.easing);d.anim.onComplete.subscribe(function(){d.anim=
null;t.setStyle(f,"z-index",9);t.setStyle(h,"z-index",1);q()});d.anim.animate()},scroll:function(p,k,q,d){var g=this;p=g.config;k=p.effect==="scrollx";var h={};h[k?"left":"top"]={to:-(g.viewSize[k?0:1]*d)};g.anim&&g.anim.stop();g.anim=new r.Anim(g.content,h,p.duration,p.easing);g.anim.onComplete.subscribe(function(){g.anim=null;q()});g.anim.animate()}};n=u.Effects;n.scrollx=n.scrolly=n.scroll;u.Plugins.push({name:"effect",init:function(p){var k=p.config,q=k.effect,d=p.panels,g=k.steps,h=p.activeIndex*
g,f=h+g-1,a=d.length;p.viewSize=[k.viewSize[0]||d[0].offsetWidth*g,k.viewSize[0]||d[0].offsetHeight*g];if(q!=="none"){for(k=0;k<a;k++)d[k].style.display="block";switch(q){case "scrollx":case "scrolly":p.content.style.position="absolute";p.content.parentNode.style.position="relative";if(q==="scrollx"){t.setStyle(d,"float","left");p.content.style.width=p.viewSize[0]*(a/g)+"px"}break;case "fade":for(k=0;k<a;k++){t.setStyle(d[k],"opacity",k>=h&&k<=f?1:0);d[k].style.position="absolute";d[k].style.zIndex=
k>=h&&k<=f?9:1}break}}}});m.mix(u.prototype,{_switchView:function(p,k,q,d){var g=this,h=g.config.effect;(typeof h==="function"?h:n[h]).call(g,p,k,function(){g.fireEvent("onSwitch",q)},q,d)}})});
KISSY.add("switchable-circular",function(m){function r(c,i,o,b,l){var j=this;c=j.config;i=j.length;var v=j.activeIndex,s=c.scrollType===a,w=s?k:q,x=j.viewSize[s?0:1];s=-x*b;var y={},A,z=l===f;if(A=z&&v===0&&b===i-1||l===h&&v===i-1&&b===0)s=t.call(j,j.panels,b,z,w,x);y[w]={to:s};j.anim&&j.anim.stop();j.anim=new n.Anim(j.content,y,c.duration,c.easing);j.anim.onComplete.subscribe(function(){A&&u.call(j,j.panels,b,z,w,x);j.anim=null;o()});j.anim.animate()}function t(c,i,o,b,l){var j=this;i=j.config.steps;
j=j.length;var v=o?j-1:0,s=(v+1)*i;for(i=v*i;i<s;i++){c[i].style.position=p;c[i].style[b]=(o?"-":g)+l*j+d}return o?l:-l*j}function u(c,i,o,b,l){i=this;var j=i.config.steps,v=i.length,s=o?v-1:0,w=(s+1)*j;for(j=s*j;j<w;j++){c[j].style.position=g;c[j].style[b]=g}i.content.style[b]=o?-l*(v-1)+d:g}var n=YAHOO.util,p="relative",k="left",q="top",d="px",g="",h="forward",f="backward",a="scrollx",e=m.Switchable;m.mix(e.Config,{circular:false});e.Plugins.push({name:"circular",init:function(c){c=c.config;if(c.circular&&
(c.effect===a||c.effect==="scrolly")){c.scrollType=c.effect;c.effect=r}}})});
KISSY.add("switchable-lazyload",function(m){var r=YAHOO.util.Dom,t="beforeSwitch",u="img-src",n="textarea-data",p={},k=m.Switchable,q=m.DataLazyload;p[u]="data-lazyload-src-custom";p[n]="ks-datalazyload-custom";m.mix(k.Config,{lazyDataType:"",lazyDataFlag:""});k.Plugins.push({name:"autoplay",init:function(d){function g(c){var i=f.steps;c*=i;q.loadCustomLazyData(d.panels.slice(c,c+i),a,e);h()&&d.unsubscribe(t,g)}function h(){var c,i,o;if(a===u){c=d.container.getElementsByTagName("img");i=0;for(o=c.length;i<
o;i++)if(c[i].getAttribute(e))return false}else if(a===n){c=d.container.getElementsByTagName("textarea");i=0;for(o=c.length;i<o;i++)if(r.hasClass(c[i],e))return false}return true}var f=d.config,a=f.lazyDataType,e=f.lazyDataFlag||p[a];!q||!a||!e||d.subscribe(t,g)}})});KISSY.add("tabs",function(m){function r(t,u){var n=this;if(!(n instanceof r))return new r(t,u);r.superclass.constructor.call(n,t,u)}m.extend(r,m.Switchable);m.Tabs=r});
KISSY.add("slide",function(m){function r(u,n){var p=this;if(!(p instanceof r))return new r(u,n);n=m.merge(t,n||{});r.superclass.constructor.call(p,u,n)}var t={autoplay:true,circular:true};m.extend(r,m.Switchable);m.Slide=r});KISSY.add("carousel",function(m){function r(u,n){var p=this;if(!(p instanceof r))return new r(u,n);n=m.merge(t,n||{});r.superclass.constructor.call(p,u,n)}var t={circular:true};m.extend(r,m.Switchable);m.Carousel=r});
