/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 793 Jul 2 09:50
*/
(function(c,q,k){if(c[q]===k)c[q]={};q=c[q];var o=c.document,t=function(e,g,h,l){if(!g||!e)return e;if(h===k)h=true;var p,u,f;if(l&&(f=l.length))for(p=0;p<f;p++){u=l[p];if(u in g)if(h||!(u in e))e[u]=g[u]}else for(u in g)if(h||!(u in e))e[u]=g[u];return e},s=false,j=[],m=false;t(q,{version:"1.0.8",_init:function(){this.Env={mods:{}}},add:function(e,g){this.Env.mods[e]={name:e,fn:g};g(this);return this},ready:function(e){m||this._bindReady();s?e.call(c,this):j.push(e);return this},_bindReady:function(){var e=
this,g=o.documentElement.doScroll,h=g?"onreadystatechange":"DOMContentLoaded",l=function(){e._fireReady()};m=true;if(o.readyState==="complete")return l();if(o.addEventListener){var p=function(){o.removeEventListener(h,p,false);l()};o.addEventListener(h,p,false)}else{var u=function(){if(o.readyState==="complete"){o.detachEvent(h,u);l()}};o.attachEvent(h,u);c.attachEvent("onload",l);if(c==c.top){var f=function(){try{g("left");l()}catch(i){setTimeout(f,1)}};f()}}},_fireReady:function(){if(!s){s=true;
if(j){for(var e,g=0;e=j[g++];)e.call(c,this);j=null}}},mix:t,merge:function(){var e={},g,h=arguments.length;for(g=0;g<h;++g)t(e,arguments[g]);return e},augment:function(){var e=arguments,g=e.length-2,h=e[0],l=e[g],p=e[g+1],u=1;if(!q.isArray(p)){l=p;p=k;g++}if(!q.isBoolean(l)){l=k;g++}for(;u<g;u++)t(h.prototype,e[u].prototype||e[u],l,p);return h},extend:function(e,g,h,l){if(!g||!e)return e;var p=Object.prototype,u=g.prototype,f=function(i){function a(){}a.prototype=i;return new a}(u);e.prototype=f;
f.constructor=e;e.superclass=u;if(g!==Object&&u.constructor===p.constructor)u.constructor=g;h&&t(f,h);l&&t(e,l);return e},namespace:function(){var e=arguments.length,g=null,h,l,p;for(h=0;h<e;++h){p=(""+arguments[h]).split(".");g=this;for(l=c[p[0]]===g?1:0;l<p.length;++l)g=g[p[l]]=g[p[l]]||{}}return g},app:function(e,g){var h=c[e]||{};t(h,this,true,["_init","add","namespace"]);h._init();return t(c[e]=h,typeof g==="function"?g():g)},log:function(e,g,h){if(this.Config.debug){if(h)e=h+": "+e;if(c.console!==
k&&console.log)console[g&&console[g]?g:"log"](e)}return this},error:function(e){if(this.Config.debug)throw e;}});q._init();q.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(c,q){function k(a){var b=typeof a;return a===null||b!=="object"&&b!=="function"}var o=window,t=document,s=location,j=Array.prototype,m=j.indexOf,e=j.filter,g=String.prototype.trim,h=Object.prototype.toString,l=encodeURIComponent,p=decodeURIComponent,u=/^\s+|\s+$/g,f=/^(\w+)\[\]$/,i=/\S/;c.mix(c,{isUndefined:function(a){return a===q},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&h.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var b in a)return false;return true},isFunction:function(a){return h.call(a)==="[object Function]"},isArray:function(a){return h.call(a)==="[object Array]"},trim:g?function(a){return a==q?"":g.call(a)}:function(a){return a==q?"":a.toString().replace(u,"")},each:function(a,b,d){for(var n=a&&a.length||0,r=0;r<n;++r)b.call(d||o,a[r],r,a)},indexOf:m?function(a,
b){return m.call(b,a)}:function(a,b){for(var d=0,n=b.length;d<n;++d)if(b[d]===a)return d;return-1},inArray:function(a,b){return c.indexOf(a,b)>-1},makeArray:function(a){if(a===null||a===q)return[];if(c.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||c.isFunction(a))return[a];if(a.item&&c.UA.ie){for(var b=[],d=0,n=a.length;d<n;++d)b[d]=a[d];return b}return j.slice.call(a)},filter:e?function(a,b,d){return e.call(a,b,d)}:function(a,b,d){var n=[];c.each(a,function(r,v,x){b.call(d,
r,v,x)&&n.push(r)});return n},param:function(a){if(!c.isPlainObject(a))return"";var b=[],d,n;for(d in a){n=a[d];d=l(d);if(k(n))b.push(d,"=",l(n+""),"&");else if(c.isArray(n)&&n.length)for(var r=0,v=n.length;r<v;++r)k(n[r])&&b.push(d,"[]=",l(n[r]+""),"&")}b.pop();return b.join("")},unparam:function(a,b){if(typeof a!=="string"||(a=c.trim(a)).length===0)return{};var d={};a=a.split(b||"&");for(var n,r,v,x=0,w=a.length;x<w;++x){b=a[x].split("=");n=p(b[0]);try{r=p(b[1]||"")}catch(y){r=b[1]||""}if((v=n.match(f))&&
v[1]){d[v[1]]=d[v[1]]||[];d[v[1]].push(r)}else d[n]=r}return d},later:function(a,b,d,n,r){b=b||0;n=n||{};var v=a,x=c.makeArray(r),w;if(typeof a==="string")v=n[a];v||c.error("method undefined");a=function(){v.apply(n,x)};w=d?setInterval(a,b):setTimeout(a,b);return{id:w,interval:d,cancel:function(){this.interval?clearInterval(w):clearTimeout(w)}}},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&i.test(a)){var b=t.getElementsByTagName("head")[0]||t.documentElement,d=t.createElement("script");
d.text=a;b.insertBefore(d,b.firstChild);b.removeChild(d)}}});if(s&&s.search&&s.search.indexOf("ks-debug")!==-1)c.Config.debug=true});
KISSY.add("kissy-ua",function(c){var q=navigator.userAgent,k,o={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},t=function(s){var j=0;return parseFloat(s.replace(/\./g,function(){return j++===0?".":""}))};if((k=q.match(/AppleWebKit\/([\d.]*)/))&&k[1]){o.webkit=t(k[1]);if((k=q.match(/Chrome\/([\d.]*)/))&&k[1])o.chrome=t(k[1]);else if((k=q.match(/\/([\d.]*) Safari/))&&k[1])o.safari=t(k[1]);if(/ Mobile\//.test(q))o.mobile="Apple";else if(k=q.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))o.mobile=
k[0]}else if((k=q.match(/Opera\/.* Version\/([\d.]*)/))&&k[1]){o.opera=t(k[1]);if(q.match(/Opera Mini[^;]*/))o.mobile=k[0]}else if((k=q.match(/MSIE\s([^;]*)/))&&k[1])o.ie=t(k[1]);else if(k=q.match(/Gecko/)){o.gecko=1;if((k=q.match(/rv:([\d.]*)/))&&k[1])o.gecko=t(k[1]);if((k=q.match(/Firefox\/([\d.]*)/))&&k[1])o.firefox=t(k[1])}c.UA=o});KISSY.add("dom",function(c){c.DOM={_isElementNode:function(q){return q&&q.nodeType===1}}});
KISSY.add("selector",function(c,q){function k(f,i){var a,b=[],d,n;i=o(i);if(c.isString(f)){f=c.trim(f);if(p.test(f)){if(f=t(f.slice(1)))b=[f]}else if(a=u.exec(f)){d=a[1];n=a[2];a=a[3];if(i=d?t(d):i)if(a)if(!d||f.indexOf(h)!==-1)b=j(a,n,i);else{if((f=t(d))&&g.hasClass(f,a))b=[f]}else if(n)b=s(i,n)}else if(c.ExternalSelector)return c.ExternalSelector(f,i);else m(f)}else if(f&&f.nodeType)b=[f];else if(f&&(f.item||c.isArray(f)))b=f;if(b.item)b=c.makeArray(b);return b}function o(f){if(f===q)f=e;else if(c.isString(f)&&
p.test(f))f=t(f.slice(1));else if(f&&f.nodeType!==1&&f.nodeType!==9)f=null;return f}function t(f){return e.getElementById(f)}function s(f,i){return f.getElementsByTagName(i)}function j(f,i,a){a=f=a.getElementsByClassName(f);var b=0,d=0,n=f.length,r;if(i&&i!==l){a=[];for(i=i.toUpperCase();b<n;++b){r=f[b];if(r.tagName===i)a[d++]=r}}return a}function m(f){c.error("Unsupported selector: "+f)}var e=document,g=c.DOM,h=" ",l="*",p=/^#[\w-]+$/,u=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var f=
e.createElement("div");f.appendChild(e.createComment(""));if(f.getElementsByTagName(l).length>0)s=function(i,a){i=i.getElementsByTagName(a);if(a===l){a=[];for(var b=0,d=0,n;n=i[b++];)if(n.nodeType===1)a[d++]=n;i=a}return i}})();e.getElementsByClassName||(j=e.querySelectorAll?function(f,i,a){return a.querySelectorAll((i?i:"")+"."+f)}:function(f,i,a){i=a.getElementsByTagName(i||l);a=[];var b=0,d=0,n=i.length,r,v;for(f=h+f+h;b<n;++b){r=i[b];if((v=r.className)&&(h+v+h).indexOf(f)>-1)a[d++]=r}return a});
c.query=k;c.get=function(f,i){return k(f,i)[0]||null};c.mix(g,{query:k,get:c.get,filter:function(f,i){var a=k(f),b,d,n,r=[];if(c.isString(i)&&(b=u.exec(i))&&!b[1]){d=b[2];n=b[3];i=function(v){return!(d&&v.tagName!==d.toUpperCase()||n&&!g.hasClass(v,n))}}if(c.isFunction(i))r=c.filter(a,i);else if(i&&c.ExternalSelector)r=c.ExternalSelector._filter(f,i);else m(i);return r},test:function(f,i){f=k(f);return g.filter(f,i).length===f.length}})});
KISSY.add("dom-class",function(c,q){function k(j,m,e,g){if(!(m=c.trim(m)))return g?false:q;j=c.query(j);var h=0,l=j.length;m=m.split(t);for(var p;h<l;h++){p=j[h];if(p.nodeType===1){p=e(p,m,m.length);if(p!==q)return p}}if(g)return false}var o=c.DOM,t=/[\.\s]\s*\.?/,s=/[\n\t]/g;c.mix(o,{hasClass:function(j,m){return k(j,m,function(e,g,h){if(e=e.className){e=" "+e+" ";for(var l=0,p=true;l<h;l++)if(e.indexOf(" "+g[l]+" ")<0){p=false;break}if(p)return true}},true)},addClass:function(j,m){k(j,m,function(e,
g,h){var l=e.className;if(l){var p=" "+l+" ";l=l;for(var u=0;u<h;u++)if(p.indexOf(" "+g[u]+" ")<0)l+=" "+g[u];e.className=c.trim(l)}else e.className=m})},removeClass:function(j,m){k(j,m,function(e,g,h){var l=e.className;if(l)if(h){l=(" "+l+" ").replace(s," ");for(var p=0;p<h;p++)l=l.replace(" "+g[p]+" "," ");e.className=c.trim(l)}else e.className=""})},replaceClass:function(j,m,e){o.removeClass(j,m);o.addClass(j,e)},toggleClass:function(j,m,e){var g=c.isBoolean(e),h;k(j,m,function(l,p,u){for(var f=
0,i;f<u;f++){i=p[f];h=g?!e:o.hasClass(l,i);o[h?"removeClass":"addClass"](l,i)}})}})});
KISSY.add("dom-attr",function(c,q){function k(f,i){return i&&i.nodeName.toUpperCase()===f.toUpperCase()}var o=c.UA,t=o.ie,s=t&&t<8,j=document.documentElement.textContent!==q?"textContent":"innerText",m=c.DOM,e=m._isElementNode,g=/href|src|style/,h=/href|src|colspan|rowspan/,l=/\r/g,p=/radio|checkbox/,u={readonly:"readOnly"};s&&c.mix(u,{"for":"htmlFor","class":"className"});c.mix(m,{attr:function(f,i,a){if(i=c.trim(i)){i=i.toLowerCase();i=u[i]||i;if(a===q){f=c.get(f);if(!e(f))return q;var b;g.test(i)||
(b=f[i]);if(b===q)b=f.getAttribute(i);if(s)if(h.test(i))b=f.getAttribute(i,2);else if(i==="style")b=f.style.cssText;return b===null?q:b}c.each(c.query(f),function(d){if(e(d))if(s&&i==="style")d.style.cssText=a;else d.setAttribute(i,""+a)})}},removeAttr:function(f,i){c.each(c.query(f),function(a){e(a)&&a.removeAttribute(i)})},val:function(f,i){if(i===q){var a=c.get(f);if(!e(a))return q;if(k("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(k("select",a)){var b=a.selectedIndex;
f=a.options;if(b<0)return null;else if(a.type==="select-one")return m.val(f[b]);a=[];for(var d=0,n=f.length;d<n;++d)f[d].selected&&a.push(m.val(f[d]));return a}if(o.webkit&&p.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(l,"")}c.each(c.query(f),function(r){if(k("select",r)){var v=c.makeArray(i),x=r.options,w;d=0;for(n=x.length;d<n;++d){w=x[d];w.selected=c.inArray(m.val(w),v)}if(!v.length)r.selectedIndex=-1}else if(e(r))r.value=i})},text:function(f,i){if(i===
q){f=c.get(f);if(e(f))return f[j]||""}else c.each(c.query(f),function(a){if(e(a))a[j]=i})}})});
KISSY.add("dom-style",function(c,q){var k=c.DOM,o=document,t=o.documentElement,s=/width|height|top|left|right|bottom|margin|padding/i,j=/-([a-z])/ig,m=function(g,h){return h.toUpperCase()},e={};c.mix(k,{_CUSTOM_STYLES:e,_getComputedStyle:function(g,h){var l="",p=g.ownerDocument;if(g.style)l=p.defaultView.getComputedStyle(g,null)[h];return l},css:function(g,h,l){if(c.isPlainObject(h))for(var p in h)k.css(g,p,h[p]);else{if(h.indexOf("-")>0)h=h.replace(j,m);h=e[h]||h;if(l===q){g=c.get(g);p="";if(g&&
g.style){p=h.get?h.get(g):g.style[h];if(p===""&&!h.get)p=k._getComputedStyle(g,h)}return p===q?"":p}else{if(l===null||l==="")l="";else if(!isNaN(new Number(l))&&s.test(h))l+="px";(h==="width"||h==="height")&&parseFloat(l)<0||c.each(c.query(g),function(u){if(u&&u.style)h.set?h.set(u,l):(u.style[h]=l)})}}},addStyleSheet:function(g,h){var l;if(h)l=c.get(h);l||(l=k.create("<style>",{id:h}));c.get("head").appendChild(l);if(l.styleSheet)l.styleSheet.cssText=g;else l.appendChild(o.createTextNode(g))}});
if(t.style.cssFloat!==q)e["float"]="cssFloat";else if(t.style.styleFloat!==q)e["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,q){if(c.UA.ie){var k=c.DOM,o=document,t=o.documentElement,s=k._CUSTOM_STYLES,j=/^-?\d+(?:px)?$/i,m=/^-?\d/;try{if(t.style.opacity===q&&t.filters)s.opacity={get:function(g){var h=100;try{h=g.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(l){try{h=g.filters("alpha").opacity}catch(p){}}return h/100+""},set:function(g,h){g=g.style;g.zoom=1;g.filter="alpha(opacity="+h*100+")"}}}catch(e){c.log("IE filters ActiveX is disabled. ex = "+e)}if(!(o.defaultView||
{}).getComputedStyle&&t.currentStyle)k._getComputedStyle=function(g,h){var l=g.style;g=g.currentStyle[h];if(!j.test(g)&&m.test(g)){var p=l.left;l.left=h==="fontSize"?"1em":g||0;g=l.pixelLeft+"px";l.left=p}return g}}});
KISSY.add("dom-offset",function(c,q){function k(i){var a=0,b=0;if(i!==m.body&&i!==e&&i[f]){i=i[f]();a=i.left+t.scrollLeft();b=i.top+t.scrollTop()}return{left:a,top:b}}function o(i,a){var b=t.css(i,p);if(b==="static")b=i.style[p]=u;var d=k(i);b=b===u;var n=l(t.css(i,"left"),10),r=l(t.css(i,"top"),10);n=c.isNumber(n)?n:b?0:i.offsetLeft;r=c.isNumber(r)?r:b?0:i.offsetTop;t.css(i,{left:n+a.left-d.left,top:r+a.top-d.top})}var t=c.DOM,s=c.UA,j=window,m=document,e=m.documentElement,g=m.compatMode==="CSS1Compat",
h=Math.max,l=parseInt,p="position",u="relative",f="getBoundingClientRect";c.mix(t,{offset:function(i,a){if(!(i=c.get(i))||!i.ownerDocument)return null;if(a===q)return k(i);o(i,a)},scrollLeft:function(){return j.pageXOffset||e.scrollLeft||m.body.scrollLeft},scrollTop:function(){return j.pageYOffset||e.scrollTop||m.body.scrollTop},docHeight:function(){return h(!g?m.body.scrollHeight:e.scrollHeight,t.viewportHeight())},docWidth:function(){return h(!g?m.body.scrollWidth:e.scrollWidth,t.viewportWidth())},
viewportHeight:function(){return s.ie?g?e.clientHeight:m.body.clientHeight:j.innerHeight},viewportWidth:function(){return!g&&!s.opera?m.body.clientWidth:s.ie?e.clientWidth:j.innerWidth}})});
KISSY.add("dom-traversal",function(c,q){function k(j,m,e,g){if(!(j=c.get(j)))return null;if(m===q)m=1;var h=null,l,p;if(c.isNumber(m)&&m>=0){if(m===0)return j;l=0;p=m;m=function(){return++l===p}}for(;j=j[e];)if(s(j)&&(!m||t.test(j,m))&&(!g||g(j))){h=j;break}return h}function o(j,m,e){var g=[];var h=j=c.get(j);if(j&&e)h=j.parentNode;if(h){e=0;for(h=h.firstChild;h;h=h.nextSibling)if(s(h)&&h!==j&&(!m||t.test(h,m)))g[e++]=h}return g}var t=c.DOM,s=t._isElementNode;c.mix(t,{parent:function(j,m){return k(j,
m,"parentNode",function(e){return e.nodeType!=11})},next:function(j,m){return k(j,m,"nextSibling")},prev:function(j,m){return k(j,m,"previousSibling")},siblings:function(j,m){return o(j,m,true)},children:function(j,m){return o(j,m)},contains:function(j,m){var e=false;if((j=c.get(j))&&(m=c.get(m)))if(j.contains)return j.contains(m);else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(m)&16);else for(;!e&&(m=m.parentNode);)e=m==j;return e}})});
KISSY.add("dom-create",function(c,q){function k(b,d){if(e(b)&&d)for(var n in d)s.attr(b,n,d[n]);return b}function o(b,d){var n=null,r;if(b&&(b.push||b.item)&&b[0]){d=d||b[0].ownerDocument;n=d.createDocumentFragment();if(b.item)b=c.makeArray(b);d=0;for(r=b.length;d<r;d++)n.appendChild(b[d])}else c.log("Unable to convert "+b+" to fragment.");return n}var t=document,s=c.DOM,j=c.UA,m=j.ie,e=s._isElementNode,g=t.createElement("div"),h=/<(\w+)/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(s,{create:function(b,
d,n){if(e(b))return b;if(!(b=c.trim(b)))return null;var r=null;r=s._creators;var v,x="div",w;if(v=l.exec(b))r=(n||t).createElement(v[1]);else{if((v=h.exec(b))&&(w=v[1])&&c.isFunction(r[w=w.toLowerCase()]))x=w;b=r[x](b,n).childNodes;r=b.length===1?b[0].parentNode.removeChild(b[0]):o(b,n||t)}return k(r,d)},_creators:{div:function(b,d){d=d?d.createElement("div"):g;d.innerHTML=b;return d}},html:function(b,d){if(d===q){b=c.get(b);if(e(b))return b.innerHTML}else c.each(c.query(b),function(n){if(e(n)){n.innerHTML=
"";d&&n.appendChild(s.create(d))}})}});var p=s._creators,u=s.create,f=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,i={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(j.gecko||m){for(var a in i)(function(b){p[a]=function(d,n){return u("<"+b+">"+d+"</"+b+">",null,n)}})(i[a]);if(m){p.script=function(b,d){d=d?d.createElement("div"):g;d.innerHTML="-"+b;d.removeChild(d.firstChild);return d};if(m<8)p.tbody=function(b,d){d=u("<table>"+b+"</table>",null,d);
var n=d.children.tags("tbody")[0];d.children.length>1&&n&&!f.test(b)&&n.parentNode.removeChild(n);return d}}c.mix(p,{optgroup:p.option,th:p.td,thead:p.tbody,tfoot:p.tbody,caption:p.tbody,colgroup:p.tbody})}});
KISSY.add("dom-insertion",function(c){var q=c.DOM;c.mix(q,{insertBefore:function(k,o){k=q.create(k);o=c.get(o);k&&o&&o.parentNode&&o.parentNode.insertBefore(k,o);return k},insertAfter:function(k,o){k=q.create(k);o=c.get(o);if(k&&o&&o.parentNode)o.nextSibling?o.parentNode.insertBefore(k,o.nextSibling):o.parentNode.appendChild(k);return k}})});
KISSY.add("event",function(c,q){function k(a,b,d,n,r){if(c.isString(b))b=c.query(b);if(c.isArray(b)){c.each(b,function(v){i[a](v,d,n,r)});return true}if((d=c.trim(d))&&d.indexOf(p)>0){c.each(d.split(p),function(v){i[a](b,v,n,r)});return true}}function o(a){return j(a)?-1:a[l]}function t(a,b){if(j(a))return c.error("Text or comment node is not valid event target.");try{a[l]=b}catch(d){c.error(d)}}function s(a){try{a[l]=q;delete a[l]}catch(b){}}function j(a){return a.nodeType===3||a.nodeType===8}var m=
window,e=document,g=e.addEventListener?function(a,b,d,n){a.addEventListener&&a.addEventListener(b,d,n)}:function(a,b,d){a.attachEvent&&a.attachEvent("on"+b,d)},h=e.removeEventListener?function(a,b,d,n){a.removeEventListener&&a.removeEventListener(b,d,n)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)},l="ksEventTargetId",p=" ",u=c.now(),f={},i={EVENT_GUID:l,special:{},add:function(a,b,d,n){if(!k("add",a,b,d,n)){var r=o(a),v,x;if(!(r===-1||!b||!c.isFunction(d))){if(!r){t(a,r=u++);f[r]={target:a,
events:{}}}x=f[r].events;v=!a.isCustomEventTarget&&i.special[b]||{};if(!x[b]){r=function(w,y){if(!w||!w.fixed){w=new c.EventObject(a,w,b);c.isPlainObject(y)&&c.mix(w,y)}v.setup&&v.setup(w);return(v.handle||i._handle)(a,w,x[b].listeners,n)};x[b]={handle:r,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(b,r);else g(a,v.fix||b,r,v.capture)}x[b].listeners.push(d)}}},remove:function(a,b,d){if(!k("remove",a,b,d)){var n=o(a),r,v,x,w,y,z;if(n!==-1)if(n&&(r=f[n]))if(r.target===a){r=r.events||
{};if(v=r[b]){x=v.listeners;y=x.length;if(c.isFunction(d)&&y&&c.inArray(d,x)){z=[];for(w=0;w<y;++w)d!==x[w]&&z.push(x[w]);y=z.length}if(d===q||y===0){a.isCustomEventTarget||h(a,b,v.handle);delete r[b]}}if(b===q||c.isEmptyObject(r)){for(b in r)i.remove(a,b);delete f[n];s(a)}}}},_handle:function(a,b,d,n){var r,v=0,x=d.length;for(n=n||a;v<x;++v){r=d[v].call(n,b);if(r===false&&a.isCustomEventTarget||b.isImmediatePropagationStopped)break}return r},_getCache:function(a){return f[a]},_simpleAdd:g,_simpleRemove:h};
i.on=i.add;c.Event=i;m.attachEvent&&!m.addEventListener&&m.attachEvent("onunload",function(){var a,b;for(a in f)if(b=f[a].target)try{i.remove(b)}catch(d){}})});
KISSY.add("event-object",function(c,q){function k(s,j,m){this.currentTarget=s;this.originalEvent=j||{};if(j){this.type=j.type;this._fix()}else{this.type=m;this.target=s}this.fixed=true}var o=document,t="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");c.mix(k.prototype,
{_fix:function(){for(var s=this.originalEvent,j=t.length,m;j;){m=t[--j];this[m]=s[m]}if(!this.target)this.target=this.srcElement||o;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===q&&this.clientX!==q){s=o.documentElement;j=o.body;this.pageX=this.clientX+(s&&s.scrollLeft||j&&j.scrollLeft||0)-(s&&s.clientLeft||j&&j.clientLeft||0);this.pageY=this.clientY+
(s&&s.scrollTop||j&&j.scrollTop||0)-(s&&s.clientTop||j&&j.clientTop||0)}if(this.which===q)this.which=this.charCode!==q?this.charCode:this.keyCode;if(this.metaKey===q)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==q)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var s=this.originalEvent;if(s.preventDefault)s.preventDefault();else s.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var s=this.originalEvent;if(s.stopPropagation)s.stopPropagation();
else s.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var s=this.originalEvent;s.stopImmediatePropagation?s.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(s){s?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});c.EventObject=k});
KISSY.add("event-target",function(c,q){var k=c.Event,o=k.EVENT_GUID;c.EventTarget={isCustomEventTarget:true,fire:function(t,s){if((t=((k._getCache(this[o]||-1)||{}).events||{})[t])&&c.isFunction(t.handle))return t.handle(q,s)},on:function(t,s,j){k.add(this,t,s,j)},detach:function(t,s){k.remove(this,t,s)}}});
KISSY.add("event-mouseenter",function(c){var q=c.Event;c.UA.ie||c.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(k){q.special[k.name]={fix:k.fix,setup:function(o){o.type=k.name},handle:function(o,t,s){var j=t.relatedTarget;try{for(;j&&j!==o;)j=j.parentNode;j!==o&&q._handle(o,t,s)}catch(m){}}}})});
KISSY.add("event-focusin",function(c){var q=c.Event;document.addEventListener&&c.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(k){q.special[k.name]={fix:k.fix,capture:true,setup:function(o){o.type=k.name}}})});
