/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 863 Jul 16 10:14
*/
(function(b,p,m){if(b[p]===m)b[p]={};p=b[p];var i=b.document,s=function(n,j,k,h){if(!j||!n)return n;if(k===m)k=true;var q,d,f;if(h&&(f=h.length))for(q=0;q<f;q++){d=h[q];if(d in j)if(k||!(d in n))n[d]=j[d]}else for(d in j)if(k||!(d in n))n[d]=j[d];return n},u=false,g=[],o=false,v=/^#?([\w-]+)$/;s(p,{version:"1.0.8",_init:function(){this.Env={mods:{},guid:0}},add:function(n,j){this.Env.mods[n]={name:n,fn:j};j(this);return this},ready:function(n){o||this._bindReady();u?n.call(b,this):g.push(n);return this},
_bindReady:function(){var n=this,j=i.documentElement.doScroll,k=j?"onreadystatechange":"DOMContentLoaded",h=function(){n._fireReady()};o=true;if(i.readyState==="complete")return h();if(i.addEventListener){var q=function(){i.removeEventListener(k,q,false);h()};i.addEventListener(k,q,false);b.addEventListener("load",h,false)}else{var d=function(){if(i.readyState==="complete"){i.detachEvent(k,d);h()}};i.attachEvent(k,d);b.attachEvent("onload",h);if(b==b.top){var f=function(){try{j("left");h()}catch(a){setTimeout(f,
1)}};f()}}},_fireReady:function(){if(!u){u=true;if(g){for(var n,j=0;n=g[j++];)n.call(b,this);g=null}}},available:function(n,j){if((n=(n+"").match(v)[1])&&p.isFunction(j))var k=1,h=p.later(function(){if(i.getElementById(n)&&(j()||1)||++k>500)h.cancel()},40,true)},mix:s,merge:function(){var n={},j,k=arguments.length;for(j=0;j<k;++j)s(n,arguments[j]);return n},augment:function(){var n=arguments,j=n.length-2,k=n[0],h=n[j],q=n[j+1],d=1;if(!p.isArray(q)){h=q;q=m;j++}if(!p.isBoolean(h)){h=m;j++}for(;d<j;d++)s(k.prototype,
n[d].prototype||n[d],h,q);return k},extend:function(n,j,k,h){if(!j||!n)return n;var q=Object.prototype,d=j.prototype,f=function(a){function c(){}c.prototype=a;return new c}(d);n.prototype=f;f.constructor=n;n.superclass=d;if(j!==Object&&d.constructor===q.constructor)d.constructor=j;k&&s(f,k);h&&s(n,h);return n},namespace:function(){var n=arguments.length,j=null,k,h,q;for(k=0;k<n;++k){q=(""+arguments[k]).split(".");j=this;for(h=b[q[0]]===j?1:0;h<q.length;++h)j=j[q[h]]=j[q[h]]||{}}return j},app:function(n,
j){var k=b[n]||{};s(k,this,true,["_init","add","namespace"]);k._init();return s(b[n]=k,typeof j==="function"?j():j)},log:function(n,j,k){if(this.Config.debug){if(k)n=k+": "+n;if(b.console!==m&&console.log)console[j&&console[j]?j:"log"](n)}return this},error:function(n){if(this.Config.debug)throw n;},guid:function(n){var j=this.Env.guid++ +"";return n?n+j:j}});p._init();p.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,p){function m(a){var c=typeof a;return a===null||c!=="object"&&c!=="function"}var i=window,s=document,u=location,g=Array.prototype,o=g.indexOf,v=g.filter,n=String.prototype.trim,j=Object.prototype.toString,k=encodeURIComponent,h=decodeURIComponent,q=/^\s+|\s+$/g,d=/^(\w+)\[\]$/,f=/\S/;b.mix(b,{isUndefined:function(a){return a===p},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&j.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return j.call(a)==="[object Function]"},isArray:function(a){return j.call(a)==="[object Array]"},trim:n?function(a){return a==p?"":n.call(a)}:function(a){return a==p?"":a.toString().replace(q,"")},each:function(a,c,e){for(var r=a&&a.length||0,w=0;w<r;++w)c.call(e||i,a[w],w,a)},indexOf:o?function(a,
c){return o.call(c,a)}:function(a,c){for(var e=0,r=c.length;e<r;++e)if(c[e]===a)return e;return-1},inArray:function(a,c){return b.indexOf(a,c)>-1},makeArray:function(a){if(a===null||a===p)return[];if(b.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],e=0,r=a.length;e<r;++e)c[e]=a[e];return c}return g.slice.call(a)},filter:v?function(a,c,e){return v.call(a,c,e)}:function(a,c,e){var r=[];b.each(a,function(w,l,t){c.call(e,
w,l,t)&&r.push(w)});return r},param:function(a){if(!b.isPlainObject(a))return"";var c=[],e,r;for(e in a){r=a[e];e=k(e);if(m(r))c.push(e,"=",k(r+""),"&");else if(b.isArray(r)&&r.length)for(var w=0,l=r.length;w<l;++w)m(r[w])&&c.push(e,"[]=",k(r[w]+""),"&")}c.pop();return c.join("")},unparam:function(a,c){if(typeof a!=="string"||(a=b.trim(a)).length===0)return{};var e={};a=a.split(c||"&");for(var r,w,l,t=0,x=a.length;t<x;++t){c=a[t].split("=");r=h(c[0]);try{w=h(c[1]||"")}catch(y){w=c[1]||""}if((l=r.match(d))&&
l[1]){e[l[1]]=e[l[1]]||[];e[l[1]].push(w)}else e[r]=w}return e},later:function(a,c,e,r,w){c=c||0;r=r||{};var l=a,t=b.makeArray(w),x;if(typeof a==="string")l=r[a];l||b.error("method undefined");a=function(){l.apply(r,t)};x=e?setInterval(a,c):setTimeout(a,c);return{id:x,interval:e,cancel:function(){this.interval?clearInterval(x):clearTimeout(x)}}},clone:function(a){var c;if(a&&b.isArray(a)){c=[];for(var e=a.length-1;e>=0;e--)c[e]=this.clone(a[e]);return c}if(a===null||typeof a!="object"||a instanceof
String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||b.isFunction(a))return a;c=new a.constructor;for(e in a)c[e]=this.clone(a[e]);return c},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&f.test(a)){var c=s.getElementsByTagName("head")[0]||s.documentElement,e=s.createElement("script");e.text=a;c.insertBefore(e,c.firstChild);c.removeChild(e)}}});if(u&&u.search&&u.search.indexOf("ks-debug")!==-1)b.Config.debug=true});
KISSY.add("kissy-ua",function(b){var p=navigator.userAgent,m,i={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},s=function(u){var g=0;return parseFloat(u.replace(/\./g,function(){return g++===0?".":""}))};if((m=p.match(/AppleWebKit\/([\d.]*)/))&&m[1]){i.webkit=s(m[1]);if((m=p.match(/Chrome\/([\d.]*)/))&&m[1])i.chrome=s(m[1]);else if((m=p.match(/\/([\d.]*) Safari/))&&m[1])i.safari=s(m[1]);if(/ Mobile\//.test(p))i.mobile="Apple";else if(m=p.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))i.mobile=
m[0]}else if((m=p.match(/Opera\/.* Version\/([\d.]*)/))&&m[1]){i.opera=s(m[1]);if(p.match(/Opera Mini[^;]*/))i.mobile=m[0]}else if((m=p.match(/MSIE\s([^;]*)/))&&m[1])i.ie=s(m[1]);else if(m=p.match(/Gecko/)){i.gecko=1;if((m=p.match(/rv:([\d.]*)/))&&m[1])i.gecko=s(m[1]);if((m=p.match(/Firefox\/([\d.]*)/))&&m[1])i.firefox=s(m[1])}b.UA=i});KISSY.add("dom",function(b){b.DOM={_isElementNode:function(p){return p&&p.nodeType===1}}});
KISSY.add("selector",function(b,p){function m(d,f){var a,c=[],e,r;f=i(f);if(b.isString(d)){d=b.trim(d);if(h.test(d)){if(d=s(d.slice(1)))c=[d]}else if(a=q.exec(d)){e=a[1];r=a[2];a=a[3];if(f=e?s(e):f)if(a)if(!e||d.indexOf(j)!==-1)c=g(a,r,f);else{if((d=s(e))&&n.hasClass(d,a))c=[d]}else if(r)c=u(f,r)}else if(b.ExternalSelector)return b.ExternalSelector(d,f);else o(d)}else if(d&&d.nodeType)c=[d];else if(d&&(b.isArray(d)||d.item||d.getDOMNode))c=d;if(c.item)c=b.makeArray(c);return c}function i(d){if(d===
p)d=v;else if(b.isString(d)&&h.test(d))d=s(d.slice(1));else if(d&&d.nodeType!==1&&d.nodeType!==9)d=null;return d}function s(d){return v.getElementById(d)}function u(d,f){return d.getElementsByTagName(f)}function g(d,f,a){a=d=a.getElementsByClassName(d);var c=0,e=0,r=d.length,w;if(f&&f!==k){a=[];for(f=f.toUpperCase();c<r;++c){w=d[c];if(w.tagName===f)a[e++]=w}}return a}function o(d){b.error("Unsupported selector: "+d)}var v=document,n=b.DOM,j=" ",k="*",h=/^#[\w-]+$/,q=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var d=v.createElement("div");d.appendChild(v.createComment(""));if(d.getElementsByTagName(k).length>0)u=function(f,a){f=f.getElementsByTagName(a);if(a===k){a=[];for(var c=0,e=0,r;r=f[c++];)if(r.nodeType===1)a[e++]=r;f=a}return f}})();v.getElementsByClassName||(g=v.querySelectorAll?function(d,f,a){return a.querySelectorAll((f?f:"")+"."+d)}:function(d,f,a){f=a.getElementsByTagName(f||k);a=[];var c=0,e=0,r=f.length,w,l;for(d=j+d+j;c<r;++c){w=f[c];if((l=w.className)&&(j+l+j).indexOf(d)>-1)a[e++]=
w}return a});b.query=m;b.get=function(d,f){return m(d,f)[0]||null};b.mix(n,{query:m,get:b.get,filter:function(d,f){var a=m(d),c,e,r,w=[];if(b.isString(f)&&(c=q.exec(f))&&!c[1]){e=c[2];r=c[3];f=function(l){return!(e&&l.tagName!==e.toUpperCase()||r&&!n.hasClass(l,r))}}if(b.isFunction(f))w=b.filter(a,f);else if(f&&b.ExternalSelector)w=b.ExternalSelector._filter(d,f);else o(f);return w},test:function(d,f){d=m(d);return n.filter(d,f).length===d.length}})});
KISSY.add("dom-class",function(b,p){function m(g,o,v,n){if(!(o=b.trim(o)))return n?false:p;g=b.query(g);var j=0,k=g.length;o=o.split(s);for(var h;j<k;j++){h=g[j];if(h.nodeType===1){h=v(h,o,o.length);if(h!==p)return h}}if(n)return false}var i=b.DOM,s=/[\.\s]\s*\.?/,u=/[\n\t]/g;b.mix(i,{hasClass:function(g,o){return m(g,o,function(v,n,j){if(v=v.className){v=" "+v+" ";for(var k=0,h=true;k<j;k++)if(v.indexOf(" "+n[k]+" ")<0){h=false;break}if(h)return true}},true)},addClass:function(g,o){m(g,o,function(v,
n,j){var k=v.className;if(k){var h=" "+k+" ";k=k;for(var q=0;q<j;q++)if(h.indexOf(" "+n[q]+" ")<0)k+=" "+n[q];v.className=b.trim(k)}else v.className=o})},removeClass:function(g,o){m(g,o,function(v,n,j){var k=v.className;if(k)if(j){k=(" "+k+" ").replace(u," ");for(var h=0,q;h<j;h++)for(q=" "+n[h]+" ";k.indexOf(q)>=0;)k=k.replace(q," ");v.className=b.trim(k)}else v.className=""})},replaceClass:function(g,o,v){i.removeClass(g,o);i.addClass(g,v)},toggleClass:function(g,o,v){var n=b.isBoolean(v),j;m(g,
o,function(k,h,q){for(var d=0,f;d<q;d++){f=h[d];j=n?!v:i.hasClass(k,f);i[j?"removeClass":"addClass"](k,f)}})}})});
KISSY.add("dom-attr",function(b,p){function m(d,f){return f&&f.nodeName.toUpperCase()===d.toUpperCase()}var i=b.UA,s=i.ie,u=s&&s<8,g=document.documentElement.textContent!==p?"textContent":"innerText",o=b.DOM,v=o._isElementNode,n=/href|src|style/,j=/href|src|colspan|rowspan/,k=/\r/g,h=/radio|checkbox/,q={readonly:"readOnly"};u&&b.mix(q,{"for":"htmlFor","class":"className"});b.mix(o,{attr:function(d,f,a){if(f=b.trim(f)){f=f.toLowerCase();f=q[f]||f;if(a===p){d=b.get(d);if(!v(d))return p;var c;n.test(f)||
(c=d[f]);if(c===p)c=d.getAttribute(f);if(u)if(j.test(f))c=d.getAttribute(f,2);else if(f==="style")c=d.style.cssText;return c===null?p:c}b.each(b.query(d),function(e){if(v(e))if(u&&f==="style")e.style.cssText=a;else e.setAttribute(f,""+a)})}},removeAttr:function(d,f){b.each(b.query(d),function(a){v(a)&&a.removeAttribute(f)})},val:function(d,f){if(f===p){var a=b.get(d);if(!v(a))return p;if(m("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(m("select",a)){var c=a.selectedIndex;
d=a.options;if(c<0)return null;else if(a.type==="select-one")return o.val(d[c]);a=[];for(var e=0,r=d.length;e<r;++e)d[e].selected&&a.push(o.val(d[e]));return a}if(i.webkit&&h.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(k,"")}b.each(b.query(d),function(w){if(m("select",w)){if(b.isNumber(f))f+="";var l=b.makeArray(f),t=w.options,x;e=0;for(r=t.length;e<r;++e){x=t[e];x.selected=b.inArray(o.val(x),l)}if(!l.length)w.selectedIndex=-1}else if(v(w))w.value=f})},
text:function(d,f){if(f===p){d=b.get(d);if(v(d))return d[g]||""}else b.each(b.query(d),function(a){if(v(a))a[g]=f})}})});
KISSY.add("dom-style",function(b,p){function m(k,h){var q=b.get(k),d=h===g?q.offsetWidth:q.offsetHeight;b.each(h===g?["Left","Right"]:["Top","Bottom"],function(f){d-=parseFloat(i._getComputedStyle(q,"padding"+f))||0;d-=parseFloat(i._getComputedStyle(q,"border"+f+"Width"))||0});return d}var i=b.DOM,s=document,u=s.documentElement,g="width",o=/width|height|top|left|right|bottom|margin|padding/i,v=/-([a-z])/ig,n=function(k,h){return h.toUpperCase()},j={};b.mix(i,{_CUSTOM_STYLES:j,_getComputedStyle:function(k,
h){var q="",d=k.ownerDocument;if(k.style)q=d.defaultView.getComputedStyle(k,null)[h];return q},css:function(k,h,q){if(b.isPlainObject(h))for(var d in h)i.css(k,d,h[d]);else{if(h.indexOf("-")>0)h=h.replace(v,n);h=j[h]||h;if(q===p){k=b.get(k);d="";if(k&&k.style){d=h.get?h.get(k):k.style[h];if(d===""&&!h.get)d=i._getComputedStyle(k,h)}return d===p?"":d}else{if(q===null||q==="")q="";else if(!isNaN(new Number(q))&&o.test(h))q+="px";(h===g||h==="height")&&parseFloat(q)<0||b.each(b.query(k),function(f){if(f&&
f.style)h.set?h.set(f,q):(f.style[h]=q)})}}},width:function(k,h){if(h===p)return m(k,g);else i.css(k,g,h)},height:function(k,h){if(h===p)return m(k,"height");else i.css(k,"height",h)},addStyleSheet:function(k,h){var q;if(h)q=b.get(h);q||(q=i.create("<style>",{id:h}));b.get("head").appendChild(q);if(q.styleSheet)q.styleSheet.cssText=k;else q.appendChild(s.createTextNode(k))}});if(u.style.cssFloat!==p)j["float"]="cssFloat";else if(u.style.styleFloat!==p)j["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,p){if(b.UA.ie){var m=b.DOM,i=document,s=i.documentElement,u=m._CUSTOM_STYLES,g=/^-?\d+(?:px)?$/i,o=/^-?\d/,v=/^auto$/i,n=/^width|height$/i,j=/^left|top$/i;try{if(s.style.opacity===p&&s.filters)u.opacity={get:function(h){var q=100;try{q=h.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(d){try{q=h.filters("alpha").opacity}catch(f){}}return q/100+""},set:function(h,q){h=h.style;h.zoom=1;h.filter="alpha(opacity="+q*100+")"}}}catch(k){b.log("IE filters ActiveX is disabled. ex = "+
k)}if(!(i.defaultView||{}).getComputedStyle&&s.currentStyle)m._getComputedStyle=function(h,q){var d=h.style,f=h.currentStyle[q];if(n.test(q))f=m[q](h)+"px";else if(v.test(f)&&j.test(q))f=m.css(h,"position")==="absolute"?q==="left"?h.offsetLeft-parseInt(m.css(h,"margin-left")):h.offsetTop-parseInt(m.css(h,"margin-top")):0;else if(!g.test(f)&&o.test(f)||v.test(f)){h=d.left;d.left=q==="fontSize"?"1em":f||0;f=d.pixelLeft+"px";d.left=h}return f}}});
KISSY.add("dom-offset",function(b,p){function m(c,e,r){return c.pageXOffset||e.scrollLeft||r.body.scrollLeft}function i(c,e,r){return c.pageYOffset||e.scrollTop||r.body.scrollTop}function s(c,e){var r,w=0;r=0;var l=c.ownerDocument.defaultView||c.ownerDocument.parentWindow,t=c.ownerDocument,x=t.documentElement;if(c[a]){if(c!==t.body&&x!==c){r=c[a]();w=r.left+m(l,x,t);r=r.top+i(l,x,t)}if(e)if(l!=(e.defaultView||e.parentWindow)&&l.frameElement){e=g.offset(l.frameElement,e);w+=e.left;r+=e.top}}return{left:w,
top:r}}function u(c,e){if(g.css(c,d)==="static")c.style[d]=f;var r=s(c),w={};if("left"in e){var l=q(g.css(c,"left"),10);w.left=l+e.left-r.left}if("top"in e){l=q(g.css(c,"top"),10);w.top=l+e.top-r.top}g.css(c,w)}var g=b.DOM,o=b.UA,v=window,n=document,j=n.documentElement,k=n.compatMode==="CSS1Compat",h=Math.max,q=parseInt,d="position",f="relative",a="getBoundingClientRect";b.mix(g,{offset:function(c,e){if(!(c=b.get(c))||!c.ownerDocument)return null;if(e===p||e&&e.writeln)return s(c,e);u(c,e)},scrollLeft:function(){return m(v,
j,n)},scrollTop:function(){return i(v,j,n)},docHeight:function(){return h(!k?n.body.scrollHeight:j.scrollHeight,g.viewportHeight())},docWidth:function(){return h(!k?n.body.scrollWidth:j.scrollWidth,g.viewportWidth())},viewportHeight:function(){return o.ie?k?j.clientHeight:n.body.clientHeight:v.innerHeight},viewportWidth:function(){return!k&&!o.opera?n.body.clientWidth:o.ie?j.clientWidth:v.innerWidth},scrollIntoView:function(c,e,r){r=r===p?true:!!r;if(!(c=b.get(c))||!c.ownerDocument)return null;e=
e!==n.documentElement&&e!==n.body&&e!==v?e:null;if(!e&&c.scrollIntoView)c.scrollIntoView();else{var w=g.offset(c),l=e?e.scrollLeft:g.scrollLeft(),t=e?e.scrollTop:g.scrollTop(),x=e?g.offset(e):{left:l,top:t},y={left:w.left-x.left,top:w.top-x.top};w=c.offsetHeight;x=c.offsetWidth;var z=y.left+l;t=y.top+t;c=z+c.offsetWidth;y=e?e.clientHeight:g.viewportHeight();var D=e?e.clientWidth:g.viewportWidth(),A=l+D,B=0,C=0;if(w>y||r)if(e)e.scrollTop=t;else C=t;else if(e)e.scrollTop=t-(y-w);else C=t-(y-w);if(x>
D||z<l)if(e)e.scrollLeft=z;else B=z;else if(c>A)if(e)e.scrollLeft=z;else B=z;if(B||C)v.scrollTo(B,C)}}})});
KISSY.add("dom-traversal",function(b,p){function m(g,o,v,n){if(!(g=b.get(g)))return null;if(o===p)o=1;var j=null,k,h;if(b.isNumber(o)&&o>=0){if(o===0)return g;k=0;h=o;o=function(){return++k===h}}for(;g=g[v];)if(u(g)&&(!o||s.test(g,o))&&(!n||n(g))){j=g;break}return j}function i(g,o,v){var n=[];var j=g=b.get(g);if(g&&v)j=g.parentNode;if(j){v=0;for(j=j.firstChild;j;j=j.nextSibling)if(u(j)&&j!==g&&(!o||s.test(j,o)))n[v++]=j}return n}var s=b.DOM,u=s._isElementNode;b.mix(s,{parent:function(g,o){return m(g,
o,"parentNode",function(v){return v.nodeType!=11})},next:function(g,o){return m(g,o,"nextSibling")},prev:function(g,o){return m(g,o,"previousSibling")},siblings:function(g,o){return i(g,o,true)},children:function(g,o){return i(g,o)},contains:function(g,o){var v=false;if((g=b.get(g))&&(o=b.get(o)))if(g.contains)return g.contains(o);else if(g.compareDocumentPosition)return!!(g.compareDocumentPosition(o)&16);else for(;!v&&(o=o.parentNode);)v=o==g;return v}})});
KISSY.add("dom-create",function(b,p){function m(l,t){if(j(l)&&t)for(var x in t)o.attr(l,x,t[x]);return l}function i(l,t){var x=null,y;if(l&&(l.push||l.item)&&l[0]){t=t||l[0].ownerDocument;x=t.createDocumentFragment();if(l.item)l=b.makeArray(l);t=0;for(y=l.length;t<y;t++)x.appendChild(l[t])}else b.log("Unable to convert "+l+" to fragment.");return x}function s(l,t,x,y){if(x){var z=b.guid("ks-tmp-");t+='<span id="'+z+'"></span>';b.available(z,function(){var D=b.get("head"),A,B,C,E,G,F;for(d.lastIndex=
0;A=d.exec(t);)if((C=(B=A[1])?B.match(f):false)&&C[2]){A=g.createElement("script");A.src=C[2];if((E=B.match(a))&&E[2])A.charset=E[2];A.async=true;D.appendChild(A)}else if((F=A[2])&&F.length>0)b.globalEval(F);(G=g.getElementById(z))&&o.remove(G);b.isFunction(y)&&y()});u(l,t)}else{u(l,t);b.isFunction(y)&&y()}}function u(l,t){t=t.replace(d,"");try{l.innerHTML=t}catch(x){for(;l.firstChild;)l.removeChild(l.firstChild);t&&l.appendChild(o.create(t))}}var g=document,o=b.DOM,v=b.UA,n=v.ie,j=o._isElementNode,
k=g.createElement("div"),h=/<(\w+)/,q=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,d=/<script([^>]*)>([\s\S]*?)<\/script>/ig,f=/\ssrc=(['"])(.*?)\1/i,a=/\scharset=(['"])(.*?)\1/i;b.mix(o,{create:function(l,t,x){if(j(l))return l;if(!(l=b.trim(l)))return null;var y=null;y=o._creators;var z,D="div",A;if(z=q.exec(l))y=(x||g).createElement(z[1]);else{if((z=h.exec(l))&&(A=z[1])&&b.isFunction(y[A=A.toLowerCase()]))D=A;l=y[D](l,x).childNodes;y=l.length===1?l[0].parentNode.removeChild(l[0]):i(l,x||g)}return m(y,t)},_creators:{div:function(l,
t){t=t?t.createElement("div"):k;t.innerHTML=l;return t}},html:function(l,t,x,y){if(t===p){l=b.get(l);if(j(l))return l.innerHTML}else b.each(b.query(l),function(z){j(z)&&s(z,t,x,y)})},remove:function(l){b.each(b.query(l),function(t){j(t)&&t.parentNode&&t.parentNode.removeChild(t)})}});if(v.gecko||n){var c=o._creators,e=o.create,r=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/;v={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var w in v)(function(l){c[w]=
function(t,x){return e("<"+l+">"+t+"</"+l+">",null,x)}})(v[w]);if(n){c.script=function(l,t){t=t?t.createElement("div"):k;t.innerHTML="-"+l;t.removeChild(t.firstChild);return t};if(n<8)c.tbody=function(l,t){t=e("<table>"+l+"</table>",null,t);var x=t.children.tags("tbody")[0];t.children.length>1&&x&&!r.test(l)&&x.parentNode.removeChild(x);return t}}b.mix(c,{optgroup:c.option,th:c.td,thead:c.tbody,tfoot:c.tbody,caption:c.tbody,colgroup:c.tbody})}});
KISSY.add("dom-insertion",function(b){var p=b.DOM;b.mix(p,{insertBefore:function(m,i){m=p.create(m);i=b.get(i);m&&i&&i.parentNode&&i.parentNode.insertBefore(m,i);return m},insertAfter:function(m,i){m=p.create(m);i=b.get(i);if(m&&i&&i.parentNode)i.nextSibling?i.parentNode.insertBefore(m,i.nextSibling):i.parentNode.appendChild(m);return m}})});
KISSY.add("event",function(b,p){function m(a,c,e,r,w){if(b.isString(c))c=b.query(c);if(b.isArray(c)){b.each(c,function(l){f[a](l,e,r,w)});return true}if((e=b.trim(e))&&e.indexOf(h)>0){b.each(e.split(h),function(l){f[a](c,l,r,w)});return true}}function i(a){return g(a)?-1:a[k]}function s(a,c){if(g(a))return b.error("Text or comment node is not valid event target.");try{a[k]=c}catch(e){b.error(e)}}function u(a){try{a[k]=p;delete a[k]}catch(c){}}function g(a){return a.nodeType===3||a.nodeType===8}var o=
window,v=document,n=v.addEventListener?function(a,c,e,r){a.addEventListener&&a.addEventListener(c,e,!!r)}:function(a,c,e){a.attachEvent&&a.attachEvent("on"+c,e)},j=v.removeEventListener?function(a,c,e,r){a.removeEventListener&&a.removeEventListener(c,e,!!r)}:function(a,c,e){a.detachEvent&&a.detachEvent("on"+c,e)},k="ksEventTargetId",h=" ",q=b.now(),d={},f={EVENT_GUID:k,special:{},add:function(a,c,e,r){if(!m("add",a,c,e,r)){var w=i(a),l,t;if(!(w===-1||!c||!b.isFunction(e))){if(!w){s(a,w=q++);d[w]=
{target:a,events:{}}}t=d[w].events;l=!a.isCustomEventTarget&&f.special[c]||{};if(!t[c]){w=function(x,y){if(!x||!x.fixed){x=new b.EventObject(a,x,c);b.isPlainObject(y)&&b.mix(x,y)}l.setup&&l.setup(x);return(l.handle||f._handle)(a,x,t[c].listeners,r)};t[c]={handle:w,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(c,w);else n(a,l.fix||c,w,l.capture)}t[c].listeners.push(e)}}},remove:function(a,c,e){if(!m("remove",a,c,e)){var r=i(a),w,l,t,x,y,z;if(r!==-1)if(r&&(w=d[r]))if(w.target===a){w=
w.events||{};if(l=w[c]){t=l.listeners;y=t.length;if(b.isFunction(e)&&y&&b.inArray(e,t)){z=[];for(x=0;x<y;++x)e!==t[x]&&z.push(t[x]);y=z.length}if(e===p||y===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(c,l.handle);else j(a,c,l.handle);delete w[c]}}if(c===p||b.isEmptyObject(w)){for(c in w)f.remove(a,c);delete d[r];u(a)}}}},_handle:function(a,c,e,r){e=e.slice(0);var w,l=0,t=e.length;for(r=r||a;l<t;++l){w=e[l].call(r,c);if(w===false&&a.isCustomEventTarget||c.isImmediatePropagationStopped)break}return w},
_getCache:function(a){return d[a]},_simpleAdd:n,_simpleRemove:j};f.on=f.add;b.Event=f;o.attachEvent&&!o.addEventListener&&o.attachEvent("onunload",function(){var a,c;for(a in d)if(c=d[a].target)try{f.remove(c)}catch(e){}})});
KISSY.add("event-object",function(b,p){function m(u,g,o){this.currentTarget=u;this.originalEvent=g||{};if(g){this.type=g.type;this._fix()}else{this.type=o;this.target=u}this.fixed=true}var i=document,s="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(m.prototype,
{_fix:function(){for(var u=this.originalEvent,g=s.length,o;g;){o=s[--g];this[o]=u[o]}if(!this.target)this.target=this.srcElement||i;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===p&&this.clientX!==p){u=i.documentElement;g=i.body;this.pageX=this.clientX+(u&&u.scrollLeft||g&&g.scrollLeft||0)-(u&&u.clientLeft||g&&g.clientLeft||0);this.pageY=this.clientY+
(u&&u.scrollTop||g&&g.scrollTop||0)-(u&&u.clientTop||g&&g.clientTop||0)}if(this.which===p)this.which=this.charCode!==p?this.charCode:this.keyCode;if(this.metaKey===p)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==p)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var u=this.originalEvent;if(u.preventDefault)u.preventDefault();else u.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var u=this.originalEvent;if(u.stopPropagation)u.stopPropagation();
else u.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var u=this.originalEvent;u.stopImmediatePropagation?u.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(u){u?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=m});
KISSY.add("event-target",function(b,p){var m=b.Event,i=m.EVENT_GUID;b.EventTarget={isCustomEventTarget:true,fire:function(s,u){if((s=((m._getCache(this[i]||-1)||{}).events||{})[s])&&b.isFunction(s.handle))return s.handle(p,u)},on:function(s,u,g){m.add(this,s,u,g)},detach:function(s,u){m.remove(this,s,u)}}});
KISSY.add("event-mouseenter",function(b){var p=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(m){p.special[m.name]={fix:m.fix,setup:function(i){i.type=m.name},handle:function(i,s,u){var g=s.relatedTarget;try{for(;g&&g!==i;)g=g.parentNode;g!==i&&p._handle(i,s,u)}catch(o){}}}})});
KISSY.add("event-focusin",function(b){var p=b.Event;document.addEventListener&&b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(m){p.special[m.name]={fix:m.fix,capture:true,setup:function(i){i.type=m.name}}})});
KISSY.add("node",function(b){function p(i,s,u){var g;if(!(this instanceof p))return new p(i,s,u);if(!i)return null;if(m._isElementNode(i))g=i;else if(typeof i==="string")g=m.create(i,s,u);this[0]=g}var m=b.DOM;b.augment(p,{length:1,getDOMNode:function(){return this[0]}});b.one=function(i,s){return new p(b.get(i,s))};b.Node=p});
KISSY.add("nodelist",function(b){function p(s){if(!(this instanceof p))return new p(s);i.push.apply(this,s||[])}var m=b.DOM,i=Array.prototype;b.mix(p.prototype,{length:0,item:function(s){var u=null;if(m._isElementNode(this[s]))u=new b.Node(this[s]);return u},getDOMNodes:function(){return i.slice.call(this)},each:function(s,u){for(var g=this.length,o=0,v;o<g;++o){v=new b.Node(this[o]);s.call(u||v,v,o,this)}return this}});b.all=function(s,u){return new p(b.query(s,u,true))};b.NodeList=p});
KISSY.add("node-attach",function(b,p){function m(q,arguments,d,f){var a=[this[q?n:v]()].concat(b.makeArray(arguments));if(arguments[d]===p)return f.apply(s,a);else{f.apply(s,a);return this}}function i(q,d){b.each(q,function(f){b.each([g,o],function(a,c){a[f]=function(e){switch(d){case j:return function(){return m.call(this,c,arguments,1,e)};case k:return function(){return m.call(this,c,arguments,0,e)};case h:return function(){var r=this[c?n:v]();return(r=e.apply(s,[r].concat(b.makeArray(arguments))))?
new b[r.length?"NodeList":"Node"](r):null};default:return function(){var r=this[c?n:v]();r=e.apply(s,[r].concat(b.makeArray(arguments)));return r===p?this:r}}}(s[f])})})}var s=b.DOM,u=b.Event,g=b.Node.prototype,o=b.NodeList.prototype,v="getDOMNode",n=v+"s",j=1,k=2,h=4;b.mix(g,{one:function(q){return b.one(q,this[0])},all:function(q){return b.all(q,this[0])}});i(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);i(["attr","removeAttr"],j);i(["val","text"],k);i(["css"],j);i(["width",
"height"],k);i(["offset"],k);i(["parent","next","prev","siblings","children"],h);i(["contains"]);i(["html"],k);i(["remove"]);i(["insertBefore","insertAfter"],h);b.each([g,o],function(q){b.mix(q,{append:function(d){d&&b.each(this,function(f){f.appendChild(s.create(d))});return this},appendTo:function(d){if((d=b.get(d))&&d.appendChild)b.each(this,function(f){d.appendChild(f)});return this}})});b.each([g,o],function(q){b.mix(q,b.EventTarget);q._addEvent=function(d,f){for(var a=0,c=this.length;a<c;a++)u._simpleAdd(this[a],
d,f)};q._removeEvent=function(d,f){for(var a=0,c=this.length;a<c;a++)u._simpleRemove(this[a],d,f)};delete q.fire})});
KISSY.add("ajax",function(b){var p=document,m=p.createElement("script").readyState?function(i,s){i.onreadystatechange=function(){var u=i.readyState;if(u==="loaded"||u==="complete"){i.onreadystatechange=null;s.call(this)}}}:function(i,s){i.onload=s};b.Ajax={request:function(){b.error("not implemented")},getScript:function(i,s,u){var g=b.get("head")||p.documentElement,o=p.createElement("script");o.src=i;if(u)o.charset=u;o.async=true;b.isFunction(s)&&m(o,s);g.appendChild(o)}}});
