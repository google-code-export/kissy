/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 843 Jul 10 10:46
*/
(function(b,n,j){if(b[n]===j)b[n]={};n=b[n];var l=b.document,p=function(h,r,s,k){if(!r||!h)return h;if(s===j)s=true;var f,t,e;if(k&&(e=k.length))for(f=0;f<e;f++){t=k[f];if(t in r)if(s||!(t in h))h[t]=r[t]}else for(t in r)if(s||!(t in h))h[t]=r[t];return h},q=false,i=[],m=false;p(n,{version:"1.0.8",_init:function(){this.Env={mods:{}}},add:function(h,r){this.Env.mods[h]={name:h,fn:r};r(this);return this},ready:function(h){m||this._bindReady();q?h.call(b,this):i.push(h);return this},_bindReady:function(){var h=
this,r=l.documentElement.doScroll,s=r?"onreadystatechange":"DOMContentLoaded",k=function(){h._fireReady()};m=true;if(l.readyState==="complete")return k();if(l.addEventListener){var f=function(){l.removeEventListener(s,f,false);k()};l.addEventListener(s,f,false)}else{var t=function(){if(l.readyState==="complete"){l.detachEvent(s,t);k()}};l.attachEvent(s,t);b.attachEvent("onload",k);if(b==b.top){var e=function(){try{r("left");k()}catch(g){setTimeout(e,1)}};e()}}},_fireReady:function(){if(!q){q=true;
if(i){for(var h,r=0;h=i[r++];)h.call(b,this);i=null}}},mix:p,merge:function(){var h={},r,s=arguments.length;for(r=0;r<s;++r)p(h,arguments[r]);return h},augment:function(){var h=arguments,r=h.length-2,s=h[0],k=h[r],f=h[r+1],t=1;if(!n.isArray(f)){k=f;f=j;r++}if(!n.isBoolean(k)){k=j;r++}for(;t<r;t++)p(s.prototype,h[t].prototype||h[t],k,f);return s},extend:function(h,r,s,k){if(!r||!h)return h;var f=Object.prototype,t=r.prototype,e=function(g){function a(){}a.prototype=g;return new a}(t);h.prototype=e;
e.constructor=h;h.superclass=t;if(r!==Object&&t.constructor===f.constructor)t.constructor=r;s&&p(e,s);k&&p(h,k);return h},namespace:function(){var h=arguments.length,r=null,s,k,f;for(s=0;s<h;++s){f=(""+arguments[s]).split(".");r=this;for(k=b[f[0]]===r?1:0;k<f.length;++k)r=r[f[k]]=r[f[k]]||{}}return r},app:function(h,r){var s=b[h]||{};p(s,this,true,["_init","add","namespace"]);s._init();return p(b[h]=s,typeof r==="function"?r():r)},log:function(h,r,s){if(this.Config.debug){if(s)h=s+": "+h;if(b.console!==
j&&console.log)console[r&&console[r]?r:"log"](h)}return this},error:function(h){if(this.Config.debug)throw h;}});n._init();n.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,n){function j(a){var c=typeof a;return a===null||c!=="object"&&c!=="function"}var l=window,p=document,q=location,i=Array.prototype,m=i.indexOf,h=i.filter,r=String.prototype.trim,s=Object.prototype.toString,k=encodeURIComponent,f=decodeURIComponent,t=/^\s+|\s+$/g,e=/^(\w+)\[\]$/,g=/\S/;b.mix(b,{isUndefined:function(a){return a===n},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&s.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return s.call(a)==="[object Function]"},isArray:function(a){return s.call(a)==="[object Array]"},trim:r?function(a){return a==n?"":r.call(a)}:function(a){return a==n?"":a.toString().replace(t,"")},each:function(a,c,d){for(var o=a&&a.length||0,u=0;u<o;++u)c.call(d||l,a[u],u,a)},indexOf:m?function(a,
c){return m.call(c,a)}:function(a,c){for(var d=0,o=c.length;d<o;++d)if(c[d]===a)return d;return-1},inArray:function(a,c){return b.indexOf(a,c)>-1},makeArray:function(a){if(a===null||a===n)return[];if(b.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],d=0,o=a.length;d<o;++d)c[d]=a[d];return c}return i.slice.call(a)},filter:h?function(a,c,d){return h.call(a,c,d)}:function(a,c,d){var o=[];b.each(a,function(u,v,x){c.call(d,
u,v,x)&&o.push(u)});return o},param:function(a){if(!b.isPlainObject(a))return"";var c=[],d,o;for(d in a){o=a[d];d=k(d);if(j(o))c.push(d,"=",k(o+""),"&");else if(b.isArray(o)&&o.length)for(var u=0,v=o.length;u<v;++u)j(o[u])&&c.push(d,"[]=",k(o[u]+""),"&")}c.pop();return c.join("")},unparam:function(a,c){if(typeof a!=="string"||(a=b.trim(a)).length===0)return{};var d={};a=a.split(c||"&");for(var o,u,v,x=0,w=a.length;x<w;++x){c=a[x].split("=");o=f(c[0]);try{u=f(c[1]||"")}catch(y){u=c[1]||""}if((v=o.match(e))&&
v[1]){d[v[1]]=d[v[1]]||[];d[v[1]].push(u)}else d[o]=u}return d},later:function(a,c,d,o,u){c=c||0;o=o||{};var v=a,x=b.makeArray(u),w;if(typeof a==="string")v=o[a];v||b.error("method undefined");a=function(){v.apply(o,x)};w=d?setInterval(a,c):setTimeout(a,c);return{id:w,interval:d,cancel:function(){this.interval?clearInterval(w):clearTimeout(w)}}},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&g.test(a)){var c=p.getElementsByTagName("head")[0]||p.documentElement,d=p.createElement("script");
d.text=a;c.insertBefore(d,c.firstChild);c.removeChild(d)}}});if(q&&q.search&&q.search.indexOf("ks-debug")!==-1)b.Config.debug=true});
KISSY.add("kissy-ua",function(b){var n=navigator.userAgent,j,l={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},p=function(q){var i=0;return parseFloat(q.replace(/\./g,function(){return i++===0?".":""}))};if((j=n.match(/AppleWebKit\/([\d.]*)/))&&j[1]){l.webkit=p(j[1]);if((j=n.match(/Chrome\/([\d.]*)/))&&j[1])l.chrome=p(j[1]);else if((j=n.match(/\/([\d.]*) Safari/))&&j[1])l.safari=p(j[1]);if(/ Mobile\//.test(n))l.mobile="Apple";else if(j=n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))l.mobile=
j[0]}else if((j=n.match(/Opera\/.* Version\/([\d.]*)/))&&j[1]){l.opera=p(j[1]);if(n.match(/Opera Mini[^;]*/))l.mobile=j[0]}else if((j=n.match(/MSIE\s([^;]*)/))&&j[1])l.ie=p(j[1]);else if(j=n.match(/Gecko/)){l.gecko=1;if((j=n.match(/rv:([\d.]*)/))&&j[1])l.gecko=p(j[1]);if((j=n.match(/Firefox\/([\d.]*)/))&&j[1])l.firefox=p(j[1])}b.UA=l});KISSY.add("dom",function(b){b.DOM={_isElementNode:function(n){return n&&n.nodeType===1}}});
KISSY.add("selector",function(b,n){function j(e,g){var a,c=[],d,o;g=l(g);if(b.isString(e)){e=b.trim(e);if(f.test(e)){if(e=p(e.slice(1)))c=[e]}else if(a=t.exec(e)){d=a[1];o=a[2];a=a[3];if(g=d?p(d):g)if(a)if(!d||e.indexOf(s)!==-1)c=i(a,o,g);else{if((e=p(d))&&r.hasClass(e,a))c=[e]}else if(o)c=q(g,o)}else if(b.ExternalSelector)return b.ExternalSelector(e,g);else m(e)}else if(e&&e.nodeType)c=[e];else if(e&&(b.isArray(e)||e.item||e.getDOMNode))c=e;if(c.item)c=b.makeArray(c);return c}function l(e){if(e===
n)e=h;else if(b.isString(e)&&f.test(e))e=p(e.slice(1));else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function p(e){return h.getElementById(e)}function q(e,g){return e.getElementsByTagName(g)}function i(e,g,a){a=e=a.getElementsByClassName(e);var c=0,d=0,o=e.length,u;if(g&&g!==k){a=[];for(g=g.toUpperCase();c<o;++c){u=e[c];if(u.tagName===g)a[d++]=u}}return a}function m(e){b.error("Unsupported selector: "+e)}var h=document,r=b.DOM,s=" ",k="*",f=/^#[\w-]+$/,t=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var e=h.createElement("div");e.appendChild(h.createComment(""));if(e.getElementsByTagName(k).length>0)q=function(g,a){g=g.getElementsByTagName(a);if(a===k){a=[];for(var c=0,d=0,o;o=g[c++];)if(o.nodeType===1)a[d++]=o;g=a}return g}})();h.getElementsByClassName||(i=h.querySelectorAll?function(e,g,a){return a.querySelectorAll((g?g:"")+"."+e)}:function(e,g,a){g=a.getElementsByTagName(g||k);a=[];var c=0,d=0,o=g.length,u,v;for(e=s+e+s;c<o;++c){u=g[c];if((v=u.className)&&(s+v+s).indexOf(e)>-1)a[d++]=
u}return a});b.query=j;b.get=function(e,g){return j(e,g)[0]||null};b.mix(r,{query:j,get:b.get,filter:function(e,g){var a=j(e),c,d,o,u=[];if(b.isString(g)&&(c=t.exec(g))&&!c[1]){d=c[2];o=c[3];g=function(v){return!(d&&v.tagName!==d.toUpperCase()||o&&!r.hasClass(v,o))}}if(b.isFunction(g))u=b.filter(a,g);else if(g&&b.ExternalSelector)u=b.ExternalSelector._filter(e,g);else m(g);return u},test:function(e,g){e=j(e);return r.filter(e,g).length===e.length}})});
KISSY.add("dom-class",function(b,n){function j(i,m,h,r){if(!(m=b.trim(m)))return r?false:n;i=b.query(i);var s=0,k=i.length;m=m.split(p);for(var f;s<k;s++){f=i[s];if(f.nodeType===1){f=h(f,m,m.length);if(f!==n)return f}}if(r)return false}var l=b.DOM,p=/[\.\s]\s*\.?/,q=/[\n\t]/g;b.mix(l,{hasClass:function(i,m){return j(i,m,function(h,r,s){if(h=h.className){h=" "+h+" ";for(var k=0,f=true;k<s;k++)if(h.indexOf(" "+r[k]+" ")<0){f=false;break}if(f)return true}},true)},addClass:function(i,m){j(i,m,function(h,
r,s){var k=h.className;if(k){var f=" "+k+" ";k=k;for(var t=0;t<s;t++)if(f.indexOf(" "+r[t]+" ")<0)k+=" "+r[t];h.className=b.trim(k)}else h.className=m})},removeClass:function(i,m){j(i,m,function(h,r,s){var k=h.className;if(k)if(s){k=(" "+k+" ").replace(q," ");for(var f=0,t;f<s;f++)for(t=" "+r[f]+" ";k.indexOf(t)>=0;)k=k.replace(t," ");h.className=b.trim(k)}else h.className=""})},replaceClass:function(i,m,h){l.removeClass(i,m);l.addClass(i,h)},toggleClass:function(i,m,h){var r=b.isBoolean(h),s;j(i,
m,function(k,f,t){for(var e=0,g;e<t;e++){g=f[e];s=r?!h:l.hasClass(k,g);l[s?"removeClass":"addClass"](k,g)}})}})});
KISSY.add("dom-attr",function(b,n){function j(e,g){return g&&g.nodeName.toUpperCase()===e.toUpperCase()}var l=b.UA,p=l.ie,q=p&&p<8,i=document.documentElement.textContent!==n?"textContent":"innerText",m=b.DOM,h=m._isElementNode,r=/href|src|style/,s=/href|src|colspan|rowspan/,k=/\r/g,f=/radio|checkbox/,t={readonly:"readOnly"};q&&b.mix(t,{"for":"htmlFor","class":"className"});b.mix(m,{attr:function(e,g,a){if(g=b.trim(g)){g=g.toLowerCase();g=t[g]||g;if(a===n){e=b.get(e);if(!h(e))return n;var c;r.test(g)||
(c=e[g]);if(c===n)c=e.getAttribute(g);if(q)if(s.test(g))c=e.getAttribute(g,2);else if(g==="style")c=e.style.cssText;return c===null?n:c}b.each(b.query(e),function(d){if(h(d))if(q&&g==="style")d.style.cssText=a;else d.setAttribute(g,""+a)})}},removeAttr:function(e,g){b.each(b.query(e),function(a){h(a)&&a.removeAttribute(g)})},val:function(e,g){if(g===n){var a=b.get(e);if(!h(a))return n;if(j("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(j("select",a)){var c=a.selectedIndex;
e=a.options;if(c<0)return null;else if(a.type==="select-one")return m.val(e[c]);a=[];for(var d=0,o=e.length;d<o;++d)e[d].selected&&a.push(m.val(e[d]));return a}if(l.webkit&&f.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(k,"")}b.each(b.query(e),function(u){if(j("select",u)){if(b.isNumber(g))g+="";var v=b.makeArray(g),x=u.options,w;d=0;for(o=x.length;d<o;++d){w=x[d];w.selected=b.inArray(m.val(w),v)}if(!v.length)u.selectedIndex=-1}else if(h(u))u.value=g})},
text:function(e,g){if(g===n){e=b.get(e);if(h(e))return e[i]||""}else b.each(b.query(e),function(a){if(h(a))a[i]=g})}})});
KISSY.add("dom-style",function(b,n){function j(k,f){var t=b.get(k),e=f===i?t.offsetWidth:t.offsetHeight;b.each(f===i?["Left","Right"]:["Top","Bottom"],function(g){e-=parseFloat(l._getComputedStyle(t,"padding"+g))||0;e-=parseFloat(l._getComputedStyle(t,"border"+g+"Width"))||0});return e}var l=b.DOM,p=document,q=p.documentElement,i="width",m=/width|height|top|left|right|bottom|margin|padding/i,h=/-([a-z])/ig,r=function(k,f){return f.toUpperCase()},s={};b.mix(l,{_CUSTOM_STYLES:s,_getComputedStyle:function(k,
f){var t="",e=k.ownerDocument;if(k.style)t=e.defaultView.getComputedStyle(k,null)[f];return t},css:function(k,f,t){if(b.isPlainObject(f))for(var e in f)l.css(k,e,f[e]);else{if(f.indexOf("-")>0)f=f.replace(h,r);f=s[f]||f;if(t===n){k=b.get(k);e="";if(k&&k.style){e=f.get?f.get(k):k.style[f];if(e===""&&!f.get)e=l._getComputedStyle(k,f)}return e===n?"":e}else{if(t===null||t==="")t="";else if(!isNaN(new Number(t))&&m.test(f))t+="px";(f===i||f==="height")&&parseFloat(t)<0||b.each(b.query(k),function(g){if(g&&
g.style)f.set?f.set(g,t):(g.style[f]=t)})}}},width:function(k,f){if(f===n)return j(k,i);else l.css(k,i,f)},height:function(k,f){if(f===n)return j(k,"height");else l.css(k,"height",f)},addStyleSheet:function(k,f){var t;if(f)t=b.get(f);t||(t=l.create("<style>",{id:f}));b.get("head").appendChild(t);if(t.styleSheet)t.styleSheet.cssText=k;else t.appendChild(p.createTextNode(k))}});if(q.style.cssFloat!==n)s["float"]="cssFloat";else if(q.style.styleFloat!==n)s["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,n){if(b.UA.ie){var j=b.DOM,l=document,p=l.documentElement,q=j._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,m=/^-?\d/,h=/^auto$/i,r=/^width|height$/;try{if(p.style.opacity===n&&p.filters)q.opacity={get:function(k){var f=100;try{f=k.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(t){try{f=k.filters("alpha").opacity}catch(e){}}return f/100+""},set:function(k,f){k=k.style;k.zoom=1;k.filter="alpha(opacity="+f*100+")"}}}catch(s){b.log("IE filters ActiveX is disabled. ex = "+
s)}if(!(l.defaultView||{}).getComputedStyle&&p.currentStyle)j._getComputedStyle=function(k,f){var t=k.style,e=k.currentStyle[f];if(r.test(f))e=j[f](k)+"px";else if(!i.test(e)&&m.test(e)||h.test(e)){k=t.left;t.left=f==="fontSize"?"1em":e||0;e=t.pixelLeft+"px";t.left=k}return e}}});
KISSY.add("dom-offset",function(b,n){function j(g){var a=0,c=0;if(g!==m.body&&g!==h&&g[e]){g=g[e]();a=g.left+p.scrollLeft();c=g.top+p.scrollTop()}return{left:a,top:c}}function l(g,a){var c=p.css(g,f);if(c==="static")c=g.style[f]=t;var d=j(g);c=c===t;var o=k(p.css(g,"left"),10),u=k(p.css(g,"top"),10);o=b.isNumber(o)?o:c?0:g.offsetLeft;u=b.isNumber(u)?u:c?0:g.offsetTop;p.css(g,{left:o+a.left-d.left,top:u+a.top-d.top})}var p=b.DOM,q=b.UA,i=window,m=document,h=m.documentElement,r=m.compatMode==="CSS1Compat",
s=Math.max,k=parseInt,f="position",t="relative",e="getBoundingClientRect";b.mix(p,{offset:function(g,a){if(!(g=b.get(g))||!g.ownerDocument)return null;if(a===n)return j(g);l(g,a)},scrollLeft:function(){return i.pageXOffset||h.scrollLeft||m.body.scrollLeft},scrollTop:function(){return i.pageYOffset||h.scrollTop||m.body.scrollTop},docHeight:function(){return s(!r?m.body.scrollHeight:h.scrollHeight,p.viewportHeight())},docWidth:function(){return s(!r?m.body.scrollWidth:h.scrollWidth,p.viewportWidth())},
viewportHeight:function(){return q.ie?r?h.clientHeight:m.body.clientHeight:i.innerHeight},viewportWidth:function(){return!r&&!q.opera?m.body.clientWidth:q.ie?h.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(b,n){function j(i,m,h,r){if(!(i=b.get(i)))return null;if(m===n)m=1;var s=null,k,f;if(b.isNumber(m)&&m>=0){if(m===0)return i;k=0;f=m;m=function(){return++k===f}}for(;i=i[h];)if(q(i)&&(!m||p.test(i,m))&&(!r||r(i))){s=i;break}return s}function l(i,m,h){var r=[];var s=i=b.get(i);if(i&&h)s=i.parentNode;if(s){h=0;for(s=s.firstChild;s;s=s.nextSibling)if(q(s)&&s!==i&&(!m||p.test(s,m)))r[h++]=s}return r}var p=b.DOM,q=p._isElementNode;b.mix(p,{parent:function(i,m){return j(i,
m,"parentNode",function(h){return h.nodeType!=11})},next:function(i,m){return j(i,m,"nextSibling")},prev:function(i,m){return j(i,m,"previousSibling")},siblings:function(i,m){return l(i,m,true)},children:function(i,m){return l(i,m)},contains:function(i,m){var h=false;if((i=b.get(i))&&(m=b.get(m)))if(i.contains)return i.contains(m);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(m)&16);else for(;!h&&(m=m.parentNode);)h=m==i;return h}})});
KISSY.add("dom-create",function(b,n){function j(c,d){if(h(c)&&d)for(var o in d)q.attr(c,o,d[o]);return c}function l(c,d){var o=null,u;if(c&&(c.push||c.item)&&c[0]){d=d||c[0].ownerDocument;o=d.createDocumentFragment();if(c.item)c=b.makeArray(c);d=0;for(u=c.length;d<u;d++)o.appendChild(c[d])}else b.log("Unable to convert "+c+" to fragment.");return o}var p=document,q=b.DOM,i=b.UA,m=i.ie,h=q._isElementNode,r=p.createElement("div"),s=/<(\w+)/,k=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;b.mix(q,{create:function(c,
d,o){if(h(c))return c;if(!(c=b.trim(c)))return null;var u=null;u=q._creators;var v,x="div",w;if(v=k.exec(c))u=(o||p).createElement(v[1]);else{if((v=s.exec(c))&&(w=v[1])&&b.isFunction(u[w=w.toLowerCase()]))x=w;c=u[x](c,o).childNodes;u=c.length===1?c[0].parentNode.removeChild(c[0]):l(c,o||p)}return j(u,d)},_creators:{div:function(c,d){d=d?d.createElement("div"):r;d.innerHTML=c;return d}},html:function(c,d){if(d===n){c=b.get(c);if(h(c))return c.innerHTML}else b.each(b.query(c),function(o){if(h(o)){try{o.innerHTML=
""}catch(u){for(;o.firstChild;)o.removeChild(o.firstChild)}d&&o.appendChild(q.create(d))}})},remove:function(c){b.each(b.query(c),function(d){h(d)&&d.parentNode&&d.parentNode.removeChild(d)})}});var f=q._creators,t=q.create,e=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,g={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||m){for(var a in g)(function(c){f[a]=function(d,o){return t("<"+c+">"+d+"</"+c+">",null,o)}})(g[a]);if(m){f.script=function(c,
d){d=d?d.createElement("div"):r;d.innerHTML="-"+c;d.removeChild(d.firstChild);return d};if(m<8)f.tbody=function(c,d){d=t("<table>"+c+"</table>",null,d);var o=d.children.tags("tbody")[0];d.children.length>1&&o&&!e.test(c)&&o.parentNode.removeChild(o);return d}}b.mix(f,{optgroup:f.option,th:f.td,thead:f.tbody,tfoot:f.tbody,caption:f.tbody,colgroup:f.tbody})}});
KISSY.add("dom-insertion",function(b){var n=b.DOM;b.mix(n,{insertBefore:function(j,l){j=n.create(j);l=b.get(l);j&&l&&l.parentNode&&l.parentNode.insertBefore(j,l);return j},insertAfter:function(j,l){j=n.create(j);l=b.get(l);if(j&&l&&l.parentNode)l.nextSibling?l.parentNode.insertBefore(j,l.nextSibling):l.parentNode.appendChild(j);return j}})});
KISSY.add("event",function(b,n){function j(a,c,d,o,u){if(b.isString(c))c=b.query(c);if(b.isArray(c)){b.each(c,function(v){g[a](v,d,o,u)});return true}if((d=b.trim(d))&&d.indexOf(f)>0){b.each(d.split(f),function(v){g[a](c,v,o,u)});return true}}function l(a){return i(a)?-1:a[k]}function p(a,c){if(i(a))return b.error("Text or comment node is not valid event target.");try{a[k]=c}catch(d){b.error(d)}}function q(a){try{a[k]=n;delete a[k]}catch(c){}}function i(a){return a.nodeType===3||a.nodeType===8}var m=
window,h=document,r=h.addEventListener?function(a,c,d,o){a.addEventListener&&a.addEventListener(c,d,!!o)}:function(a,c,d){a.attachEvent&&a.attachEvent("on"+c,d)},s=h.removeEventListener?function(a,c,d,o){a.removeEventListener&&a.removeEventListener(c,d,!!o)}:function(a,c,d){a.detachEvent&&a.detachEvent("on"+c,d)},k="ksEventTargetId",f=" ",t=b.now(),e={},g={EVENT_GUID:k,special:{},add:function(a,c,d,o){if(!j("add",a,c,d,o)){var u=l(a),v,x;if(!(u===-1||!c||!b.isFunction(d))){if(!u){p(a,u=t++);e[u]=
{target:a,events:{}}}x=e[u].events;v=!a.isCustomEventTarget&&g.special[c]||{};if(!x[c]){u=function(w,y){if(!w||!w.fixed){w=new b.EventObject(a,w,c);b.isPlainObject(y)&&b.mix(w,y)}v.setup&&v.setup(w);return(v.handle||g._handle)(a,w,x[c].listeners,o)};x[c]={handle:u,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(c,u);else r(a,v.fix||c,u,v.capture)}x[c].listeners.push(d)}}},remove:function(a,c,d){if(!j("remove",a,c,d)){var o=l(a),u,v,x,w,y,z;if(o!==-1)if(o&&(u=e[o]))if(u.target===a){u=
u.events||{};if(v=u[c]){x=v.listeners;y=x.length;if(b.isFunction(d)&&y&&b.inArray(d,x)){z=[];for(w=0;w<y;++w)d!==x[w]&&z.push(x[w]);y=z.length}if(d===n||y===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(c,v.handle);else s(a,c,v.handle);delete u[c]}}if(c===n||b.isEmptyObject(u)){for(c in u)g.remove(a,c);delete e[o];q(a)}}}},_handle:function(a,c,d,o){d=d.slice(0);var u,v=0,x=d.length;for(o=o||a;v<x;++v){u=d[v].call(o,c);if(u===false&&a.isCustomEventTarget||c.isImmediatePropagationStopped)break}return u},
_getCache:function(a){return e[a]},_simpleAdd:r,_simpleRemove:s};g.on=g.add;b.Event=g;m.attachEvent&&!m.addEventListener&&m.attachEvent("onunload",function(){var a,c;for(a in e)if(c=e[a].target)try{g.remove(c)}catch(d){}})});
KISSY.add("event-object",function(b,n){function j(q,i,m){this.currentTarget=q;this.originalEvent=i||{};if(i){this.type=i.type;this._fix()}else{this.type=m;this.target=q}this.fixed=true}var l=document,p="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(j.prototype,
{_fix:function(){for(var q=this.originalEvent,i=p.length,m;i;){m=p[--i];this[m]=q[m]}if(!this.target)this.target=this.srcElement||l;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===n&&this.clientX!==n){q=l.documentElement;i=l.body;this.pageX=this.clientX+(q&&q.scrollLeft||i&&i.scrollLeft||0)-(q&&q.clientLeft||i&&i.clientLeft||0);this.pageY=this.clientY+
(q&&q.scrollTop||i&&i.scrollTop||0)-(q&&q.clientTop||i&&i.clientTop||0)}if(this.which===n)this.which=this.charCode!==n?this.charCode:this.keyCode;if(this.metaKey===n)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==n)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var q=this.originalEvent;if(q.preventDefault)q.preventDefault();else q.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var q=this.originalEvent;if(q.stopPropagation)q.stopPropagation();
else q.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var q=this.originalEvent;q.stopImmediatePropagation?q.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(q){q?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=j});
KISSY.add("event-target",function(b,n){var j=b.Event,l=j.EVENT_GUID;b.EventTarget={isCustomEventTarget:true,fire:function(p,q){if((p=((j._getCache(this[l]||-1)||{}).events||{})[p])&&b.isFunction(p.handle))return p.handle(n,q)},on:function(p,q,i){j.add(this,p,q,i)},detach:function(p,q){j.remove(this,p,q)}}});
KISSY.add("event-mouseenter",function(b){var n=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(j){n.special[j.name]={fix:j.fix,setup:function(l){l.type=j.name},handle:function(l,p,q){var i=p.relatedTarget;try{for(;i&&i!==l;)i=i.parentNode;i!==l&&n._handle(l,p,q)}catch(m){}}}})});
KISSY.add("event-focusin",function(b){var n=b.Event;document.addEventListener&&b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(j){n.special[j.name]={fix:j.fix,capture:true,setup:function(l){l.type=j.name}}})});
KISSY.add("node",function(b){function n(l,p,q){var i;if(!(this instanceof n))return new n(l,p,q);if(!l)return null;if(j._isElementNode(l))i=l;else if(typeof l==="string")i=j.create(l,p,q);this[0]=i}var j=b.DOM;b.augment(n,{length:1,getDOMNode:function(){return this[0]}});b.one=function(l,p){return new n(b.get(l,p))};b.Node=n});
KISSY.add("nodelist",function(b){function n(p){if(!(this instanceof n))return new n(p);l.push.apply(this,p||[])}var j=b.DOM,l=Array.prototype;b.mix(n.prototype,{length:0,item:function(p){var q=null;if(j._isElementNode(this[p]))q=new b.Node(this[p]);return q},getDOMNodes:function(){return l.slice.call(this)},each:function(p,q){for(var i=this.length,m=0,h;m<i;++m){h=new b.Node(this[m]);p.call(q||h,h,m,this)}return this}});b.all=function(p,q){return new n(b.query(p,q,true))};b.NodeList=n});
KISSY.add("node-attach",function(b,n){function j(f,t){b.each(f,function(e){b.each([q,i],function(g,a){g[e]=function(c){switch(t){case r:return function(d,o){var u=this[a?h:m]();if(o===n)return c(u,d);else{c(u,d,o);return this}};case s:return function(d){var o=this[a?h:m]();if(d===n)return c(o);else{c(o,d);return this}};case k:return function(){var d=this[a?h:m]();return(d=c.apply(l,[d].concat(b.makeArray(arguments))))?new b[d.length?"NodeList":"Node"](d):null};default:return function(){var d=this[a?
h:m]();d=c.apply(l,[d].concat(b.makeArray(arguments)));return d===n?this:d}}}(l[e])})})}var l=b.DOM,p=b.Event,q=b.Node.prototype,i=b.NodeList.prototype,m="getDOMNode",h=m+"s",r=1,s=2,k=4;b.mix(q,{one:function(f){return b.one(f,this[0])},all:function(f){return b.all(f,this[0])}});j(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);j(["attr","removeAttr"],r);j(["val","text"],s);j(["css"],r);j(["width","height"],s);j(["offset"],s);j(["parent","next","prev","siblings","children"],k);
j(["contains"]);j(["html"],s);j(["remove"]);j(["insertBefore","insertAfter"],k);b.mix(q,{append:function(f){if(f=l.create(f))this[0].appendChild(f);return this},appendTo:function(f){if((f=b.get(f))&&f.appendChild)f.appendChild(this[0]);return this}});b.each([q,i],function(f){b.mix(f,b.EventTarget);f._addEvent=function(t,e){for(var g=0,a=this.length;g<a;g++)p._simpleAdd(this[g],t,e)};f._removeEvent=function(t,e){for(var g=0,a=this.length;g<a;g++)p._simpleRemove(this[g],t,e)};delete f.fire})});
KISSY.add("ajax",function(b){var n=document,j=n.createElement("script").readyState?function(l,p){l.onreadystatechange=function(){var q=l.readyState;if(q==="loaded"||q==="complete"){l.onreadystatechange=null;p.call(this)}}}:function(l,p){l.onload=p};b.Ajax={request:function(){b.error("not implemented")},getScript:function(l,p,q){var i=n.getElementsByTagName("head")[0]||n.documentElement,m=n.createElement("script");m.src=l;if(q)m.charset=q;m.async=true;b.isFunction(p)&&j(m,p);i.appendChild(m)}}});
