/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 722 Jun 23 16:54
*/
(function(d,q,l){if(d[q]===l)d[q]={};q=d[q];var o=d.document,s=function(h,f,g,k){if(!f||!h)return h;if(g===l)g=true;var i,u,t;if(k&&(t=k.length))for(i=0;i<t;i++){u=k[i];if(u in f)if(g||!(u in h))h[u]=f[u]}else for(u in f)if(g||!(u in h))h[u]=f[u];return h},r=false,j=[],p=false;s(q,{version:"1.0.8",_init:function(){this.Env={mods:{}}},add:function(h,f){this.Env.mods[h]={name:h,fn:f};f(this);return this},ready:function(h){p||this._bindReady();r?h.call(d,this):j.push(h);return this},_bindReady:function(){var h=
this,f=o.documentElement.doScroll,g=f?"onreadystatechange":"DOMContentLoaded";p=true;if(o.readyState==="complete")return h._fireReady();if(o.addEventListener){var k=function(){o.removeEventListener(g,k,false);h._fireReady()};o.addEventListener(g,k,false)}else{if(d!=d.top){var i=function(){if(o.readyState==="complete"){o.detachEvent(g,i);h._fireReady()}};o.attachEvent(g,i)}else{var u=function(){try{f("left");h._fireReady()}catch(t){setTimeout(u,1)}};u()}d.attachEvent("onload",function(){h._fireReady()})}},
_fireReady:function(){if(!r){r=true;if(j){for(var h,f=0;h=j[f++];)h.call(d,this);j=null}}},mix:s,merge:function(){var h={},f,g=arguments.length;for(f=0;f<g;++f)s(h,arguments[f]);return h},augment:function(){var h=arguments,f=h.length-2,g=h[0],k=h[f],i=h[f+1],u=1;if(!q.isArray(i)){k=i;i=l;f++}if(!q.isBoolean(k)){k=l;f++}for(;u<f;u++)s(g.prototype,h[u].prototype||h[u],k,i);return g},extend:function(h,f,g,k){if(!f||!h)return h;var i=Object.prototype,u=f.prototype,t=function(e){function a(){}a.prototype=
e;return new a}(u);h.prototype=t;t.constructor=h;h.superclass=u;if(f!==Object&&u.constructor===i.constructor)u.constructor=f;g&&s(t,g);k&&s(h,k);return h},namespace:function(){var h=arguments.length,f=null,g,k,i;for(g=0;g<h;++g){i=(""+arguments[g]).split(".");f=this;for(k=d[i[0]]===f?1:0;k<i.length;++k)f=f[i[k]]=f[i[k]]||{}}return f},app:function(h,f){var g=d[h]||{};s(g,this,true,["_init","add","namespace"]);g._init();return s(d[h]=g,typeof f==="function"?f():f)},log:function(h,f,g){if(this.Config.debug){if(g)h=
g+": "+h;if(d.console!==l&&console.log)console[f&&console[f]?f:"log"](h)}return this},error:function(h){if(this.Config.debug)throw h;}});q._init();q.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(d,q){function l(a){var b=typeof a;return a===null||b!=="object"&&b!=="function"}var o=window,s=document,r=location,j=Array.prototype,p=j.indexOf,h=j.filter,f=String.prototype.trim,g=Object.prototype.toString,k=encodeURIComponent,i=decodeURIComponent,u=/^\s+|\s+$/g,t=/^(\w+)\[\]$/,e=/\S/;d.mix(d,{isUndefined:function(a){return a===q},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&g.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var b in a)return false;return true},isFunction:function(a){return g.call(a)==="[object Function]"},isArray:function(a){return g.call(a)==="[object Array]"},trim:f?function(a){return a==q?"":f.call(a)}:function(a){return a==q?"":a.toString().replace(u,"")},each:function(a,b,c){for(var m=a&&a.length||0,n=0;n<m;++n)b.call(c||o,a[n],n,a)},indexOf:p?function(a,
b){return p.call(b,a)}:function(a,b){for(var c=0,m=b.length;c<m;++c)if(b[c]===a)return c;return-1},inArray:function(a,b){return d.indexOf(a,b)>-1},makeArray:function(a){if(a===null||a===q)return[];if(d.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||d.isFunction(a))return[a];if(a.item&&d.UA.ie){for(var b=[],c=0,m=a.length;c<m;++c)b[c]=a[c];return b}return j.slice.call(a)},filter:h?function(a,b,c){return h.call(a,b,c)}:function(a,b,c){var m=[];d.each(a,function(n,v,w){b.call(c,
n,v,w)&&m.push(n)});return m},param:function(a){if(!d.isPlainObject(a))return"";var b=[],c,m;for(c in a){m=a[c];c=k(c);if(l(m))b.push(c,"=",k(m+""),"&");else if(d.isArray(m)&&m.length)for(var n=0,v=m.length;n<v;++n)l(m[n])&&b.push(c,"[]=",k(m[n]+""),"&")}b.pop();return b.join("")},unparam:function(a,b){if(typeof a!=="string"||(a=d.trim(a)).length===0)return{};var c={};a=a.split(b||"&");for(var m,n,v,w=0,x=a.length;w<x;++w){b=a[w].split("=");m=i(b[0]);try{n=i(b[1]||"")}catch(y){n=b[1]||""}if((v=m.match(t))&&
v[1]){c[v[1]]=c[v[1]]||[];c[v[1]].push(n)}else c[m]=n}return c},later:function(a,b,c,m,n){b=b||0;m=m||{};var v=a,w=d.makeArray(n),x;if(typeof a==="string")v=m[a];v||d.error("method undefined");a=function(){v.apply(m,w)};x=c?setInterval(a,b):setTimeout(a,b);return{id:x,interval:c,cancel:function(){this.interval?clearInterval(x):clearTimeout(x)}}},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&e.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,c=s.createElement("script");
c.text=a;b.insertBefore(c,b.firstChild);b.removeChild(c)}}});if(r&&r.search&&r.search.indexOf("ks-debug")!==-1)d.Config.debug=true});
KISSY.add("kissy-ua",function(d){var q=navigator.userAgent,l,o={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},s=function(r){var j=0;return parseFloat(r.replace(/\./g,function(){return j++===0?".":""}))};if((l=q.match(/AppleWebKit\/([\d.]*)/))&&l[1]){o.webkit=s(l[1]);if((l=q.match(/Chrome\/([\d.]*)/))&&l[1])o.chrome=s(l[1]);else if((l=q.match(/\/([\d.]*) Safari/))&&l[1])o.safari=s(l[1]);if(/ Mobile\//.test(q))o.mobile="Apple";else if(l=q.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))o.mobile=
l[0]}else if((l=q.match(/Opera\/.* Version\/([\d.]*)/))&&l[1]){o.opera=s(l[1]);if(q.match(/Opera Mini[^;]*/))o.mobile=l[0]}else if((l=q.match(/MSIE\s([^;]*)/))&&l[1])o.ie=s(l[1]);else if(l=q.match(/Gecko/)){o.gecko=1;if((l=q.match(/rv:([\d.]*)/))&&l[1])o.gecko=s(l[1]);if((l=q.match(/Firefox\/([\d.]*)/))&&l[1])o.firefox=s(l[1])}d.UA=o});KISSY.add("dom",function(d){d.DOM={_isElementNode:function(q){return q&&q.nodeType===1}}});
KISSY.add("selector",function(d,q){function l(e,a){var b,c=[],m,n;if(d.isString(e)){e=d.trim(e);if(u.test(e)){if(a=s(e.slice(1)))c=[a]}else if(b=t.exec(e)){m=b[1];n=b[2];b=b[3];if(a=m?s(m):o(a))if(b)if(!m||e.indexOf(k)!==-1)c=j(b,n,a);else{if((a=s(m))&&g.hasClass(a,b))c=[a]}else if(n)c=r(a,n)}else if(e.indexOf(",")>-1)if(f.querySelectorAll)c=f.querySelectorAll(e);else{m=e.split(",");n=[];c=0;for(e=m.length;c<e;++c)n=n.concat(l(m[c],a));c=p(n)}else if(d.ExternalSelector)return d.ExternalSelector(e,
a);else h(e)}else if(e&&e.nodeType)c=[e];else if(e&&(e.item||d.isArray(e)))c=e;if(c.item)c=d.makeArray(c);return c}function o(e){if(e===q)e=f;else if(d.isString(e)&&u.test(e))e=s(e.slice(1));else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function s(e){return f.getElementById(e)}function r(e,a){return e.getElementsByTagName(a)}function j(e,a,b){b=e=b.getElementsByClassName(e);var c=0,m=0,n=e.length,v;if(a&&a!==i){b=[];for(a=a.toUpperCase();c<n;++c){v=e[c];if(v.tagName===a)b[m++]=v}}return b}
function p(e){var a=false;e.sort(function(c,m){c=c.sourceIndex-m.sourceIndex;if(c===0)a=true;return c});if(a)for(var b=1;b<e.length;b++)e[b]===e[b-1]&&e.splice(b--,1);return e}function h(e){d.error("Unsupported selector: "+e)}var f=document,g=d.DOM,k=" ",i="*",u=/^#[\w-]+$/,t=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var e=f.createElement("div");e.appendChild(f.createComment(""));if(e.getElementsByTagName(i).length>0)r=function(a,b){a=a.getElementsByTagName(b);if(b===i){b=[];for(var c=
0,m=0,n;n=a[c++];)if(n.nodeType===1)b[m++]=n;a=b}return a}})();f.getElementsByClassName||(j=f.querySelectorAll?function(e,a,b){return b.querySelectorAll((a?a:"")+"."+e)}:function(e,a,b){a=b.getElementsByTagName(a||i);b=[];var c=0,m=0,n=a.length,v,w;for(e=k+e+k;c<n;++c){v=a[c];if((w=v.className)&&(k+w+k).indexOf(e)>-1)b[m++]=v}return b});d.query=l;d.get=function(e,a){return l(e,a)[0]||null};d.mix(g,{query:l,get:d.get,filter:function(e,a){var b=l(e),c,m,n,v=[];if(d.isString(a)&&(c=t.exec(a))&&!c[1]){m=
c[2];n=c[3];a=function(w){return!(m&&w.tagName!==m.toUpperCase()||n&&!g.hasClass(w,n))}}if(d.isFunction(a))v=d.filter(b,a);else if(a&&d.ExternalSelector)v=d.ExternalSelector._filter(e,a);else h(a);return v},test:function(e,a){e=l(e);return g.filter(e,a).length===e.length}})});
KISSY.add("dom-class",function(d,q){function l(j,p,h,f){if(!(p=d.trim(p)))return f?false:q;j=d.query(j);var g=0,k=j.length;p=p.split(s);for(var i;g<k;g++){i=j[g];if(i.nodeType===1){i=h(i,p,p.length);if(i!==q)return i}}if(f)return false}var o=d.DOM,s=/[\.\s]\s*\.?/,r=/[\n\t]/g;d.mix(o,{hasClass:function(j,p){return l(j,p,function(h,f,g){if(h=h.className){h=" "+h+" ";for(var k=0,i=true;k<g;k++)if(h.indexOf(" "+f[k]+" ")<0){i=false;break}if(i)return true}},true)},addClass:function(j,p){l(j,p,function(h,
f,g){var k=h.className;if(k){var i=" "+k+" ";k=k;for(var u=0;u<g;u++)if(i.indexOf(" "+f[u]+" ")<0)k+=" "+f[u];h.className=d.trim(k)}else h.className=p})},removeClass:function(j,p){l(j,p,function(h,f,g){var k=h.className;if(k)if(g){k=(" "+k+" ").replace(r," ");for(var i=0;i<g;i++)k=k.replace(" "+f[i]+" "," ");h.className=d.trim(k)}else h.className=""})},replaceClass:function(j,p,h){o.removeClass(j,p);o.addClass(j,h)},toggleClass:function(j,p,h){var f=d.isBoolean(h),g;l(j,p,function(k,i,u){for(var t=
0,e;t<u;t++){e=i[t];g=f?!h:o.hasClass(k,e);o[g?"removeClass":"addClass"](k,e)}})}})});
KISSY.add("dom-attr",function(d,q){function l(t,e){return e&&e.nodeName.toUpperCase()===t.toUpperCase()}var o=d.UA,s=o.ie,r=s&&s<8,j=document.documentElement.textContent!==q?"textContent":"innerText",p=d.DOM,h=p._isElementNode,f=/href|src|style/,g=/href|src|colspan|rowspan/,k=/\r/g,i=/radio|checkbox/,u={readonly:"readOnly"};r&&d.mix(u,{"for":"htmlFor","class":"className"});d.mix(p,{attr:function(t,e,a){if(e=d.trim(e)){e=e.toLowerCase();e=u[e]||e;if(a===q){t=d.get(t);if(!h(t))return q;var b;f.test(e)||
(b=t[e]);if(b===q)b=t.getAttribute(e);if(r)if(g.test(e))b=t.getAttribute(e,2);else if(e==="style")b=t.style.cssText;return b===null?q:b}d.each(d.query(t),function(c){if(h(c))if(r&&e==="style")c.style.cssText=a;else c.setAttribute(e,""+a)})}},removeAttr:function(t,e){d.each(d.query(t),function(a){h(a)&&a.removeAttribute(e)})},val:function(t,e){if(e===q){var a=d.get(t);if(!h(a))return q;if(l("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(l("select",a)){var b=a.selectedIndex;
t=a.options;if(b<0)return null;else if(a.type==="select-one")return p.val(t[b]);a=[];for(var c=0,m=t.length;c<m;++c)t[c].selected&&a.push(p.val(t[c]));return a}if(o.webkit&&i.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(k,"")}d.each(d.query(t),function(n){if(l("select",n)){var v=d.makeArray(e),w=n.options,x;c=0;for(m=w.length;c<m;++c){x=w[c];x.selected=d.inArray(p.val(x),v)}if(!v.length)n.selectedIndex=-1}else if(h(n))n.value=e})},text:function(t,e){if(e===
q){t=d.get(t);if(h(t))return t[j]||""}else d.each(d.query(t),function(a){if(h(a))a[j]=e})}})});
KISSY.add("dom-style",function(d,q){var l=d.DOM,o=document,s=o.documentElement,r=/width|height|top|left|right|bottom|margin|padding/i,j=/-([a-z])/ig,p=function(f,g){return g.toUpperCase()},h={};d.mix(l,{_CUSTOM_STYLES:h,_getComputedStyle:function(f,g){var k="",i=f.ownerDocument;if(f.style)k=i.defaultView.getComputedStyle(f,null)[g];return k},css:function(f,g,k){if(d.isPlainObject(g))for(var i in g)l.css(f,i,g[i]);else{if(g.indexOf("-")>0)g=g.replace(j,p);g=h[g]||g;if(k===q){f=d.get(f);i="";if(f&&
f.style){i=g.get?g.get(f):f.style[g];if(i===""&&!g.get)i=l._getComputedStyle(f,g)}return i===q?"":i}else{if(k===null||k==="")k="";else if(!isNaN(new Number(k))&&r.test(g))k+="px";(g==="width"||g==="height")&&parseFloat(k)<0||d.each(d.query(f),function(u){if(u&&u.style)g.set?g.set(u,k):(u.style[g]=k)})}}},addStyleSheet:function(f,g){var k;if(g)k=d.get(g);k||(k=l.create("<style>",{id:g}));d.get("head").appendChild(k);if(k.styleSheet)k.styleSheet.cssText=f;else k.appendChild(o.createTextNode(f))}});
if(s.style.cssFloat!==q)h["float"]="cssFloat";else if(s.style.styleFloat!==q)h["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(d,q){if(d.UA.ie){var l=d.DOM,o=document,s=o.documentElement,r=l._CUSTOM_STYLES,j=/^-?\d+(?:px)?$/i,p=/^-?\d/;try{if(s.style.opacity===q&&s.filters)r.opacity={get:function(f){var g=100;try{g=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(k){try{g=f.filters("alpha").opacity}catch(i){}}return g/100+""},set:function(f,g){f=f.style;f.zoom=1;f.filter="alpha(opacity="+g*100+")"}}}catch(h){d.log("IE filters ActiveX is disabled. ex = "+h)}if(!(o.defaultView||
{}).getComputedStyle&&s.currentStyle)l._getComputedStyle=function(f,g){var k=f.style;f=f.currentStyle[g];if(!j.test(f)&&p.test(f)){var i=k.left;k.left=g==="fontSize"?"1em":f||0;f=k.pixelLeft+"px";k.left=i}return f}}});
KISSY.add("dom-offset",function(d,q){function l(i){var u=0,t=0;if(i!==j.body&&i!==p&&i[k]){i=i[k]();u=i.left+s.scrollLeft();t=i.top+s.scrollTop()}return{left:u,top:t}}function o(i,u){var t=s.css(i,f);if(t==="static")t=i.style[f]=g;var e=l(i);t=t===g;var a=h(s.css(i,"left"),10),b=h(s.css(i,"top"),10);a=d.isNumber(a)?a:t?0:i.offsetLeft;b=d.isNumber(b)?b:t?0:i.offsetTop;s.css(i,{left:a+u.left-e.left,top:b+u.top-e.top})}var s=d.DOM,r=window,j=document,p=j.documentElement,h=parseInt,f="position",g="relative",
k="getBoundingClientRect";d.mix(s,{offset:function(i,u){if(!(i=d.get(i))||!i.ownerDocument)return null;if(u===q)return l(i);o(i,u)},scrollLeft:function(){return r.pageXOffset||p.scrollLeft||j.body.scrollLeft},scrollTop:function(){return r.pageYOffset||p.scrollTop||j.body.scrollTop}})});
KISSY.add("dom-traversal",function(d,q){function l(j,p,h,f){if(!(j=d.get(j)))return null;if(p===q)p=1;var g=null,k,i;if(d.isNumber(p)&&p>=0){if(p===0)return j;k=0;i=p;p=function(){return++k===i}}for(;j=j[h];)if(r(j)&&(!p||s.test(j,p))&&(!f||f(j))){g=j;break}return g}function o(j,p,h){var f=[];var g=j=d.get(j);if(j&&h)g=j.parentNode;if(g){h=0;for(g=g.firstChild;g;g=g.nextSibling)if(r(g)&&g!==j&&(!p||s.test(g,p)))f[h++]=g}return f}var s=d.DOM,r=s._isElementNode;d.mix(s,{parent:function(j,p){return l(j,
p,"parentNode",function(h){return h.nodeType!=11})},next:function(j,p){return l(j,p,"nextSibling")},prev:function(j,p){return l(j,p,"previousSibling")},siblings:function(j,p){return o(j,p,true)},children:function(j,p){return o(j,p)}})});
KISSY.add("dom-create",function(d,q){function l(b,c){if(h(b)&&c)for(var m in c)r.attr(b,m,c[m]);return b}function o(b,c){var m=null,n;if(b&&(b.push||b.item)&&b[0]){c=c||b[0].ownerDocument;m=c.createDocumentFragment();if(b.item)b=d.makeArray(b);c=0;for(n=b.length;c<n;c++)m.appendChild(b[c])}else d.log("Unable to convert "+b+" to fragment.");return m}var s=document,r=d.DOM,j=d.UA,p=j.ie,h=r._isElementNode,f=s.createElement("div"),g=/<(\w+)/,k=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;d.mix(r,{create:function(b,
c,m){if(h(b))return b;if(!(b=d.trim(b)))return null;var n=null;n=r._creators;var v,w="div",x;if(v=k.exec(b))n=(m||s).createElement(v[1]);else{if((v=g.exec(b))&&(x=v[1])&&d.isFunction(n[x=x.toLowerCase()]))w=x;b=n[w](b,m).childNodes;n=b.length===1?b[0].parentNode.removeChild(b[0]):o(b,m||s)}return l(n,c)},_creators:{div:function(b,c){c=c?c.createElement("div"):f;c.innerHTML=b;return c}},html:function(b,c){if(c===q){b=d.get(b);if(h(b))return b.innerHTML}else d.each(d.query(b),function(m){if(h(m)){m.innerHTML=
"";m.appendChild(r.create(c))}})}});var i=r._creators,u=r.create,t=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,e={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(j.gecko||p){for(var a in e)(function(b){i[a]=function(c,m){return u("<"+b+">"+c+"</"+b+">",null,m)}})(e[a]);if(p){i.script=function(b,c){c=c?c.createElement("div"):f;c.innerHTML="-"+b;c.removeChild(c.firstChild);return c};if(p<8)i.tbody=function(b,c){c=u("<table>"+b+"</table>",null,c);var m=
c.children.tags("tbody")[0];c.children.length>1&&m&&!t.test(b)&&m.parentNode.removeChild(m);return c}}d.mix(i,{optgroup:i.option,th:i.td,thead:i.tbody,tfoot:i.tbody,caption:i.tbody,colgroup:i.tbody})}});
KISSY.add("dom-insertion",function(d){var q=d.DOM;d.mix(q,{insertBefore:function(l,o){l=q.create(l);o=d.get(o);l&&o&&o.parentNode&&o.parentNode.insertBefore(l,o);return l},insertAfter:function(l,o){l=q.create(l);o=d.get(o);if(l&&o&&o.parentNode)o.nextSibling?o.parentNode.insertBefore(l,o.nextSibling):o.parentNode.appendChild(l);return l}})});
KISSY.add("event",function(d,q){function l(a,b,c,m,n){if(d.isString(b))b=d.query(b);if(d.isArray(b)){d.each(b,function(v){e[a](v,c,m,n)});return true}if((c=d.trim(c))&&c.indexOf(i)>0){d.each(c.split(i),function(v){e[a](b,v,m,n)});return true}}function o(a){return j(a)?-1:a[k]}function s(a,b){if(j(a))return d.error("Text or comment node is not valid event target.");try{a[k]=b}catch(c){d.error(c)}}function r(a){try{a[k]=q;delete a[k]}catch(b){}}function j(a){return a.nodeType===3||a.nodeType===8}var p=
window,h=document,f=h.addEventListener?function(a,b,c){a.addEventListener&&a.addEventListener(b,c,false)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},g=h.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,false)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},k="ksEventTargetId",i=" ",u=d.now(),t={},e={EVENT_GUID:k,special:{},add:function(a,b,c,m){if(!l("add",a,b,c,m)){var n=o(a),v,w;if(!(n===-1||!b||!d.isFunction(c))){if(!n){s(a,n=u++);t[n]=
{target:a,events:{}}}w=t[n].events;v=!a.isCustomEventTarget&&e.special[b]||{};if(!w[b]){n=function(x,y){if(!x||!x.fixed){x=new d.EventObject(a,x,b);d.isPlainObject(y)&&d.mix(x,y)}v.setup&&v.setup(x);return(v.handle||e._handle)(a,x,w[b].listeners,m)};w[b]={handle:n,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(b,n);else f(a,v.fix||b,n)}w[b].listeners.push(c)}}},remove:function(a,b,c){if(!l("remove",a,b,c)){var m=o(a),n,v,w,x,y,z;if(m!==-1)if(m&&(n=t[m]))if(n.target===a){n=n.events||
{};if(v=n[b]){w=v.listeners;y=w.length;if(d.isFunction(c)&&y&&d.inArray(c,w)){z=[];for(x=0;x<y;++x)c!==w[x]&&z.push(w[x]);y=z.length}if(c===q||y===0){a.isCustomEventTarget||g(a,b,v.handle);delete t[m].type}}if(b===q||d.isEmptyObject(n)){for(b in n)e.remove(a,b);delete t[m];r(a)}}}},_handle:function(a,b,c,m){var n,v=0,w=c.length;for(m=m||a;v<w;++v){n=c[v].call(m,b);if(n===false&&a.isCustomEventTarget||b.isImmediatePropagationStopped)break}return n},_getCache:function(a){return t[a]},_simpleAdd:f,_simpleRemove:g};
e.on=e.add;d.Event=e;p.attachEvent&&!p.addEventListener&&p.attachEvent("onunload",function(){var a,b;for(a in t)if(b=t[a].target)try{e.remove(b)}catch(c){}})});
KISSY.add("event-object",function(d,q){function l(r,j,p){this.currentTarget=r;this.originalEvent=j||{};if(j){this.type=j.type;this._fix()}else{this.type=p;this.target=r}this.fixed=true}var o=document,s="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");d.mix(l.prototype,
{_fix:function(){for(var r=this.originalEvent,j=s.length,p;j;){p=s[--j];this[p]=r[p]}if(!this.target)this.target=this.srcElement||o;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===q&&this.clientX!==q){r=o.documentElement;j=o.body;this.pageX=this.clientX+(r&&r.scrollLeft||j&&j.scrollLeft||0)-(r&&r.clientLeft||j&&j.clientLeft||0);this.pageY=this.clientY+
(r&&r.scrollTop||j&&j.scrollTop||0)-(r&&r.clientTop||j&&j.clientTop||0)}if(this.which===q)this.which=this.charCode!==q?this.charCode:this.keyCode;if(this.metaKey===q)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==q)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var r=this.originalEvent;if(r.preventDefault)r.preventDefault();else r.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var r=this.originalEvent;if(r.stopPropagation)r.stopPropagation();
else r.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var r=this.originalEvent;r.stopImmediatePropagation?r.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(r){r?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});d.EventObject=l});
KISSY.add("event-target",function(d,q){var l=d.Event,o=l.EVENT_GUID;d.EventTarget={isCustomEventTarget:true,fire:function(s,r){if((s=((l._getCache(this[o]||-1)||{}).events||{})[s])&&d.isFunction(s.handle))return s.handle(q,r)},on:function(s,r,j){l.add(this,s,r,j)},detach:function(s,r){l.remove(this,s,r)}}});
KISSY.add("event-mouseenter",function(d){var q=d.Event;d.UA.ie||d.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(l){q.special[l.name]={fix:l.fix,setup:function(o){o.type=l.name},handle:function(o,s,r){var j=s.relatedTarget;try{for(;j&&j!==o;)j=j.parentNode;j!==o&&q._handle(o,s,r)}catch(p){}}}})});
