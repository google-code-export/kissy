/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 824 Jul 9 09:38
*/
(function(b,o,j){if(b[o]===j)b[o]={};o=b[o];var m=b.document,p=function(h,r,s,k){if(!r||!h)return h;if(s===j)s=true;var f,t,e;if(k&&(e=k.length))for(f=0;f<e;f++){t=k[f];if(t in r)if(s||!(t in h))h[t]=r[t]}else for(t in r)if(s||!(t in h))h[t]=r[t];return h},q=false,i=[],l=false;p(o,{version:"1.0.8",_init:function(){this.Env={mods:{}}},add:function(h,r){this.Env.mods[h]={name:h,fn:r};r(this);return this},ready:function(h){l||this._bindReady();q?h.call(b,this):i.push(h);return this},_bindReady:function(){var h=
this,r=m.documentElement.doScroll,s=r?"onreadystatechange":"DOMContentLoaded",k=function(){h._fireReady()};l=true;if(m.readyState==="complete")return k();if(m.addEventListener){var f=function(){m.removeEventListener(s,f,false);k()};m.addEventListener(s,f,false)}else{var t=function(){if(m.readyState==="complete"){m.detachEvent(s,t);k()}};m.attachEvent(s,t);b.attachEvent("onload",k);if(b==b.top){var e=function(){try{r("left");k()}catch(g){setTimeout(e,1)}};e()}}},_fireReady:function(){if(!q){q=true;
if(i){for(var h,r=0;h=i[r++];)h.call(b,this);i=null}}},mix:p,merge:function(){var h={},r,s=arguments.length;for(r=0;r<s;++r)p(h,arguments[r]);return h},augment:function(){var h=arguments,r=h.length-2,s=h[0],k=h[r],f=h[r+1],t=1;if(!o.isArray(f)){k=f;f=j;r++}if(!o.isBoolean(k)){k=j;r++}for(;t<r;t++)p(s.prototype,h[t].prototype||h[t],k,f);return s},extend:function(h,r,s,k){if(!r||!h)return h;var f=Object.prototype,t=r.prototype,e=function(g){function a(){}a.prototype=g;return new a}(t);h.prototype=e;
e.constructor=h;h.superclass=t;if(r!==Object&&t.constructor===f.constructor)t.constructor=r;s&&p(e,s);k&&p(h,k);return h},namespace:function(){var h=arguments.length,r=null,s,k,f;for(s=0;s<h;++s){f=(""+arguments[s]).split(".");r=this;for(k=b[f[0]]===r?1:0;k<f.length;++k)r=r[f[k]]=r[f[k]]||{}}return r},app:function(h,r){var s=b[h]||{};p(s,this,true,["_init","add","namespace"]);s._init();return p(b[h]=s,typeof r==="function"?r():r)},log:function(h,r,s){if(this.Config.debug){if(s)h=s+": "+h;if(b.console!==
j&&console.log)console[r&&console[r]?r:"log"](h)}return this},error:function(h){if(this.Config.debug)throw h;}});o._init();o.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,o){function j(a){var c=typeof a;return a===null||c!=="object"&&c!=="function"}var m=window,p=document,q=location,i=Array.prototype,l=i.indexOf,h=i.filter,r=String.prototype.trim,s=Object.prototype.toString,k=encodeURIComponent,f=decodeURIComponent,t=/^\s+|\s+$/g,e=/^(\w+)\[\]$/,g=/\S/;b.mix(b,{isUndefined:function(a){return a===o},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&s.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return s.call(a)==="[object Function]"},isArray:function(a){return s.call(a)==="[object Array]"},trim:r?function(a){return a==o?"":r.call(a)}:function(a){return a==o?"":a.toString().replace(t,"")},each:function(a,c,d){for(var n=a&&a.length||0,u=0;u<n;++u)c.call(d||m,a[u],u,a)},indexOf:l?function(a,
c){return l.call(c,a)}:function(a,c){for(var d=0,n=c.length;d<n;++d)if(c[d]===a)return d;return-1},inArray:function(a,c){return b.indexOf(a,c)>-1},makeArray:function(a){if(a===null||a===o)return[];if(b.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],d=0,n=a.length;d<n;++d)c[d]=a[d];return c}return i.slice.call(a)},filter:h?function(a,c,d){return h.call(a,c,d)}:function(a,c,d){var n=[];b.each(a,function(u,v,x){c.call(d,
u,v,x)&&n.push(u)});return n},param:function(a){if(!b.isPlainObject(a))return"";var c=[],d,n;for(d in a){n=a[d];d=k(d);if(j(n))c.push(d,"=",k(n+""),"&");else if(b.isArray(n)&&n.length)for(var u=0,v=n.length;u<v;++u)j(n[u])&&c.push(d,"[]=",k(n[u]+""),"&")}c.pop();return c.join("")},unparam:function(a,c){if(typeof a!=="string"||(a=b.trim(a)).length===0)return{};var d={};a=a.split(c||"&");for(var n,u,v,x=0,w=a.length;x<w;++x){c=a[x].split("=");n=f(c[0]);try{u=f(c[1]||"")}catch(y){u=c[1]||""}if((v=n.match(e))&&
v[1]){d[v[1]]=d[v[1]]||[];d[v[1]].push(u)}else d[n]=u}return d},later:function(a,c,d,n,u){c=c||0;n=n||{};var v=a,x=b.makeArray(u),w;if(typeof a==="string")v=n[a];v||b.error("method undefined");a=function(){v.apply(n,x)};w=d?setInterval(a,c):setTimeout(a,c);return{id:w,interval:d,cancel:function(){this.interval?clearInterval(w):clearTimeout(w)}}},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&g.test(a)){var c=p.getElementsByTagName("head")[0]||p.documentElement,d=p.createElement("script");
d.text=a;c.insertBefore(d,c.firstChild);c.removeChild(d)}}});if(q&&q.search&&q.search.indexOf("ks-debug")!==-1)b.Config.debug=true});
KISSY.add("kissy-ua",function(b){var o=navigator.userAgent,j,m={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},p=function(q){var i=0;return parseFloat(q.replace(/\./g,function(){return i++===0?".":""}))};if((j=o.match(/AppleWebKit\/([\d.]*)/))&&j[1]){m.webkit=p(j[1]);if((j=o.match(/Chrome\/([\d.]*)/))&&j[1])m.chrome=p(j[1]);else if((j=o.match(/\/([\d.]*) Safari/))&&j[1])m.safari=p(j[1]);if(/ Mobile\//.test(o))m.mobile="Apple";else if(j=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))m.mobile=
j[0]}else if((j=o.match(/Opera\/.* Version\/([\d.]*)/))&&j[1]){m.opera=p(j[1]);if(o.match(/Opera Mini[^;]*/))m.mobile=j[0]}else if((j=o.match(/MSIE\s([^;]*)/))&&j[1])m.ie=p(j[1]);else if(j=o.match(/Gecko/)){m.gecko=1;if((j=o.match(/rv:([\d.]*)/))&&j[1])m.gecko=p(j[1]);if((j=o.match(/Firefox\/([\d.]*)/))&&j[1])m.firefox=p(j[1])}b.UA=m});KISSY.add("dom",function(b){b.DOM={_isElementNode:function(o){return o&&o.nodeType===1}}});
KISSY.add("selector",function(b,o){function j(e,g){var a,c=[],d,n;g=m(g);if(b.isString(e)){e=b.trim(e);if(f.test(e)){if(e=p(e.slice(1)))c=[e]}else if(a=t.exec(e)){d=a[1];n=a[2];a=a[3];if(g=d?p(d):g)if(a)if(!d||e.indexOf(s)!==-1)c=i(a,n,g);else{if((e=p(d))&&r.hasClass(e,a))c=[e]}else if(n)c=q(g,n)}else if(b.ExternalSelector)return b.ExternalSelector(e,g);else l(e)}else if(e&&e.nodeType)c=[e];else if(e&&(b.isArray(e)||e.item||e.getDOMNode))c=e;if(c.item)c=b.makeArray(c);return c}function m(e){if(e===
o)e=h;else if(b.isString(e)&&f.test(e))e=p(e.slice(1));else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function p(e){return h.getElementById(e)}function q(e,g){return e.getElementsByTagName(g)}function i(e,g,a){a=e=a.getElementsByClassName(e);var c=0,d=0,n=e.length,u;if(g&&g!==k){a=[];for(g=g.toUpperCase();c<n;++c){u=e[c];if(u.tagName===g)a[d++]=u}}return a}function l(e){b.error("Unsupported selector: "+e)}var h=document,r=b.DOM,s=" ",k="*",f=/^#[\w-]+$/,t=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var e=h.createElement("div");e.appendChild(h.createComment(""));if(e.getElementsByTagName(k).length>0)q=function(g,a){g=g.getElementsByTagName(a);if(a===k){a=[];for(var c=0,d=0,n;n=g[c++];)if(n.nodeType===1)a[d++]=n;g=a}return g}})();h.getElementsByClassName||(i=h.querySelectorAll?function(e,g,a){return a.querySelectorAll((g?g:"")+"."+e)}:function(e,g,a){g=a.getElementsByTagName(g||k);a=[];var c=0,d=0,n=g.length,u,v;for(e=s+e+s;c<n;++c){u=g[c];if((v=u.className)&&(s+v+s).indexOf(e)>-1)a[d++]=
u}return a});b.query=j;b.get=function(e,g){return j(e,g)[0]||null};b.mix(r,{query:j,get:b.get,filter:function(e,g){var a=j(e),c,d,n,u=[];if(b.isString(g)&&(c=t.exec(g))&&!c[1]){d=c[2];n=c[3];g=function(v){return!(d&&v.tagName!==d.toUpperCase()||n&&!r.hasClass(v,n))}}if(b.isFunction(g))u=b.filter(a,g);else if(g&&b.ExternalSelector)u=b.ExternalSelector._filter(e,g);else l(g);return u},test:function(e,g){e=j(e);return r.filter(e,g).length===e.length}})});
KISSY.add("dom-class",function(b,o){function j(i,l,h,r){if(!(l=b.trim(l)))return r?false:o;i=b.query(i);var s=0,k=i.length;l=l.split(p);for(var f;s<k;s++){f=i[s];if(f.nodeType===1){f=h(f,l,l.length);if(f!==o)return f}}if(r)return false}var m=b.DOM,p=/[\.\s]\s*\.?/,q=/[\n\t]/g;b.mix(m,{hasClass:function(i,l){return j(i,l,function(h,r,s){if(h=h.className){h=" "+h+" ";for(var k=0,f=true;k<s;k++)if(h.indexOf(" "+r[k]+" ")<0){f=false;break}if(f)return true}},true)},addClass:function(i,l){j(i,l,function(h,
r,s){var k=h.className;if(k){var f=" "+k+" ";k=k;for(var t=0;t<s;t++)if(f.indexOf(" "+r[t]+" ")<0)k+=" "+r[t];h.className=b.trim(k)}else h.className=l})},removeClass:function(i,l){j(i,l,function(h,r,s){var k=h.className;if(k)if(s){k=(" "+k+" ").replace(q," ");for(var f=0,t;f<s;f++)for(t=" "+r[f]+" ";k.indexOf(t)>=0;)k=k.replace(t," ");h.className=b.trim(k)}else h.className=""})},replaceClass:function(i,l,h){m.removeClass(i,l);m.addClass(i,h)},toggleClass:function(i,l,h){var r=b.isBoolean(h),s;j(i,
l,function(k,f,t){for(var e=0,g;e<t;e++){g=f[e];s=r?!h:m.hasClass(k,g);m[s?"removeClass":"addClass"](k,g)}})}})});
KISSY.add("dom-attr",function(b,o){function j(e,g){return g&&g.nodeName.toUpperCase()===e.toUpperCase()}var m=b.UA,p=m.ie,q=p&&p<8,i=document.documentElement.textContent!==o?"textContent":"innerText",l=b.DOM,h=l._isElementNode,r=/href|src|style/,s=/href|src|colspan|rowspan/,k=/\r/g,f=/radio|checkbox/,t={readonly:"readOnly"};q&&b.mix(t,{"for":"htmlFor","class":"className"});b.mix(l,{attr:function(e,g,a){if(g=b.trim(g)){g=g.toLowerCase();g=t[g]||g;if(a===o){e=b.get(e);if(!h(e))return o;var c;r.test(g)||
(c=e[g]);if(c===o)c=e.getAttribute(g);if(q)if(s.test(g))c=e.getAttribute(g,2);else if(g==="style")c=e.style.cssText;return c===null?o:c}b.each(b.query(e),function(d){if(h(d))if(q&&g==="style")d.style.cssText=a;else d.setAttribute(g,""+a)})}},removeAttr:function(e,g){b.each(b.query(e),function(a){h(a)&&a.removeAttribute(g)})},val:function(e,g){if(g===o){var a=b.get(e);if(!h(a))return o;if(j("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(j("select",a)){var c=a.selectedIndex;
e=a.options;if(c<0)return null;else if(a.type==="select-one")return l.val(e[c]);a=[];for(var d=0,n=e.length;d<n;++d)e[d].selected&&a.push(l.val(e[d]));return a}if(m.webkit&&f.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(k,"")}b.each(b.query(e),function(u){if(j("select",u)){if(b.isNumber(g))g+="";var v=b.makeArray(g),x=u.options,w;d=0;for(n=x.length;d<n;++d){w=x[d];w.selected=b.inArray(l.val(w),v)}if(!v.length)u.selectedIndex=-1}else if(h(u))u.value=g})},
text:function(e,g){if(g===o){e=b.get(e);if(h(e))return e[i]||""}else b.each(b.query(e),function(a){if(h(a))a[i]=g})}})});
KISSY.add("dom-style",function(b,o){function j(k,f){var t=b.get(k),e=f===i?t.offsetWidth:t.offsetHeight;b.each(f===i?["Left","Right"]:["Top","Bottom"],function(g){e-=parseFloat(m._getComputedStyle(t,"padding"+g))||0;e-=parseFloat(m._getComputedStyle(t,"border"+g+"Width"))||0});return e}var m=b.DOM,p=document,q=p.documentElement,i="width",l=/width|height|top|left|right|bottom|margin|padding/i,h=/-([a-z])/ig,r=function(k,f){return f.toUpperCase()},s={};b.mix(m,{_CUSTOM_STYLES:s,_getComputedStyle:function(k,
f){var t="",e=k.ownerDocument;if(k.style)t=e.defaultView.getComputedStyle(k,null)[f];return t},css:function(k,f,t){if(b.isPlainObject(f))for(var e in f)m.css(k,e,f[e]);else{if(f.indexOf("-")>0)f=f.replace(h,r);f=s[f]||f;if(t===o){k=b.get(k);e="";if(k&&k.style){e=f.get?f.get(k):k.style[f];if(e===""&&!f.get)e=m._getComputedStyle(k,f)}return e===o?"":e}else{if(t===null||t==="")t="";else if(!isNaN(new Number(t))&&l.test(f))t+="px";(f===i||f==="height")&&parseFloat(t)<0||b.each(b.query(k),function(g){if(g&&
g.style)f.set?f.set(g,t):(g.style[f]=t)})}}},width:function(k,f){if(f===o)return j(k,i);else m.css(k,i,f)},height:function(k,f){if(f===o)return j(k,"height");else m.css(k,"height",f)},addStyleSheet:function(k,f){var t;if(f)t=b.get(f);t||(t=m.create("<style>",{id:f}));b.get("head").appendChild(t);if(t.styleSheet)t.styleSheet.cssText=k;else t.appendChild(p.createTextNode(k))}});if(q.style.cssFloat!==o)s["float"]="cssFloat";else if(q.style.styleFloat!==o)s["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,o){if(b.UA.ie){var j=b.DOM,m=document,p=m.documentElement,q=j._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,l=/^-?\d/,h=/^auto$/i,r=/^width|height$/;try{if(p.style.opacity===o&&p.filters)q.opacity={get:function(k){var f=100;try{f=k.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(t){try{f=k.filters("alpha").opacity}catch(e){}}return f/100+""},set:function(k,f){k=k.style;k.zoom=1;k.filter="alpha(opacity="+f*100+")"}}}catch(s){b.log("IE filters ActiveX is disabled. ex = "+
s)}if(!(m.defaultView||{}).getComputedStyle&&p.currentStyle)j._getComputedStyle=function(k,f){var t=k.style,e=k.currentStyle[f];if(r.test(f))e=j[f](k)+"px";else if(!i.test(e)&&l.test(e)||h.test(e)){k=t.left;t.left=f==="fontSize"?"1em":e||0;e=t.pixelLeft+"px";t.left=k}return e}}});
KISSY.add("dom-offset",function(b,o){function j(g){var a=0,c=0;if(g!==l.body&&g!==h&&g[e]){g=g[e]();a=g.left+p.scrollLeft();c=g.top+p.scrollTop()}return{left:a,top:c}}function m(g,a){var c=p.css(g,f);if(c==="static")c=g.style[f]=t;var d=j(g);c=c===t;var n=k(p.css(g,"left"),10),u=k(p.css(g,"top"),10);n=b.isNumber(n)?n:c?0:g.offsetLeft;u=b.isNumber(u)?u:c?0:g.offsetTop;p.css(g,{left:n+a.left-d.left,top:u+a.top-d.top})}var p=b.DOM,q=b.UA,i=window,l=document,h=l.documentElement,r=l.compatMode==="CSS1Compat",
s=Math.max,k=parseInt,f="position",t="relative",e="getBoundingClientRect";b.mix(p,{offset:function(g,a){if(!(g=b.get(g))||!g.ownerDocument)return null;if(a===o)return j(g);m(g,a)},scrollLeft:function(){return i.pageXOffset||h.scrollLeft||l.body.scrollLeft},scrollTop:function(){return i.pageYOffset||h.scrollTop||l.body.scrollTop},docHeight:function(){return s(!r?l.body.scrollHeight:h.scrollHeight,p.viewportHeight())},docWidth:function(){return s(!r?l.body.scrollWidth:h.scrollWidth,p.viewportWidth())},
viewportHeight:function(){return q.ie?r?h.clientHeight:l.body.clientHeight:i.innerHeight},viewportWidth:function(){return!r&&!q.opera?l.body.clientWidth:q.ie?h.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(b,o){function j(i,l,h,r){if(!(i=b.get(i)))return null;if(l===o)l=1;var s=null,k,f;if(b.isNumber(l)&&l>=0){if(l===0)return i;k=0;f=l;l=function(){return++k===f}}for(;i=i[h];)if(q(i)&&(!l||p.test(i,l))&&(!r||r(i))){s=i;break}return s}function m(i,l,h){var r=[];var s=i=b.get(i);if(i&&h)s=i.parentNode;if(s){h=0;for(s=s.firstChild;s;s=s.nextSibling)if(q(s)&&s!==i&&(!l||p.test(s,l)))r[h++]=s}return r}var p=b.DOM,q=p._isElementNode;b.mix(p,{parent:function(i,l){return j(i,
l,"parentNode",function(h){return h.nodeType!=11})},next:function(i,l){return j(i,l,"nextSibling")},prev:function(i,l){return j(i,l,"previousSibling")},siblings:function(i,l){return m(i,l,true)},children:function(i,l){return m(i,l)},contains:function(i,l){var h=false;if((i=b.get(i))&&(l=b.get(l)))if(i.contains)return i.contains(l);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(l)&16);else for(;!h&&(l=l.parentNode);)h=l==i;return h}})});
KISSY.add("dom-create",function(b,o){function j(c,d){if(h(c)&&d)for(var n in d)q.attr(c,n,d[n]);return c}function m(c,d){var n=null,u;if(c&&(c.push||c.item)&&c[0]){d=d||c[0].ownerDocument;n=d.createDocumentFragment();if(c.item)c=b.makeArray(c);d=0;for(u=c.length;d<u;d++)n.appendChild(c[d])}else b.log("Unable to convert "+c+" to fragment.");return n}var p=document,q=b.DOM,i=b.UA,l=i.ie,h=q._isElementNode,r=p.createElement("div"),s=/<(\w+)/,k=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;b.mix(q,{create:function(c,
d,n){if(h(c))return c;if(!(c=b.trim(c)))return null;var u=null;u=q._creators;var v,x="div",w;if(v=k.exec(c))u=(n||p).createElement(v[1]);else{if((v=s.exec(c))&&(w=v[1])&&b.isFunction(u[w=w.toLowerCase()]))x=w;c=u[x](c,n).childNodes;u=c.length===1?c[0].parentNode.removeChild(c[0]):m(c,n||p)}return j(u,d)},_creators:{div:function(c,d){d=d?d.createElement("div"):r;d.innerHTML=c;return d}},html:function(c,d){if(d===o){c=b.get(c);if(h(c))return c.innerHTML}else b.each(b.query(c),function(n){if(h(n)){try{n.innerHTML=
""}catch(u){for(;n.firstChild;)n.removeChild(n.firstChild)}d&&n.appendChild(q.create(d))}})},remove:function(c){b.each(b.query(c),function(d){h(d)&&d.parentNode&&d.parentNode.removeChild(d)})}});var f=q._creators,t=q.create,e=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,g={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||l){for(var a in g)(function(c){f[a]=function(d,n){return t("<"+c+">"+d+"</"+c+">",null,n)}})(g[a]);if(l){f.script=function(c,
d){d=d?d.createElement("div"):r;d.innerHTML="-"+c;d.removeChild(d.firstChild);return d};if(l<8)f.tbody=function(c,d){d=t("<table>"+c+"</table>",null,d);var n=d.children.tags("tbody")[0];d.children.length>1&&n&&!e.test(c)&&n.parentNode.removeChild(n);return d}}b.mix(f,{optgroup:f.option,th:f.td,thead:f.tbody,tfoot:f.tbody,caption:f.tbody,colgroup:f.tbody})}});
KISSY.add("dom-insertion",function(b){var o=b.DOM;b.mix(o,{insertBefore:function(j,m){j=o.create(j);m=b.get(m);j&&m&&m.parentNode&&m.parentNode.insertBefore(j,m);return j},insertAfter:function(j,m){j=o.create(j);m=b.get(m);if(j&&m&&m.parentNode)m.nextSibling?m.parentNode.insertBefore(j,m.nextSibling):m.parentNode.appendChild(j);return j}})});
KISSY.add("event",function(b,o){function j(a,c,d,n,u){if(b.isString(c))c=b.query(c);if(b.isArray(c)){b.each(c,function(v){g[a](v,d,n,u)});return true}if((d=b.trim(d))&&d.indexOf(f)>0){b.each(d.split(f),function(v){g[a](c,v,n,u)});return true}}function m(a){return i(a)?-1:a[k]}function p(a,c){if(i(a))return b.error("Text or comment node is not valid event target.");try{a[k]=c}catch(d){b.error(d)}}function q(a){try{a[k]=o;delete a[k]}catch(c){}}function i(a){return a.nodeType===3||a.nodeType===8}var l=
window,h=document,r=h.addEventListener?function(a,c,d,n){a.addEventListener&&a.addEventListener(c,d,!!n)}:function(a,c,d){a.attachEvent&&a.attachEvent("on"+c,d)},s=h.removeEventListener?function(a,c,d,n){a.removeEventListener&&a.removeEventListener(c,d,!!n)}:function(a,c,d){a.detachEvent&&a.detachEvent("on"+c,d)},k="ksEventTargetId",f=" ",t=b.now(),e={},g={EVENT_GUID:k,special:{},add:function(a,c,d,n){if(!j("add",a,c,d,n)){var u=m(a),v,x;if(!(u===-1||!c||!b.isFunction(d))){if(!u){p(a,u=t++);e[u]=
{target:a,events:{}}}x=e[u].events;v=!a.isCustomEventTarget&&g.special[c]||{};if(!x[c]){u=function(w,y){if(!w||!w.fixed){w=new b.EventObject(a,w,c);b.isPlainObject(y)&&b.mix(w,y)}v.setup&&v.setup(w);return(v.handle||g._handle)(a,w,x[c].listeners,n)};x[c]={handle:u,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(c,u);else r(a,v.fix||c,u,v.capture)}x[c].listeners.push(d)}}},remove:function(a,c,d){if(!j("remove",a,c,d)){var n=m(a),u,v,x,w,y,z;if(n!==-1)if(n&&(u=e[n]))if(u.target===a){u=
u.events||{};if(v=u[c]){x=v.listeners;y=x.length;if(b.isFunction(d)&&y&&b.inArray(d,x)){z=[];for(w=0;w<y;++w)d!==x[w]&&z.push(x[w]);y=z.length}if(d===o||y===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(c,v.handle);else s(a,c,v.handle);delete u[c]}}if(c===o||b.isEmptyObject(u)){for(c in u)g.remove(a,c);delete e[n];q(a)}}}},_handle:function(a,c,d,n){var u,v=0,x=d.length;for(n=n||a;v<x;++v){u=d[v].call(n,c);if(u===false&&a.isCustomEventTarget||c.isImmediatePropagationStopped)break}return u},
_getCache:function(a){return e[a]},_simpleAdd:r,_simpleRemove:s};g.on=g.add;b.Event=g;l.attachEvent&&!l.addEventListener&&l.attachEvent("onunload",function(){var a,c;for(a in e)if(c=e[a].target)try{g.remove(c)}catch(d){}})});
KISSY.add("event-object",function(b,o){function j(q,i,l){this.currentTarget=q;this.originalEvent=i||{};if(i){this.type=i.type;this._fix()}else{this.type=l;this.target=q}this.fixed=true}var m=document,p="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(j.prototype,
{_fix:function(){for(var q=this.originalEvent,i=p.length,l;i;){l=p[--i];this[l]=q[l]}if(!this.target)this.target=this.srcElement||m;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===o&&this.clientX!==o){q=m.documentElement;i=m.body;this.pageX=this.clientX+(q&&q.scrollLeft||i&&i.scrollLeft||0)-(q&&q.clientLeft||i&&i.clientLeft||0);this.pageY=this.clientY+
(q&&q.scrollTop||i&&i.scrollTop||0)-(q&&q.clientTop||i&&i.clientTop||0)}if(this.which===o)this.which=this.charCode!==o?this.charCode:this.keyCode;if(this.metaKey===o)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==o)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var q=this.originalEvent;if(q.preventDefault)q.preventDefault();else q.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var q=this.originalEvent;if(q.stopPropagation)q.stopPropagation();
else q.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var q=this.originalEvent;q.stopImmediatePropagation?q.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(q){q?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=j});
KISSY.add("event-target",function(b,o){var j=b.Event,m=j.EVENT_GUID;b.EventTarget={isCustomEventTarget:true,fire:function(p,q){if((p=((j._getCache(this[m]||-1)||{}).events||{})[p])&&b.isFunction(p.handle))return p.handle(o,q)},on:function(p,q,i){j.add(this,p,q,i)},detach:function(p,q){j.remove(this,p,q)}}});
KISSY.add("event-mouseenter",function(b){var o=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(j){o.special[j.name]={fix:j.fix,setup:function(m){m.type=j.name},handle:function(m,p,q){var i=p.relatedTarget;try{for(;i&&i!==m;)i=i.parentNode;i!==m&&o._handle(m,p,q)}catch(l){}}}})});
KISSY.add("event-focusin",function(b){var o=b.Event;document.addEventListener&&b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(j){o.special[j.name]={fix:j.fix,capture:true,setup:function(m){m.type=j.name}}})});
KISSY.add("node",function(b){function o(m,p,q){var i;if(!(this instanceof o))return new o(m,p,q);if(!m)return null;if(j._isElementNode(m))i=m;else if(typeof m==="string")i=j.create(m,p,q);this[0]=i}var j=b.DOM;b.augment(o,{length:1,getDOMNode:function(){return this[0]}});b.one=function(m,p){return new o(b.get(m,p))};b.Node=o});
KISSY.add("nodelist",function(b){function o(p){if(!(this instanceof o))return new o(p);m.push.apply(this,p||[])}var j=b.DOM,m=Array.prototype;b.mix(o.prototype,{length:0,item:function(p){var q=null;if(j._isElementNode(this[p]))q=new b.Node(this[p]);return q},getDOMNodes:function(){return m.slice.call(this)},each:function(p,q){for(var i=this.length,l=0,h;l<i;++l){h=new b.Node(this[l]);p.call(q||h,h,l,this)}return this}});b.all=function(p,q){return new o(b.query(p,q,true))};b.NodeList=o});
KISSY.add("node-attach",function(b,o){function j(f,t){b.each(f,function(e){b.each([q,i],function(g,a){g[e]=function(c){switch(t){case r:return function(d,n){var u=this[a?h:l]();if(n===o)return c(u,d);else{c(u,d,n);return this}};case s:return function(d){var n=this[a?h:l]();if(d===o)return c(n);else{c(n,d);return this}};case k:return function(){var d=this[a?h:l]();return(d=c.apply(m,[d].concat(b.makeArray(arguments))))?new b[d.length?"NodeList":"Node"](d):null};default:return function(){var d=this[a?
h:l]();d=c.apply(m,[d].concat(b.makeArray(arguments)));return d===o?this:d}}}(m[e])})})}var m=b.DOM,p=b.Event,q=b.Node.prototype,i=b.NodeList.prototype,l="getDOMNode",h=l+"s",r=1,s=2,k=4;b.mix(q,{one:function(f){return b.one(f,this[0])},all:function(f){return b.all(f,this[0])}});j(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);j(["attr","removeAttr"],r);j(["val","text"],s);j(["css"],r);j(["width","height"],s);j(["offset"],s);j(["parent","next","prev","siblings","children"],k);
j(["contains"]);j(["html"],s);j(["remove"]);j(["insertBefore","insertAfter"],k);b.mix(q,{append:function(f){if(f=m.create(f))this[0].appendChild(f);return this},appendTo:function(f){if((f=b.get(f))&&f.appendChild)f.appendChild(this[0]);return this}});b.each([q,i],function(f){b.mix(f,b.EventTarget);f._addEvent=function(t,e){for(var g=0,a=this.length;g<a;g++)p._simpleAdd(this[g],t,e)};f._removeEvent=function(t,e){for(var g=0,a=this.length;g<a;g++)p._simpleRemove(this[g],t,e)};delete f.fire})});
KISSY.add("ajax",function(b){var o=document,j=b.UA;b.Ajax={request:function(){b.error("not implemented")},getScript:function(m,p,q){var i=o.getElementsByTagName("head")[0]||o.documentElement,l=o.createElement("script");l.src=m;if(q)l.charset=q;l.async=true;if(b.isFunction(p))if(j.ie)l.onreadystatechange=function(){var h=l.readyState;if(h==="loaded"||h==="complete"){l.onreadystatechange=null;p.call(this)}};else l.onload=p;i.appendChild(l)}}});
