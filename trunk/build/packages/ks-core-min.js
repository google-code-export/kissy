/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 814 Jul 7 23:22
*/
(function(b,o,l){if(b[o]===l)b[o]={};o=b[o];var n=b.document,r=function(k,q,i,j){if(!q||!k)return k;if(i===l)i=true;var f,s,g;if(j&&(g=j.length))for(f=0;f<g;f++){s=j[f];if(s in q)if(i||!(s in k))k[s]=q[s]}else for(s in q)if(i||!(s in k))k[s]=q[s];return k},p=false,h=[],m=false;r(o,{version:"1.0.8",_init:function(){this.Env={mods:{}}},add:function(k,q){this.Env.mods[k]={name:k,fn:q};q(this);return this},ready:function(k){m||this._bindReady();p?k.call(b,this):h.push(k);return this},_bindReady:function(){var k=
this,q=n.documentElement.doScroll,i=q?"onreadystatechange":"DOMContentLoaded",j=function(){k._fireReady()};m=true;if(n.readyState==="complete")return j();if(n.addEventListener){var f=function(){n.removeEventListener(i,f,false);j()};n.addEventListener(i,f,false)}else{var s=function(){if(n.readyState==="complete"){n.detachEvent(i,s);j()}};n.attachEvent(i,s);b.attachEvent("onload",j);if(b==b.top){var g=function(){try{q("left");j()}catch(e){setTimeout(g,1)}};g()}}},_fireReady:function(){if(!p){p=true;
if(h){for(var k,q=0;k=h[q++];)k.call(b,this);h=null}}},mix:r,merge:function(){var k={},q,i=arguments.length;for(q=0;q<i;++q)r(k,arguments[q]);return k},augment:function(){var k=arguments,q=k.length-2,i=k[0],j=k[q],f=k[q+1],s=1;if(!o.isArray(f)){j=f;f=l;q++}if(!o.isBoolean(j)){j=l;q++}for(;s<q;s++)r(i.prototype,k[s].prototype||k[s],j,f);return i},extend:function(k,q,i,j){if(!q||!k)return k;var f=Object.prototype,s=q.prototype,g=function(e){function a(){}a.prototype=e;return new a}(s);k.prototype=g;
g.constructor=k;k.superclass=s;if(q!==Object&&s.constructor===f.constructor)s.constructor=q;i&&r(g,i);j&&r(k,j);return k},namespace:function(){var k=arguments.length,q=null,i,j,f;for(i=0;i<k;++i){f=(""+arguments[i]).split(".");q=this;for(j=b[f[0]]===q?1:0;j<f.length;++j)q=q[f[j]]=q[f[j]]||{}}return q},app:function(k,q){var i=b[k]||{};r(i,this,true,["_init","add","namespace"]);i._init();return r(b[k]=i,typeof q==="function"?q():q)},log:function(k,q,i){if(this.Config.debug){if(i)k=i+": "+k;if(b.console!==
l&&console.log)console[q&&console[q]?q:"log"](k)}return this},error:function(k){if(this.Config.debug)throw k;}});o._init();o.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,o){function l(a){var c=typeof a;return a===null||c!=="object"&&c!=="function"}var n=window,r=document,p=location,h=Array.prototype,m=h.indexOf,k=h.filter,q=String.prototype.trim,i=Object.prototype.toString,j=encodeURIComponent,f=decodeURIComponent,s=/^\s+|\s+$/g,g=/^(\w+)\[\]$/,e=/\S/;b.mix(b,{isUndefined:function(a){return a===o},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&i.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return i.call(a)==="[object Function]"},isArray:function(a){return i.call(a)==="[object Array]"},trim:q?function(a){return a==o?"":q.call(a)}:function(a){return a==o?"":a.toString().replace(s,"")},each:function(a,c,d){for(var t=a&&a.length||0,u=0;u<t;++u)c.call(d||n,a[u],u,a)},indexOf:m?function(a,
c){return m.call(c,a)}:function(a,c){for(var d=0,t=c.length;d<t;++d)if(c[d]===a)return d;return-1},inArray:function(a,c){return b.indexOf(a,c)>-1},makeArray:function(a){if(a===null||a===o)return[];if(b.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],d=0,t=a.length;d<t;++d)c[d]=a[d];return c}return h.slice.call(a)},filter:k?function(a,c,d){return k.call(a,c,d)}:function(a,c,d){var t=[];b.each(a,function(u,v,x){c.call(d,
u,v,x)&&t.push(u)});return t},param:function(a){if(!b.isPlainObject(a))return"";var c=[],d,t;for(d in a){t=a[d];d=j(d);if(l(t))c.push(d,"=",j(t+""),"&");else if(b.isArray(t)&&t.length)for(var u=0,v=t.length;u<v;++u)l(t[u])&&c.push(d,"[]=",j(t[u]+""),"&")}c.pop();return c.join("")},unparam:function(a,c){if(typeof a!=="string"||(a=b.trim(a)).length===0)return{};var d={};a=a.split(c||"&");for(var t,u,v,x=0,w=a.length;x<w;++x){c=a[x].split("=");t=f(c[0]);try{u=f(c[1]||"")}catch(y){u=c[1]||""}if((v=t.match(g))&&
v[1]){d[v[1]]=d[v[1]]||[];d[v[1]].push(u)}else d[t]=u}return d},later:function(a,c,d,t,u){c=c||0;t=t||{};var v=a,x=b.makeArray(u),w;if(typeof a==="string")v=t[a];v||b.error("method undefined");a=function(){v.apply(t,x)};w=d?setInterval(a,c):setTimeout(a,c);return{id:w,interval:d,cancel:function(){this.interval?clearInterval(w):clearTimeout(w)}}},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&e.test(a)){var c=r.getElementsByTagName("head")[0]||r.documentElement,d=r.createElement("script");
d.text=a;c.insertBefore(d,c.firstChild);c.removeChild(d)}}});if(p&&p.search&&p.search.indexOf("ks-debug")!==-1)b.Config.debug=true});
KISSY.add("kissy-ua",function(b){var o=navigator.userAgent,l,n={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},r=function(p){var h=0;return parseFloat(p.replace(/\./g,function(){return h++===0?".":""}))};if((l=o.match(/AppleWebKit\/([\d.]*)/))&&l[1]){n.webkit=r(l[1]);if((l=o.match(/Chrome\/([\d.]*)/))&&l[1])n.chrome=r(l[1]);else if((l=o.match(/\/([\d.]*) Safari/))&&l[1])n.safari=r(l[1]);if(/ Mobile\//.test(o))n.mobile="Apple";else if(l=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))n.mobile=
l[0]}else if((l=o.match(/Opera\/.* Version\/([\d.]*)/))&&l[1]){n.opera=r(l[1]);if(o.match(/Opera Mini[^;]*/))n.mobile=l[0]}else if((l=o.match(/MSIE\s([^;]*)/))&&l[1])n.ie=r(l[1]);else if(l=o.match(/Gecko/)){n.gecko=1;if((l=o.match(/rv:([\d.]*)/))&&l[1])n.gecko=r(l[1]);if((l=o.match(/Firefox\/([\d.]*)/))&&l[1])n.firefox=r(l[1])}b.UA=n});KISSY.add("dom",function(b){b.DOM={_isElementNode:function(o){return o&&o.nodeType===1}}});
KISSY.add("selector",function(b,o){function l(g,e){var a,c=[],d,t;e=n(e);if(b.isString(g)){g=b.trim(g);if(f.test(g)){if(g=r(g.slice(1)))c=[g]}else if(a=s.exec(g)){d=a[1];t=a[2];a=a[3];if(e=d?r(d):e)if(a)if(!d||g.indexOf(i)!==-1)c=h(a,t,e);else{if((g=r(d))&&q.hasClass(g,a))c=[g]}else if(t)c=p(e,t)}else if(b.ExternalSelector)return b.ExternalSelector(g,e);else m(g)}else if(g&&(b.isArray(g)||g.item||g.getDOMNode))c=g;else if(g&&g.nodeType)c=[g];if(c.item)c=b.makeArray(c);return c}function n(g){if(g===
o)g=k;else if(b.isString(g)&&f.test(g))g=r(g.slice(1));else if(g&&g.nodeType!==1&&g.nodeType!==9)g=null;return g}function r(g){return k.getElementById(g)}function p(g,e){return g.getElementsByTagName(e)}function h(g,e,a){a=g=a.getElementsByClassName(g);var c=0,d=0,t=g.length,u;if(e&&e!==j){a=[];for(e=e.toUpperCase();c<t;++c){u=g[c];if(u.tagName===e)a[d++]=u}}return a}function m(g){b.error("Unsupported selector: "+g)}var k=document,q=b.DOM,i=" ",j="*",f=/^#[\w-]+$/,s=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var g=k.createElement("div");g.appendChild(k.createComment(""));if(g.getElementsByTagName(j).length>0)p=function(e,a){e=e.getElementsByTagName(a);if(a===j){a=[];for(var c=0,d=0,t;t=e[c++];)if(t.nodeType===1)a[d++]=t;e=a}return e}})();k.getElementsByClassName||(h=k.querySelectorAll?function(g,e,a){return a.querySelectorAll((e?e:"")+"."+g)}:function(g,e,a){e=a.getElementsByTagName(e||j);a=[];var c=0,d=0,t=e.length,u,v;for(g=i+g+i;c<t;++c){u=e[c];if((v=u.className)&&(i+v+i).indexOf(g)>-1)a[d++]=
u}return a});b.query=l;b.get=function(g,e){return l(g,e)[0]||null};b.mix(q,{query:l,get:b.get,filter:function(g,e){var a=l(g),c,d,t,u=[];if(b.isString(e)&&(c=s.exec(e))&&!c[1]){d=c[2];t=c[3];e=function(v){return!(d&&v.tagName!==d.toUpperCase()||t&&!q.hasClass(v,t))}}if(b.isFunction(e))u=b.filter(a,e);else if(e&&b.ExternalSelector)u=b.ExternalSelector._filter(g,e);else m(e);return u},test:function(g,e){g=l(g);return q.filter(g,e).length===g.length}})});
KISSY.add("dom-class",function(b,o){function l(h,m,k,q){if(!(m=b.trim(m)))return q?false:o;h=b.query(h);var i=0,j=h.length;m=m.split(r);for(var f;i<j;i++){f=h[i];if(f.nodeType===1){f=k(f,m,m.length);if(f!==o)return f}}if(q)return false}var n=b.DOM,r=/[\.\s]\s*\.?/,p=/[\n\t]/g;b.mix(n,{hasClass:function(h,m){return l(h,m,function(k,q,i){if(k=k.className){k=" "+k+" ";for(var j=0,f=true;j<i;j++)if(k.indexOf(" "+q[j]+" ")<0){f=false;break}if(f)return true}},true)},addClass:function(h,m){l(h,m,function(k,
q,i){var j=k.className;if(j){var f=" "+j+" ";j=j;for(var s=0;s<i;s++)if(f.indexOf(" "+q[s]+" ")<0)j+=" "+q[s];k.className=b.trim(j)}else k.className=m})},removeClass:function(h,m){l(h,m,function(k,q,i){var j=k.className;if(j)if(i){j=(" "+j+" ").replace(p," ");for(var f=0,s;f<i;f++)for(s=" "+q[f]+" ";j.indexOf(s)>=0;)j=j.replace(s," ");k.className=b.trim(j)}else k.className=""})},replaceClass:function(h,m,k){n.removeClass(h,m);n.addClass(h,k)},toggleClass:function(h,m,k){var q=b.isBoolean(k),i;l(h,
m,function(j,f,s){for(var g=0,e;g<s;g++){e=f[g];i=q?!k:n.hasClass(j,e);n[i?"removeClass":"addClass"](j,e)}})}})});
KISSY.add("dom-attr",function(b,o){function l(g,e){return e&&e.nodeName.toUpperCase()===g.toUpperCase()}var n=b.UA,r=n.ie,p=r&&r<8,h=document.documentElement.textContent!==o?"textContent":"innerText",m=b.DOM,k=m._isElementNode,q=/href|src|style/,i=/href|src|colspan|rowspan/,j=/\r/g,f=/radio|checkbox/,s={readonly:"readOnly"};p&&b.mix(s,{"for":"htmlFor","class":"className"});b.mix(m,{attr:function(g,e,a){if(e=b.trim(e)){e=e.toLowerCase();e=s[e]||e;if(a===o){g=b.get(g);if(!k(g))return o;var c;q.test(e)||
(c=g[e]);if(c===o)c=g.getAttribute(e);if(p)if(i.test(e))c=g.getAttribute(e,2);else if(e==="style")c=g.style.cssText;return c===null?o:c}b.each(b.query(g),function(d){if(k(d))if(p&&e==="style")d.style.cssText=a;else d.setAttribute(e,""+a)})}},removeAttr:function(g,e){b.each(b.query(g),function(a){k(a)&&a.removeAttribute(e)})},val:function(g,e){if(e===o){var a=b.get(g);if(!k(a))return o;if(l("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(l("select",a)){var c=a.selectedIndex;
g=a.options;if(c<0)return null;else if(a.type==="select-one")return m.val(g[c]);a=[];for(var d=0,t=g.length;d<t;++d)g[d].selected&&a.push(m.val(g[d]));return a}if(n.webkit&&f.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(j,"")}b.each(b.query(g),function(u){if(l("select",u)){if(b.isNumber(e))e+="";var v=b.makeArray(e),x=u.options,w;d=0;for(t=x.length;d<t;++d){w=x[d];w.selected=b.inArray(m.val(w),v)}if(!v.length)u.selectedIndex=-1}else if(k(u))u.value=e})},
text:function(g,e){if(e===o){g=b.get(g);if(k(g))return g[h]||""}else b.each(b.query(g),function(a){if(k(a))a[h]=e})}})});
KISSY.add("dom-style",function(b,o){function l(j,f){var s=b.get(j),g=f===h?s.offsetWidth:s.offsetHeight;b.each(f===h?["Left","Right"]:["Top","Bottom"],function(e){g-=parseFloat(n._getComputedStyle(s,"padding"+e))||0;g-=parseFloat(n._getComputedStyle(s,"border"+e+"Width"))||0});return g}var n=b.DOM,r=document,p=r.documentElement,h="width",m=/width|height|top|left|right|bottom|margin|padding/i,k=/-([a-z])/ig,q=function(j,f){return f.toUpperCase()},i={};b.mix(n,{_CUSTOM_STYLES:i,_getComputedStyle:function(j,
f){var s="",g=j.ownerDocument;if(j.style)s=g.defaultView.getComputedStyle(j,null)[f];return s},css:function(j,f,s){if(b.isPlainObject(f))for(var g in f)n.css(j,g,f[g]);else{if(f.indexOf("-")>0)f=f.replace(k,q);f=i[f]||f;if(s===o){j=b.get(j);g="";if(j&&j.style){g=f.get?f.get(j):j.style[f];if(g===""&&!f.get)g=n._getComputedStyle(j,f)}return g===o?"":g}else{if(s===null||s==="")s="";else if(!isNaN(new Number(s))&&m.test(f))s+="px";(f===h||f==="height")&&parseFloat(s)<0||b.each(b.query(j),function(e){if(e&&
e.style)f.set?f.set(e,s):(e.style[f]=s)})}}},width:function(j,f){if(f===o)return l(j,h);else n.css(j,h,f)},height:function(j,f){if(f===o)return l(j,"height");else n.css(j,"height",f)},addStyleSheet:function(j,f){var s;if(f)s=b.get(f);s||(s=n.create("<style>",{id:f}));b.get("head").appendChild(s);if(s.styleSheet)s.styleSheet.cssText=j;else s.appendChild(r.createTextNode(j))}});if(p.style.cssFloat!==o)i["float"]="cssFloat";else if(p.style.styleFloat!==o)i["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,o){if(b.UA.ie){var l=b.DOM,n=document,r=n.documentElement,p=l._CUSTOM_STYLES,h=/^-?\d+(?:px)?$/i,m=/^-?\d/,k=/^auto$/i;try{if(r.style.opacity===o&&r.filters)p.opacity={get:function(i){var j=100;try{j=i.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(f){try{j=i.filters("alpha").opacity}catch(s){}}return j/100+""},set:function(i,j){i=i.style;i.zoom=1;i.filter="alpha(opacity="+j*100+")"}}}catch(q){b.log("IE filters ActiveX is disabled. ex = "+q)}if(!(n.defaultView||
{}).getComputedStyle&&r.currentStyle)l._getComputedStyle=function(i,j){var f=i.style;i=i.currentStyle[j];if(!h.test(i)&&m.test(i)||k.test(i)){var s=f.left;f.left=j==="fontSize"?"1em":i||0;i=f.pixelLeft+"px";f.left=s}return i}}});
KISSY.add("dom-offset",function(b,o){function l(e){var a=0,c=0;if(e!==m.body&&e!==k&&e[g]){e=e[g]();a=e.left+r.scrollLeft();c=e.top+r.scrollTop()}return{left:a,top:c}}function n(e,a){var c=r.css(e,f);if(c==="static")c=e.style[f]=s;var d=l(e);c=c===s;var t=j(r.css(e,"left"),10),u=j(r.css(e,"top"),10);t=b.isNumber(t)?t:c?0:e.offsetLeft;u=b.isNumber(u)?u:c?0:e.offsetTop;r.css(e,{left:t+a.left-d.left,top:u+a.top-d.top})}var r=b.DOM,p=b.UA,h=window,m=document,k=m.documentElement,q=m.compatMode==="CSS1Compat",
i=Math.max,j=parseInt,f="position",s="relative",g="getBoundingClientRect";b.mix(r,{offset:function(e,a){if(!(e=b.get(e))||!e.ownerDocument)return null;if(a===o)return l(e);n(e,a)},scrollLeft:function(){return h.pageXOffset||k.scrollLeft||m.body.scrollLeft},scrollTop:function(){return h.pageYOffset||k.scrollTop||m.body.scrollTop},docHeight:function(){return i(!q?m.body.scrollHeight:k.scrollHeight,r.viewportHeight())},docWidth:function(){return i(!q?m.body.scrollWidth:k.scrollWidth,r.viewportWidth())},
viewportHeight:function(){return p.ie?q?k.clientHeight:m.body.clientHeight:h.innerHeight},viewportWidth:function(){return!q&&!p.opera?m.body.clientWidth:p.ie?k.clientWidth:h.innerWidth}})});
KISSY.add("dom-traversal",function(b,o){function l(h,m,k,q){if(!(h=b.get(h)))return null;if(m===o)m=1;var i=null,j,f;if(b.isNumber(m)&&m>=0){if(m===0)return h;j=0;f=m;m=function(){return++j===f}}for(;h=h[k];)if(p(h)&&(!m||r.test(h,m))&&(!q||q(h))){i=h;break}return i}function n(h,m,k){var q=[];var i=h=b.get(h);if(h&&k)i=h.parentNode;if(i){k=0;for(i=i.firstChild;i;i=i.nextSibling)if(p(i)&&i!==h&&(!m||r.test(i,m)))q[k++]=i}return q}var r=b.DOM,p=r._isElementNode;b.mix(r,{parent:function(h,m){return l(h,
m,"parentNode",function(k){return k.nodeType!=11})},next:function(h,m){return l(h,m,"nextSibling")},prev:function(h,m){return l(h,m,"previousSibling")},siblings:function(h,m){return n(h,m,true)},children:function(h,m){return n(h,m)},contains:function(h,m){var k=false;if((h=b.get(h))&&(m=b.get(m)))if(h.contains)return h.contains(m);else if(h.compareDocumentPosition)return!!(h.compareDocumentPosition(m)&16);else for(;!k&&(m=m.parentNode);)k=m==h;return k}})});
KISSY.add("dom-create",function(b,o){function l(c,d){if(k(c)&&d)for(var t in d)p.attr(c,t,d[t]);return c}function n(c,d){var t=null,u;if(c&&(c.push||c.item)&&c[0]){d=d||c[0].ownerDocument;t=d.createDocumentFragment();if(c.item)c=b.makeArray(c);d=0;for(u=c.length;d<u;d++)t.appendChild(c[d])}else b.log("Unable to convert "+c+" to fragment.");return t}var r=document,p=b.DOM,h=b.UA,m=h.ie,k=p._isElementNode,q=r.createElement("div"),i=/<(\w+)/,j=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;b.mix(p,{create:function(c,
d,t){if(k(c))return c;if(!(c=b.trim(c)))return null;var u=null;u=p._creators;var v,x="div",w;if(v=j.exec(c))u=(t||r).createElement(v[1]);else{if((v=i.exec(c))&&(w=v[1])&&b.isFunction(u[w=w.toLowerCase()]))x=w;c=u[x](c,t).childNodes;u=c.length===1?c[0].parentNode.removeChild(c[0]):n(c,t||r)}return l(u,d)},_creators:{div:function(c,d){d=d?d.createElement("div"):q;d.innerHTML=c;return d}},html:function(c,d){if(d===o){c=b.get(c);if(k(c))return c.innerHTML}else b.each(b.query(c),function(t){if(k(t)){t.innerHTML=
"";d&&t.appendChild(p.create(d))}})},remove:function(c){b.each(b.query(c),function(d){k(d)&&d.parentNode&&d.parentNode.removeChild(d)})}});var f=p._creators,s=p.create,g=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,e={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(h.gecko||m){for(var a in e)(function(c){f[a]=function(d,t){return s("<"+c+">"+d+"</"+c+">",null,t)}})(e[a]);if(m){f.script=function(c,d){d=d?d.createElement("div"):q;d.innerHTML="-"+c;d.removeChild(d.firstChild);
return d};if(m<8)f.tbody=function(c,d){d=s("<table>"+c+"</table>",null,d);var t=d.children.tags("tbody")[0];d.children.length>1&&t&&!g.test(c)&&t.parentNode.removeChild(t);return d}}b.mix(f,{optgroup:f.option,th:f.td,thead:f.tbody,tfoot:f.tbody,caption:f.tbody,colgroup:f.tbody})}});
KISSY.add("dom-insertion",function(b){var o=b.DOM;b.mix(o,{insertBefore:function(l,n){l=o.create(l);n=b.get(n);l&&n&&n.parentNode&&n.parentNode.insertBefore(l,n);return l},insertAfter:function(l,n){l=o.create(l);n=b.get(n);if(l&&n&&n.parentNode)n.nextSibling?n.parentNode.insertBefore(l,n.nextSibling):n.parentNode.appendChild(l);return l}})});
KISSY.add("event",function(b,o){function l(a,c,d,t,u){if(b.isString(c))c=b.query(c);if(b.isArray(c)){b.each(c,function(v){e[a](v,d,t,u)});return true}if((d=b.trim(d))&&d.indexOf(f)>0){b.each(d.split(f),function(v){e[a](c,v,t,u)});return true}}function n(a){return h(a)?-1:a[j]}function r(a,c){if(h(a))return b.error("Text or comment node is not valid event target.");try{a[j]=c}catch(d){b.error(d)}}function p(a){try{a[j]=o;delete a[j]}catch(c){}}function h(a){return a.nodeType===3||a.nodeType===8}var m=
window,k=document,q=k.addEventListener?function(a,c,d,t){a.addEventListener&&a.addEventListener(c,d,!!t)}:function(a,c,d){a.attachEvent&&a.attachEvent("on"+c,d)},i=k.removeEventListener?function(a,c,d,t){a.removeEventListener&&a.removeEventListener(c,d,!!t)}:function(a,c,d){a.detachEvent&&a.detachEvent("on"+c,d)},j="ksEventTargetId",f=" ",s=b.now(),g={},e={EVENT_GUID:j,special:{},add:function(a,c,d,t){if(!l("add",a,c,d,t)){var u=n(a),v,x;if(!(u===-1||!c||!b.isFunction(d))){if(!u){r(a,u=s++);g[u]=
{target:a,events:{}}}x=g[u].events;v=!a.isCustomEventTarget&&e.special[c]||{};if(!x[c]){u=function(w,y){if(!w||!w.fixed){w=new b.EventObject(a,w,c);b.isPlainObject(y)&&b.mix(w,y)}v.setup&&v.setup(w);return(v.handle||e._handle)(a,w,x[c].listeners,t)};x[c]={handle:u,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(c,u);else q(a,v.fix||c,u,v.capture)}x[c].listeners.push(d)}}},remove:function(a,c,d){if(!l("remove",a,c,d)){var t=n(a),u,v,x,w,y,z;if(t!==-1)if(t&&(u=g[t]))if(u.target===a){u=
u.events||{};if(v=u[c]){x=v.listeners;y=x.length;if(b.isFunction(d)&&y&&b.inArray(d,x)){z=[];for(w=0;w<y;++w)d!==x[w]&&z.push(x[w]);y=z.length}if(d===o||y===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(c,v.handle);else i(a,c,v.handle);delete u[c]}}if(c===o||b.isEmptyObject(u)){for(c in u)e.remove(a,c);delete g[t];p(a)}}}},_handle:function(a,c,d,t){var u,v=0,x=d.length;for(t=t||a;v<x;++v){u=d[v].call(t,c);if(u===false&&a.isCustomEventTarget||c.isImmediatePropagationStopped)break}return u},
_getCache:function(a){return g[a]},_simpleAdd:q,_simpleRemove:i};e.on=e.add;b.Event=e;m.attachEvent&&!m.addEventListener&&m.attachEvent("onunload",function(){var a,c;for(a in g)if(c=g[a].target)try{e.remove(c)}catch(d){}})});
KISSY.add("event-object",function(b,o){function l(p,h,m){this.currentTarget=p;this.originalEvent=h||{};if(h){this.type=h.type;this._fix()}else{this.type=m;this.target=p}this.fixed=true}var n=document,r="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(l.prototype,
{_fix:function(){for(var p=this.originalEvent,h=r.length,m;h;){m=r[--h];this[m]=p[m]}if(!this.target)this.target=this.srcElement||n;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===o&&this.clientX!==o){p=n.documentElement;h=n.body;this.pageX=this.clientX+(p&&p.scrollLeft||h&&h.scrollLeft||0)-(p&&p.clientLeft||h&&h.clientLeft||0);this.pageY=this.clientY+
(p&&p.scrollTop||h&&h.scrollTop||0)-(p&&p.clientTop||h&&h.clientTop||0)}if(this.which===o)this.which=this.charCode!==o?this.charCode:this.keyCode;if(this.metaKey===o)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==o)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var p=this.originalEvent;if(p.preventDefault)p.preventDefault();else p.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var p=this.originalEvent;if(p.stopPropagation)p.stopPropagation();
else p.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var p=this.originalEvent;p.stopImmediatePropagation?p.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(p){p?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=l});
KISSY.add("event-target",function(b,o){var l=b.Event,n=l.EVENT_GUID;b.EventTarget={isCustomEventTarget:true,fire:function(r,p){if((r=((l._getCache(this[n]||-1)||{}).events||{})[r])&&b.isFunction(r.handle))return r.handle(o,p)},on:function(r,p,h){l.add(this,r,p,h)},detach:function(r,p){l.remove(this,r,p)}}});
KISSY.add("event-mouseenter",function(b){var o=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(l){o.special[l.name]={fix:l.fix,setup:function(n){n.type=l.name},handle:function(n,r,p){var h=r.relatedTarget;try{for(;h&&h!==n;)h=h.parentNode;h!==n&&o._handle(n,r,p)}catch(m){}}}})});
KISSY.add("event-focusin",function(b){var o=b.Event;document.addEventListener&&b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(l){o.special[l.name]={fix:l.fix,capture:true,setup:function(n){n.type=l.name}}})});
KISSY.add("node",function(b){function o(n,r,p){var h;if(!(this instanceof o))return new o(n,r,p);if(!n)return null;if(l._isElementNode(n))h=n;else if(typeof n==="string")h=l.create(n,r,p);this[0]=h}var l=b.DOM;b.augment(o,{length:1,getDOMNode:function(){return this[0]}});b.one=function(n,r){return new o(b.get(n,r))};b.Node=o});
KISSY.add("nodelist",function(b){function o(r){if(!(this instanceof o))return new o(r);n.push.apply(this,r||[])}var l=b.DOM,n=Array.prototype;b.mix(o.prototype,{length:0,item:function(r){var p=null;if(l._isElementNode(this[r]))p=new b.Node(this[r]);return p},getDOMNodes:function(){return n.slice.call(this)},each:function(r,p){for(var h=this.length,m=0,k;m<h;++m){k=new b.Node(this[m]);r.call(p||k,k,m,this)}return this}});b.all=function(r,p){return new o(b.query(r,p,true))};b.NodeList=o});
KISSY.add("node-attach",function(b,o){function l(f,s){b.each(f,function(g){b.each([p,h],function(e,a){e[g]=function(c){switch(s){case q:return function(d,t){var u=this[a?k:m]();if(t===o)return c(u,d);else{c(u,d,t);return this}};case i:return function(d){var t=this[a?k:m]();if(d===o)return c(t);else{c(t,d);return this}};case j:return function(){var d=this[a?k:m]();return(d=c.apply(n,[d].concat(b.makeArray(arguments))))?new b[d.length?"NodeList":"Node"](d):null};default:return function(){var d=this[a?
k:m]();d=c.apply(n,[d].concat(b.makeArray(arguments)));return d===o?this:d}}}(n[g])})})}var n=b.DOM,r=b.Event,p=b.Node.prototype,h=b.NodeList.prototype,m="getDOMNode",k=m+"s",q=1,i=2,j=4;b.mix(p,{one:function(f){return b.one(f,this[0])},all:function(f){return b.all(f,this[0])}});l(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);l(["attr","removeAttr"],q);l(["val","text"],i);l(["css"],q);l(["width","height"],i);l(["offset"],i);l(["parent","next","prev","siblings","children"],j);
l(["contains"]);l(["html"],i);l(["remove"]);l(["insertBefore","insertAfter"],j);b.mix(p,{append:function(f){if(f=n.create(f))this[0].appendChild(f);return this},appendTo:function(f){if((f=b.get(f))&&f.appendChild)f.appendChild(this[0]);return this}});b.each([p,h],function(f){b.mix(f,b.EventTarget);f._addEvent=function(s,g){for(var e=0,a=this.length;e<a;e++)r._simpleAdd(this[e],s,g)};f._removeEvent=function(s,g){for(var e=0,a=this.length;e<a;e++)r._simpleRemove(this[e],s,g)};delete f.fire})});
KISSY.add("json",function(b){function o(i){return i<10?"0"+i:i}function l(i){p.lastIndex=0;return p.test(i)?'"'+i.replace(p,function(j){var f=k[j];return typeof f==="string"?f:"\\u"+("0000"+j.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"'}function n(i,j){var f,s,g=h,e,a=j[i];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(i);if(typeof q==="function")a=q.call(j,i,a);switch(typeof a){case "string":return l(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";h+=m;e=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(i=0;i<s;i+=1)e[i]=n(i,a)||"null";j=e.length===0?"[]":h?"[\n"+h+e.join(",\n"+h)+"\n"+g+"]":"["+e.join(",")+"]";h=g;return j}if(q&&typeof q==="object"){s=q.length;for(i=0;i<s;i+=1){f=q[i];if(typeof f==="string")if(j=n(f,a))e.push(l(f)+(h?": ":":")+j)}}else for(f in a)if(Object.hasOwnProperty.call(a,f))if(j=n(f,a))e.push(l(f)+(h?": ":":")+j);j=e.length===0?"{}":h?"{\n"+h+e.join(",\n"+h)+
"\n"+g+"}":"{"+e.join(",")+"}";h=g;return j}}b=b.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+o(this.getUTCMonth()+1)+"-"+o(this.getUTCDate())+"T"+o(this.getUTCHours())+":"+o(this.getUTCMinutes())+":"+o(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,m,k={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q;if(typeof b.stringify!=="function")b.stringify=function(i,j,f){var s;m=h="";if(typeof f==="number")for(s=0;s<f;s+=1)m+=" ";else if(typeof f==="string")m=f;if((q=j)&&typeof j!=="function"&&(typeof j!=="object"||typeof j.length!=="number"))throw new Error("JSON.stringify");return n("",
{"":i})};if(typeof b.parse!=="function")b.parse=function(i,j){function f(s,g){var e,a,c=s[g];if(c&&typeof c==="object")for(e in c)if(Object.hasOwnProperty.call(c,e)){a=f(c,e);if(a!==undefined)c[e]=a;else delete c[e]}return j.call(s,g,c)}i=String(i);r.lastIndex=0;if(r.test(i))i=i.replace(r,function(s){return"\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(i.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){i=eval("("+i+")");return typeof j==="function"?f({"":i},""):i}throw new SyntaxError("JSON.parse");}});
KISSY.add("ajax",function(b){var o=document,l=b.UA;b.Ajax={request:function(){b.error("not implemented")},getScript:function(n,r,p){var h=o.getElementsByTagName("head")[0]||o.documentElement,m=o.createElement("script");m.src=n;if(p)m.charset=p;m.async=true;if(b.isFunction(r))if(l.ie)m.onreadystatechange=function(){var k=m.readyState;if(k==="loaded"||k==="complete"){m.onreadystatechange=null;r.call(this)}};else m.onload=r;h.appendChild(m)}}});
KISSY.add("cookie",function(b){function o(p){return typeof p==="string"&&p!==""}var l=document,n=encodeURIComponent,r=decodeURIComponent;b.Cookie={get:function(p){var h;if(o(p))if(p=l.cookie.match("(?:^| )"+p+"(?:(?:=([^;]*))|;|$)"))h=p[1]?r(p[1]):"";return h},set:function(p,h,m,k,q,i){h=n(h);var j=m;if(typeof j==="number"){j=new Date;j.setTime(j.getTime()+m*864E5)}if(j instanceof Date)h+="; expires="+j.toUTCString();if(o(k))h+="; domain="+k;if(o(q))h+="; path="+q;if(i)h+="; secure";l.cookie=p+"="+
h},remove:function(p){this.set(p,"",0)}}});
