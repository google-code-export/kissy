/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 521 Apr 5 12:27
*/
if(typeof YAHOO=="undefined"||!YAHOO)var YAHOO={};YAHOO.namespace=function(){var a=arguments,h=null,f,e,l;for(f=0;f<a.length;f+=1){l=(""+a[f]).split(".");h=YAHOO;for(e=l[0]=="YAHOO"?1:0;e<l.length;e+=1){h[l[e]]=h[l[e]]||{};h=h[l[e]]}}return h};YAHOO.log=function(a,h,f){var e=YAHOO.widget.Logger;return e&&e.log?e.log(a,h,f):false};
YAHOO.register=function(a,h,f){var e=YAHOO.env.modules,l,g,j;e[a]||(e[a]={versions:[],builds:[]});e=e[a];l=f.version;f=f.build;g=YAHOO.env.listeners;e.name=a;e.version=l;e.build=f;e.versions.push(l);e.builds.push(f);e.mainClass=h;for(j=0;j<g.length;j+=1)g[j](e);if(h){h.VERSION=l;h.BUILD=f}else YAHOO.log("mainClass is undefined for module "+a,"warn")};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};
YAHOO.env.ua=function(){var a=function(l){var g=0;return parseFloat(l.replace(/\./g,function(){return g++==1?"":"."}))},h={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:navigator.cajaVersion,secure:false,os:null},f=navigator&&navigator.userAgent,e=window&&window.location;e=e&&e.href;h.secure=e&&e.toLowerCase().indexOf("https")===0;if(f){if(/windows|win32/i.test(f))h.os="windows";else if(/macintosh/i.test(f))h.os="macintosh";if(/KHTML/.test(f))h.webkit=1;if((e=f.match(/AppleWebKit\/([^\s]*)/))&&
e[1]){h.webkit=a(e[1]);if(/ Mobile\//.test(f))h.mobile="Apple";else if(e=f.match(/NokiaN[^\/]*/))h.mobile=e[0];if(e=f.match(/AdobeAIR\/([^\s]*)/))h.air=e[0]}if(!h.webkit)if((e=f.match(/Opera[\s\/]([^\s]*)/))&&e[1]){h.opera=a(e[1]);if(e=f.match(/Opera Mini[^;]*/))h.mobile=e[0]}else if((e=f.match(/MSIE\s([^;]*)/))&&e[1])h.ie=a(e[1]);else if(e=f.match(/Gecko\/([^\s]*)/)){h.gecko=1;if((e=f.match(/rv:([^\s\)]*)/))&&e[1])h.gecko=a(e[1])}}return h}();
(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var a=YAHOO_config.listener,h=YAHOO.env.listeners,f=true,e;if(a){for(e=0;e<h.length;e++)if(h[e]==a){f=false;break}f&&h.push(a)}}})();YAHOO.lang=YAHOO.lang||{};
(function(){var a=YAHOO.lang,h=Object.prototype,f=[],e=["toString","valueOf"],l={isArray:function(g){return h.toString.apply(g)==="[object Array]"},isBoolean:function(g){return typeof g==="boolean"},isFunction:function(g){return typeof g==="function"||h.toString.apply(g)==="[object Function]"},isNull:function(g){return g===null},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isObject:function(g){return g&&(typeof g==="object"||a.isFunction(g))||false},isString:function(g){return typeof g===
"string"},isUndefined:function(g){return typeof g==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(g,j){var k,b,c;for(k=0;k<e.length;k+=1){b=e[k];c=j[b];if(a.isFunction(c)&&c!=h[b])g[b]=c}}:function(){},extend:function(g,j,k){if(!j||!g)throw new Error("extend failed, please check that all dependencies are included.");var b=function(){},c;b.prototype=j.prototype;g.prototype=new b;g.prototype.constructor=g;g.superclass=j.prototype;if(j.prototype.constructor==h.constructor)j.prototype.constructor=
j;if(k){for(c in k)if(a.hasOwnProperty(k,c))g.prototype[c]=k[c];a._IEEnumFix(g.prototype,k)}},augmentObject:function(g,j){if(!j||!g)throw new Error("Absorb failed, verify dependencies.");var k=arguments,b,c=k[2];if(c&&c!==true)for(b=2;b<k.length;b+=1)g[k[b]]=j[k[b]];else{for(b in j)if(c||!(b in g))g[b]=j[b];a._IEEnumFix(g,j)}},augmentProto:function(g,j){if(!j||!g)throw new Error("Augment failed, verify dependencies.");var k=[g.prototype,j.prototype],b;for(b=2;b<arguments.length;b+=1)k.push(arguments[b]);
a.augmentObject.apply(this,k)},dump:function(g,j){var k,b,c=[];if(a.isObject(g))if(g instanceof Date||"nodeType"in g&&"tagName"in g)return g;else{if(a.isFunction(g))return"f(){...}"}else return g+"";j=a.isNumber(j)?j:3;if(a.isArray(g)){c.push("[");k=0;for(b=g.length;k<b;k+=1){a.isObject(g[k])?c.push(j>0?a.dump(g[k],j-1):"{...}"):c.push(g[k]);c.push(", ")}c.length>1&&c.pop();c.push("]")}else{c.push("{");for(k in g)if(a.hasOwnProperty(g,k)){c.push(k+" => ");a.isObject(g[k])?c.push(j>0?a.dump(g[k],j-
1):"{...}"):c.push(g[k]);c.push(", ")}c.length>1&&c.pop();c.push("}")}return c.join("")},substitute:function(g,j,k){for(var b,c,n,m,o,q=[],r;;){b=g.lastIndexOf("{");if(b<0)break;c=g.indexOf("}",b);if(b+1>=c)break;m=r=g.substring(b+1,c);o=null;n=m.indexOf(" ");if(n>-1){o=m.substring(n+1);m=m.substring(0,n)}n=j[m];if(k)n=k(m,n,o);if(a.isObject(n))if(a.isArray(n))n=a.dump(n,parseInt(o,10));else{o=o||"";m=o.indexOf("dump");if(m>-1)o=o.substring(4);r=n.toString();n=r==="[object Object]"||m>-1?a.dump(n,
parseInt(o,10)):r}else if(!a.isString(n)&&!a.isNumber(n)){n="~-"+q.length+"-~";q[q.length]=r}g=g.substring(0,b)+n+g.substring(c+1)}for(b=q.length-1;b>=0;b-=1)g=g.replace(new RegExp("~-"+b+"-~"),"{"+q[b]+"}","g");return g},trim:function(g){try{return g.replace(/^\s+|\s+$/g,"")}catch(j){return g}},merge:function(){var g={},j=arguments,k=j.length,b;for(b=0;b<k;b+=1)a.augmentObject(g,j[b],true);return g},later:function(g,j,k,b,c){g=g||0;j=j||{};var n=k,m=b,o;if(a.isString(k))n=j[k];if(!n)throw new TypeError("method undefined");
if(m&&!a.isArray(m))m=[b];k=function(){n.apply(j,m||f)};o=c?setInterval(k,g):setTimeout(k,g);return{interval:c,cancel:function(){this.interval?clearInterval(o):clearTimeout(o)}}},isValue:function(g){return a.isObject(g)||a.isString(g)||a.isNumber(g)||a.isBoolean(g)}};a.hasOwnProperty=h.hasOwnProperty?function(g,j){return g&&g.hasOwnProperty(j)}:function(g,j){return!a.isUndefined(g[j])&&g.constructor.prototype[j]!==g[j]};l.augmentObject(a,l,true);YAHOO.util.Lang=a;a.augment=a.augmentProto;YAHOO.augment=
a.augmentProto;YAHOO.extend=a.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var a=YAHOO.util,h=YAHOO.lang,f=YAHOO.env.ua,e=YAHOO.lang.trim,l={},g={},j=/^t(?:able|d|h)$/i,k=/color$/i,b=window.document,c=b.documentElement,n=f.opera,m=f.webkit,o=f.gecko,q=f.ie;a.Dom={CUSTOM_ATTRIBUTES:!c.hasAttribute?{"for":"htmlFor","class":"className"}:{htmlFor:"for",className:"class"},DOT_ATTRIBUTES:{},get:function(d){var i,p,s,t;if(d){if(d.nodeType||d.item)return d;if(typeof d==="string"){i=d;s=(d=b.getElementById(d))?d.attributes:
null;if(d&&s&&s.id&&s.id.value===i)return d;else if(d&&b.all){d=null;p=b.all[i];s=0;for(t=p.length;s<t;++s)if(p[s].id===i)return p[s]}return d}if(YAHOO.util.Element&&d instanceof YAHOO.util.Element)d=d.get("element");if("length"in d){i=[];s=0;for(t=d.length;s<t;++s)i[i.length]=a.Dom.get(d[s]);return i}return d}return null},getComputedStyle:function(d,i){if(window.getComputedStyle)return d.ownerDocument.defaultView.getComputedStyle(d,null)[i];else if(d.currentStyle)return a.Dom.IE_ComputedStyle.get(d,
i)},getStyle:function(d,i){return a.Dom.batch(d,a.Dom._getStyle,i)},_getStyle:function(){if(window.getComputedStyle)return function(d,i){i=i==="float"?(i="cssFloat"):a.Dom._toCamel(i);var p=d.style[i];if(!p)if(d=d.ownerDocument.defaultView.getComputedStyle(d,null))p=d[i];return p};else if(c.currentStyle)return function(d,i){var p;switch(i){case "opacity":p=100;try{p=d.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{p=d.filters("alpha").opacity}catch(t){}}return p/100;case "float":i=
"styleFloat";default:i=a.Dom._toCamel(i);p=d.currentStyle?d.currentStyle[i]:null;return d.style[i]||p}}}(),setStyle:function(d,i,p){a.Dom.batch(d,a.Dom._setStyle,{prop:i,val:p})},_setStyle:function(){return q?function(d,i){var p=a.Dom._toCamel(i.prop);i=i.val;if(d)switch(p){case "opacity":if(h.isString(d.style.filter)){d.style.filter="alpha(opacity="+i*100+")";if(!d.currentStyle||!d.currentStyle.hasLayout)d.style.zoom=1}break;case "float":p="styleFloat";default:d.style[p]=i}}:function(d,i){var p=
a.Dom._toCamel(i.prop);i=i.val;if(d){if(p=="float")p="cssFloat";d.style[p]=i}}}(),getXY:function(d){return a.Dom.batch(d,a.Dom._getXY)},_canPosition:function(d){return a.Dom._getStyle(d,"display")!=="none"&&a.Dom._inDoc(d)},_getXY:function(){return b.documentElement.getBoundingClientRect?function(d){var i,p,s,t,v,x,z=Math.floor;p=false;if(a.Dom._canPosition(d)){p=d.getBoundingClientRect();s=d.ownerDocument;d=a.Dom.getDocumentScrollLeft(s);i=a.Dom.getDocumentScrollTop(s);p=[z(p.left),z(p.top)];if(q&&
f.ie<8){v=t=2;x=s.compatMode;if(f.ie===6)if(x!=="BackCompat")v=t=0;if(x==="BackCompat"){x=r(s.documentElement,"borderLeftWidth");s=r(s.documentElement,"borderTopWidth");if(x!=="medium")t=parseInt(x,10);if(s!=="medium")v=parseInt(s,10)}p[0]-=t;p[1]-=v}if(i||d){p[0]+=d;p[1]+=i}p[0]=z(p[0]);p[1]=z(p[1])}return p}:function(d){var i,p,s,t=false,v=d;if(a.Dom._canPosition(d)){t=[d.offsetLeft,d.offsetTop];i=a.Dom.getDocumentScrollLeft(d.ownerDocument);p=a.Dom.getDocumentScrollTop(d.ownerDocument);for(s=o||
f.webkit>519?true:false;v=v.offsetParent;){t[0]+=v.offsetLeft;t[1]+=v.offsetTop;if(s)t=a.Dom._calcBorders(v,t)}if(a.Dom._getStyle(d,"position")!=="fixed"){for(v=d;(v=v.parentNode)&&v.tagName;){d=v.scrollTop;s=v.scrollLeft;if(o&&a.Dom._getStyle(v,"overflow")!=="visible")t=a.Dom._calcBorders(v,t);if(d||s){t[0]-=s;t[1]-=d}}t[0]+=i;t[1]+=p}else if(n){t[0]-=i;t[1]-=p}else if(m||o){t[0]+=i;t[1]+=p}t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1])}return t}}(),getX:function(d){return a.Dom.batch(d,function(i){return a.Dom.getXY(i)[0]},
a.Dom,true)},getY:function(d){return a.Dom.batch(d,function(i){return a.Dom.getXY(i)[1]},a.Dom,true)},setXY:function(d,i,p){a.Dom.batch(d,a.Dom._setXY,{pos:i,noRetry:p})},_setXY:function(d,i){var p=a.Dom._getStyle(d,"position"),s=a.Dom.setStyle,t=i.pos;i=i.noRetry;var v=[parseInt(a.Dom.getComputedStyle(d,"left"),10),parseInt(a.Dom.getComputedStyle(d,"top"),10)],x;if(p=="static"){p="relative";s(d,"position",p)}x=a.Dom._getXY(d);if(!t||x===false)return false;if(isNaN(v[0]))v[0]=p=="relative"?0:d.offsetLeft;
if(isNaN(v[1]))v[1]=p=="relative"?0:d.offsetTop;t[0]!==null&&s(d,"left",t[0]-x[0]+v[0]+"px");t[1]!==null&&s(d,"top",t[1]-x[1]+v[1]+"px");if(!i){p=a.Dom._getXY(d);if(t[0]!==null&&p[0]!=t[0]||t[1]!==null&&p[1]!=t[1])a.Dom._setXY(d,{pos:t,noRetry:true})}},setX:function(d,i){a.Dom.setXY(d,[i,null])},setY:function(d,i){a.Dom.setXY(d,[null,i])},getRegion:function(d){return a.Dom.batch(d,function(i){var p=false;if(a.Dom._canPosition(i))p=a.Region.getRegion(i);return p},a.Dom,true)},getClientWidth:function(){return a.Dom.getViewportWidth()},
getClientHeight:function(){return a.Dom.getViewportHeight()},getElementsByClassName:function(d,i,p,s,t,v){i=i||"*";p=p?a.Dom.get(p):b;if(!p)return[];var x=[];i=p.getElementsByTagName(i);p=a.Dom.hasClass;for(var z=0,C=i.length;z<C;++z)if(p(i[z],d))x[x.length]=i[z];s&&a.Dom.batch(x,s,t,v);return x},hasClass:function(d,i){return a.Dom.batch(d,a.Dom._hasClass,i)},_hasClass:function(d,i){var p=false;if(d&&i){d=a.Dom._getAttribute(d,"className")||"";p=i.exec?i.test(d):i&&(" "+d+" ").indexOf(" "+i+" ")>
-1}return p},addClass:function(d,i){return a.Dom.batch(d,a.Dom._addClass,i)},_addClass:function(d,i){var p=false,s;if(d&&i){s=a.Dom._getAttribute(d,"className")||"";if(!a.Dom._hasClass(d,i)){a.Dom.setAttribute(d,"className",e(s+" "+i));p=true}}return p},removeClass:function(d,i){return a.Dom.batch(d,a.Dom._removeClass,i)},_removeClass:function(d,i){var p=false,s;if(d&&i){s=a.Dom._getAttribute(d,"className")||"";a.Dom.setAttribute(d,"className",s.replace(a.Dom._getClassRegex(i),""));i=a.Dom._getAttribute(d,
"className");if(s!==i){a.Dom.setAttribute(d,"className",e(i));p=true;if(a.Dom._getAttribute(d,"className")===""){s=d.hasAttribute&&d.hasAttribute("class")?"class":"className";d.removeAttribute(s)}}}return p},replaceClass:function(d,i,p){return a.Dom.batch(d,a.Dom._replaceClass,{from:i,to:p})},_replaceClass:function(d,i){var p,s,t=false;if(d&&i){p=i.from;if(s=i.to)if(p){if(p!==s){i=a.Dom._getAttribute(d,"className")||"";p=(" "+i.replace(a.Dom._getClassRegex(p)," "+s)).split(a.Dom._getClassRegex(s));
p.splice(1,0," "+s);a.Dom.setAttribute(d,"className",e(p.join("")));t=true}}else t=a.Dom._addClass(d,i.to);else t=false}return t},generateId:function(d,i){i=i||"yui-gen";var p=function(s){if(s&&s.id)return s.id;var t=i+YAHOO.env._id_counter++;if(s){if(s.ownerDocument&&s.ownerDocument.getElementById(t))return a.Dom.generateId(s,t+i);s.id=t}return t};return a.Dom.batch(d,p,a.Dom,true)||p.apply(a.Dom,arguments)},isAncestor:function(d,i){d=a.Dom.get(d);i=a.Dom.get(i);var p=false;if(d&&i&&d.nodeType&&
i.nodeType)if(d.contains&&d!==i)p=d.contains(i);else if(d.compareDocumentPosition)p=!!(d.compareDocumentPosition(i)&16);return p},inDocument:function(d,i){return a.Dom._inDoc(a.Dom.get(d),i)},_inDoc:function(d,i){var p=false;if(d&&d.tagName){i=i||d.ownerDocument;p=a.Dom.isAncestor(i.documentElement,d)}return p},getElementsBy:function(d,i,p,s,t,v,x){i=i||"*";p=p?a.Dom.get(p):b;if(!p)return[];var z=[];i=p.getElementsByTagName(i);p=0;for(var C=i.length;p<C;++p)if(d(i[p]))if(x){z=i[p];break}else z[z.length]=
i[p];s&&a.Dom.batch(z,s,t,v);return z},getElementBy:function(d,i,p){return a.Dom.getElementsBy(d,i,p,null,null,null,true)},batch:function(d,i,p,s){var t=[];s=s?p:window;if((d=d&&(d.tagName||d.item)?d:a.Dom.get(d))&&i){if(d.tagName||d.length===undefined)return i.call(s,d,p);for(var v=0;v<d.length;++v)t[t.length]=i.call(s,d[v],p)}else return false;return t},getDocumentHeight:function(){return Math.max(b.compatMode!="CSS1Compat"||m?b.body.scrollHeight:c.scrollHeight,a.Dom.getViewportHeight())},getDocumentWidth:function(){return Math.max(b.compatMode!=
"CSS1Compat"||m?b.body.scrollWidth:c.scrollWidth,a.Dom.getViewportWidth())},getViewportHeight:function(){var d=self.innerHeight,i=b.compatMode;if((i||q)&&!n)d=i=="CSS1Compat"?c.clientHeight:b.body.clientHeight;return d},getViewportWidth:function(){var d=self.innerWidth,i=b.compatMode;if(i||q)d=i=="CSS1Compat"?c.clientWidth:b.body.clientWidth;return d},getAncestorBy:function(d,i){for(;d=d.parentNode;)if(a.Dom._testElement(d,i))return d;return null},getAncestorByClassName:function(d,i){d=a.Dom.get(d);
if(!d)return null;return a.Dom.getAncestorBy(d,function(p){return a.Dom.hasClass(p,i)})},getAncestorByTagName:function(d,i){d=a.Dom.get(d);if(!d)return null;return a.Dom.getAncestorBy(d,function(p){return p.tagName&&p.tagName.toUpperCase()==i.toUpperCase()})},getPreviousSiblingBy:function(d,i){for(;d;){d=d.previousSibling;if(a.Dom._testElement(d,i))return d}return null},getPreviousSibling:function(d){d=a.Dom.get(d);if(!d)return null;return a.Dom.getPreviousSiblingBy(d)},getNextSiblingBy:function(d,
i){for(;d;){d=d.nextSibling;if(a.Dom._testElement(d,i))return d}return null},getNextSibling:function(d){d=a.Dom.get(d);if(!d)return null;return a.Dom.getNextSiblingBy(d)},getFirstChildBy:function(d,i){return(a.Dom._testElement(d.firstChild,i)?d.firstChild:null)||a.Dom.getNextSiblingBy(d.firstChild,i)},getFirstChild:function(d){d=a.Dom.get(d);if(!d)return null;return a.Dom.getFirstChildBy(d)},getLastChildBy:function(d,i){if(!d)return null;return(a.Dom._testElement(d.lastChild,i)?d.lastChild:null)||
a.Dom.getPreviousSiblingBy(d.lastChild,i)},getLastChild:function(d){d=a.Dom.get(d);return a.Dom.getLastChildBy(d)},getChildrenBy:function(d,i){var p=(d=a.Dom.getFirstChildBy(d,i))?[d]:[];a.Dom.getNextSiblingBy(d,function(s){if(!i||i(s))p[p.length]=s;return false});return p},getChildren:function(d){d=a.Dom.get(d);return a.Dom.getChildrenBy(d)},getDocumentScrollLeft:function(d){d=d||b;return Math.max(d.documentElement.scrollLeft,d.body.scrollLeft)},getDocumentScrollTop:function(d){d=d||b;return Math.max(d.documentElement.scrollTop,
d.body.scrollTop)},insertBefore:function(d,i){d=a.Dom.get(d);i=a.Dom.get(i);if(!d||!i||!i.parentNode)return null;return i.parentNode.insertBefore(d,i)},insertAfter:function(d,i){d=a.Dom.get(d);i=a.Dom.get(i);if(!d||!i||!i.parentNode)return null;return i.nextSibling?i.parentNode.insertBefore(d,i.nextSibling):i.parentNode.appendChild(d)},getClientRegion:function(){var d=a.Dom.getDocumentScrollTop(),i=a.Dom.getDocumentScrollLeft(),p=a.Dom.getViewportWidth()+i,s=a.Dom.getViewportHeight()+d;return new a.Region(d,
p,s,i)},setAttribute:function(d,i,p){a.Dom.batch(d,a.Dom._setAttribute,{attr:i,val:p})},_setAttribute:function(d,i){var p=a.Dom._toCamel(i.attr);i=i.val;if(d&&d.setAttribute)if(a.Dom.DOT_ATTRIBUTES[p])d[p]=i;else{p=a.Dom.CUSTOM_ATTRIBUTES[p]||p;d.setAttribute(p,i)}},getAttribute:function(d,i){return a.Dom.batch(d,a.Dom._getAttribute,i)},_getAttribute:function(d,i){var p;i=a.Dom.CUSTOM_ATTRIBUTES[i]||i;if(d&&d.getAttribute)p=d.getAttribute(i,2);return p},_toCamel:function(d){function i(p,s){return s.toUpperCase()}
return l[d]||(l[d]=d.indexOf("-")===-1?d:d.replace(/-([a-z])/gi,i))},_getClassRegex:function(d){var i;if(d!==undefined)if(d.exec)i=d;else{i=g[d];if(!i){d=d.replace(a.Dom._patterns.CLASS_RE_TOKENS,"\\$1");i=g[d]=new RegExp("(?:^|\\s)"+d+"(?= |$)","g")}}return i},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(d,i){return d&&d.nodeType==1&&(!i||i(d))},_calcBorders:function(d,i){var p=parseInt(a.Dom.getComputedStyle(d,"borderTopWidth"),10)||
0,s=parseInt(a.Dom.getComputedStyle(d,"borderLeftWidth"),10)||0;if(o)if(j.test(d.tagName))s=p=0;i[0]+=s;i[1]+=p;return i}};var r=a.Dom.getComputedStyle;if(f.opera)a.Dom.getComputedStyle=function(d,i){d=r(d,i);if(k.test(i))d=a.Dom.Color.toRGB(d);return d};if(f.webkit)a.Dom.getComputedStyle=function(d,i){d=r(d,i);if(d==="rgba(0, 0, 0, 0)")d="transparent";return d};if(f.ie&&f.ie>=8&&b.documentElement.hasAttribute)a.Dom.DOT_ATTRIBUTES.type=true})();
YAHOO.util.Region=function(a,h,f,e){this.y=this.top=a;this[1]=a;this.right=h;this.bottom=f;this.x=this.left=e;this[0]=e;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(a){return a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom};YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};
YAHOO.util.Region.prototype.intersect=function(a){var h=Math.max(this.top,a.top),f=Math.min(this.right,a.right),e=Math.min(this.bottom,a.bottom);a=Math.max(this.left,a.left);return e>=h&&f>=a?new YAHOO.util.Region(h,f,e,a):null};YAHOO.util.Region.prototype.union=function(a){var h=Math.min(this.top,a.top),f=Math.max(this.right,a.right),e=Math.max(this.bottom,a.bottom);a=Math.min(this.left,a.left);return new YAHOO.util.Region(h,f,e,a)};
YAHOO.util.Region.prototype.toString=function(){return"Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}"};YAHOO.util.Region.getRegion=function(a){var h=YAHOO.util.Dom.getXY(a);return new YAHOO.util.Region(h[1],h[0]+a.offsetWidth,h[1]+a.offsetHeight,h[0])};YAHOO.util.Point=function(a,h){if(YAHOO.lang.isArray(a)){h=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,h,a,h,a)};
YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);
(function(){var a=YAHOO.util,h=/^width|height$/,f=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,e={get:function(g,j){var k="";k=g.currentStyle[j];return k=j==="opacity"?a.Dom.getStyle(g,"opacity"):!k||k.indexOf&&k.indexOf("px")>-1?k:a.Dom.IE_COMPUTED[j]?a.Dom.IE_COMPUTED[j](g,j):f.test(k)?a.Dom.IE.ComputedStyle.getPixel(g,j):k},getOffset:function(g,j){var k=g.currentStyle[j],b=j.charAt(0).toUpperCase()+j.substr(1),c="offset"+b,n="pixel"+b;b="";if(k=="auto"){b=
k=g[c];if(h.test(j)){g.style[j]=k;if(g[c]>k)b=k-(g[c]-k);g.style[j]="auto"}}else{if(!g.style[n]&&!g.style[j])g.style[j]=k;b=g.style[n]}return b+"px"},getBorderWidth:function(g,j){var k=null;if(!g.currentStyle.hasLayout)g.style.zoom=1;switch(j){case "borderTopWidth":k=g.clientTop;break;case "borderBottomWidth":k=g.offsetHeight-g.clientHeight-g.clientTop;break;case "borderLeftWidth":k=g.clientLeft;break;case "borderRightWidth":k=g.offsetWidth-g.clientWidth-g.clientLeft;break}return k+"px"},getPixel:function(g,
j){var k=null,b=g.currentStyle.right;g.style.right=g.currentStyle[j];k=g.style.pixelRight;g.style.right=b;return k+"px"},getMargin:function(g,j){return g.currentStyle[j]=="auto"?"0px":a.Dom.IE.ComputedStyle.getPixel(g,j)},getVisibility:function(g,j){for(var k;(k=g.currentStyle)&&k[j]=="inherit";)g=g.parentNode;return k?k[j]:"visible"},getColor:function(g,j){return a.Dom.Color.toRGB(g.currentStyle[j])||"transparent"},getBorderColor:function(g,j){g=g.currentStyle;return a.Dom.Color.toRGB(a.Dom.Color.toHex(g[j]||
g.color))}},l={};l.top=l.right=l.bottom=l.left=l.width=l.height=e.getOffset;l.color=e.getColor;l.borderTopWidth=l.borderRightWidth=l.borderBottomWidth=l.borderLeftWidth=e.getBorderWidth;l.marginTop=l.marginRight=l.marginBottom=l.marginLeft=e.getMargin;l.visibility=e.getVisibility;l.borderColor=l.borderTopColor=l.borderRightColor=l.borderBottomColor=l.borderLeftColor=e.getBorderColor;a.Dom.IE_COMPUTED=l;a.Dom.IE_ComputedStyle=e})();
(function(){var a=parseInt,h=RegExp,f=YAHOO.util;f.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(e){f.Dom.Color.re_RGB.test(e)||(e=f.Dom.Color.toHex(e));if(f.Dom.Color.re_hex.exec(e))e=
"rgb("+[a(h.$1,16),a(h.$2,16),a(h.$3,16)].join(", ")+")";return e},toHex:function(e){e=f.Dom.Color.KEYWORDS[e]||e;if(f.Dom.Color.re_RGB.exec(e)){e=h.$1.length===1?"0"+h.$1:Number(h.$1);var l=h.$2.length===1?"0"+h.$2:Number(h.$2),g=h.$3.length===1?"0"+h.$3:Number(h.$3);e=[e.toString(16),l.toString(16),g.toString(16)].join("")}if(e.length<6)e=e.replace(f.Dom.Color.re_hex3,"$1$1");if(e!=="transparent"&&e.indexOf("#")<0)e="#"+e;return e.toLowerCase()}}})();
YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.0r4",build:"2449"});YAHOO.util.CustomEvent=function(a,h,f,e,l){this.type=a;this.scope=h||window;this.silent=f;this.fireOnce=l;this.fired=false;this.firedWith=null;this.signature=e||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(a!=="_YUICEOnSubscribe")this.subscribeEvent=new YAHOO.util.CustomEvent("_YUICEOnSubscribe",this,true);this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;
YAHOO.util.CustomEvent.prototype={subscribe:function(a,h,f){if(!a)throw new Error("Invalid callback for subscriber to '"+this.type+"'");this.subscribeEvent&&this.subscribeEvent.fire(a,h,f);a=new YAHOO.util.Subscriber(a,h,f);this.fireOnce&&this.fired?this.notify(a,this.firedWith):this.subscribers.push(a)},unsubscribe:function(a,h){if(!a)return this.unsubscribeAll();for(var f=false,e=0,l=this.subscribers.length;e<l;++e){var g=this.subscribers[e];if(g&&g.contains(a,h)){this._delete(e);f=true}}return f},
fire:function(){this.lastError=null;var a=this.subscribers.length,h=[].slice.call(arguments,0),f=true,e;if(this.fireOnce)if(this.fired)return true;else this.firedWith=h;this.fired=true;if(!a&&this.silent)return true;var l=this.subscribers.slice();for(e=0;e<a;++e){var g=l[e];if(g){f=this.notify(g,h);if(false===f)break}}return f!==false},notify:function(a,h){var f,e=null,l=a.getScope(this.scope),g=YAHOO.util.Event.throwErrors;if(this.signature==YAHOO.util.CustomEvent.FLAT){if(h.length>0)e=h[0];try{f=
a.fn.call(l,e,a.obj)}catch(j){this.lastError=j;if(g)throw j;}}else try{f=a.fn.call(l,this.type,h,a.obj)}catch(k){this.lastError=k;if(g)throw k;}return f},unsubscribeAll:function(){var a=this.subscribers.length,h;for(h=a-1;h>-1;h--)this._delete(h);this.subscribers=[];return a},_delete:function(a){var h=this.subscribers[a];if(h){delete h.fn;delete h.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};
YAHOO.util.Subscriber=function(a,h,f){this.fn=a;this.obj=YAHOO.lang.isUndefined(h)?null:h;this.overrideContext=f};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext)return this.overrideContext===true?this.obj:this.overrideContext;return a};YAHOO.util.Subscriber.prototype.contains=function(a,h){return h?this.fn==a&&this.obj==h:this.fn==a};
YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};
if(!YAHOO.util.Event){YAHOO.util.Event=function(){var a=false,h=[],f=[],e=0,l=[],g=0,j={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},k=YAHOO.env.ua.ie;return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:k,_interval:null,_dri:null,_specialTypes:{focusin:k?"focusin":"focus",focusout:k?"focusout":"blur"},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval)this._interval=
YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)},onAvailable:function(b,c,n,m,o){b=YAHOO.lang.isString(b)?[b]:b;for(var q=0;q<b.length;q+=1)l.push({id:b[q],fn:c,obj:n,overrideContext:m,checkReady:o});e=this.POLL_RETRYS;this.startInterval()},onContentReady:function(b,c,n,m){this.onAvailable(b,c,n,m,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(b,c,n,m,o,q){if(!n||!n.call)return false;if(this._isValidCollection(b)){for(var r=
true,d=0,i=b.length;d<i;++d)r=this.on(b[d],c,n,m,o)&&r;return r}else if(YAHOO.lang.isString(b))if(r=this.getEl(b))b=r;else{this.onAvailable(b,function(){YAHOO.util.Event._addListener(b,c,n,m,o,q)});return true}if(!b)return false;if("unload"==c&&m!==this){f[f.length]=[b,c,n,m,o];return true}var p=b;if(o)p=o===true?m:o;r=function(t){return n.call(p,YAHOO.util.Event.getEvent(t,b),m)};h[h.length]=[b,c,n,r,p,m,o,q];try{this._simpleAdd(b,c,r,q)}catch(s){this.lastError=s;this.removeListener(b,c,n);return false}return true},
_getType:function(b){return this._specialTypes[b]||b},addListener:function(b,c,n,m,o){var q=(c=="focusin"||c=="focusout")&&!YAHOO.env.ua.ie?true:false;return this._addListener(b,this._getType(c),n,m,o,q)},addFocusListener:function(b,c,n,m){return this.on(b,"focusin",c,n,m)},removeFocusListener:function(b,c){return this.removeListener(b,"focusin",c)},addBlurListener:function(b,c,n,m){return this.on(b,"focusout",c,n,m)},removeBlurListener:function(b,c){return this.removeListener(b,"focusout",c)},removeListener:function(b,
c,n,m){var o;c=this._getType(c);if(typeof b=="string")b=this.getEl(b);else if(this._isValidCollection(b)){m=true;for(o=b.length-1;o>-1;o--)m=this.removeListener(b[o],c,n)&&m;return m}if(!n||!n.call)return this.purgeElement(b,false,c);if("unload"==c){for(o=f.length-1;o>-1;o--)if((m=f[o])&&m[0]==b&&m[1]==c&&m[2]==n){f.splice(o,1);return true}return false}o=null;m=m;if("undefined"===typeof m)m=this._getCacheIndex(h,b,c,n);if(m>=0)o=h[m];if(!b||!o)return false;n=o[this.CAPTURE]===true?true:false;try{this._simpleRemove(b,
c,o[this.WFN],n)}catch(q){this.lastError=q;return false}delete h[m][this.WFN];delete h[m][this.FN];h.splice(m,1);return true},getTarget:function(b){return this.resolveTextNode(b.target||b.srcElement)},resolveTextNode:function(b){try{if(b&&3==b.nodeType)return b.parentNode}catch(c){}return b},getPageX:function(b){var c=b.pageX;if(!c&&0!==c){c=b.clientX||0;if(this.isIE)c+=this._getScrollLeft()}return c},getPageY:function(b){var c=b.pageY;if(!c&&0!==c){c=b.clientY||0;if(this.isIE)c+=this._getScrollTop()}return c},
getXY:function(b){return[this.getPageX(b),this.getPageY(b)]},getRelatedTarget:function(b){var c=b.relatedTarget;if(!c)if(b.type=="mouseout")c=b.toElement;else if(b.type=="mouseover")c=b.fromElement;return this.resolveTextNode(c)},getTime:function(b){if(!b.time){var c=(new Date).getTime();try{b.time=c}catch(n){this.lastError=n;return c}}return b.time},stopEvent:function(b){this.stopPropagation(b);this.preventDefault(b)},stopPropagation:function(b){if(b.stopPropagation)b.stopPropagation();else b.cancelBubble=
true},preventDefault:function(b){if(b.preventDefault)b.preventDefault();else b.returnValue=false},getEvent:function(b){b=b||window.event;if(!b)for(var c=this.getEvent.caller;c;){if((b=c.arguments[0])&&Event==b.constructor)break;c=c.caller}return b},getCharCode:function(b){b=b.keyCode||b.charCode||0;if(YAHOO.env.ua.webkit&&b in j)b=j[b];return b},_getCacheIndex:function(b,c,n,m){for(var o=0,q=b.length;o<q;o+=1){var r=b[o];if(r&&r[this.FN]==m&&r[this.EL]==c&&r[this.TYPE]==n)return o}return-1},generateId:function(b){var c=
b.id;if(!c){c="yuievtautoid-"+g;++g;b.id=c}return c},_isValidCollection:function(b){try{return b&&typeof b!=="string"&&b.length&&!b.tagName&&!b.alert&&typeof b[0]!=="undefined"}catch(c){return false}},elCache:{},getEl:function(b){return typeof b==="string"?document.getElementById(b):b},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(){if(!a){a=true;var b=YAHOO.util.Event;b._ready();b._tryPreloadAttach()}},_ready:function(){var b=YAHOO.util.Event;
if(!b.DOMReady){b.DOMReady=true;b.DOMReadyEvent.fire();b._simpleRemove(document,"DOMContentLoaded",b._ready)}},_tryPreloadAttach:function(){if(l.length===0){e=0;if(this._interval){this._interval.cancel();this._interval=null}}else if(!this.locked){if(this.isIE)if(!this.DOMReady){this.startInterval();return}this.locked=true;var b=!a;b||(b=e>0&&l.length>0);var c=[],n=function(i,p){i=i;if(p.overrideContext)i=p.overrideContext===true?p.obj:p.overrideContext;p.fn.call(i,p.obj)},m,o,q,r,d=[];m=0;for(o=l.length;m<
o;m+=1)if(q=l[m])if(r=this.getEl(q.id))if(q.checkReady){if(a||r.nextSibling||!b){d.push(q);l[m]=null}}else{n(r,q);l[m]=null}else c.push(q);m=0;for(o=d.length;m<o;m+=1){q=d[m];n(this.getEl(q.id),q)}e--;if(b){for(m=l.length-1;m>-1;m--){q=l[m];if(!q||!q.id)l.splice(m,1)}this.startInterval()}else if(this._interval){this._interval.cancel();this._interval=null}this.locked=false}},purgeElement:function(b,c,n){b=YAHOO.lang.isString(b)?this.getEl(b):b;var m=this.getListeners(b,n),o;if(m)for(o=m.length-1;o>
-1;o--){var q=m[o];this.removeListener(b,q.type,q.fn)}if(c&&b&&b.childNodes){o=0;for(m=b.childNodes.length;o<m;++o)this.purgeElement(b.childNodes[o],c,n)}},getListeners:function(b,c){var n=[],m;if(c)if(c==="unload")m=[f];else{c=this._getType(c);m=[h]}else m=[h,f];b=YAHOO.lang.isString(b)?this.getEl(b):b;for(var o=0;o<m.length;o+=1){var q=m[o];if(q)for(var r=0,d=q.length;r<d;++r){var i=q[r];if(i&&i[this.EL]===b&&(!c||c===i[this.TYPE]))n.push({type:i[this.TYPE],fn:i[this.FN],obj:i[this.OBJ],adjust:i[this.OVERRIDE],
scope:i[this.ADJ_SCOPE],index:r})}}return n.length?n:null},_unload:function(b){var c=YAHOO.util.Event,n,m,o,q=f.slice(),r;n=0;for(o=f.length;n<o;++n)if(m=q[n]){r=window;if(m[c.ADJ_SCOPE])r=m[c.ADJ_SCOPE]===true?m[c.UNLOAD_OBJ]:m[c.ADJ_SCOPE];m[c.FN].call(r,c.getEvent(b,m[c.EL]),m[c.UNLOAD_OBJ]);q[n]=null}f=null;if(h)for(b=h.length-1;b>-1;b--)(m=h[b])&&c.removeListener(m[c.EL],m[c.TYPE],m[c.FN],b);c._simpleRemove(window,"unload",c._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},
_getScroll:function(){var b=document.documentElement,c=document.body;return b&&(b.scrollTop||b.scrollLeft)?[b.scrollTop,b.scrollLeft]:c?[c.scrollTop,c.scrollLeft]:[0,0]},regCE:function(){},_simpleAdd:function(){return window.addEventListener?function(b,c,n,m){b.addEventListener(c,n,m)}:window.attachEvent?function(b,c,n){b.attachEvent("on"+c,n)}:function(){}}(),_simpleRemove:function(){return window.removeEventListener?function(b,c,n,m){b.removeEventListener(c,n,m)}:window.detachEvent?function(b,c,
n){b.detachEvent("on"+c,n)}:function(){}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE)if(self!==self.top)document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;a._ready()}};else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var h=document.createElement("p");a._dri=setInterval(function(){try{h.doScroll("left");clearInterval(a._dri);
a._dri=null;a._ready();h=null}catch(f){}},a.POLL_INTERVAL)}else if(a.webkit&&a.webkit<525)a._dri=setInterval(function(){var f=document.readyState;if("loaded"==f||"complete"==f){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL);else a._simpleAdd(document,"DOMContentLoaded",a._ready);a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};
YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,h,f,e){this.__yui_events=this.__yui_events||{};var l=this.__yui_events[a];if(l)l.subscribe(h,f,e);else{l=this.__yui_subscribers=this.__yui_subscribers||{};l[a]||(l[a]=[]);l[a].push({fn:h,obj:f,overrideContext:e})}},unsubscribe:function(a,h,f){var e=this.__yui_events=this.__yui_events||{};if(a){if(e=e[a])return e.unsubscribe(h,f)}else{a=true;for(var l in e)if(YAHOO.lang.hasOwnProperty(e,l))a=a&&e[l].unsubscribe(h,
f);return a}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(a,h){this.__yui_events=this.__yui_events||{};var f=h||{};h=this.__yui_events;var e;if(!h[a]){e=new YAHOO.util.CustomEvent(a,f.scope||this,f.silent,YAHOO.util.CustomEvent.FLAT,f.fireOnce);h[a]=e;f.onSubscribeCallback&&e.subscribeEvent.subscribe(f.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};if(f=this.__yui_subscribers[a])for(var l=0;l<f.length;++l)e.subscribe(f[l].fn,f[l].obj,
f[l].overrideContext)}return h[a]},fireEvent:function(a){this.__yui_events=this.__yui_events||{};var h=this.__yui_events[a];if(!h)return null;for(var f=[],e=1;e<arguments.length;++e)f.push(arguments[e]);return h.fire.apply(h,f)},hasEvent:function(a){if(this.__yui_events)if(this.__yui_events[a])return true;return false}};
(function(){var a=YAHOO.util.Event,h=YAHOO.lang;YAHOO.util.KeyListener=function(e,l,g,j){function k(c){if(!l.shift)l.shift=false;if(!l.alt)l.alt=false;if(!l.ctrl)l.ctrl=false;if(c.shiftKey==l.shift&&c.altKey==l.alt&&c.ctrlKey==l.ctrl){var n,m=l.keys,o;if(YAHOO.lang.isArray(m))for(var q=0;q<m.length;q++){n=m[q];o=a.getCharCode(c);if(n==o){b.fire(o,c);break}}else{o=a.getCharCode(c);m==o&&b.fire(o,c)}}}if(!j)j=YAHOO.util.KeyListener.KEYDOWN;var b=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=
new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(h.isString(e))e=document.getElementById(e);h.isFunction(g)?b.subscribe(g):b.subscribe(g.fn,g.scope,g.correctScope);this.enable=function(){if(!this.enabled){a.on(e,j,k);this.enabledEvent.fire(l)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(e,j,k);this.disabledEvent.fire(l)}this.enabled=false};this.toString=function(){return"KeyListener ["+l.keys+"] "+e.tagName+(e.id?"["+
e.id+"]":"")}};var f=YAHOO.util.KeyListener;f.KEYDOWN="keydown";f.KEYUP="keyup";f.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.0r4",build:"2449"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){function a(u){x[u]||(x[u]="\\u"+("0000"+(+u.charCodeAt(0)).toString(16)).slice(-4));return x[u]}function h(u,w){var A=function(J,K){var G,M,D=J[K];if(D&&typeof D==="object")for(G in D)if(c.hasOwnProperty(D,G)){M=A(D,G);if(M===undefined)delete D[G];else D[G]=M}return w.call(J,K,D)};return typeof w==="function"?A({"":u},""):u}function f(u){return u.replace(d,a)}function e(u){return c.isString(u)&&t.test(u.replace(i,"@").replace(p,"]").replace(s,""))}function l(u,w){u=f(u);if(e(u))return h(eval("("+
u+")"),w);throw new SyntaxError("JSON.parse");}function g(u){var w=typeof u;return W[w]||W[q.call(u)]||(w===C?u?C:E:z)}function j(u){return X+u.replace(v,a)+X}function k(u,w){return u.replace(/^/gm,w)}function b(u,w,A){function J(H,B){var y=H[B],L=g(y),I=[],ga=A?fa:R,O,Y;if(m(y)&&n(y.toJSON))y=y.toJSON(B);else if(L===S)y=M(y);if(n(K))y=K.call(H,B,y);if(y!==H[B])L=g(y);switch(L){case S:case C:break;case N:return j(y);case F:return isFinite(y)?y+T:E;case U:return y+T;case E:return E;default:return}for(B=
D.length-1;B>=0;--B)if(D[B]===y)throw new Error("JSON.stringify. Cyclical reference");H=o(y);D.push(y);if(H)for(B=y.length-1;B>=0;--B)I[B]=J(y,B)||E;else{L=w||y;B=0;for(O in L)if(L.hasOwnProperty(O))if(Y=J(y,O))I[B++]=j(O)+ga+Y}D.pop();return A&&I.length?H?Z+P+k(I.join($),A)+P+aa:ba+P+k(I.join($),A)+P+ca:H?Z+I.join(da)+aa:ba+I.join(da)+ca}if(u!==undefined){var K=n(w)?w:null,G=q.call(A).match(/String|Number/)||[],M=YAHOO.lang.JSON.dateToString,D=[],V,Q,ea;if(K||!o(w))w=undefined;if(w){V={};Q=0;for(ea=
w.length;Q<ea;++Q)V[w[Q]]=true;w=V}A=G[0]==="Number"?(new Array(Math.min(Math.max(0,A),10)+1)).join(" "):(A||T).slice(0,10);return J({"":u},"")}}var c=YAHOO.lang,n=c.isFunction,m=c.isObject,o=c.isArray,q=Object.prototype.toString,r=(YAHOO.env.ua.caja?window:this).JSON,d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,
t=/^[\],:{}\s]*$/,v=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,x={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z="undefined",C="object",E="null",N="string",F="number",U="boolean",S="date",W={undefined:z,string:N,"[object String]":N,number:F,"[object Number]":F,"boolean":U,"[object Boolean]":U,"[object Date]":S,"[object RegExp]":C},T="",ba="{",ca="}",Z="[",aa="]",da=",",$=",\n",P="\n",R=":",
fa=": ",X='"';r=q.call(r)==="[object JSON]"&&r;YAHOO.lang.JSON={useNativeParse:!!r,useNativeStringify:!!r,isSafe:function(u){return e(f(u))},parse:function(u,w){return r&&YAHOO.lang.JSON.useNativeParse?r.parse(u,w):l(u,w)},stringify:function(u,w,A){return r&&YAHOO.lang.JSON.useNativeStringify?r.stringify(u,w,A):b(u,w,A)},dateToString:function(u){function w(A){return A<10?"0"+A:A}return u.getUTCFullYear()+"-"+w(u.getUTCMonth()+1)+"-"+w(u.getUTCDate())+"T"+w(u.getUTCHours())+R+w(u.getUTCMinutes())+
R+w(u.getUTCSeconds())+"Z"},stringToDate:function(u){var w=u.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(w){u=new Date;u.setUTCFullYear(w[1],w[2]-1,w[3]);u.setUTCHours(w[4],w[5],w[6],w[7]||0);return u}return u}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),
completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a==
"string")this._default_post_header=a;else if(typeof a=="boolean")this._use_default_post_header=a},setDefaultXhrHeader:function(a){if(typeof a=="string")this._default_xhr_header=a;else this._use_default_xhr_header=a},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a))this._polling_interval=a},createXhrObject:function(a){var h,f,e;try{f=new XMLHttpRequest;h={conn:f,tId:a,xhr:true}}catch(l){for(e=0;e<this._msxml_progid.length;++e)try{f=new ActiveXObject(this._msxml_progid[e]);h={conn:f,
tId:a,xhr:true};break}catch(g){}}finally{return h}},getConnectionObject:function(a){var h,f=this._transaction_id;try{if(a){h={tId:f};if(a==="xdr"){h.conn=this._transport;h.xdr=true}else if(a==="upload")h.upload=true}else h=this.createXhrObject(f);h&&this._transaction_id++}catch(e){}return h},asyncRequest:function(a,h,f,e){var l,g=f&&f.argument?f.argument:null;if(this._isFileUpload)l="upload";else if(f.xdr)l="xdr";if(l=this.getConnectionObject(l)){f&&f.customevents&&this.initCustomEvents(l,f);if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(l,
f,h,e);return l}if(a.toUpperCase()=="GET"){if(this._sFormData.length!==0)h+=(h.indexOf("?")==-1?"?":"&")+this._sFormData}else if(a.toUpperCase()=="POST")e=e?this._sFormData+"&"+e:this._sFormData}if(a.toUpperCase()=="GET"&&f&&f.cache===false)h+=(h.indexOf("?")==-1?"?":"&")+"rnd="+(new Date).valueOf().toString();if(this._use_default_xhr_header)this._default_headers["X-Requested-With"]||this.initHeader("X-Requested-With",this._default_xhr_header,true);a.toUpperCase()==="POST"&&this._use_default_post_header&&
this._isFormSubmit===false&&this.initHeader("Content-Type",this._default_post_header);if(l.xdr){this.xdr(l,a,h,f,e);return l}l.conn.open(a,h,true);if(this._has_default_headers||this._has_http_headers)this.setHeader(l);this.handleReadyState(l,f);l.conn.send(e||"");this._isFormSubmit===true&&this.resetFormState();this.startEvent.fire(l,g);l.startEvent&&l.startEvent.fire(l,g);return l}else return null},initCustomEvents:function(a,h){var f;for(f in h.customevents)if(this._customEvents[f][0]){a[this._customEvents[f][0]]=
new YAHOO.util.CustomEvent(this._customEvents[f][1],h.scope?h.scope:null);a[this._customEvents[f][0]].subscribe(h.customevents[f])}},handleReadyState:function(a,h){var f=this,e=h&&h.argument?h.argument:null;if(h&&h.timeout)this._timeOut[a.tId]=window.setTimeout(function(){f.abort(a,h,true)},h.timeout);this._poll[a.tId]=window.setInterval(function(){if(a.conn&&a.conn.readyState===4){window.clearInterval(f._poll[a.tId]);delete f._poll[a.tId];if(h&&h.timeout){window.clearTimeout(f._timeOut[a.tId]);delete f._timeOut[a.tId]}f.completeEvent.fire(a,
e);a.completeEvent&&a.completeEvent.fire(a,e);f.handleTransactionResponse(a,h)}},this._polling_interval)},handleTransactionResponse:function(a,h,f){var e,l=h&&h.argument?h.argument:null,g=a.r&&a.r.statusText==="xdr:success"?true:false,j=a.r&&a.r.statusText==="xdr:failure"?true:false;try{e=a.conn.status!==undefined&&a.conn.status!==0||g?a.conn.status:j&&!f?0:13030}catch(k){e=13030}if(e>=200&&e<300||e===1223||g){f=a.xdr?a.r:this.createResponseObject(a,l);if(h&&h.success)h.scope?h.success.apply(h.scope,
[f]):h.success(f);this.successEvent.fire(f);a.successEvent&&a.successEvent.fire(f)}else{switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:f=this.createExceptionObject(a.tId,l,f?f:false);if(h&&h.failure)h.scope?h.failure.apply(h.scope,[f]):h.failure(f);break;default:f=a.xdr?a.response:this.createResponseObject(a,l);if(h&&h.failure)h.scope?h.failure.apply(h.scope,[f]):h.failure(f)}this.failureEvent.fire(f);a.failureEvent&&a.failureEvent.fire(f)}this.releaseObject(a)},createResponseObject:function(a,
h){var f={},e={},l,g,j,k;try{g=a.conn.getAllResponseHeaders();j=g.split("\n");for(l=0;l<j.length;l++){k=j[l].indexOf(":");if(k!=-1)e[j[l].substring(0,k)]=YAHOO.lang.trim(j[l].substring(k+2))}}catch(b){}f.tId=a.tId;f.status=a.conn.status==1223?204:a.conn.status;f.statusText=a.conn.status==1223?"No Content":a.conn.statusText;f.getResponseHeader=e;f.getAllResponseHeaders=g;f.responseText=a.conn.responseText;f.responseXML=a.conn.responseXML;if(h)f.argument=h;return f},createExceptionObject:function(a,
h,f){var e={};e.tId=a;if(f){e.status=-1;e.statusText="transaction aborted"}else{e.status=0;e.statusText="communication failure"}if(h)e.argument=h;return e},initHeader:function(a,h,f){(f?this._default_headers:this._http_headers)[a]=h;if(f)this._has_default_headers=true;else this._has_http_headers=true},setHeader:function(a){var h;if(this._has_default_headers)for(h in this._default_headers)YAHOO.lang.hasOwnProperty(this._default_headers,h)&&a.conn.setRequestHeader(h,this._default_headers[h]);if(this._has_http_headers){for(h in this._http_headers)YAHOO.lang.hasOwnProperty(this._http_headers,
h)&&a.conn.setRequestHeader(h,this._http_headers[h]);this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(a,h,f){var e,l=h&&h.argument?h.argument:null;a=a||{};if(a.conn)if(a.xhr){if(this.isCallInProgress(a)){a.conn.abort();window.clearInterval(this._poll[a.tId]);delete this._poll[a.tId];if(f){window.clearTimeout(this._timeOut[a.tId]);delete this._timeOut[a.tId]}e=true}}else{if(a.xdr){a.conn.abort(a.tId);
e=true}}else if(a.upload){var g=document.getElementById("yuiIO"+a.tId);if(g){YAHOO.util.Event.removeListener(g,"load");document.body.removeChild(g);if(f){window.clearTimeout(this._timeOut[a.tId]);delete this._timeOut[a.tId]}e=true}}else e=false;if(e===true){this.abortEvent.fire(a,l);a.abortEvent&&a.abortEvent.fire(a,l);this.handleTransactionResponse(a,h,true)}return e},isCallInProgress:function(a){a=a||{};return a.xhr&&a.conn?a.conn.readyState!==4&&a.conn.readyState!==0:a.xdr&&a.conn?a.conn.isCallInProgress(a.tId):
a.upload===true?document.getElementById("yuiIO"+a.tId)?true:false:false},releaseObject:function(a){if(a&&a.conn)a.conn=null}};
(function(){function a(b){b='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+b+'" width="0" height="0"><param name="movie" value="'+b+'"><param name="allowScriptAccess" value="always"></object>';var c=document.createElement("div");document.body.appendChild(c);c.innerHTML=b}function h(b,c,n,m,o){k[parseInt(b.tId)]={o:b,c:m};if(o){m.method=c;m.data=o}b.conn.send(n,m,b.tId)}function f(b){a(b);j._transport=document.getElementById("YUIConnectionSwf")}function e(){j.xdrReadyEvent.fire()}
function l(b,c){if(b){j.startEvent.fire(b,c.argument);b.startEvent&&b.startEvent.fire(b,c.argument)}}function g(b){var c=k[b.tId].o,n=k[b.tId].c;if(b.statusText==="xdr:start")l(c,n);else{b.responseText=decodeURI(b.responseText);c.r=b;if(n.argument)c.r.argument=n.argument;this.handleTransactionResponse(c,n,b.statusText==="xdr:abort"?true:false);delete k[b.tId]}}var j=YAHOO.util.Connect,k={};j.xdr=h;j.swf=a;j.transport=f;j.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");j.xdrReady=e;j.handleXdrResponse=
g})();
(function(){function a(k,b,c){var n,m=false,o=[],q=0,r,d,i,p;this.resetFormState();if(typeof k=="string")k=document.getElementById(k)||document.forms[k];else if(typeof k=="object")k=k;else return;if(b){this.createFrame(c?c:null);this._isFileUpload=this._isFormSubmit=true;this._formNode=k}else{r=0;for(d=k.elements.length;r<d;++r){b=k.elements[r];n=b.disabled;c=b.name;if(!n&&c){c=encodeURIComponent(c)+"=";n=encodeURIComponent(b.value);switch(b.type){case "select-one":if(b.selectedIndex>-1){p=b.options[b.selectedIndex];
o[q++]=c+encodeURIComponent(p.attributes.value&&p.attributes.value.specified?p.value:p.text)}break;case "select-multiple":if(b.selectedIndex>-1){n=b.selectedIndex;for(i=b.options.length;n<i;++n){p=b.options[n];if(p.selected)o[q++]=c+encodeURIComponent(p.attributes.value&&p.attributes.value.specified?p.value:p.text)}}break;case "radio":case "checkbox":if(b.checked)o[q++]=c+n;break;case "file":case undefined:case "reset":case "button":break;case "submit":if(m===false){if(this._hasSubmitListener&&this._submitElementValue)o[q++]=
this._submitElementValue;m=true}break;default:o[q++]=c+n}}}this._isFormSubmit=true;this._sFormData=o.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}}function h(){this._isFileUpload=this._isFormSubmit=false;this._formNode=null;this._sFormData=""}function f(k){var b="yuiIO"+this._transaction_id,c;if(YAHOO.env.ua.ie){c=document.createElement('<iframe id="'+b+'" name="'+b+'" />');if(typeof k=="boolean")c.src="javascript:false"}else{c=document.createElement("iframe");
c.id=b;c.name=b}c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";document.body.appendChild(c)}function e(k){var b=[];k=k.split("&");var c,n;for(c=0;c<k.length;c++){n=k[c].indexOf("=");if(n!=-1){b[c]=document.createElement("input");b[c].type="hidden";b[c].name=decodeURIComponent(k[c].substring(0,n));b[c].value=decodeURIComponent(k[c].substring(n+1));this._formNode.appendChild(b[c])}}return b}function l(k,b,c,n){var m="yuiIO"+k.tId,o=document.getElementById(m),q=document.documentMode&&
document.documentMode===8?true:false,r=this,d=b&&b.argument?b.argument:null,i,p,s,t,v;t={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",c);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",m);YAHOO.env.ua.ie&&!q?this._formNode.setAttribute("encoding","multipart/form-data"):this._formNode.setAttribute("enctype","multipart/form-data");if(n)i=this.appendPostData(n);
this._formNode.submit();this.startEvent.fire(k,d);k.startEvent&&k.startEvent.fire(k,d);if(b&&b.timeout)this._timeOut[k.tId]=window.setTimeout(function(){r.abort(k,b,true)},b.timeout);if(i&&i.length>0)for(c=0;c<i.length;c++)this._formNode.removeChild(i[c]);for(p in t)if(YAHOO.lang.hasOwnProperty(t,p))t[p]?this._formNode.setAttribute(p,t[p]):this._formNode.removeAttribute(p);this.resetFormState();v=function(){if(b&&b.timeout){window.clearTimeout(r._timeOut[k.tId]);delete r._timeOut[k.tId]}r.completeEvent.fire(k,
d);k.completeEvent&&k.completeEvent.fire(k,d);s={tId:k.tId,argument:b.argument};try{s.responseText=o.contentWindow.document.body?o.contentWindow.document.body.innerHTML:o.contentWindow.document.documentElement.textContent;s.responseXML=o.contentWindow.document.XMLDocument?o.contentWindow.document.XMLDocument:o.contentWindow.document}catch(x){}if(b&&b.upload)b.scope?b.upload.apply(b.scope,[s]):b.upload(s);r.uploadEvent.fire(s);k.uploadEvent&&k.uploadEvent.fire(s);j.removeListener(o,"load",v);setTimeout(function(){document.body.removeChild(o);
r.releaseObject(k)},100)};j.addListener(o,"load",v)}var g=YAHOO.util.Connect,j=YAHOO.util.Event;g._isFormSubmit=false;g._isFileUpload=false;g._formNode=null;g._sFormData=null;g._submitElementValue=null;g.uploadEvent=new YAHOO.util.CustomEvent("upload");g._hasSubmitListener=function(){if(j){j.addListener(document,"click",function(k){k=j.getTarget(k);var b=k.nodeName.toLowerCase();if((b==="input"||b==="button")&&k.type&&k.type.toLowerCase()=="submit")g._submitElementValue=encodeURIComponent(k.name)+
"="+encodeURIComponent(k.value)});return true}return false}();g.setForm=a;g.resetFormState=h;g.createFrame=f;g.appendPostData=e;g.uploadFile=l})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});
(function(a,h,f){if(a[h]===f)a[h]={};h=a[h];var e=a.document,l=function(b,c,n,m){if(!c||!b)return b;if(n===f)n=true;var o,q,r;if(m&&(r=m.length))for(o=0;o<r;o++){q=m[o];if(q in c)if(n||!(q in b))b[q]=c[q]}else for(q in c)if(n||!(q in b))b[q]=c[q];return b},g=false,j=[],k=false;l(h,{version:"1.0.5",_init:function(){this.Env={mods:{}};this.Config={debug:true}},add:function(b,c){this.Env.mods[b]={name:b,fn:c};c(this);return this},ready:function(b){k||this._bindReady();g?b.call(a,this):j.push(b);
return this},_bindReady:function(){var b=this,c=e.documentElement.doScroll,n=c?"onreadystatechange":"DOMContentLoaded";k=true;if(e.attachEvent){if(a!=a.top){var m=function(){if(e.readyState==="complete"){e.detachEvent(n,m);b._fireReady()}};e.attachEvent(n,m)}else{var o=function(){try{c("left");b._fireReady()}catch(r){setTimeout(o,1)}};o()}a.attachEvent("onload",function(){b._fireReady()})}else{var q=function(){e.removeEventListener(n,q,false);b._fireReady()};e.addEventListener(n,q,false)}},_fireReady:function(){if(!g){g=
true;if(j){for(var b,c=0;b=j[c++];)b.call(a,this);j=null}}},mix:l,merge:function(){var b=arguments,c={},n,m=b.length;for(n=0;n<m;++n)l(c,b[n]);return c},extend:function(b,c,n,m){if(!c||!b)return b;var o=Object.prototype,q=c.prototype,r=function(d){function i(){}i.prototype=d;return new i}(q);b.prototype=r;r.constructor=b;b.superclass=q;if(c!==Object&&q.constructor===o.constructor)q.constructor=c;n&&l(r,n);m&&l(b,m);return b},augment:function(b,c,n,m){return l(b.prototype,c.prototype,n,m)},weave:function(b,
c,n,m){var o=[n[m],b];c==="before"&&o.reverse();n[m]=function(){for(var q=0,r;q<2;++q)r=o[q].apply(this,arguments);return r};return this},app:function(b){var c=a[b]||{};l(c,this,true,["_init","add","namespace"]);c._init();return a[b]=c},namespace:function(){var b=arguments,c=b.length,n=null,m,o,q;for(m=0;m<c;++m){q=(""+b[m]).split(".");n=this;for(o=a[q[0]]===n?1:0;o<q.length;++o)n=n[q[o]]=n[q[o]]||{}}return n},log:function(b,c,n){if(this.Config.debug){n&&(b=n+": "+b);if(a.console!==f&&console.log)console[c&&
console[c]?c:"log"](b)}return this},error:function(b){throw b;},now:function(){return(new Date).getTime()}});h._init()})(window,"KISSY");
KISSY.add("editor",function(a){function h(f,e){var l=h;if(!(this instanceof l))return new l(f,e);l._isReady||l._setup();return new l.Instance(f,e)}a.mix(h,{version:"1.0",lang:{},plugins:{},Env:{mods:{}},add:function(f,e,l){this.Env.mods[f]={name:f,fn:e,details:l||{}};return this},addPlugin:function(f,e){f=typeof f=="string"?[f]:f;var l=this.plugins,g,j,k;j=0;for(k=f.length;j<k;++j){g=f[j];l[g]||(l[g]=a.merge(e,{name:g}))}},_isReady:false,_setup:function(){this._loadModules();this._isReady=true},_attached:{},
_loadModules:function(){var f=KISSY.Editor.Env.mods,e=this._attached,l,g;for(l in f)if(g=f[l]){e[l]=g;g.fn&&g.fn(this)}}});a.Editor=h});
KISSY.Editor.add("config",function(a){a.config={base:"",language:"zh-cn",theme:"default",toolbar:["source","","fontName","fontSize","bold","italic","underline","strikeThrough","foreColor","backColor","","link","smiley","image","","insertOrderedList","insertUnorderedList","outdent","indent","justifyLeft","justifyCenter","justifyRight"],statusbar:["wordcount","resize"],pluginsConfig:{}}});
KISSY.Editor.add("lang~en",function(a){a.lang.en={source:{text:"Source",title:"Source"},undo:{text:"Undo",title:"Undo (Ctrl+Z)"},redo:{text:"Redo",title:"Redo (Ctrl+Y)"},fontName:{text:"Font Name",title:"Font Name",options:{Arial:"Arial","Times New Roman":"Times New Roman","Arial Black":"Arial Black","Arial Narrow":"Arial Narrow","Comic Sans MS":"Comic Sans MS","Courier New":"Courier New",Garamond:"Garamond",Georgia:"Georgia",Tahoma:"Tahoma","Trebuchet MS":"Trebuchet MS",Verdana:"Verdana"}},fontSize:{text:"Size",
title:"Font size",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"Bold",title:"Bold (Ctrl+B)"},italic:{text:"Italic",title:"Italick (Ctrl+I)"},underline:{text:"Underline",title:"Underline (Ctrl+U)"},strikeThrough:{text:"Strikeout",title:"Strikeout"},link:{text:"Link",title:"Insert/Edit link",href:"URL:",target:"Open link in new window",remove:"Remove link"},blockquote:{text:"Blockquote",title:"Insert blockquote"},smiley:{text:"Smiley",title:"Insert smiley"},image:{text:"Image",
title:"Insert image",tab_link:"Web Image",tab_local:"Local Image",tab_album:"Album Image",label_link:"Enter image web address:",label_local:"Browse your computer for the image file to upload:",label_album:"Select the image from your album:",uploading:"Uploading...",upload_error:"Exception occurs when uploading file.",upload_filter:"Only allow PNG, GIF, JPG image type.",upload_linkFilter:"The image link is not in our whitelist. Please upload as local image.",ok:"Insert"},insertOrderedList:{text:"Numbered List",
title:"Numbered List (Ctrl+7)"},insertUnorderedList:{text:"Bullet List",title:"Bullet List (Ctrl+8)"},outdent:{text:"Decrease Indent",title:"Decrease Indent"},indent:{text:"Increase Indent",title:"Increase Indent"},justifyLeft:{text:"Left Justify",title:"Left Justify (Ctrl+L)"},justifyCenter:{text:"Center Justify",title:"Center Justify (Ctrl+E)"},justifyRight:{text:"Right Justify",title:"Right Justify (Ctrl+R)"},foreColor:{text:"Text Color",title:"Text Color"},backColor:{text:"Text Background Color",
title:"Text Background Color"},maximize:{text:"Maximize",title:"Maximize"},removeformat:{text:"Remove Format",title:"Remove Format"},wordcount:{tmpl:"Remain %remain% words (include html code)"},resize:{larger_text:"Larger",larger_title:"Enlarge the editor",smaller_text:"Smaller",smaller_title:"Shrink the editor"},common:{ok:"OK",cancel:"Cancel"}}});
KISSY.Editor.add("lang~zh-cn",function(a){a.lang["zh-cn"]={source:{text:"\u6e90\u7801",title:"\u6e90\u7801"},undo:{text:"\u64a4\u9500",title:"\u64a4\u9500"},redo:{text:"\u91cd\u505a",title:"\u91cd\u505a"},fontName:{text:"\u5b57\u4f53",title:"\u5b57\u4f53",options:{"\u5b8b\u4f53":"\u5b8b\u4f53","\u9ed1\u4f53":"\u9ed1\u4f53","\u96b6\u4e66":"\u96b6\u4e66","\u6977\u4f53":"\u6977\u4f53_GB2312","\u5fae\u8f6f\u96c5\u9ed1":"\u5fae\u8f6f\u96c5\u9ed1",Georgia:"Georgia","Times New Roman":"Times New Roman",Impact:"Impact","Courier New":"Courier New",Arial:"Arial",Verdana:"Verdana",Tahoma:"Tahoma"}},fontSize:{text:"\u5927\u5c0f",title:"\u5927\u5c0f",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"\u7c97\u4f53",
title:"\u7c97\u4f53"},italic:{text:"\u659c\u4f53",title:"\u659c\u4f53"},underline:{text:"\u4e0b\u5212\u7ebf",title:"\u4e0b\u5212\u7ebf"},strikeThrough:{text:"\u5220\u9664\u7ebf",title:"\u5220\u9664\u7ebf"},link:{text:"\u94fe\u63a5",title:"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5",href:"URL:",target:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",remove:"\u79fb\u9664\u94fe\u63a5"},blockquote:{text:"\u5f15\u7528",title:"\u5f15\u7528"},smiley:{text:"\u8868\u60c5",title:"\u63d2\u5165\u8868\u60c5"},image:{text:"\u56fe\u7247",title:"\u63d2\u5165\u56fe\u7247",tab_link:"\u7f51\u7edc\u56fe\u7247",tab_local:"\u672c\u5730\u4e0a\u4f20",tab_album:"\u6211\u7684\u76f8\u518c",label_link:"\u8bf7\u8f93\u5165\u56fe\u7247\u5730\u5740\uff1a",label_local:"\u8bf7\u9009\u62e9\u672c\u5730\u56fe\u7247\uff1a",label_album:"\u8bf7\u9009\u62e9\u76f8\u518c\u56fe\u7247\uff1a",uploading:"\u6b63\u5728\u4e0a\u4f20...",upload_error:"\u5bf9\u4e0d\u8d77\uff0c\u4e0a\u4f20\u6587\u4ef6\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",upload_filter:"\u4ec5\u652f\u6301 JPG, PNG \u548c GIF \u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",
upload_linkFilter:'\u5bf9\u4e0d\u8d77\uff0c\u56fe\u7247\u6240\u5728\u7f51\u7ad9\u4e0d\u5728\u5141\u8bb8\u8303\u56f4\u5185\u3002\n\u8bf7\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u518d\u901a\u8fc7"\u672c\u5730\u4e0a\u4f20"\u4e0a\u4f20\u56fe\u7247\u3002',ok:"\u63d2\u5165"},insertOrderedList:{text:"\u6709\u5e8f\u5217\u8868",title:"\u6709\u5e8f\u5217\u8868"},insertUnorderedList:{text:"\u65e0\u5e8f\u5217\u8868",title:"\u65e0\u5e8f\u5217\u8868"},outdent:{text:"\u51cf\u5c11\u7f29\u8fdb",title:"\u51cf\u5c11\u7f29\u8fdb"},indent:{text:"\u589e\u52a0\u7f29\u8fdb",title:"\u589e\u52a0\u7f29\u8fdb"},justifyLeft:{text:"\u5de6\u5bf9\u9f50",title:"\u5de6\u5bf9\u9f50"},justifyCenter:{text:"\u5c45\u4e2d\u5bf9\u9f50",title:"\u5c45\u4e2d\u5bf9\u9f50"},justifyRight:{text:"\u53f3\u5bf9\u9f50",title:"\u53f3\u5bf9\u9f50"},foreColor:{text:"\u6587\u672c\u989c\u8272",title:"\u6587\u672c\u989c\u8272"},backColor:{text:"\u80cc\u666f\u989c\u8272",title:"\u80cc\u666f\u989c\u8272"},maximize:{text:"\u5168\u5c4f\u7f16\u8f91",title:"\u5168\u5c4f\u7f16\u8f91"},removeformat:{text:"\u6e05\u9664\u683c\u5f0f",title:"\u6e05\u9664\u683c\u5f0f"},wordcount:{tmpl:"\u8fd8\u53ef\u4ee5\u8f93\u5165 %remain% \u5b57\uff08\u542b html \u4ee3\u7801\uff09"},
resize:{larger_text:"\u589e\u5927",larger_title:"\u589e\u5927\u7f16\u8f91\u533a\u57df",smaller_text:"\u7f29\u5c0f",smaller_title:"\u7f29\u5c0f\u7f16\u8f91\u533a\u57df"},common:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88"}}});KISSY.Editor.add("core~plugin",function(a){a.PLUGIN_TYPE={CUSTOM:0,TOOLBAR_SEPARATOR:1,TOOLBAR_BUTTON:2,TOOLBAR_MENU_BUTTON:4,TOOLBAR_SELECT:8,STATUSBAR_ITEM:16,FUNC:32}});
KISSY.Editor.add("core~dom",function(a){var h=YAHOO.env.ua;a.Dom={getText:function(f){return f?f.textContent||"":""},setItemUnselectable:function(f){var e,l,g,j,k;e=f.getElementsByTagName("*");l=-1;for(g=e.length;l<g;++l){k=l==-1?f:e[l];(j=k.nodeName)&&j!="INPUT"&&k.setAttribute("unselectable","on")}return f},BLOCK_ELEMENTS:{blockquote:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,p:1,address:1,center:1,pre:1,form:1,fieldset:1,caption:1,table:1,tbody:1,tr:1,th:1,td:1,ul:1,ol:1,dl:1,dt:1,dd:1,li:1}};
if(h.ie)a.Dom.getText=function(f){return f?f.innerText||"":""}});
KISSY.Editor.add("core~color",function(a){var h=parseInt,f=RegExp;a.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(e){this.re_RGB.test(e)||(e=this.toHex(e));if(this.re_hex.exec(e))e=
"rgb("+[h(f.$1,16),h(f.$2,16),h(f.$3,16)].join(", ")+")";return e},toHex:function(e){e=this.KEYWORDS[e]||e;if(this.re_RGB.exec(e)){e=(f.$1>>0).toString(16);var l=(f.$2>>0).toString(16),g=(f.$3>>0).toString(16);e=[e.length==1?"0"+e:e,l.length==1?"0"+l:l,g.length==1?"0"+g:g].join("")}if(e.length<6)e=e.replace(this.re_hex3,"$1$1");if(e!=="transparent"&&e.indexOf("#")<0)e="#"+e;return e.toLowerCase()},int2hex:function(e){e>>=0;return this.toHex("rgb("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+")")}}});
KISSY.Editor.add("core~command",function(a){var h=YAHOO.env.ua,f={backColor:h.gecko?"hiliteColor":"backColor"};a.Command={exec:function(e,l,g,j){l=f[l]||l;this._preExec(e,l,j);e.execCommand(l,false,g)},_preExec:function(e,l,g){if(h.gecko){l=typeof g==="undefined"?"bold,italic,underline,strikeThrough".indexOf(l)===-1:g;e.execCommand("styleWithCSS",false,l)}}}});
KISSY.Editor.add("core~range",function(a){var h=YAHOO.env.ua.ie;a.Range={getSelectionRange:function(f){var e=f.document,l;if(f.getSelection){f=f.getSelection();if(f.getRangeAt)l=f.getRangeAt(0);else{l=e.createRange();l.setStart(f.anchorNode,f.anchorOffset);l.setEnd(f.focusNode,f.focusOffset)}}else if(e.selection)l=e.selection.createRange();return l},getCommonAncestor:function(f){return f.startContainer||f.parentElement&&f.parentElement()||f.commonParentElement&&f.commonParentElement()},getSelectedText:function(f){if("text"in
f)return f.text;return f.toString?f.toString():""},saveRange:function(f){h&&f.contentWin.focus();return f.getSelectionRange()}}});
KISSY.Editor.add("core~instance",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.lang,g=YAHOO.env.ua,j=g.ie;a.Instance=function(k,b){this.textarea=f.get(k);this.config=l.merge(a.config,b||{});this.sourceMode=false;this.toolbar=new a.Toolbar(this);this.statusbar=new a.Statusbar(this);this._init()};l.augmentObject(a.Instance.prototype,{_init:function(){this._renderUI();this._initPlugins();this._initAutoFocus()},_renderUI:function(){this._renderContainer();this._setupContentPanel()},_initPlugins:function(){var k,
b;b=a.plugins;var c=[];for(k in b)c[k]=l.merge(b[k]);this.plugins=c;this.toolbar.init();this.statusbar.init();for(k in c){b=c[k];if(!b.inited)if(b.type===a.PLUGIN_TYPE.FUNC){b.editor=this;b.init&&b.init();b.inited=true}}},_renderContainer:function(){var k=this.textarea,b=f.getRegion(k),c=b.right-b.left-2+"px",n=b.bottom-b.top-2+"px";b=document.createElement("div");b.className="ks-editor";b.style.width=c;b.innerHTML='<div class="ks-editor-toolbar"></div><div class="ks-editor-content"><iframe frameborder="0" allowtransparency="1"></iframe></div><div class="ks-editor-statusbar"></div>';
c=b.childNodes[1];c.style.width="100%";c.style.height=n;c=c.childNodes[0];c.style.width="100%";c.style.height="100%";c.setAttribute("frameBorder",0);k.style.display="none";f.insertBefore(b,k);this.container=b;this.toolbar.domEl=b.childNodes[0];this.contentWin=c.contentWindow;this.contentDoc=c.contentWindow.document;this.statusbar.domEl=b.childNodes[2]},_setupContentPanel:function(){var k=this.contentDoc,b=this.config;b=b.base+"themes/"+b.theme+"/"+("content"+(b.debug?"":"-min")+".css");var c=this;
k.open();k.write('<!doctype html><html><head><title>Rich Text Area</title><meta charset="charset=gbk" /><link href="{CONTENT_CSS}" rel="stylesheet" /></head><body spellcheck="false" class="ks-editor-post">{CONTENT}</body></html>'.replace("{CONTENT_CSS}",b).replace("{CONTENT}",this.textarea.value));k.close();if(j)k.body.contentEditable="true";else k.designMode="on";j&&e.on(k,"click",function(){k.activeElement.parentNode.nodeType===9&&c._focusToEnd()})},_initAutoFocus:function(){this.config.autoFocus&&
this._focusToEnd()},_focusToEnd:function(){this.contentWin.focus();var k=this.contentDoc.body.lastChild,b=a.Range.getSelectionRange(this.contentWin);if(g.ie){try{b.moveToElementText(k)}catch(c){}b.collapse(false);b.select()}else{try{b.setEnd(k,k.childNodes.length)}catch(n){}b.collapse(false)}},focus:function(){this._focusToEnd()},execCommand:function(k,b,c){this.contentWin.focus();a.Command.exec(this.contentDoc,k,b,c)},getData:function(){if(this.sourceMode)return this.textarea.value;return this.getContentDocData()},
getContentDocData:function(){var k="",b=a.plugins.save;k=this.contentDoc.body.innerHTML;if(k=="<br>")k="";if(b&&b.filterData)k=b.filterData(k);return k},getSelectionRange:function(){return a.Range.getSelectionRange(this.contentWin)}})});
KISSY.Editor.add("core~toolbar",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.lang,g=YAHOO.env.ua.ie,j=g===6,k=a.PLUGIN_TYPE,b=document.createElement("div");a.Toolbar=function(c){this.editor=c;this.config=c.config;this.lang=a.lang[this.config.language];this.items=[];this.stateItems=[]};l.augmentObject(a.Toolbar.prototype,{init:function(){for(var c=this.config.toolbar,n=this.editor.plugins,m,o=0,q=c.length;o<q;++o)if(m=c[o]){if(m in n){m=n[m];this._addItem(m);this.items.push(m);"fontName,fontSize,bold,italic,underline,strikeThroughinsertOrderedList,insertUnorderedListjustifyLeft,justifyCenter,justifyRight".indexOf(m.name)!==
-1&&this.stateItems.push(m)}}else this._addSeparator();this._initUpdateState()},_addItem:function(c){var n,m=c.type;n=this.lang;if(!c.lang)c.lang=l.merge(n.common,this.lang[c.name]||{});n='<div class="ks-editor-toolbar-button ks-inline-block" title="{TITLE}"><div class="ks-editor-toolbar-button-outer-box"><div class="ks-editor-toolbar-button-inner-box"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div></div></div>'.replace("{TITLE}",c.lang.title||"").replace("{NAME}",
c.name).replace("{TEXT}",c.lang.text||"");if(j)n=n.replace("outer-box","outer-box ks-inline-block").replace("inner-box","inner-box ks-inline-block");b.innerHTML=n;c.domEl=n=b.firstChild;if(m==k.TOOLBAR_MENU_BUTTON||m==k.TOOLBAR_SELECT){this._renderMenuButton(c);m==k.TOOLBAR_SELECT&&this._renderSelect(c)}this._bindItemUI(c);this._addToToolbar(n);c.editor=this.editor;c.init&&c.init();c.inited=true},_renderMenuButton:function(c){var n=c.domEl,m=n.getElementsByTagName("span")[0].parentNode;f.addClass(n,
"ks-editor-toolbar-menu-button");m.innerHTML='<div class="ks-editor-toolbar-menu-button-caption ks-inline-block"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div><div class="ks-editor-toolbar-menu-button-dropdown ks-inline-block"></div>'.replace("{NAME}",c.name).replace("{TEXT}",c.lang.text||"")},_renderSelect:function(c){f.addClass(c.domEl,"ks-editor-toolbar-select")},_bindItemUI:function(c){var n=c.domEl;c.exec&&e.on(n,"click",function(){c.exec()});e.on(n,"mousedown",
function(){f.addClass(n,"ks-editor-toolbar-button-active")});e.on(n,"mouseup",function(){f.removeClass(n,"ks-editor-toolbar-button-active")});e.on(n,"mouseout",function(m){m=e.getRelatedTarget(m);var o;try{if(n.contains)o=n.contains(m);else if(n.compareDocumentPosition)o=n.compareDocumentPosition(m)&8}catch(q){o=false}o||f.removeClass(n,"ks-editor-toolbar-button-active")});if(j){e.on(n,"mouseenter",function(){f.addClass(n,"ks-editor-toolbar-button-hover")});e.on(n,"mouseleave",function(){f.removeClass(n,
"ks-editor-toolbar-button-hover")})}},_addSeparator:function(){b.innerHTML='<div class="ks-editor-stripbar-sep ks-inline-block"></div>';this._addToToolbar(b.firstChild)},_addToToolbar:function(c){if(g)c=a.Dom.setItemUnselectable(c);this.domEl.appendChild(c)},_initUpdateState:function(){var c=this.editor.contentDoc,n=this;e.on(c,"click",function(){n.updateState()});e.on(c,"keyup",function(m){m=m.keyCode;if(m>=33&&m<=40||m===8||m===13||m===46)n.updateState()})},updateState:function(c){var n=this.stateItems,
m;c=c?c.join("|"):"";for(var o=0,q=n.length;o<q;o++){m=n[o];c&&c.indexOf(m.name)===-1||(m.updateState?m.updateState():this.updateItemState(m))}},updateItemState:function(c){var n=this.editor.contentDoc;try{if(n.queryCommandEnabled(c.name))n.queryCommandState(c.name)?f.addClass(c.domEl,"ks-editor-toolbar-button-selected"):f.removeClass(c.domEl,"ks-editor-toolbar-button-selected")}catch(m){}}})});
KISSY.Editor.add("core~statusbar",function(a){var h=YAHOO.lang,f=YAHOO.env.ua.ie,e=document.createElement("div");a.Statusbar=function(l){this.editor=l;this.config=l.config;this.lang=a.lang[this.config.language]};h.augmentObject(a.Statusbar.prototype,{init:function(){for(var l=this.config.statusbar,g=this.editor.plugins,j,k=0,b=l.length;k<b;++k)if(j=l[k])j in g&&this._addItem(g[j]);else this._addSep()},_addItem:function(l){var g;g=this.lang;if(!l.lang)l.lang=h.merge(g.common,this.lang[l.name]||{});
e.innerHTML='<div class="ks-editor-statusbar-item ks-editor-{NAME} ks-inline-block"></div>'.replace("{NAME}",l.name);l.domEl=g=e.firstChild;this._addToToolbar(g);l.editor=this.editor;l.init&&l.init();l.inited=true},_addSep:function(){e.innerHTML='<div class="ks-editor-stripbar-sep kissy-inline-block"></div>';this._addToToolbar(e.firstChild)},_addToToolbar:function(l){if(f)l=a.Dom.setItemUnselectable(l);this.domEl.appendChild(l)}})});
KISSY.Editor.add("core~menu",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.env.ua,g;a.Menu={generateDropMenu:function(j,k,b){var c=document.createElement("div"),n=this;c.innerHTML='<div class="ks-editor-drop-menu-shadow"></div><div class="ks-editor-drop-menu-content"></div>';c.className="ks-editor-drop-menu";c.style.display="none";document.body.appendChild(c);e.on(k,"click",function(m){e.stopPropagation(m);j.activeDropMenu&&n._hide(j);if(j.activeDropMenu!=c){n._setDropMenuPosition(k,c,b);
j.activeDropMenu=c;j.activeDropButton=k;n._show(j)}else{j.activeDropMenu=null;j.activeDropButton=null}});e.on([document,j.contentDoc],"click",function(){if(j.activeDropMenu){n.hideActiveDropMenu(j);this==j.contentDoc&&j.contentWin.focus()}});this._initResizeEvent(k,c,b);return c.childNodes[1]},_setDropMenuPosition:function(j,k,b){var c=f.getRegion(j);j=c.left;c=c.bottom;if(b){j+=b[0];c+=b[1]}k.style.left=j+"px";k.style.top=c+"px"},_isVisible:function(j){if(!j)return false;return j.style.display!=
"none"},hideActiveDropMenu:function(j){this._hide(j);j.activeDropMenu=null;j.activeDropButton=null},_hide:function(j){var k=j.activeDropMenu;j=j.activeDropButton;if(k){g&&(g.style.display="none");k.style.display="none"}j&&f.removeClass(j,"ks-editor-toolbar-button-selected")},_show:function(j){var k=j.activeDropMenu;j=j.activeDropButton;if(k){k.style.display="";if(l.ie===6){this._updateShimRegion(k);g.style.display=""}}j&&f.addClass(j,"ks-editor-toolbar-button-selected")},_updateShimRegion:function(j){if(j)if(l.ie===
6){g||this._initShim();this._setShimRegion(j)}},_initResizeEvent:function(j,k,b){var c=this,n;e.on(window,"resize",function(){n&&clearTimeout(n);n=setTimeout(function(){c._isVisible(k)&&c._setDropMenuPosition(j,k,b)},50)})},_initShim:function(){g=document.createElement("iframe");g.src="about:blank";g.className="ks-editor-drop-menu-shim";g.style.position="absolute";g.style.display="none";g.style.border="none";document.body.appendChild(g)},_setShimRegion:function(j){if(g&&this._isVisible(j)){j=f.getRegion(j);
if(j.width>0){g.style.left=j.left+"px";g.style.top=j.top+"px";g.style.width=j.width-1+"px";g.style.height=j.height-1+"px"}}}}});KISSY.Editor.add("smilies~config~default",function(a){a.Smilies=a.Smilies||{};a.Smilies["default"]={name:"default",mode:"icons",cols:5,fileNames:["smile","confused","cool","cry","eek","angry","wink","sweat","lol","stun","razz","shy","rolleyes","sad","happy","yes","no","heart","idea","rose"],fileExt:"gif"}});
KISSY.Editor.add("smilies~config~wangwang",function(a){a.Smilies=a.Smilies||{};a.Smilies.wangwang={name:"wangwang",mode:"sprite",base:"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/",spriteStyle:"background: url(http://a.tbcdn.cn/sys/wangwang/smiley/sprite.png) no-repeat -1px 0; width: 288px; height: 235px",unitStyle:"width: 24px; height: 24px",filePattern:{start:0,end:98,step:1},fileExt:"gif"}});
KISSY.Editor.add("plugins~base",function(a){var h=a.PLUGIN_TYPE;a.addPlugin("bold,italic,underline,strikeThrough,insertOrderedList,insertUnorderedList".split(","),{type:h.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});
KISSY.Editor.add("plugins~color",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.env.ua.ie,g=["000","444","666","999","CCC","EEE","F3F3F3","FFF"],j=["F00","F90","FF0","0F0","0FF","00F","90F","F0F"],k=["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D2E9","EAD1DC","EA9999","F9CB9C","FFE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD","E06666","F6B26B","FFD966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BAD","CC0000","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A64D79","990000",
"B45F06","BF9000","38761D","134F5C","0B5394","351C75","741B47","660000","783F04","7F6000","274E13","0C343D","073763","20124D","4C1130"];a.addPlugin(["foreColor","backColor"],{type:a.PLUGIN_TYPE.TOOLBAR_MENU_BUTTON,color:"",_indicator:null,swatches:null,dropMenu:null,range:null,init:function(){var b=this.domEl,c=b.getElementsByTagName("span")[0].parentNode;this.color=this._getDefaultColor();f.addClass(b,"ks-editor-toolbar-color-button");c.innerHTML='<div class="ks-editor-toolbar-color-button-indicator" style="border-bottom-color:'+
this.color+'">'+c.innerHTML+"</div>";this._indicator=c.firstChild;this._renderUI();this._bindUI();this.swatches=f.getElementsByClassName("ks-editor-palette-colorswatch","div",this.dropMenu)},_renderUI:function(){this.dropMenu=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._generatePalettes();l&&a.Dom.setItemUnselectable(this.dropMenu)},_bindUI:function(){this._bindPickEvent();e.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();l&&this.editor.contentDoc.selection.empty();
this._updateSelectedColor(this.color)},this,true)},_generatePalettes:function(){var b="";b+=this._getPaletteTable(g);b+=this._getPaletteTable(j);b+=this._getPaletteTable(k);this.dropMenu.innerHTML=b},_getPaletteTable:function(b){var c,n=b.length,m,o="<tr>";c=0;for(n=b.length;c<n;++c){if(c!=0&&c%8==0)o+="</tr><tr>";m=a.Color.toRGB("#"+b[c]).toUpperCase();o+='<td class="ks-editor-palette-cell"><div class="ks-editor-palette-colorswatch" title="{COLOR}" style="background-color:{COLOR}"></div></td>'.replace(/{COLOR}/g,
m)}o+="</tr>";return'<div class="ks-editor-palette-table"><table><tbody>{TR}</tbody></table></div>'.replace("{TR}",o)},_bindPickEvent:function(){var b=this;e.on(this.dropMenu,"click",function(c){var n=e.getTarget(c).getAttribute("title");n&&n.indexOf("RGB")===0&&b._doAction(n);e.stopPropagation(c);a.Menu.hideActiveDropMenu(b.editor)})},_doAction:function(b){if(b){this.setColor(a.Color.toHex(b));b=this.range;l&&b.select&&b.select();this.editor.execCommand(this.name,this.color)}},setColor:function(b){this.color=
b;this._updateIndicatorColor(b);this._updateSelectedColor(b)},_updateIndicatorColor:function(b){this._indicator.style.borderBottomColor=b},_updateSelectedColor:function(b){var c,n,m,o=this.swatches;c=0;for(n=o.length;c<n;++c){m=o[c];a.Color.toHex(m.style.backgroundColor)==b?f.addClass(m.parentNode,"ks-editor-palette-cell-selected"):f.removeClass(m.parentNode,"ks-editor-palette-cell-selected")}},_getDefaultColor:function(){return this.name=="foreColor"?"#000000":"#ffffff"}})});
KISSY.Editor.add("plugins~font",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.env.ua,g={"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7};a.addPlugin(["fontName","fontSize"],{type:a.PLUGIN_TYPE.TOOLBAR_SELECT,selectedValue:"",selectHead:null,selectList:null,options:[],items:null,selectedItem:null,range:null,init:function(){this.options=this.lang.options;this.selectHead=this.domEl.getElementsByTagName("span")[0];this._renderUI();this._bindUI()},_renderUI:function(){this.selectList=
a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._renderSelectList();this.items=this.selectList.getElementsByTagName("li")},_bindUI:function(){this._bindPickEvent();e.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();l.ie&&this.editor.contentDoc.selection.empty();if(this.selectedValue)this._updateSelectedOption(this.selectedValue);else if(this.selectedItem){f.removeClass(this.selectedItem,"ks-editor-option-selected");this.selectedItem=null}},this,true)},_renderSelectList:function(){var j=
"",k=this.options,b,c;for(b in k){c=k[b];j+='<li class="ks-editor-option" data-value="{VALUE}"><span class="ks-editor-option-checkbox"></span><span style="{STYLE}">{KEY}</span></li>'.replace("{VALUE}",c).replace("{STYLE}",this._getOptionStyle(b,c)).replace("{KEY}",b)}this.selectList.innerHTML='<ul class="ks-editor-select-list">{LI}</ul>'.replace("{LI}",j);f.addClass(this.selectList,"ks-editor-drop-menu-"+this.name)},_bindPickEvent:function(){var j=this;e.on(this.selectList,"click",function(k){var b=
e.getTarget(k);if(b.nodeName!="LI")b=f.getAncestorByTagName(b,"li");if(b){j._doAction(b.getAttribute("data-value"));e.stopPropagation(k);a.Menu.hideActiveDropMenu(j.editor)}});if(l.ie===6){e.on(this.items,"mouseenter",function(){f.addClass(this,"ks-editor-option-hover")});e.on(this.items,"mouseleave",function(){f.removeClass(this,"ks-editor-option-hover")})}},_doAction:function(j){if(j){this.selectedValue=j;this._setOption(j);j=this.range;l.ie&&j.select&&j.select();this.editor.execCommand(this.name,
this.selectedValue)}},_setOption:function(j){this._updateHeadText(this._getOptionKey(j));this._updateSelectedOption(j)},_getOptionStyle:function(j,k){return this.name=="fontName"?"font-family:"+k:"font-size:"+j+"px"},_getOptionKey:function(j){var k=this.options,b;for(b in k)if(k[b]==j)return b;return null},_updateHeadText:function(j){this.selectHead.innerHTML=j},_updateSelectedOption:function(j){var k=this.items,b,c=k.length,n;for(b=0;b<c;++b){n=k[b];if(n.getAttribute("data-value")==j){f.addClass(n,
"ks-editor-option-selected");this.selectedItem=n}else f.removeClass(n,"ks-editor-option-selected")}},updateState:function(){var j=this.editor.contentDoc,k=this.options,b=this.name,c,n;try{if(j.queryCommandEnabled(b)){n=j.queryCommandValue(b);if(l.webkit&&b=="fontSize")n=this._getWebkitFontSize(n);n&&(c=this._getOptionKey(n));if(c in k){if(n!=this.selectedValue){this.selectedValue=n;this._updateHeadText(c)}}else{this.selectedValue="";this._updateHeadText(this.lang.text)}}}catch(m){}},_getWebkitFontSize:function(j){if(j in
g)return g[j];return null}})});
KISSY.Editor.add("plugins~image",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=h.Connect,g=YAHOO.lang,j=YAHOO.env.ua,k=j.ie,b="ks-editor-image-tab-selected",c=/^(?:.*?:\/\/)?(.*?)\/.*$/,n={local:'<li rel="local" class="'+b+'">{tab_local}</li>',link:'<li rel="link">{tab_link}</li>',album:'<li rel="album">{tab_album}</li>'},m={tabs:["link"],upload:{actionUrl:"",filter:"png|gif|jpg|jpeg",filterMsg:"",linkFilter:"",linkFilterMsg:"",enableXdr:false,connectionSwf:"http://a.tbcdn.cn/yui/2.8.0r4/build/connection/connection.swf",formatResponse:function(o){var q=
[];for(var r in o)q.push(o[r]);return q},extraCode:""}};a.addPlugin("image",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,form:null,range:null,currentTab:null,currentPanel:null,uploadingPanel:null,actionsBar:null,init:function(){var o=this.editor.config.pluginsConfig[this.name]||{};m.upload.filterMsg=this.lang.upload_filter;m.upload.linkFilterMsg=this.lang.upload_linkFilter;this.config=g.merge(m,o);this.config.upload=g.merge(m.upload,o.upload||{});this._renderUI();this._bindUI();this.actionsBar=
f.getElementsByClassName("ks-editor-dialog-actions","div",this.dialog)[0];this.uploadingPanel=f.getElementsByClassName("ks-editor-image-uploading","div",this.dialog)[0];this.config.upload.enableXdr&&this._initXdrUpload()},_renderUI:function(){var o=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),q=this.lang;q.local_extraCode=this.config.upload.extraCode;o.className+=" ks-editor-image";o.innerHTML='<form action="javascript: void(0)"><ul class="ks-editor-image-tabs ks-clearfix"></ul><div class="ks-editor-image-tab-content" rel="local" style="display: none"><label>{label_local}</label><input type="file" size="40" name="imgFile" unselectable="on" />{local_extraCode}</div><div class="ks-editor-image-tab-content" rel="link"><label>{label_link}</label><input name="imgUrl" size="50" /></div><div class="ks-editor-image-tab-content" rel="album" style="display: none"><label>{label_album}</label><p style="width: 300px">\u5c1a\u672a\u5b9e\u73b0...</p></div><div class="ks-editor-image-uploading" style="display: none"><p style="width: 300px">{uploading}</p></div><div class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span></div></form>'.replace(/\{([^}]+)\}/g,
function(r,d){return d in q?q[d]:d});this.dialog=o;this.form=o.getElementsByTagName("form")[0];k&&a.Dom.setItemUnselectable(o);this._renderTabs()},_renderTabs:function(){function o(C){for(var E=0,N=C.getAttribute("rel"),F=0;F<z;F++){x[F]&&f.removeClass(x[F],b);i[F].style.display="none";if(i[F].getAttribute("rel")==N)E=F}j.ie===6&&a.Menu._updateShimRegion(r.dialog);f.addClass(C,b);i[E].style.display="";r.currentTab=C.getAttribute("rel");r.currentPanel=i[E]}for(var q=this.lang,r=this,d=f.getElementsByClassName("ks-editor-image-tabs",
"ul",this.dialog)[0],i=f.getElementsByClassName("ks-editor-image-tab-content","div",this.dialog),p=this.config.tabs,s="",t=0,v=p.length;t<v;t++)s+=n[p[t]];d.innerHTML=s.replace(/\{([^}]+)\}/g,function(C,E){return E in q?q[E]:E});var x=d.childNodes,z=i.length;x.length===1&&f.addClass(this.dialog,"ks-editor-image-no-tab");o(x[0]);e.on(x,"click",function(){o(this)})},_bindUI:function(){var o=this;e.on(this.domEl,"click",function(){if(o.dialog.style.visibility===k?"hidden":"visible")o._syncUI()});e.on(this.dialog,
"click",function(q){var r=e.getTarget(q),d=o.currentTab;switch(r.className){case "ks-editor-btn-ok":if(d==="local"){e.stopPropagation(q);o._insertLocalImage()}else o._insertWebImage();break;case "ks-editor-btn-cancel":break;default:e.stopPropagation(q)}})},_initXdrUpload:function(){for(var o=this.config.tabs,q=0,r=o.length;q<r;q++)if(o[q]==="local"){l.transport(this.config.upload.connectionSwf);break}},_insertLocalImage:function(){var o=this.form,q=this.config.upload,r=o.imgFile.value,d=q.actionUrl,
i=this;if(r&&d){if(q.filter!=="*"){r=r.substring(r.lastIndexOf(".")+1).toLowerCase();if(q.filter.indexOf(r)==-1){alert(q.filterMsg);i.form.reset();return}}this.uploadingPanel.style.display="";this.currentPanel.style.display="none";this.actionsBar.style.display="none";j.ie===6&&a.Menu._updateShimRegion(this.dialog);l.setForm(o,true);l.asyncRequest("post",d,{upload:function(p){try{var s=q.formatResponse(g.JSON.parse(p.responseText));if(s[0]=="0"){i._insertImage(s[1]);i._hideDialog()}else i._onUploadError(s[1])}catch(t){i._onUploadError(g.dump(t)+
"\no = "+g.dump(p)+"\n[from upload catch code]")}},xdr:q.enableXdr})}else i._hideDialog()},_onUploadError:function(o){alert(this.lang.upload_error+"\n\n"+o);this._hideDialog()},_insertWebImage:function(){var o=this.form.imgUrl.value||"",q=this.config.upload,r=q.linkFilter,d,i;if(d=c.exec(o))i=d[1];if(o&&i){if(r&&r!=="*")if(("|"+r.toLowerCase()+"|").indexOf("|"+i.toLowerCase()+"|")===-1){alert(q.linkFilterMsg);return}this._insertImage(o)}},_hideDialog:function(){var o=this.editor.activeDropMenu;o&&
f.isAncestor(o,this.dialog)&&a.Menu.hideActiveDropMenu(this.editor);this.editor.contentWin.focus()},_syncUI:function(){this.range=a.Range.saveRange(this.editor);this.form.reset();this.uploadingPanel.style.display="none";this.currentPanel.style.display="";this.actionsBar.style.display=""},_insertImage:function(o,q){o=g.trim(o);if(o.length!==0){var r=this.editor,d=this.range;if(window.getSelection){var i=r.contentDoc.createElement("img");i.src=o;q&&i.setAttribute("alt",q);d.deleteContents();d.insertNode(i);
if(j.webkit){q=r.contentWin.getSelection();q.addRange(d);q.collapseToEnd()}else d.setStartAfter(i);r.contentWin.focus()}else if(document.selection){r.contentWin.focus();if("text"in d){d.select();r='<img src="'+o+'"';q&&(r+=' "alt="'+q+'"');r+=">";d.pasteHTML(r)}else d.execCommand("insertImage",false,o)}}}})});KISSY.Editor.add("plugins~indent",function(a){a.addPlugin(["indent","outdent"],{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});
KISSY.Editor.add("plugins~justify",function(a){var h=["justifyLeft","justifyCenter","justifyRight"];a.addPlugin(h,{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState(h)}})});
KISSY.Editor.add("plugins~keystroke",function(a){var h=YAHOO.util.Event,f=YAHOO.env.ua;a.addPlugin("keystroke",{type:a.PLUGIN_TYPE.FUNC,init:function(){var e=this.editor;f.ie&&f.ie<8&&h.on(e.contentDoc,"keydown",function(g){g.keyCode==9&&this.selection.empty()});var l=e.textarea.form;l&&(new YAHOO.util.KeyListener(e.contentDoc,{ctrl:true,keys:13},{fn:function(){if(!e.sourceMode)e.textarea.value=e.getData();l.submit()}})).enable()}})});
KISSY.Editor.add("plugins~link",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.lang,g=YAHOO.env.ua,j=g.ie;h=a.PLUGIN_TYPE;var k=a.Range,b=(new Date).getTime(),c=/^\w+:\/\/.*|#.*$/,n=['<form onsubmit="return false"><ul><li class="ks-editor-link-href"><label>{href}</label><input name="href" style="width: 220px" value="http://" type="text" /></li><li class="ks-editor-link-target"><input name="target" id="target_"',b,' type="checkbox" /> <label for="target_"',b,'>{target}</label></li><li class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span><span class="ks-editor-link-remove">{remove}</span></li></ul></form>'].join("");
a.addPlugin("link",{type:h.TOOLBAR_BUTTON,dialog:null,form:null,range:null,init:function(){this._renderUI();this._bindUI()},_renderUI:function(){var m=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),o=this.lang;m.className+=" ks-editor-link";m.innerHTML=n.replace(/\{([^}]+)\}/g,function(q,r){return o[r]?o[r]:r});this.dialog=m;this.form=m.getElementsByTagName("form")[0];g.webkit&&(this.form.target.parentNode.style.display="none");j&&a.Dom.setItemUnselectable(m)},_bindUI:function(){var m=this.form,
o=this;e.on(this.domEl,"click",function(){if(o.dialog.style.visibility===j?"hidden":"visible")o._syncUI()});e.on(this.dialog,"click",function(q){switch(e.getTarget(q).className){case "ks-editor-btn-ok":o._createLink(m.href.value,m.target.checked);break;case "ks-editor-btn-cancel":break;case "ks-editor-link-remove":o._unLink();break;default:e.stopPropagation(q)}})},_syncUI:function(){this.range=a.Range.saveRange(this.editor);var m=this.form,o;o=k.getCommonAncestor(this.range);if(o=o.nodeName=="A"?
o:f.getAncestorByTagName(o,"A")){m.href.value=o.href;m.target.checked=o.target==="_blank";f.removeClass(m,"ks-editor-link-newlink-mode")}else{m.href.value="http://";m.target.checked=false;f.addClass(m,"ks-editor-link-newlink-mode")}setTimeout(function(){m.href.select()},50)},_createLink:function(m,o){m=this._getValidHref(m);if(m.length===0)this._unLink();else{var q=this.range,r=document.createElement("div"),d;d=k.getCommonAncestor(q);if(d=d.nodeName=="A"?d:f.getAncestorByTagName(d,"A")){d.href=m;
o?d.setAttribute("target","_blank"):d.removeAttribute("target")}else{d=document.createElement("a");d.href=m;o&&d.setAttribute("target","_blank");if(j){q.select&&q.select();if("text"in q){d.innerHTML=q.htmlText||m;r.innerHTML="";r.appendChild(d);q.pasteHTML(r.innerHTML)}else this.editor.execCommand("createLink",m)}else if(g.webkit)this.editor.execCommand("createLink",m);else{if(q.collapsed)d.innerHTML=m;else for(m=q.cloneContents();m.firstChild;)d.appendChild(m.firstChild);q.deleteContents();q.insertNode(d);
q.selectNode(d)}}}},_getValidHref:function(m){if((m=l.trim(m))&&!c.test(m))m="http://"+m;return m},_unLink:function(){var m=this.editor,o=this.range,q=k.getSelectedText(o),r=k.getCommonAncestor(o);if(!q&&r.nodeType==3){m=r.parentNode;m.nodeName=="A"&&m.parentNode.replaceChild(r,m)}else{o.select&&o.select();m.execCommand("unLink",null)}}})});
KISSY.Editor.add("plugins~resize",function(a){var h=YAHOO.util.Event;a.addPlugin("resize",{type:a.PLUGIN_TYPE.STATUSBAR_ITEM,contentEl:null,currentHeight:0,init:function(){this.contentEl=this.editor.container.childNodes[1];this.currentHeight=parseInt(this.contentEl.style.height);this.renderUI();this.bindUI()},renderUI:function(){var f=this.lang;this.domEl.innerHTML='<span class="ks-editor-resize-larger" title="{larger_title}">{larger_text}</span><span class="ks-editor-resize-smaller" title="{smaller_title}">{smaller_text}</span>'.replace(/\{([^}]+)\}/g,
function(e,l){return f[l]?f[l]:l})},bindUI:function(){var f=this.domEl.getElementsByTagName("span"),e=f[1];h.on(f[0],"click",function(){this.currentHeight+=100;this._doResize()},this,true);h.on(e,"click",function(){if(this.currentHeight<100)this.currentHeight=0;else this.currentHeight-=100;this._doResize()},this,true)},_doResize:function(){this.contentEl.style.height=this.currentHeight+"px";this.editor.textarea.style.height=this.currentHeight+"px"}})});
KISSY.Editor.add("plugins~save",function(a){var h=YAHOO.util.Event,f={b:{tag:"strong"},i:{tag:"em"},u:{tag:"span",style:"text-decoration:underline"},strike:{tag:"span",style:"text-decoration:line-through"}};a.addPlugin("save",{type:a.PLUGIN_TYPE.FUNC,init:function(){var e=this.editor,l=e.textarea,g=l.form;g&&h.on(g,"submit",function(){if(!e.sourceMode)l.value=e.getData()})},filterData:function(e){e=e.replace(/<(\/?)([^>\s]+)([^>]*)>/g,function(l,g,j,k){j=j.toLowerCase();l=f[j];j=j;if(l&&!k){j=l.tag;
if(!g&&l.style)j+=' style="'+l.style+'"'}return"<"+g+j+k+">"});if(e.indexOf("mso")>0)e=this.filterWord(e);return e},filterWord:function(e){e=e.replace(/<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");e=e.replace(/<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");e=e.replace(/<H(\d)([^>]*)>/gi,"<h$1>");e=e.replace(/<(H\d)><FONT[^>]*>([\s\S]*?)<\/FONT><\/\1>/gi,"<$1>$2</$1>");e=e.replace(/<(H\d)><EM>([\s\S]*?)<\/EM><\/\1>/gi,"<$1>$2</$1>");e=e.replace(/<meta[^>]*>/ig,"");e=e.replace(/<link rel="\S+" href="file:[^>]*">/ig,
"");e=e.replace(/<!--\[if gte mso [0-9]{1,2}\]>[\s\S]*?<!\[endif\]--\>/ig,"");e=e.replace(/<style>[\s\S]*?mso[\s\S]*?<\/style>/ig,"");e=e.replace(/ lang=".+?"/ig,"");e=e.replace(/<o:p><\/o:p>/ig,"");e=e.replace(/ class="Mso.+?"/ig,"");return e=e.replace(/<\\?\?xml[^>]*>/ig,"")}})});
KISSY.Editor.add("plugins~smiley",function(a){var h=YAHOO.util.Event,f=YAHOO.lang,e=YAHOO.env.ua,l={tabs:["default"]};a.addPlugin("smiley",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,range:null,init:function(){this.config=f.merge(l,this.editor.config.pluginsConfig[this.name]||{});this._renderUI();this._bindUI()},_renderUI:function(){var g=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);g.className+=" ks-editor-smiley-dialog";this.dialog=g;this._renderDialog();e.ie&&a.Dom.setItemUnselectable(g)},
_renderDialog:function(){var g=a.Smilies[this.config.tabs[0]],j=g.mode;if(j==="icons")this._renderIcons(g);else j==="sprite"&&this._renderSprite(g)},_renderIcons:function(g){var j=this.editor.config.base+"smilies/"+g.name+"/",k=g.fileNames,b="."+g.fileExt;g=g.cols;var c=[],n,m=k.length,o;c.push('<div class="ks-editor-smiley-icons">');for(n=0;n<m;n++){o=k[n];c.push('<img src="'+j+o+b+'" alt="'+o+'" title="'+o+'" />');n%g===g-1&&c.push("<br />")}c.push("</div");this.dialog.innerHTML=c.join("")},_renderSprite:function(g){var j=
g.base,k=g.filePattern,b="."+g.fileExt,c=k.end+1;k=k.step;var n,m=[];m.push('<div class="ks-editor-smiley-sprite ks-clearfix" style="'+g.spriteStyle+'">');for(n=0;n<c;n+=k)m.push('<span data-icon="'+j+n+b+'" style="'+g.unitStyle+'"></span>');m.push("</div");this.dialog.innerHTML=m.join("")},_bindUI:function(){var g=this;h.on(this.domEl,"click",function(){g.range=a.Range.saveRange(g.editor)});h.on(this.dialog,"click",function(j){var k=h.getTarget(j);switch(k.nodeName){case "IMG":g._insertImage(k.src,
k.getAttribute("alt"));break;case "SPAN":g._insertImage(k.getAttribute("data-icon"),"");break;default:h.stopPropagation(j)}})},_insertImage:function(g,j){g=f.trim(g);if(g.length!==0){var k=this.editor,b=this.range;if(window.getSelection){var c=k.contentDoc.createElement("img");c.src=g;c.setAttribute("alt",j);b.deleteContents();b.insertNode(c);if(e.webkit){g=k.contentWin.getSelection();g.addRange(b);g.collapseToEnd()}else b.setStartAfter(c);k.contentWin.focus()}else if(document.selection)"text"in b?
b.pasteHTML('<img src="'+g+'" alt="'+j+'" />'):k.execCommand("insertImage",g)}}})});
KISSY.Editor.add("plugins~source",function(a){var h=YAHOO.util.Dom,f=YAHOO.env.ua;a.addPlugin("source",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,init:function(){var e=this.editor;this.iframe=e.contentWin.frameElement;this.textarea=e.textarea;this.iframe.parentNode.appendChild(e.textarea);h.addClass(this.domEl,"ks-editor-toolbar-source-button")},exec:function(){var e=this.editor,l=e.sourceMode;if(l)e.contentDoc.body.innerHTML=this.textarea.value;else this.textarea.value=e.getContentDocData();f.ie&&f.ie<8&&
e.contentDoc.selection.empty();this.textarea.style.display=l?"none":"";this.iframe.style.display=l?"":"none";e.sourceMode=!l;this._updateButtonState()},_updateButtonState:function(){var e=this.editor;if(e.sourceMode){h.addClass(e.container,"ks-editor-src-mode");h.addClass(this.domEl,"ks-editor-toolbar-button-selected")}else{h.removeClass(e.container,"ks-editor-src-mode");h.removeClass(this.domEl,"ks-editor-toolbar-button-selected")}}})});
KISSY.Editor.add("plugins~undo",function(a){a.addPlugin(["undo","redo"],{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name)}})});
KISSY.Editor.add("plugins~wordcount",function(a){var h=YAHOO.util,f=h.Dom,e=h.Event,l=YAHOO.lang,g={total:5E4,threshold:100};a.addPlugin("wordcount",{type:a.PLUGIN_TYPE.STATUSBAR_ITEM,total:Infinity,remain:Infinity,threshold:0,remainEl:null,init:function(){var j=l.merge(g,this.editor.config.pluginsConfig[this.name]||{});this.total=j.total;this.threshold=j.threshold;this.renderUI();this.bindUI();var k=this;setTimeout(function(){k.syncUI()},50)},renderUI:function(){this.domEl.innerHTML=this.lang.tmpl.replace("%remain%",
"<em>"+this.total+"</em>");this.remainEl=this.domEl.getElementsByTagName("em")[0]},bindUI:function(){var j=this.editor;e.on(j.textarea,"keyup",this.syncUI,this,true);e.on(j.contentDoc,"keyup",this.syncUI,this,true);e.on(j.container,"click",this.syncUI,this,true)},syncUI:function(){this.remain=this.total-this.editor.getData().length;this.remainEl.innerHTML=this.remain;this.remain<=this.threshold?f.addClass(this.domEl,"ks-editor-wordcount-alarm"):f.removeClass(this.domEl,"ks-editor-wordcount-alarm")}})});
