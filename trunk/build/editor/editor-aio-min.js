/*
Copyright 2010, KISSY UI Library v1.0.3
MIT Licensed
build: 473 Mar 9 22:20
*/
if(typeof YAHOO=="undefined"||!YAHOO)var YAHOO={};YAHOO.namespace=function(){var a=arguments,h=null,f,d,m;for(f=0;f<a.length;f+=1){m=(""+a[f]).split(".");h=YAHOO;for(d=m[0]=="YAHOO"?1:0;d<m.length;d+=1){h[m[d]]=h[m[d]]||{};h=h[m[d]]}}return h};YAHOO.log=function(a,h,f){var d=YAHOO.widget.Logger;return d&&d.log?d.log(a,h,f):false};
YAHOO.register=function(a,h,f){var d=YAHOO.env.modules,m,g,k;d[a]||(d[a]={versions:[],builds:[]});d=d[a];m=f.version;f=f.build;g=YAHOO.env.listeners;d.name=a;d.version=m;d.build=f;d.versions.push(m);d.builds.push(f);d.mainClass=h;for(k=0;k<g.length;k+=1)g[k](d);if(h){h.VERSION=m;h.BUILD=f}else YAHOO.log("mainClass is undefined for module "+a,"warn")};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};
YAHOO.env.ua=function(){var a=function(m){var g=0;return parseFloat(m.replace(/\./g,function(){return g++==1?"":"."}))},h={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:navigator.cajaVersion,secure:false,os:null},f=navigator&&navigator.userAgent,d=window&&window.location;d=d&&d.href;h.secure=d&&d.toLowerCase().indexOf("https")===0;if(f){if(/windows|win32/i.test(f))h.os="windows";else if(/macintosh/i.test(f))h.os="macintosh";if(/KHTML/.test(f))h.webkit=1;if((d=f.match(/AppleWebKit\/([^\s]*)/))&&
d[1]){h.webkit=a(d[1]);if(/ Mobile\//.test(f))h.mobile="Apple";else if(d=f.match(/NokiaN[^\/]*/))h.mobile=d[0];if(d=f.match(/AdobeAIR\/([^\s]*)/))h.air=d[0]}if(!h.webkit)if((d=f.match(/Opera[\s\/]([^\s]*)/))&&d[1]){h.opera=a(d[1]);if(d=f.match(/Opera Mini[^;]*/))h.mobile=d[0]}else if((d=f.match(/MSIE\s([^;]*)/))&&d[1])h.ie=a(d[1]);else if(d=f.match(/Gecko\/([^\s]*)/)){h.gecko=1;if((d=f.match(/rv:([^\s\)]*)/))&&d[1])h.gecko=a(d[1])}}return h}();
(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var a=YAHOO_config.listener,h=YAHOO.env.listeners,f=true,d;if(a){for(d=0;d<h.length;d++)if(h[d]==a){f=false;break}f&&h.push(a)}}})();YAHOO.lang=YAHOO.lang||{};
(function(){var a=YAHOO.lang,h=Object.prototype,f=[],d=["toString","valueOf"],m={isArray:function(g){return h.toString.apply(g)==="[object Array]"},isBoolean:function(g){return typeof g==="boolean"},isFunction:function(g){return typeof g==="function"||h.toString.apply(g)==="[object Function]"},isNull:function(g){return g===null},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isObject:function(g){return g&&(typeof g==="object"||a.isFunction(g))||false},isString:function(g){return typeof g===
"string"},isUndefined:function(g){return typeof g==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(g,k){var j,b,e;for(j=0;j<d.length;j+=1){b=d[j];e=k[b];if(a.isFunction(e)&&e!=h[b])g[b]=e}}:function(){},extend:function(g,k,j){if(!k||!g)throw new Error("extend failed, please check that all dependencies are included.");var b=function(){},e;b.prototype=k.prototype;g.prototype=new b;g.prototype.constructor=g;g.superclass=k.prototype;if(k.prototype.constructor==h.constructor)k.prototype.constructor=
k;if(j){for(e in j)if(a.hasOwnProperty(j,e))g.prototype[e]=j[e];a._IEEnumFix(g.prototype,j)}},augmentObject:function(g,k){if(!k||!g)throw new Error("Absorb failed, verify dependencies.");var j=arguments,b,e=j[2];if(e&&e!==true)for(b=2;b<j.length;b+=1)g[j[b]]=k[j[b]];else{for(b in k)if(e||!(b in g))g[b]=k[b];a._IEEnumFix(g,k)}},augmentProto:function(g,k){if(!k||!g)throw new Error("Augment failed, verify dependencies.");var j=[g.prototype,k.prototype],b;for(b=2;b<arguments.length;b+=1)j.push(arguments[b]);
a.augmentObject.apply(this,j)},dump:function(g,k){var j,b,e=[];if(a.isObject(g))if(g instanceof Date||"nodeType"in g&&"tagName"in g)return g;else{if(a.isFunction(g))return"f(){...}"}else return g+"";k=a.isNumber(k)?k:3;if(a.isArray(g)){e.push("[");j=0;for(b=g.length;j<b;j+=1){a.isObject(g[j])?e.push(k>0?a.dump(g[j],k-1):"{...}"):e.push(g[j]);e.push(", ")}e.length>1&&e.pop();e.push("]")}else{e.push("{");for(j in g)if(a.hasOwnProperty(g,j)){e.push(j+" => ");a.isObject(g[j])?e.push(k>0?a.dump(g[j],k-
1):"{...}"):e.push(g[j]);e.push(", ")}e.length>1&&e.pop();e.push("}")}return e.join("")},substitute:function(g,k,j){for(var b,e,o,l,n,q=[],r;;){b=g.lastIndexOf("{");if(b<0)break;e=g.indexOf("}",b);if(b+1>=e)break;l=r=g.substring(b+1,e);n=null;o=l.indexOf(" ");if(o>-1){n=l.substring(o+1);l=l.substring(0,o)}o=k[l];if(j)o=j(l,o,n);if(a.isObject(o))if(a.isArray(o))o=a.dump(o,parseInt(n,10));else{n=n||"";l=n.indexOf("dump");if(l>-1)n=n.substring(4);r=o.toString();o=r==="[object Object]"||l>-1?a.dump(o,
parseInt(n,10)):r}else if(!a.isString(o)&&!a.isNumber(o)){o="~-"+q.length+"-~";q[q.length]=r}g=g.substring(0,b)+o+g.substring(e+1)}for(b=q.length-1;b>=0;b-=1)g=g.replace(new RegExp("~-"+b+"-~"),"{"+q[b]+"}","g");return g},trim:function(g){try{return g.replace(/^\s+|\s+$/g,"")}catch(k){return g}},merge:function(){var g={},k=arguments,j=k.length,b;for(b=0;b<j;b+=1)a.augmentObject(g,k[b],true);return g},later:function(g,k,j,b,e){g=g||0;k=k||{};var o=j,l=b,n;if(a.isString(j))o=k[j];if(!o)throw new TypeError("method undefined");
if(l&&!a.isArray(l))l=[b];j=function(){o.apply(k,l||f)};n=e?setInterval(j,g):setTimeout(j,g);return{interval:e,cancel:function(){this.interval?clearInterval(n):clearTimeout(n)}}},isValue:function(g){return a.isObject(g)||a.isString(g)||a.isNumber(g)||a.isBoolean(g)}};a.hasOwnProperty=h.hasOwnProperty?function(g,k){return g&&g.hasOwnProperty(k)}:function(g,k){return!a.isUndefined(g[k])&&g.constructor.prototype[k]!==g[k]};m.augmentObject(a,m,true);YAHOO.util.Lang=a;a.augment=a.augmentProto;YAHOO.augment=
a.augmentProto;YAHOO.extend=a.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var a=YAHOO.util,h=YAHOO.lang,f=YAHOO.env.ua,d=YAHOO.lang.trim,m={},g={},k=/^t(?:able|d|h)$/i,j=/color$/i,b=window.document,e=b.documentElement,o=f.opera,l=f.webkit,n=f.gecko,q=f.ie;a.Dom={CUSTOM_ATTRIBUTES:!e.hasAttribute?{"for":"htmlFor","class":"className"}:{htmlFor:"for",className:"class"},DOT_ATTRIBUTES:{},get:function(c){var i,p,s,t;if(c){if(c.nodeType||c.item)return c;if(typeof c==="string"){i=c;s=(c=b.getElementById(c))?c.attributes:
null;if(c&&s&&s.id&&s.id.value===i)return c;else if(c&&b.all){c=null;p=b.all[i];s=0;for(t=p.length;s<t;++s)if(p[s].id===i)return p[s]}return c}if(YAHOO.util.Element&&c instanceof YAHOO.util.Element)c=c.get("element");if("length"in c){i=[];s=0;for(t=c.length;s<t;++s)i[i.length]=a.Dom.get(c[s]);return i}return c}return null},getComputedStyle:function(c,i){if(window.getComputedStyle)return c.ownerDocument.defaultView.getComputedStyle(c,null)[i];else if(c.currentStyle)return a.Dom.IE_ComputedStyle.get(c,
i)},getStyle:function(c,i){return a.Dom.batch(c,a.Dom._getStyle,i)},_getStyle:function(){if(window.getComputedStyle)return function(c,i){i=i==="float"?(i="cssFloat"):a.Dom._toCamel(i);var p=c.style[i];if(!p)if(c=c.ownerDocument.defaultView.getComputedStyle(c,null))p=c[i];return p};else if(e.currentStyle)return function(c,i){var p;switch(i){case "opacity":p=100;try{p=c.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{p=c.filters("alpha").opacity}catch(t){}}return p/100;case "float":i=
"styleFloat";default:i=a.Dom._toCamel(i);p=c.currentStyle?c.currentStyle[i]:null;return c.style[i]||p}}}(),setStyle:function(c,i,p){a.Dom.batch(c,a.Dom._setStyle,{prop:i,val:p})},_setStyle:function(){return q?function(c,i){var p=a.Dom._toCamel(i.prop);i=i.val;if(c)switch(p){case "opacity":if(h.isString(c.style.filter)){c.style.filter="alpha(opacity="+i*100+")";if(!c.currentStyle||!c.currentStyle.hasLayout)c.style.zoom=1}break;case "float":p="styleFloat";default:c.style[p]=i}}:function(c,i){var p=
a.Dom._toCamel(i.prop);i=i.val;if(c){if(p=="float")p="cssFloat";c.style[p]=i}}}(),getXY:function(c){return a.Dom.batch(c,a.Dom._getXY)},_canPosition:function(c){return a.Dom._getStyle(c,"display")!=="none"&&a.Dom._inDoc(c)},_getXY:function(){return b.documentElement.getBoundingClientRect?function(c){var i,p,s,t,v,x,y=Math.floor;p=false;if(a.Dom._canPosition(c)){p=c.getBoundingClientRect();s=c.ownerDocument;c=a.Dom.getDocumentScrollLeft(s);i=a.Dom.getDocumentScrollTop(s);p=[y(p.left),y(p.top)];if(q&&
f.ie<8){v=t=2;x=s.compatMode;if(f.ie===6)if(x!=="BackCompat")v=t=0;if(x==="BackCompat"){x=r(s.documentElement,"borderLeftWidth");s=r(s.documentElement,"borderTopWidth");if(x!=="medium")t=parseInt(x,10);if(s!=="medium")v=parseInt(s,10)}p[0]-=t;p[1]-=v}if(i||c){p[0]+=c;p[1]+=i}p[0]=y(p[0]);p[1]=y(p[1])}return p}:function(c){var i,p,s,t=false,v=c;if(a.Dom._canPosition(c)){t=[c.offsetLeft,c.offsetTop];i=a.Dom.getDocumentScrollLeft(c.ownerDocument);p=a.Dom.getDocumentScrollTop(c.ownerDocument);for(s=n||
f.webkit>519?true:false;v=v.offsetParent;){t[0]+=v.offsetLeft;t[1]+=v.offsetTop;if(s)t=a.Dom._calcBorders(v,t)}if(a.Dom._getStyle(c,"position")!=="fixed"){for(v=c;(v=v.parentNode)&&v.tagName;){c=v.scrollTop;s=v.scrollLeft;if(n&&a.Dom._getStyle(v,"overflow")!=="visible")t=a.Dom._calcBorders(v,t);if(c||s){t[0]-=s;t[1]-=c}}t[0]+=i;t[1]+=p}else if(o){t[0]-=i;t[1]-=p}else if(l||n){t[0]+=i;t[1]+=p}t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1])}return t}}(),getX:function(c){return a.Dom.batch(c,function(i){return a.Dom.getXY(i)[0]},
a.Dom,true)},getY:function(c){return a.Dom.batch(c,function(i){return a.Dom.getXY(i)[1]},a.Dom,true)},setXY:function(c,i,p){a.Dom.batch(c,a.Dom._setXY,{pos:i,noRetry:p})},_setXY:function(c,i){var p=a.Dom._getStyle(c,"position"),s=a.Dom.setStyle,t=i.pos;i=i.noRetry;var v=[parseInt(a.Dom.getComputedStyle(c,"left"),10),parseInt(a.Dom.getComputedStyle(c,"top"),10)],x;if(p=="static"){p="relative";s(c,"position",p)}x=a.Dom._getXY(c);if(!t||x===false)return false;if(isNaN(v[0]))v[0]=p=="relative"?0:c.offsetLeft;
if(isNaN(v[1]))v[1]=p=="relative"?0:c.offsetTop;t[0]!==null&&s(c,"left",t[0]-x[0]+v[0]+"px");t[1]!==null&&s(c,"top",t[1]-x[1]+v[1]+"px");if(!i){p=a.Dom._getXY(c);if(t[0]!==null&&p[0]!=t[0]||t[1]!==null&&p[1]!=t[1])a.Dom._setXY(c,{pos:t,noRetry:true})}},setX:function(c,i){a.Dom.setXY(c,[i,null])},setY:function(c,i){a.Dom.setXY(c,[null,i])},getRegion:function(c){return a.Dom.batch(c,function(i){var p=false;if(a.Dom._canPosition(i))p=a.Region.getRegion(i);return p},a.Dom,true)},getClientWidth:function(){return a.Dom.getViewportWidth()},
getClientHeight:function(){return a.Dom.getViewportHeight()},getElementsByClassName:function(c,i,p,s,t,v){i=i||"*";p=p?a.Dom.get(p):b;if(!p)return[];var x=[];i=p.getElementsByTagName(i);p=a.Dom.hasClass;for(var y=0,B=i.length;y<B;++y)if(p(i[y],c))x[x.length]=i[y];s&&a.Dom.batch(x,s,t,v);return x},hasClass:function(c,i){return a.Dom.batch(c,a.Dom._hasClass,i)},_hasClass:function(c,i){var p=false;if(c&&i){c=a.Dom._getAttribute(c,"className")||"";p=i.exec?i.test(c):i&&(" "+c+" ").indexOf(" "+i+" ")>
-1}return p},addClass:function(c,i){return a.Dom.batch(c,a.Dom._addClass,i)},_addClass:function(c,i){var p=false,s;if(c&&i){s=a.Dom._getAttribute(c,"className")||"";if(!a.Dom._hasClass(c,i)){a.Dom.setAttribute(c,"className",d(s+" "+i));p=true}}return p},removeClass:function(c,i){return a.Dom.batch(c,a.Dom._removeClass,i)},_removeClass:function(c,i){var p=false,s;if(c&&i){s=a.Dom._getAttribute(c,"className")||"";a.Dom.setAttribute(c,"className",s.replace(a.Dom._getClassRegex(i),""));i=a.Dom._getAttribute(c,
"className");if(s!==i){a.Dom.setAttribute(c,"className",d(i));p=true;if(a.Dom._getAttribute(c,"className")===""){s=c.hasAttribute&&c.hasAttribute("class")?"class":"className";c.removeAttribute(s)}}}return p},replaceClass:function(c,i,p){return a.Dom.batch(c,a.Dom._replaceClass,{from:i,to:p})},_replaceClass:function(c,i){var p,s,t=false;if(c&&i){p=i.from;if(s=i.to)if(p){if(p!==s){i=a.Dom._getAttribute(c,"className")||"";p=(" "+i.replace(a.Dom._getClassRegex(p)," "+s)).split(a.Dom._getClassRegex(s));
p.splice(1,0," "+s);a.Dom.setAttribute(c,"className",d(p.join("")));t=true}}else t=a.Dom._addClass(c,i.to);else t=false}return t},generateId:function(c,i){i=i||"yui-gen";var p=function(s){if(s&&s.id)return s.id;var t=i+YAHOO.env._id_counter++;if(s){if(s.ownerDocument&&s.ownerDocument.getElementById(t))return a.Dom.generateId(s,t+i);s.id=t}return t};return a.Dom.batch(c,p,a.Dom,true)||p.apply(a.Dom,arguments)},isAncestor:function(c,i){c=a.Dom.get(c);i=a.Dom.get(i);var p=false;if(c&&i&&c.nodeType&&
i.nodeType)if(c.contains&&c!==i)p=c.contains(i);else if(c.compareDocumentPosition)p=!!(c.compareDocumentPosition(i)&16);return p},inDocument:function(c,i){return a.Dom._inDoc(a.Dom.get(c),i)},_inDoc:function(c,i){var p=false;if(c&&c.tagName){i=i||c.ownerDocument;p=a.Dom.isAncestor(i.documentElement,c)}return p},getElementsBy:function(c,i,p,s,t,v,x){i=i||"*";p=p?a.Dom.get(p):b;if(!p)return[];var y=[];i=p.getElementsByTagName(i);p=0;for(var B=i.length;p<B;++p)if(c(i[p]))if(x){y=i[p];break}else y[y.length]=
i[p];s&&a.Dom.batch(y,s,t,v);return y},getElementBy:function(c,i,p){return a.Dom.getElementsBy(c,i,p,null,null,null,true)},batch:function(c,i,p,s){var t=[];s=s?p:window;if((c=c&&(c.tagName||c.item)?c:a.Dom.get(c))&&i){if(c.tagName||c.length===undefined)return i.call(s,c,p);for(var v=0;v<c.length;++v)t[t.length]=i.call(s,c[v],p)}else return false;return t},getDocumentHeight:function(){return Math.max(b.compatMode!="CSS1Compat"||l?b.body.scrollHeight:e.scrollHeight,a.Dom.getViewportHeight())},getDocumentWidth:function(){return Math.max(b.compatMode!=
"CSS1Compat"||l?b.body.scrollWidth:e.scrollWidth,a.Dom.getViewportWidth())},getViewportHeight:function(){var c=self.innerHeight,i=b.compatMode;if((i||q)&&!o)c=i=="CSS1Compat"?e.clientHeight:b.body.clientHeight;return c},getViewportWidth:function(){var c=self.innerWidth,i=b.compatMode;if(i||q)c=i=="CSS1Compat"?e.clientWidth:b.body.clientWidth;return c},getAncestorBy:function(c,i){for(;c=c.parentNode;)if(a.Dom._testElement(c,i))return c;return null},getAncestorByClassName:function(c,i){c=a.Dom.get(c);
if(!c)return null;return a.Dom.getAncestorBy(c,function(p){return a.Dom.hasClass(p,i)})},getAncestorByTagName:function(c,i){c=a.Dom.get(c);if(!c)return null;return a.Dom.getAncestorBy(c,function(p){return p.tagName&&p.tagName.toUpperCase()==i.toUpperCase()})},getPreviousSiblingBy:function(c,i){for(;c;){c=c.previousSibling;if(a.Dom._testElement(c,i))return c}return null},getPreviousSibling:function(c){c=a.Dom.get(c);if(!c)return null;return a.Dom.getPreviousSiblingBy(c)},getNextSiblingBy:function(c,
i){for(;c;){c=c.nextSibling;if(a.Dom._testElement(c,i))return c}return null},getNextSibling:function(c){c=a.Dom.get(c);if(!c)return null;return a.Dom.getNextSiblingBy(c)},getFirstChildBy:function(c,i){return(a.Dom._testElement(c.firstChild,i)?c.firstChild:null)||a.Dom.getNextSiblingBy(c.firstChild,i)},getFirstChild:function(c){c=a.Dom.get(c);if(!c)return null;return a.Dom.getFirstChildBy(c)},getLastChildBy:function(c,i){if(!c)return null;return(a.Dom._testElement(c.lastChild,i)?c.lastChild:null)||
a.Dom.getPreviousSiblingBy(c.lastChild,i)},getLastChild:function(c){c=a.Dom.get(c);return a.Dom.getLastChildBy(c)},getChildrenBy:function(c,i){var p=(c=a.Dom.getFirstChildBy(c,i))?[c]:[];a.Dom.getNextSiblingBy(c,function(s){if(!i||i(s))p[p.length]=s;return false});return p},getChildren:function(c){c=a.Dom.get(c);return a.Dom.getChildrenBy(c)},getDocumentScrollLeft:function(c){c=c||b;return Math.max(c.documentElement.scrollLeft,c.body.scrollLeft)},getDocumentScrollTop:function(c){c=c||b;return Math.max(c.documentElement.scrollTop,
c.body.scrollTop)},insertBefore:function(c,i){c=a.Dom.get(c);i=a.Dom.get(i);if(!c||!i||!i.parentNode)return null;return i.parentNode.insertBefore(c,i)},insertAfter:function(c,i){c=a.Dom.get(c);i=a.Dom.get(i);if(!c||!i||!i.parentNode)return null;return i.nextSibling?i.parentNode.insertBefore(c,i.nextSibling):i.parentNode.appendChild(c)},getClientRegion:function(){var c=a.Dom.getDocumentScrollTop(),i=a.Dom.getDocumentScrollLeft(),p=a.Dom.getViewportWidth()+i,s=a.Dom.getViewportHeight()+c;return new a.Region(c,
p,s,i)},setAttribute:function(c,i,p){a.Dom.batch(c,a.Dom._setAttribute,{attr:i,val:p})},_setAttribute:function(c,i){var p=a.Dom._toCamel(i.attr);i=i.val;if(c&&c.setAttribute)if(a.Dom.DOT_ATTRIBUTES[p])c[p]=i;else{p=a.Dom.CUSTOM_ATTRIBUTES[p]||p;c.setAttribute(p,i)}},getAttribute:function(c,i){return a.Dom.batch(c,a.Dom._getAttribute,i)},_getAttribute:function(c,i){var p;i=a.Dom.CUSTOM_ATTRIBUTES[i]||i;if(c&&c.getAttribute)p=c.getAttribute(i,2);return p},_toCamel:function(c){function i(p,s){return s.toUpperCase()}
return m[c]||(m[c]=c.indexOf("-")===-1?c:c.replace(/-([a-z])/gi,i))},_getClassRegex:function(c){var i;if(c!==undefined)if(c.exec)i=c;else{i=g[c];if(!i){c=c.replace(a.Dom._patterns.CLASS_RE_TOKENS,"\\$1");i=g[c]=new RegExp("(?:^|\\s)"+c+"(?= |$)","g")}}return i},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(c,i){return c&&c.nodeType==1&&(!i||i(c))},_calcBorders:function(c,i){var p=parseInt(a.Dom.getComputedStyle(c,"borderTopWidth"),10)||
0,s=parseInt(a.Dom.getComputedStyle(c,"borderLeftWidth"),10)||0;if(n)if(k.test(c.tagName))s=p=0;i[0]+=s;i[1]+=p;return i}};var r=a.Dom.getComputedStyle;if(f.opera)a.Dom.getComputedStyle=function(c,i){c=r(c,i);if(j.test(i))c=a.Dom.Color.toRGB(c);return c};if(f.webkit)a.Dom.getComputedStyle=function(c,i){c=r(c,i);if(c==="rgba(0, 0, 0, 0)")c="transparent";return c};if(f.ie&&f.ie>=8&&b.documentElement.hasAttribute)a.Dom.DOT_ATTRIBUTES.type=true})();
YAHOO.util.Region=function(a,h,f,d){this.y=this.top=a;this[1]=a;this.right=h;this.bottom=f;this.x=this.left=d;this[0]=d;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(a){return a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom};YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};
YAHOO.util.Region.prototype.intersect=function(a){var h=Math.max(this.top,a.top),f=Math.min(this.right,a.right),d=Math.min(this.bottom,a.bottom);a=Math.max(this.left,a.left);return d>=h&&f>=a?new YAHOO.util.Region(h,f,d,a):null};YAHOO.util.Region.prototype.union=function(a){var h=Math.min(this.top,a.top),f=Math.max(this.right,a.right),d=Math.max(this.bottom,a.bottom);a=Math.min(this.left,a.left);return new YAHOO.util.Region(h,f,d,a)};
YAHOO.util.Region.prototype.toString=function(){return"Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}"};YAHOO.util.Region.getRegion=function(a){var h=YAHOO.util.Dom.getXY(a);return new YAHOO.util.Region(h[1],h[0]+a.offsetWidth,h[1]+a.offsetHeight,h[0])};YAHOO.util.Point=function(a,h){if(YAHOO.lang.isArray(a)){h=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,h,a,h,a)};
YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);
(function(){var a=YAHOO.util,h=/^width|height$/,f=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,d={get:function(g,k){var j="";j=g.currentStyle[k];return j=k==="opacity"?a.Dom.getStyle(g,"opacity"):!j||j.indexOf&&j.indexOf("px")>-1?j:a.Dom.IE_COMPUTED[k]?a.Dom.IE_COMPUTED[k](g,k):f.test(j)?a.Dom.IE.ComputedStyle.getPixel(g,k):j},getOffset:function(g,k){var j=g.currentStyle[k],b=k.charAt(0).toUpperCase()+k.substr(1),e="offset"+b,o="pixel"+b;b="";if(j=="auto"){b=
j=g[e];if(h.test(k)){g.style[k]=j;if(g[e]>j)b=j-(g[e]-j);g.style[k]="auto"}}else{if(!g.style[o]&&!g.style[k])g.style[k]=j;b=g.style[o]}return b+"px"},getBorderWidth:function(g,k){var j=null;if(!g.currentStyle.hasLayout)g.style.zoom=1;switch(k){case "borderTopWidth":j=g.clientTop;break;case "borderBottomWidth":j=g.offsetHeight-g.clientHeight-g.clientTop;break;case "borderLeftWidth":j=g.clientLeft;break;case "borderRightWidth":j=g.offsetWidth-g.clientWidth-g.clientLeft;break}return j+"px"},getPixel:function(g,
k){var j=null,b=g.currentStyle.right;g.style.right=g.currentStyle[k];j=g.style.pixelRight;g.style.right=b;return j+"px"},getMargin:function(g,k){return g.currentStyle[k]=="auto"?"0px":a.Dom.IE.ComputedStyle.getPixel(g,k)},getVisibility:function(g,k){for(var j;(j=g.currentStyle)&&j[k]=="inherit";)g=g.parentNode;return j?j[k]:"visible"},getColor:function(g,k){return a.Dom.Color.toRGB(g.currentStyle[k])||"transparent"},getBorderColor:function(g,k){g=g.currentStyle;return a.Dom.Color.toRGB(a.Dom.Color.toHex(g[k]||
g.color))}},m={};m.top=m.right=m.bottom=m.left=m.width=m.height=d.getOffset;m.color=d.getColor;m.borderTopWidth=m.borderRightWidth=m.borderBottomWidth=m.borderLeftWidth=d.getBorderWidth;m.marginTop=m.marginRight=m.marginBottom=m.marginLeft=d.getMargin;m.visibility=d.getVisibility;m.borderColor=m.borderTopColor=m.borderRightColor=m.borderBottomColor=m.borderLeftColor=d.getBorderColor;a.Dom.IE_COMPUTED=m;a.Dom.IE_ComputedStyle=d})();
(function(){var a=parseInt,h=RegExp,f=YAHOO.util;f.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(d){f.Dom.Color.re_RGB.test(d)||(d=f.Dom.Color.toHex(d));if(f.Dom.Color.re_hex.exec(d))d=
"rgb("+[a(h.$1,16),a(h.$2,16),a(h.$3,16)].join(", ")+")";return d},toHex:function(d){d=f.Dom.Color.KEYWORDS[d]||d;if(f.Dom.Color.re_RGB.exec(d)){d=h.$1.length===1?"0"+h.$1:Number(h.$1);var m=h.$2.length===1?"0"+h.$2:Number(h.$2),g=h.$3.length===1?"0"+h.$3:Number(h.$3);d=[d.toString(16),m.toString(16),g.toString(16)].join("")}if(d.length<6)d=d.replace(f.Dom.Color.re_hex3,"$1$1");if(d!=="transparent"&&d.indexOf("#")<0)d="#"+d;return d.toLowerCase()}}})();
YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.0r4",build:"2449"});YAHOO.util.CustomEvent=function(a,h,f,d,m){this.type=a;this.scope=h||window;this.silent=f;this.fireOnce=m;this.fired=false;this.firedWith=null;this.signature=d||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(a!=="_YUICEOnSubscribe")this.subscribeEvent=new YAHOO.util.CustomEvent("_YUICEOnSubscribe",this,true);this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;
YAHOO.util.CustomEvent.prototype={subscribe:function(a,h,f){if(!a)throw new Error("Invalid callback for subscriber to '"+this.type+"'");this.subscribeEvent&&this.subscribeEvent.fire(a,h,f);a=new YAHOO.util.Subscriber(a,h,f);this.fireOnce&&this.fired?this.notify(a,this.firedWith):this.subscribers.push(a)},unsubscribe:function(a,h){if(!a)return this.unsubscribeAll();for(var f=false,d=0,m=this.subscribers.length;d<m;++d){var g=this.subscribers[d];if(g&&g.contains(a,h)){this._delete(d);f=true}}return f},
fire:function(){this.lastError=null;var a=this.subscribers.length,h=[].slice.call(arguments,0),f=true,d;if(this.fireOnce)if(this.fired)return true;else this.firedWith=h;this.fired=true;if(!a&&this.silent)return true;var m=this.subscribers.slice();for(d=0;d<a;++d){var g=m[d];if(g){f=this.notify(g,h);if(false===f)break}}return f!==false},notify:function(a,h){var f,d=null,m=a.getScope(this.scope),g=YAHOO.util.Event.throwErrors;if(this.signature==YAHOO.util.CustomEvent.FLAT){if(h.length>0)d=h[0];try{f=
a.fn.call(m,d,a.obj)}catch(k){this.lastError=k;if(g)throw k;}}else try{f=a.fn.call(m,this.type,h,a.obj)}catch(j){this.lastError=j;if(g)throw j;}return f},unsubscribeAll:function(){var a=this.subscribers.length,h;for(h=a-1;h>-1;h--)this._delete(h);this.subscribers=[];return a},_delete:function(a){var h=this.subscribers[a];if(h){delete h.fn;delete h.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};
YAHOO.util.Subscriber=function(a,h,f){this.fn=a;this.obj=YAHOO.lang.isUndefined(h)?null:h;this.overrideContext=f};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext)return this.overrideContext===true?this.obj:this.overrideContext;return a};YAHOO.util.Subscriber.prototype.contains=function(a,h){return h?this.fn==a&&this.obj==h:this.fn==a};
YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};
if(!YAHOO.util.Event){YAHOO.util.Event=function(){var a=false,h=[],f=[],d=0,m=[],g=0,k={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},j=YAHOO.env.ua.ie;return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:j,_interval:null,_dri:null,_specialTypes:{focusin:j?"focusin":"focus",focusout:j?"focusout":"blur"},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval)this._interval=
YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)},onAvailable:function(b,e,o,l,n){b=YAHOO.lang.isString(b)?[b]:b;for(var q=0;q<b.length;q+=1)m.push({id:b[q],fn:e,obj:o,overrideContext:l,checkReady:n});d=this.POLL_RETRYS;this.startInterval()},onContentReady:function(b,e,o,l){this.onAvailable(b,e,o,l,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(b,e,o,l,n,q){if(!o||!o.call)return false;if(this._isValidCollection(b)){for(var r=
true,c=0,i=b.length;c<i;++c)r=this.on(b[c],e,o,l,n)&&r;return r}else if(YAHOO.lang.isString(b))if(r=this.getEl(b))b=r;else{this.onAvailable(b,function(){YAHOO.util.Event._addListener(b,e,o,l,n,q)});return true}if(!b)return false;if("unload"==e&&l!==this){f[f.length]=[b,e,o,l,n];return true}var p=b;if(n)p=n===true?l:n;r=function(t){return o.call(p,YAHOO.util.Event.getEvent(t,b),l)};h[h.length]=[b,e,o,r,p,l,n,q];try{this._simpleAdd(b,e,r,q)}catch(s){this.lastError=s;this.removeListener(b,e,o);return false}return true},
_getType:function(b){return this._specialTypes[b]||b},addListener:function(b,e,o,l,n){var q=(e=="focusin"||e=="focusout")&&!YAHOO.env.ua.ie?true:false;return this._addListener(b,this._getType(e),o,l,n,q)},addFocusListener:function(b,e,o,l){return this.on(b,"focusin",e,o,l)},removeFocusListener:function(b,e){return this.removeListener(b,"focusin",e)},addBlurListener:function(b,e,o,l){return this.on(b,"focusout",e,o,l)},removeBlurListener:function(b,e){return this.removeListener(b,"focusout",e)},removeListener:function(b,
e,o,l){var n;e=this._getType(e);if(typeof b=="string")b=this.getEl(b);else if(this._isValidCollection(b)){l=true;for(n=b.length-1;n>-1;n--)l=this.removeListener(b[n],e,o)&&l;return l}if(!o||!o.call)return this.purgeElement(b,false,e);if("unload"==e){for(n=f.length-1;n>-1;n--)if((l=f[n])&&l[0]==b&&l[1]==e&&l[2]==o){f.splice(n,1);return true}return false}n=null;l=l;if("undefined"===typeof l)l=this._getCacheIndex(h,b,e,o);if(l>=0)n=h[l];if(!b||!n)return false;o=n[this.CAPTURE]===true?true:false;try{this._simpleRemove(b,
e,n[this.WFN],o)}catch(q){this.lastError=q;return false}delete h[l][this.WFN];delete h[l][this.FN];h.splice(l,1);return true},getTarget:function(b){return this.resolveTextNode(b.target||b.srcElement)},resolveTextNode:function(b){try{if(b&&3==b.nodeType)return b.parentNode}catch(e){}return b},getPageX:function(b){var e=b.pageX;if(!e&&0!==e){e=b.clientX||0;if(this.isIE)e+=this._getScrollLeft()}return e},getPageY:function(b){var e=b.pageY;if(!e&&0!==e){e=b.clientY||0;if(this.isIE)e+=this._getScrollTop()}return e},
getXY:function(b){return[this.getPageX(b),this.getPageY(b)]},getRelatedTarget:function(b){var e=b.relatedTarget;if(!e)if(b.type=="mouseout")e=b.toElement;else if(b.type=="mouseover")e=b.fromElement;return this.resolveTextNode(e)},getTime:function(b){if(!b.time){var e=(new Date).getTime();try{b.time=e}catch(o){this.lastError=o;return e}}return b.time},stopEvent:function(b){this.stopPropagation(b);this.preventDefault(b)},stopPropagation:function(b){if(b.stopPropagation)b.stopPropagation();else b.cancelBubble=
true},preventDefault:function(b){if(b.preventDefault)b.preventDefault();else b.returnValue=false},getEvent:function(b){b=b||window.event;if(!b)for(var e=this.getEvent.caller;e;){if((b=e.arguments[0])&&Event==b.constructor)break;e=e.caller}return b},getCharCode:function(b){b=b.keyCode||b.charCode||0;if(YAHOO.env.ua.webkit&&b in k)b=k[b];return b},_getCacheIndex:function(b,e,o,l){for(var n=0,q=b.length;n<q;n+=1){var r=b[n];if(r&&r[this.FN]==l&&r[this.EL]==e&&r[this.TYPE]==o)return n}return-1},generateId:function(b){var e=
b.id;if(!e){e="yuievtautoid-"+g;++g;b.id=e}return e},_isValidCollection:function(b){try{return b&&typeof b!=="string"&&b.length&&!b.tagName&&!b.alert&&typeof b[0]!=="undefined"}catch(e){return false}},elCache:{},getEl:function(b){return typeof b==="string"?document.getElementById(b):b},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(){if(!a){a=true;var b=YAHOO.util.Event;b._ready();b._tryPreloadAttach()}},_ready:function(){var b=YAHOO.util.Event;
if(!b.DOMReady){b.DOMReady=true;b.DOMReadyEvent.fire();b._simpleRemove(document,"DOMContentLoaded",b._ready)}},_tryPreloadAttach:function(){if(m.length===0){d=0;if(this._interval){this._interval.cancel();this._interval=null}}else if(!this.locked){if(this.isIE)if(!this.DOMReady){this.startInterval();return}this.locked=true;var b=!a;b||(b=d>0&&m.length>0);var e=[],o=function(i,p){i=i;if(p.overrideContext)i=p.overrideContext===true?p.obj:p.overrideContext;p.fn.call(i,p.obj)},l,n,q,r,c=[];l=0;for(n=m.length;l<
n;l+=1)if(q=m[l])if(r=this.getEl(q.id))if(q.checkReady){if(a||r.nextSibling||!b){c.push(q);m[l]=null}}else{o(r,q);m[l]=null}else e.push(q);l=0;for(n=c.length;l<n;l+=1){q=c[l];o(this.getEl(q.id),q)}d--;if(b){for(l=m.length-1;l>-1;l--){q=m[l];if(!q||!q.id)m.splice(l,1)}this.startInterval()}else if(this._interval){this._interval.cancel();this._interval=null}this.locked=false}},purgeElement:function(b,e,o){b=YAHOO.lang.isString(b)?this.getEl(b):b;var l=this.getListeners(b,o),n;if(l)for(n=l.length-1;n>
-1;n--){var q=l[n];this.removeListener(b,q.type,q.fn)}if(e&&b&&b.childNodes){n=0;for(l=b.childNodes.length;n<l;++n)this.purgeElement(b.childNodes[n],e,o)}},getListeners:function(b,e){var o=[],l;if(e)if(e==="unload")l=[f];else{e=this._getType(e);l=[h]}else l=[h,f];b=YAHOO.lang.isString(b)?this.getEl(b):b;for(var n=0;n<l.length;n+=1){var q=l[n];if(q)for(var r=0,c=q.length;r<c;++r){var i=q[r];if(i&&i[this.EL]===b&&(!e||e===i[this.TYPE]))o.push({type:i[this.TYPE],fn:i[this.FN],obj:i[this.OBJ],adjust:i[this.OVERRIDE],
scope:i[this.ADJ_SCOPE],index:r})}}return o.length?o:null},_unload:function(b){var e=YAHOO.util.Event,o,l,n,q=f.slice(),r;o=0;for(n=f.length;o<n;++o)if(l=q[o]){r=window;if(l[e.ADJ_SCOPE])r=l[e.ADJ_SCOPE]===true?l[e.UNLOAD_OBJ]:l[e.ADJ_SCOPE];l[e.FN].call(r,e.getEvent(b,l[e.EL]),l[e.UNLOAD_OBJ]);q[o]=null}f=null;if(h)for(b=h.length-1;b>-1;b--)(l=h[b])&&e.removeListener(l[e.EL],l[e.TYPE],l[e.FN],b);e._simpleRemove(window,"unload",e._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},
_getScroll:function(){var b=document.documentElement,e=document.body;return b&&(b.scrollTop||b.scrollLeft)?[b.scrollTop,b.scrollLeft]:e?[e.scrollTop,e.scrollLeft]:[0,0]},regCE:function(){},_simpleAdd:function(){return window.addEventListener?function(b,e,o,l){b.addEventListener(e,o,l)}:window.attachEvent?function(b,e,o){b.attachEvent("on"+e,o)}:function(){}}(),_simpleRemove:function(){return window.removeEventListener?function(b,e,o,l){b.removeEventListener(e,o,l)}:window.detachEvent?function(b,e,
o){b.detachEvent("on"+e,o)}:function(){}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE)if(self!==self.top)document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;a._ready()}};else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var h=document.createElement("p");a._dri=setInterval(function(){try{h.doScroll("left");clearInterval(a._dri);
a._dri=null;a._ready();h=null}catch(f){}},a.POLL_INTERVAL)}else if(a.webkit&&a.webkit<525)a._dri=setInterval(function(){var f=document.readyState;if("loaded"==f||"complete"==f){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL);else a._simpleAdd(document,"DOMContentLoaded",a._ready);a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};
YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,h,f,d){this.__yui_events=this.__yui_events||{};var m=this.__yui_events[a];if(m)m.subscribe(h,f,d);else{m=this.__yui_subscribers=this.__yui_subscribers||{};m[a]||(m[a]=[]);m[a].push({fn:h,obj:f,overrideContext:d})}},unsubscribe:function(a,h,f){var d=this.__yui_events=this.__yui_events||{};if(a){if(d=d[a])return d.unsubscribe(h,f)}else{a=true;for(var m in d)if(YAHOO.lang.hasOwnProperty(d,m))a=a&&d[m].unsubscribe(h,
f);return a}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(a,h){this.__yui_events=this.__yui_events||{};var f=h||{};h=this.__yui_events;var d;if(!h[a]){d=new YAHOO.util.CustomEvent(a,f.scope||this,f.silent,YAHOO.util.CustomEvent.FLAT,f.fireOnce);h[a]=d;f.onSubscribeCallback&&d.subscribeEvent.subscribe(f.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};if(f=this.__yui_subscribers[a])for(var m=0;m<f.length;++m)d.subscribe(f[m].fn,f[m].obj,
f[m].overrideContext)}return h[a]},fireEvent:function(a){this.__yui_events=this.__yui_events||{};var h=this.__yui_events[a];if(!h)return null;for(var f=[],d=1;d<arguments.length;++d)f.push(arguments[d]);return h.fire.apply(h,f)},hasEvent:function(a){if(this.__yui_events)if(this.__yui_events[a])return true;return false}};
(function(){var a=YAHOO.util.Event,h=YAHOO.lang;YAHOO.util.KeyListener=function(d,m,g,k){function j(e){if(!m.shift)m.shift=false;if(!m.alt)m.alt=false;if(!m.ctrl)m.ctrl=false;if(e.shiftKey==m.shift&&e.altKey==m.alt&&e.ctrlKey==m.ctrl){var o,l=m.keys,n;if(YAHOO.lang.isArray(l))for(var q=0;q<l.length;q++){o=l[q];n=a.getCharCode(e);if(o==n){b.fire(n,e);break}}else{n=a.getCharCode(e);l==n&&b.fire(n,e)}}}if(!k)k=YAHOO.util.KeyListener.KEYDOWN;var b=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=
new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(h.isString(d))d=document.getElementById(d);h.isFunction(g)?b.subscribe(g):b.subscribe(g.fn,g.scope,g.correctScope);this.enable=function(){if(!this.enabled){a.on(d,k,j);this.enabledEvent.fire(m)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(d,k,j);this.disabledEvent.fire(m)}this.enabled=false};this.toString=function(){return"KeyListener ["+m.keys+"] "+d.tagName+(d.id?"["+
d.id+"]":"")}};var f=YAHOO.util.KeyListener;f.KEYDOWN="keydown";f.KEYUP="keyup";f.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.0r4",build:"2449"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){function a(u){x[u]||(x[u]="\\u"+("0000"+(+u.charCodeAt(0)).toString(16)).slice(-4));return x[u]}function h(u,w){var A=function(J,K){var F,M,D=J[K];if(D&&typeof D==="object")for(F in D)if(e.hasOwnProperty(D,F)){M=A(D,F);if(M===undefined)delete D[F];else D[F]=M}return w.call(J,K,D)};return typeof w==="function"?A({"":u},""):u}function f(u){return u.replace(c,a)}function d(u){return e.isString(u)&&t.test(u.replace(i,"@").replace(p,"]").replace(s,""))}function m(u,w){u=f(u);if(d(u))return h(eval("("+
u+")"),w);throw new SyntaxError("JSON.parse");}function g(u){var w=typeof u;return W[w]||W[q.call(u)]||(w===B?u?B:G:y)}function k(u){return X+u.replace(v,a)+X}function j(u,w){return u.replace(/^/gm,w)}function b(u,w,A){function J(H,C){var z=H[C],L=g(z),I=[],ga=A?fa:Q,N,Y;if(l(z)&&o(z.toJSON))z=z.toJSON(C);else if(L===R)z=M(z);if(o(K))z=K.call(H,C,z);if(z!==H[C])L=g(z);switch(L){case R:case B:break;case E:return k(z);case S:return isFinite(z)?z+T:G;case U:return z+T;case G:return G;default:return}for(C=
D.length-1;C>=0;--C)if(D[C]===z)throw new Error("JSON.stringify. Cyclical reference");H=n(z);D.push(z);if(H)for(C=z.length-1;C>=0;--C)I[C]=J(z,C)||G;else{L=w||z;C=0;for(N in L)if(L.hasOwnProperty(N))if(Y=J(z,N))I[C++]=k(N)+ga+Y}D.pop();return A&&I.length?H?Z+O+j(I.join($),A)+O+aa:ba+O+j(I.join($),A)+O+ca:H?Z+I.join(da)+aa:ba+I.join(da)+ca}if(u!==undefined){var K=o(w)?w:null,F=q.call(A).match(/String|Number/)||[],M=YAHOO.lang.JSON.dateToString,D=[],V,P,ea;if(K||!n(w))w=undefined;if(w){V={};P=0;for(ea=
w.length;P<ea;++P)V[w[P]]=true;w=V}A=F[0]==="Number"?(new Array(Math.min(Math.max(0,A),10)+1)).join(" "):(A||T).slice(0,10);return J({"":u},"")}}var e=YAHOO.lang,o=e.isFunction,l=e.isObject,n=e.isArray,q=Object.prototype.toString,r=(YAHOO.env.ua.caja?window:this).JSON,c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,
t=/^[\],:{}\s]*$/,v=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,x={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y="undefined",B="object",G="null",E="string",S="number",U="boolean",R="date",W={undefined:y,string:E,"[object String]":E,number:S,"[object Number]":S,"boolean":U,"[object Boolean]":U,"[object Date]":R,"[object RegExp]":B},T="",ba="{",ca="}",Z="[",aa="]",da=",",$=",\n",O="\n",Q=":",
fa=": ",X='"';r=q.call(r)==="[object JSON]"&&r;YAHOO.lang.JSON={useNativeParse:!!r,useNativeStringify:!!r,isSafe:function(u){return d(f(u))},parse:function(u,w){return r&&YAHOO.lang.JSON.useNativeParse?r.parse(u,w):m(u,w)},stringify:function(u,w,A){return r&&YAHOO.lang.JSON.useNativeStringify?r.stringify(u,w,A):b(u,w,A)},dateToString:function(u){function w(A){return A<10?"0"+A:A}return u.getUTCFullYear()+"-"+w(u.getUTCMonth()+1)+"-"+w(u.getUTCDate())+"T"+w(u.getUTCHours())+Q+w(u.getUTCMinutes())+
Q+w(u.getUTCSeconds())+"Z"},stringToDate:function(u){var w=u.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(w){u=new Date;u.setUTCFullYear(w[1],w[2]-1,w[3]);u.setUTCHours(w[4],w[5],w[6],w[7]||0);return u}return u}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),
completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a==
"string")this._default_post_header=a;else if(typeof a=="boolean")this._use_default_post_header=a},setDefaultXhrHeader:function(a){if(typeof a=="string")this._default_xhr_header=a;else this._use_default_xhr_header=a},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a))this._polling_interval=a},createXhrObject:function(a){var h,f,d;try{f=new XMLHttpRequest;h={conn:f,tId:a,xhr:true}}catch(m){for(d=0;d<this._msxml_progid.length;++d)try{f=new ActiveXObject(this._msxml_progid[d]);h={conn:f,
tId:a,xhr:true};break}catch(g){}}finally{return h}},getConnectionObject:function(a){var h,f=this._transaction_id;try{if(a){h={tId:f};if(a==="xdr"){h.conn=this._transport;h.xdr=true}else if(a==="upload")h.upload=true}else h=this.createXhrObject(f);h&&this._transaction_id++}catch(d){}return h},asyncRequest:function(a,h,f,d){var m,g=f&&f.argument?f.argument:null;if(this._isFileUpload)m="upload";else if(f.xdr)m="xdr";if(m=this.getConnectionObject(m)){f&&f.customevents&&this.initCustomEvents(m,f);if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(m,
f,h,d);return m}if(a.toUpperCase()=="GET"){if(this._sFormData.length!==0)h+=(h.indexOf("?")==-1?"?":"&")+this._sFormData}else if(a.toUpperCase()=="POST")d=d?this._sFormData+"&"+d:this._sFormData}if(a.toUpperCase()=="GET"&&f&&f.cache===false)h+=(h.indexOf("?")==-1?"?":"&")+"rnd="+(new Date).valueOf().toString();if(this._use_default_xhr_header)this._default_headers["X-Requested-With"]||this.initHeader("X-Requested-With",this._default_xhr_header,true);a.toUpperCase()==="POST"&&this._use_default_post_header&&
this._isFormSubmit===false&&this.initHeader("Content-Type",this._default_post_header);if(m.xdr){this.xdr(m,a,h,f,d);return m}m.conn.open(a,h,true);if(this._has_default_headers||this._has_http_headers)this.setHeader(m);this.handleReadyState(m,f);m.conn.send(d||"");this._isFormSubmit===true&&this.resetFormState();this.startEvent.fire(m,g);m.startEvent&&m.startEvent.fire(m,g);return m}else return null},initCustomEvents:function(a,h){var f;for(f in h.customevents)if(this._customEvents[f][0]){a[this._customEvents[f][0]]=
new YAHOO.util.CustomEvent(this._customEvents[f][1],h.scope?h.scope:null);a[this._customEvents[f][0]].subscribe(h.customevents[f])}},handleReadyState:function(a,h){var f=this,d=h&&h.argument?h.argument:null;if(h&&h.timeout)this._timeOut[a.tId]=window.setTimeout(function(){f.abort(a,h,true)},h.timeout);this._poll[a.tId]=window.setInterval(function(){if(a.conn&&a.conn.readyState===4){window.clearInterval(f._poll[a.tId]);delete f._poll[a.tId];if(h&&h.timeout){window.clearTimeout(f._timeOut[a.tId]);delete f._timeOut[a.tId]}f.completeEvent.fire(a,
d);a.completeEvent&&a.completeEvent.fire(a,d);f.handleTransactionResponse(a,h)}},this._polling_interval)},handleTransactionResponse:function(a,h,f){var d,m=h&&h.argument?h.argument:null,g=a.r&&a.r.statusText==="xdr:success"?true:false,k=a.r&&a.r.statusText==="xdr:failure"?true:false;try{d=a.conn.status!==undefined&&a.conn.status!==0||g?a.conn.status:k&&!f?0:13030}catch(j){d=13030}if(d>=200&&d<300||d===1223||g){f=a.xdr?a.r:this.createResponseObject(a,m);if(h&&h.success)h.scope?h.success.apply(h.scope,
[f]):h.success(f);this.successEvent.fire(f);a.successEvent&&a.successEvent.fire(f)}else{switch(d){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:f=this.createExceptionObject(a.tId,m,f?f:false);if(h&&h.failure)h.scope?h.failure.apply(h.scope,[f]):h.failure(f);break;default:f=a.xdr?a.response:this.createResponseObject(a,m);if(h&&h.failure)h.scope?h.failure.apply(h.scope,[f]):h.failure(f)}this.failureEvent.fire(f);a.failureEvent&&a.failureEvent.fire(f)}this.releaseObject(a)},createResponseObject:function(a,
h){var f={},d={},m,g,k,j;try{g=a.conn.getAllResponseHeaders();k=g.split("\n");for(m=0;m<k.length;m++){j=k[m].indexOf(":");if(j!=-1)d[k[m].substring(0,j)]=YAHOO.lang.trim(k[m].substring(j+2))}}catch(b){}f.tId=a.tId;f.status=a.conn.status==1223?204:a.conn.status;f.statusText=a.conn.status==1223?"No Content":a.conn.statusText;f.getResponseHeader=d;f.getAllResponseHeaders=g;f.responseText=a.conn.responseText;f.responseXML=a.conn.responseXML;if(h)f.argument=h;return f},createExceptionObject:function(a,
h,f){var d={};d.tId=a;if(f){d.status=-1;d.statusText="transaction aborted"}else{d.status=0;d.statusText="communication failure"}if(h)d.argument=h;return d},initHeader:function(a,h,f){(f?this._default_headers:this._http_headers)[a]=h;if(f)this._has_default_headers=true;else this._has_http_headers=true},setHeader:function(a){var h;if(this._has_default_headers)for(h in this._default_headers)YAHOO.lang.hasOwnProperty(this._default_headers,h)&&a.conn.setRequestHeader(h,this._default_headers[h]);if(this._has_http_headers){for(h in this._http_headers)YAHOO.lang.hasOwnProperty(this._http_headers,
h)&&a.conn.setRequestHeader(h,this._http_headers[h]);this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(a,h,f){var d,m=h&&h.argument?h.argument:null;a=a||{};if(a.conn)if(a.xhr){if(this.isCallInProgress(a)){a.conn.abort();window.clearInterval(this._poll[a.tId]);delete this._poll[a.tId];if(f){window.clearTimeout(this._timeOut[a.tId]);delete this._timeOut[a.tId]}d=true}}else{if(a.xdr){a.conn.abort(a.tId);
d=true}}else if(a.upload){var g=document.getElementById("yuiIO"+a.tId);if(g){YAHOO.util.Event.removeListener(g,"load");document.body.removeChild(g);if(f){window.clearTimeout(this._timeOut[a.tId]);delete this._timeOut[a.tId]}d=true}}else d=false;if(d===true){this.abortEvent.fire(a,m);a.abortEvent&&a.abortEvent.fire(a,m);this.handleTransactionResponse(a,h,true)}return d},isCallInProgress:function(a){a=a||{};return a.xhr&&a.conn?a.conn.readyState!==4&&a.conn.readyState!==0:a.xdr&&a.conn?a.conn.isCallInProgress(a.tId):
a.upload===true?document.getElementById("yuiIO"+a.tId)?true:false:false},releaseObject:function(a){if(a&&a.conn)a.conn=null}};
(function(){function a(b){b='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+b+'" width="0" height="0"><param name="movie" value="'+b+'"><param name="allowScriptAccess" value="always"></object>';var e=document.createElement("div");document.body.appendChild(e);e.innerHTML=b}function h(b,e,o,l,n){j[parseInt(b.tId)]={o:b,c:l};if(n){l.method=e;l.data=n}b.conn.send(o,l,b.tId)}function f(b){a(b);k._transport=document.getElementById("YUIConnectionSwf")}function d(){k.xdrReadyEvent.fire()}
function m(b,e){if(b){k.startEvent.fire(b,e.argument);b.startEvent&&b.startEvent.fire(b,e.argument)}}function g(b){var e=j[b.tId].o,o=j[b.tId].c;if(b.statusText==="xdr:start")m(e,o);else{b.responseText=decodeURI(b.responseText);e.r=b;if(o.argument)e.r.argument=o.argument;this.handleTransactionResponse(e,o,b.statusText==="xdr:abort"?true:false);delete j[b.tId]}}var k=YAHOO.util.Connect,j={};k.xdr=h;k.swf=a;k.transport=f;k.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");k.xdrReady=d;k.handleXdrResponse=
g})();
(function(){function a(j,b,e){var o,l=false,n=[],q=0,r,c,i,p;this.resetFormState();if(typeof j=="string")j=document.getElementById(j)||document.forms[j];else if(typeof j=="object")j=j;else return;if(b){this.createFrame(e?e:null);this._isFileUpload=this._isFormSubmit=true;this._formNode=j}else{r=0;for(c=j.elements.length;r<c;++r){b=j.elements[r];o=b.disabled;e=b.name;if(!o&&e){e=encodeURIComponent(e)+"=";o=encodeURIComponent(b.value);switch(b.type){case "select-one":if(b.selectedIndex>-1){p=b.options[b.selectedIndex];
n[q++]=e+encodeURIComponent(p.attributes.value&&p.attributes.value.specified?p.value:p.text)}break;case "select-multiple":if(b.selectedIndex>-1){o=b.selectedIndex;for(i=b.options.length;o<i;++o){p=b.options[o];if(p.selected)n[q++]=e+encodeURIComponent(p.attributes.value&&p.attributes.value.specified?p.value:p.text)}}break;case "radio":case "checkbox":if(b.checked)n[q++]=e+o;break;case "file":case undefined:case "reset":case "button":break;case "submit":if(l===false){if(this._hasSubmitListener&&this._submitElementValue)n[q++]=
this._submitElementValue;l=true}break;default:n[q++]=e+o}}}this._isFormSubmit=true;this._sFormData=n.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}}function h(){this._isFileUpload=this._isFormSubmit=false;this._formNode=null;this._sFormData=""}function f(j){var b="yuiIO"+this._transaction_id,e;if(YAHOO.env.ua.ie){e=document.createElement('<iframe id="'+b+'" name="'+b+'" />');if(typeof j=="boolean")e.src="javascript:false"}else{e=document.createElement("iframe");
e.id=b;e.name=b}e.style.position="absolute";e.style.top="-1000px";e.style.left="-1000px";document.body.appendChild(e)}function d(j){var b=[];j=j.split("&");var e,o;for(e=0;e<j.length;e++){o=j[e].indexOf("=");if(o!=-1){b[e]=document.createElement("input");b[e].type="hidden";b[e].name=decodeURIComponent(j[e].substring(0,o));b[e].value=decodeURIComponent(j[e].substring(o+1));this._formNode.appendChild(b[e])}}return b}function m(j,b,e,o){var l="yuiIO"+j.tId,n=document.getElementById(l),q=document.documentMode&&
document.documentMode===8?true:false,r=this,c=b&&b.argument?b.argument:null,i,p,s,t,v;t={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",e);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",l);YAHOO.env.ua.ie&&!q?this._formNode.setAttribute("encoding","multipart/form-data"):this._formNode.setAttribute("enctype","multipart/form-data");if(o)i=this.appendPostData(o);
this._formNode.submit();this.startEvent.fire(j,c);j.startEvent&&j.startEvent.fire(j,c);if(b&&b.timeout)this._timeOut[j.tId]=window.setTimeout(function(){r.abort(j,b,true)},b.timeout);if(i&&i.length>0)for(e=0;e<i.length;e++)this._formNode.removeChild(i[e]);for(p in t)if(YAHOO.lang.hasOwnProperty(t,p))t[p]?this._formNode.setAttribute(p,t[p]):this._formNode.removeAttribute(p);this.resetFormState();v=function(){if(b&&b.timeout){window.clearTimeout(r._timeOut[j.tId]);delete r._timeOut[j.tId]}r.completeEvent.fire(j,
c);j.completeEvent&&j.completeEvent.fire(j,c);s={tId:j.tId,argument:b.argument};try{s.responseText=n.contentWindow.document.body?n.contentWindow.document.body.innerHTML:n.contentWindow.document.documentElement.textContent;s.responseXML=n.contentWindow.document.XMLDocument?n.contentWindow.document.XMLDocument:n.contentWindow.document}catch(x){}if(b&&b.upload)b.scope?b.upload.apply(b.scope,[s]):b.upload(s);r.uploadEvent.fire(s);j.uploadEvent&&j.uploadEvent.fire(s);k.removeListener(n,"load",v);setTimeout(function(){document.body.removeChild(n);
r.releaseObject(j)},100)};k.addListener(n,"load",v)}var g=YAHOO.util.Connect,k=YAHOO.util.Event;g._isFormSubmit=false;g._isFileUpload=false;g._formNode=null;g._sFormData=null;g._submitElementValue=null;g.uploadEvent=new YAHOO.util.CustomEvent("upload");g._hasSubmitListener=function(){if(k){k.addListener(document,"click",function(j){j=k.getTarget(j);var b=j.nodeName.toLowerCase();if((b==="input"||b==="button")&&j.type&&j.type.toLowerCase()=="submit")g._submitElementValue=encodeURIComponent(j.name)+
"="+encodeURIComponent(j.value)});return true}return false}();g.setForm=a;g.resetFormState=h;g.createFrame=f;g.appendPostData=d;g.uploadFile=m})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});
(function(a,h,f){if(a[h]===f)a[h]={};h=a[h];var d=a.document,m=Array.prototype,g=m.forEach,k=m.indexOf,j=/^\s+|\s+$/g,b=function(n,q,r,c){if(!q||!n)return n;if(r===f)r=true;var i,p,s;if(c&&(s=c.length))for(i=0;i<s;i++){p=c[i];if(p in q)if(r||!(p in n))n[p]=q[p]}else for(p in q)if(r||!(p in n))n[p]=q[p];return n},e=false,o=[],l=false;b(h,{version:"1.0.3",_init:function(){this.Env={mods:{}};this.Config={debug:true}},add:function(n,q){var r=this;r.Env.mods[n]={name:n,fn:q};q(r);return r},ready:function(n){l||
this._bindReady();e?n.call(a,this):o.push(n);return this},_bindReady:function(){var n=this,q=d.documentElement.doScroll,r=q?"onreadystatechange":"DOMContentLoaded";l=true;if(d.attachEvent){if(a!=a.top){function c(){if(d.readyState==="complete"){d.detachEvent(r,c);n._fireReady()}}d.attachEvent(r,c)}else{function i(){try{q("left");n._fireReady()}catch(s){setTimeout(i,1)}}i()}a.attachEvent("onload",function(){n._fireReady()})}else{function p(){d.removeEventListener(r,p,false);n._fireReady()}d.addEventListener(r,
p,false)}},_fireReady:function(){if(!e){e=true;if(o){for(var n,q=0;n=o[q++];)n.call(a,this);o=null}}},mix:b,merge:function(){var n=arguments,q={},r,c=n.length;for(r=0;r<c;++r)b(q,n[r]);return q},extend:function(n,q,r,c){if(!q||!n)return n;var i=Object.prototype,p=q.prototype,s=function(t){function v(){}v.prototype=t;return new v}(p);n.prototype=s;s.constructor=n;n.superclass=p;if(q!==Object&&p.constructor===i.constructor)p.constructor=q;r&&b(s,r);c&&b(n,c);return n},augment:function(n,q,r,c){return b(n.prototype,
q.prototype,r,c)},weave:function(n,q,r,c){var i=[r[c],n];q==="before"&&i.reverse();r[c]=function(){for(var p=0,s;p<2;++p)s=i[p].apply(this,arguments);return s};return this},cloneTo:function(n){var q=a[n]||{};b(q,this);q._init();b(q.Env.mods,this.Env.mods);return a[n]=q},namespace:function(){var n=arguments,q=n.length,r=null,c,i,p;for(c=0;c<q;++c){p=(""+n[c]).split(".");r=this;for(i=a[p[0]]===r?1:0;i<p.length;++i)r=r[p[i]]=r[p[i]]||{}}return r},each:g?function(n,q,r){g.call(n,q,r);return this}:function(n,
q,r){var c=n&&n.length||0,i;for(i=0;i<c;++i)q.call(r||this,n[i],i,n);return this},indexOf:k?function(n,q){return k.call(q,n)}:function(n,q){for(var r=0,c=q.length;r<c;++r)if(q[r]===n)return r;return-1},trim:String.prototype.trim?function(n){return(n||"").trim()}:function(n){return(n||"").replace(j,"")},log:function(n,q,r){if(this.Config.debug){r&&(n=r+": "+n);if(a.console!==f&&console.log)console[q&&console[q]?q:"log"](n)}return this}});h._init()})(window,"KISSY");
KISSY.add("editor",function(a){function h(f,d){var m=h;if(!(this instanceof m))return new m(f,d);m._isReady||m._setup();return new m.Instance(f,d)}a.mix(h,{version:"1.0",lang:{},plugins:{},Env:{mods:{}},add:function(f,d,m){this.Env.mods[f]={name:f,fn:d,details:m||{}};return this},addPlugin:function(f,d){f=typeof f=="string"?[f]:f;var m=this.plugins,g,k,j;k=0;for(j=f.length;k<j;++k){g=f[k];m[g]||(m[g]=a.merge(d,{name:g}))}},_isReady:false,_setup:function(){this._loadModules();this._isReady=true},_attached:{},
_loadModules:function(){var f=KISSY.Editor.Env.mods,d=this._attached,m,g;for(m in f)if(g=f[m]){d[m]=g;g.fn&&g.fn(this)}}});a.Editor=h});
KISSY.Editor.add("config",function(a){a.config={base:"",language:"zh-cn",theme:"default",toolbar:["source","","fontName","fontSize","bold","italic","underline","strikeThrough","foreColor","backColor","","link","smiley","image","","insertOrderedList","insertUnorderedList","outdent","indent","justifyLeft","justifyCenter","justifyRight"],statusbar:["wordcount","resize"],pluginsConfig:{}}});
KISSY.Editor.add("lang~en",function(a){a.lang.en={source:{text:"Source",title:"Source"},undo:{text:"Undo",title:"Undo (Ctrl+Z)"},redo:{text:"Redo",title:"Redo (Ctrl+Y)"},fontName:{text:"Font Name",title:"Font Name",options:{Arial:"Arial","Times New Roman":"Times New Roman","Arial Black":"Arial Black","Arial Narrow":"Arial Narrow","Comic Sans MS":"Comic Sans MS","Courier New":"Courier New",Garamond:"Garamond",Georgia:"Georgia",Tahoma:"Tahoma","Trebuchet MS":"Trebuchet MS",Verdana:"Verdana"}},fontSize:{text:"Size",
title:"Font size",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"Bold",title:"Bold (Ctrl+B)"},italic:{text:"Italic",title:"Italick (Ctrl+I)"},underline:{text:"Underline",title:"Underline (Ctrl+U)"},strikeThrough:{text:"Strikeout",title:"Strikeout"},link:{text:"Link",title:"Insert/Edit link",href:"URL:",target:"Open link in new window",remove:"Remove link"},blockquote:{text:"Blockquote",title:"Insert blockquote"},smiley:{text:"Smiley",title:"Insert smiley"},image:{text:"Image",
title:"Insert image",tab_link:"Web Image",tab_local:"Local Image",tab_album:"Album Image",label_link:"Enter image web address:",label_local:"Browse your computer for the image file to upload:",label_album:"Select the image from your album:",uploading:"Uploading...",upload_error:"Exception occurs when uploading file.",upload_filter:"Only allow PNG, GIF, JPG image type.",ok:"Insert"},insertOrderedList:{text:"Numbered List",title:"Numbered List (Ctrl+7)"},insertUnorderedList:{text:"Bullet List",title:"Bullet List (Ctrl+8)"},
outdent:{text:"Decrease Indent",title:"Decrease Indent"},indent:{text:"Increase Indent",title:"Increase Indent"},justifyLeft:{text:"Left Justify",title:"Left Justify (Ctrl+L)"},justifyCenter:{text:"Center Justify",title:"Center Justify (Ctrl+E)"},justifyRight:{text:"Right Justify",title:"Right Justify (Ctrl+R)"},foreColor:{text:"Text Color",title:"Text Color"},backColor:{text:"Text Background Color",title:"Text Background Color"},maximize:{text:"Maximize",title:"Maximize"},removeformat:{text:"Remove Format",
title:"Remove Format"},wordcount:{tmpl:"Remain %remain% words (include html code)"},resize:{larger_text:"Larger",larger_title:"Enlarge the editor",smaller_text:"Smaller",smaller_title:"Shrink the editor"},common:{ok:"OK",cancel:"Cancel"}}});
KISSY.Editor.add("lang~zh-cn",function(a){a.lang["zh-cn"]={source:{text:"\u6e90\u7801",title:"\u6e90\u7801"},undo:{text:"\u64a4\u9500",title:"\u64a4\u9500"},redo:{text:"\u91cd\u505a",title:"\u91cd\u505a"},fontName:{text:"\u5b57\u4f53",title:"\u5b57\u4f53",options:{"\u5b8b\u4f53":"\u5b8b\u4f53","\u9ed1\u4f53":"\u9ed1\u4f53","\u96b6\u4e66":"\u96b6\u4e66","\u6977\u4f53":"\u6977\u4f53_GB2312","\u5fae\u8f6f\u96c5\u9ed1":"\u5fae\u8f6f\u96c5\u9ed1",Georgia:"Georgia","Times New Roman":"Times New Roman",Impact:"Impact","Courier New":"Courier New",Arial:"Arial",Verdana:"Verdana",Tahoma:"Tahoma"}},fontSize:{text:"\u5927\u5c0f",title:"\u5927\u5c0f",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"\u7c97\u4f53",
title:"\u7c97\u4f53"},italic:{text:"\u659c\u4f53",title:"\u659c\u4f53"},underline:{text:"\u4e0b\u5212\u7ebf",title:"\u4e0b\u5212\u7ebf"},strikeThrough:{text:"\u5220\u9664\u7ebf",title:"\u5220\u9664\u7ebf"},link:{text:"\u94fe\u63a5",title:"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5",href:"URL:",target:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",remove:"\u79fb\u9664\u94fe\u63a5"},blockquote:{text:"\u5f15\u7528",title:"\u5f15\u7528"},smiley:{text:"\u8868\u60c5",title:"\u63d2\u5165\u8868\u60c5"},image:{text:"\u56fe\u7247",title:"\u63d2\u5165\u56fe\u7247",tab_link:"\u7f51\u7edc\u56fe\u7247",tab_local:"\u672c\u5730\u4e0a\u4f20",tab_album:"\u6211\u7684\u76f8\u518c",label_link:"\u8bf7\u8f93\u5165\u56fe\u7247\u5730\u5740\uff1a",label_local:"\u8bf7\u9009\u62e9\u672c\u5730\u56fe\u7247\uff1a",label_album:"\u8bf7\u9009\u62e9\u76f8\u518c\u56fe\u7247\uff1a",uploading:"\u6b63\u5728\u4e0a\u4f20...",upload_error:"\u5bf9\u4e0d\u8d77\uff0c\u4e0a\u4f20\u6587\u4ef6\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",upload_filter:"\u4ec5\u652f\u6301 JPG, PNG \u548c GIF \u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",
ok:"\u63d2\u5165"},insertOrderedList:{text:"\u6709\u5e8f\u5217\u8868",title:"\u6709\u5e8f\u5217\u8868"},insertUnorderedList:{text:"\u65e0\u5e8f\u5217\u8868",title:"\u65e0\u5e8f\u5217\u8868"},outdent:{text:"\u51cf\u5c11\u7f29\u8fdb",title:"\u51cf\u5c11\u7f29\u8fdb"},indent:{text:"\u589e\u52a0\u7f29\u8fdb",title:"\u589e\u52a0\u7f29\u8fdb"},justifyLeft:{text:"\u5de6\u5bf9\u9f50",title:"\u5de6\u5bf9\u9f50"},justifyCenter:{text:"\u5c45\u4e2d\u5bf9\u9f50",title:"\u5c45\u4e2d\u5bf9\u9f50"},justifyRight:{text:"\u53f3\u5bf9\u9f50",title:"\u53f3\u5bf9\u9f50"},foreColor:{text:"\u6587\u672c\u989c\u8272",title:"\u6587\u672c\u989c\u8272"},backColor:{text:"\u80cc\u666f\u989c\u8272",title:"\u80cc\u666f\u989c\u8272"},maximize:{text:"\u5168\u5c4f\u7f16\u8f91",title:"\u5168\u5c4f\u7f16\u8f91"},removeformat:{text:"\u6e05\u9664\u683c\u5f0f",title:"\u6e05\u9664\u683c\u5f0f"},wordcount:{tmpl:"\u8fd8\u53ef\u4ee5\u8f93\u5165 %remain% \u5b57\uff08\u542b html \u4ee3\u7801\uff09"},resize:{larger_text:"\u589e\u5927",
larger_title:"\u589e\u5927\u7f16\u8f91\u533a\u57df",smaller_text:"\u7f29\u5c0f",smaller_title:"\u7f29\u5c0f\u7f16\u8f91\u533a\u57df"},common:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88"}}});KISSY.Editor.add("core~plugin",function(a){a.PLUGIN_TYPE={CUSTOM:0,TOOLBAR_SEPARATOR:1,TOOLBAR_BUTTON:2,TOOLBAR_MENU_BUTTON:4,TOOLBAR_SELECT:8,STATUSBAR_ITEM:16,FUNC:32}});
KISSY.Editor.add("core~dom",function(a){var h=YAHOO.env.ua;a.Dom={getText:function(f){return f?f.textContent||"":""},setItemUnselectable:function(f){var d,m,g,k,j;d=f.getElementsByTagName("*");m=-1;for(g=d.length;m<g;++m){j=m==-1?f:d[m];(k=j.nodeName)&&k!="INPUT"&&j.setAttribute("unselectable","on")}return f},BLOCK_ELEMENTS:{blockquote:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,p:1,address:1,center:1,pre:1,form:1,fieldset:1,caption:1,table:1,tbody:1,tr:1,th:1,td:1,ul:1,ol:1,dl:1,dt:1,dd:1,li:1}};
if(h.ie)a.Dom.getText=function(f){return f?f.innerText||"":""}});
KISSY.Editor.add("core~color",function(a){var h=parseInt,f=RegExp;a.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(d){this.re_RGB.test(d)||(d=this.toHex(d));if(this.re_hex.exec(d))d=
"rgb("+[h(f.$1,16),h(f.$2,16),h(f.$3,16)].join(", ")+")";return d},toHex:function(d){d=this.KEYWORDS[d]||d;if(this.re_RGB.exec(d)){d=(f.$1>>0).toString(16);var m=(f.$2>>0).toString(16),g=(f.$3>>0).toString(16);d=[d.length==1?"0"+d:d,m.length==1?"0"+m:m,g.length==1?"0"+g:g].join("")}if(d.length<6)d=d.replace(this.re_hex3,"$1$1");if(d!=="transparent"&&d.indexOf("#")<0)d="#"+d;return d.toLowerCase()},int2hex:function(d){d>>=0;return this.toHex("rgb("+(d&255)+","+(d>>8&255)+","+(d>>16&255)+")")}}});
KISSY.Editor.add("core~command",function(a){var h=YAHOO.env.ua,f={backColor:h.gecko?"hiliteColor":"backColor"};a.Command={exec:function(d,m,g,k){m=f[m]||m;this._preExec(d,m,k);d.execCommand(m,false,g)},_preExec:function(d,m,g){if(h.gecko){m=typeof g==="undefined"?"bold,italic,underline,strikeThrough".indexOf(m)===-1:g;d.execCommand("styleWithCSS",false,m)}}}});
KISSY.Editor.add("core~range",function(a){var h=YAHOO.env.ua.ie;a.Range={getSelectionRange:function(f){var d=f.document,m;if(f.getSelection){f=f.getSelection();if(f.getRangeAt)m=f.getRangeAt(0);else{m=d.createRange();m.setStart(f.anchorNode,f.anchorOffset);m.setEnd(f.focusNode,f.focusOffset)}}else if(d.selection)m=d.selection.createRange();return m},getCommonAncestor:function(f){return f.startContainer||f.parentElement&&f.parentElement()||f.commonParentElement&&f.commonParentElement()},getSelectedText:function(f){if("text"in
f)return f.text;return f.toString?f.toString():""},saveRange:function(f){h&&f.contentWin.focus();return f.getSelectionRange()}}});
KISSY.Editor.add("core~instance",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.lang,g=YAHOO.env.ua,k=g.ie;a.Instance=function(j,b){this.textarea=f.get(j);this.config=m.merge(a.config,b||{});this.sourceMode=false;this.toolbar=new a.Toolbar(this);this.statusbar=new a.Statusbar(this);this._init()};m.augmentObject(a.Instance.prototype,{_init:function(){this._renderUI();this._initPlugins();this._initAutoFocus()},_renderUI:function(){this._renderContainer();this._setupContentPanel()},_initPlugins:function(){var j,
b;b=a.plugins;var e=[];for(j in b)e[j]=m.merge(b[j]);this.plugins=e;this.toolbar.init();this.statusbar.init();for(j in e){b=e[j];if(!b.inited)if(b.type===a.PLUGIN_TYPE.FUNC){b.editor=this;b.init&&b.init();b.inited=true}}},_renderContainer:function(){var j=this.textarea,b=f.getRegion(j),e=b.right-b.left-2+"px",o=b.bottom-b.top-2+"px";b=document.createElement("div");b.className="ks-editor";b.style.width=e;b.innerHTML='<div class="ks-editor-toolbar"></div><div class="ks-editor-content"><iframe frameborder="0" allowtransparency="1"></iframe></div><div class="ks-editor-statusbar"></div>';
e=b.childNodes[1];e.style.width="100%";e.style.height=o;e=e.childNodes[0];e.style.width="100%";e.style.height="100%";e.setAttribute("frameBorder",0);j.style.display="none";f.insertBefore(b,j);this.container=b;this.toolbar.domEl=b.childNodes[0];this.contentWin=e.contentWindow;this.contentDoc=e.contentWindow.document;this.statusbar.domEl=b.childNodes[2]},_setupContentPanel:function(){var j=this.contentDoc,b=this.config;b=b.base+"themes/"+b.theme+"/"+("content"+(b.debug?"":"-min")+".css");var e=this;
j.open();j.write('<!doctype html><html><head><title>Rich Text Area</title><meta charset="charset=gbk" /><link href="{CONTENT_CSS}" rel="stylesheet" /></head><body spellcheck="false" class="ks-editor-post">{CONTENT}</body></html>'.replace("{CONTENT_CSS}",b).replace("{CONTENT}",this.textarea.value));j.close();if(k)j.body.contentEditable="true";else j.designMode="on";k&&d.on(j,"click",function(){j.activeElement.parentNode.nodeType===9&&e._focusToEnd()})},_initAutoFocus:function(){this.config.autoFocus&&
this._focusToEnd()},_focusToEnd:function(){this.contentWin.focus();var j=this.contentDoc.body.lastChild,b=a.Range.getSelectionRange(this.contentWin);if(g.ie){try{b.moveToElementText(j)}catch(e){}b.collapse(false);b.select()}else{try{b.setEnd(j,j.childNodes.length)}catch(o){}b.collapse(false)}},focus:function(){this._focusToEnd()},execCommand:function(j,b,e){this.contentWin.focus();a.Command.exec(this.contentDoc,j,b,e)},getData:function(){if(this.sourceMode)return this.textarea.value;return this.getContentDocData()},
getContentDocData:function(){var j="",b=a.plugins.save;j=this.contentDoc.body.innerHTML;if(j=="<br>")j="";if(b&&b.filterData)j=b.filterData(j);return j},getSelectionRange:function(){return a.Range.getSelectionRange(this.contentWin)}})});
KISSY.Editor.add("core~toolbar",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.lang,g=YAHOO.env.ua.ie,k=g===6,j=a.PLUGIN_TYPE,b=document.createElement("div");a.Toolbar=function(e){this.editor=e;this.config=e.config;this.lang=a.lang[this.config.language];this.items=[];this.stateItems=[]};m.augmentObject(a.Toolbar.prototype,{init:function(){for(var e=this.config.toolbar,o=this.editor.plugins,l,n=0,q=e.length;n<q;++n)if(l=e[n]){if(l in o){l=o[l];this._addItem(l);this.items.push(l);"fontName,fontSize,bold,italic,underline,strikeThroughinsertOrderedList,insertUnorderedListjustifyLeft,justifyCenter,justifyRight".indexOf(l.name)!==
-1&&this.stateItems.push(l)}}else this._addSeparator();this._initUpdateState()},_addItem:function(e){var o,l=e.type;o=this.lang;if(!e.lang)e.lang=m.merge(o.common,this.lang[e.name]||{});o='<div class="ks-editor-toolbar-button ks-inline-block" title="{TITLE}"><div class="ks-editor-toolbar-button-outer-box"><div class="ks-editor-toolbar-button-inner-box"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div></div></div>'.replace("{TITLE}",e.lang.title||"").replace("{NAME}",
e.name).replace("{TEXT}",e.lang.text||"");if(k)o=o.replace("outer-box","outer-box ks-inline-block").replace("inner-box","inner-box ks-inline-block");b.innerHTML=o;e.domEl=o=b.firstChild;if(l==j.TOOLBAR_MENU_BUTTON||l==j.TOOLBAR_SELECT){this._renderMenuButton(e);l==j.TOOLBAR_SELECT&&this._renderSelect(e)}this._bindItemUI(e);this._addToToolbar(o);e.editor=this.editor;e.init&&e.init();e.inited=true},_renderMenuButton:function(e){var o=e.domEl,l=o.getElementsByTagName("span")[0].parentNode;f.addClass(o,
"ks-editor-toolbar-menu-button");l.innerHTML='<div class="ks-editor-toolbar-menu-button-caption ks-inline-block"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div><div class="ks-editor-toolbar-menu-button-dropdown ks-inline-block"></div>'.replace("{NAME}",e.name).replace("{TEXT}",e.lang.text||"")},_renderSelect:function(e){f.addClass(e.domEl,"ks-editor-toolbar-select")},_bindItemUI:function(e){var o=e.domEl;e.exec&&d.on(o,"click",function(){e.exec()});d.on(o,"mousedown",
function(){f.addClass(o,"ks-editor-toolbar-button-active")});d.on(o,"mouseup",function(){f.removeClass(o,"ks-editor-toolbar-button-active")});d.on(o,"mouseout",function(l){l=d.getRelatedTarget(l);var n;try{if(o.contains)n=o.contains(l);else if(o.compareDocumentPosition)n=o.compareDocumentPosition(l)&8}catch(q){n=false}n||f.removeClass(o,"ks-editor-toolbar-button-active")});if(k){d.on(o,"mouseenter",function(){f.addClass(o,"ks-editor-toolbar-button-hover")});d.on(o,"mouseleave",function(){f.removeClass(o,
"ks-editor-toolbar-button-hover")})}},_addSeparator:function(){b.innerHTML='<div class="ks-editor-stripbar-sep ks-inline-block"></div>';this._addToToolbar(b.firstChild)},_addToToolbar:function(e){if(g)e=a.Dom.setItemUnselectable(e);this.domEl.appendChild(e)},_initUpdateState:function(){var e=this.editor.contentDoc,o=this;d.on(e,"click",function(){o.updateState()});d.on(e,"keyup",function(l){l=l.keyCode;if(l>=33&&l<=40||l===8||l===13||l===46)o.updateState()})},updateState:function(e){var o=this.stateItems,
l;e=e?e.join("|"):"";for(var n=0,q=o.length;n<q;n++){l=o[n];e&&e.indexOf(l.name)===-1||(l.updateState?l.updateState():this.updateItemState(l))}},updateItemState:function(e){var o=this.editor.contentDoc;try{if(o.queryCommandEnabled(e.name))o.queryCommandState(e.name)?f.addClass(e.domEl,"ks-editor-toolbar-button-selected"):f.removeClass(e.domEl,"ks-editor-toolbar-button-selected")}catch(l){}}})});
KISSY.Editor.add("core~statusbar",function(a){var h=YAHOO.lang,f=YAHOO.env.ua.ie,d=document.createElement("div");a.Statusbar=function(m){this.editor=m;this.config=m.config;this.lang=a.lang[this.config.language]};h.augmentObject(a.Statusbar.prototype,{init:function(){for(var m=this.config.statusbar,g=this.editor.plugins,k,j=0,b=m.length;j<b;++j)if(k=m[j])k in g&&this._addItem(g[k]);else this._addSep()},_addItem:function(m){var g;g=this.lang;if(!m.lang)m.lang=h.merge(g.common,this.lang[m.name]||{});
d.innerHTML='<div class="ks-editor-statusbar-item ks-editor-{NAME} ks-inline-block"></div>'.replace("{NAME}",m.name);m.domEl=g=d.firstChild;this._addToToolbar(g);m.editor=this.editor;m.init&&m.init();m.inited=true},_addSep:function(){d.innerHTML='<div class="ks-editor-stripbar-sep kissy-inline-block"></div>';this._addToToolbar(d.firstChild)},_addToToolbar:function(m){if(f)m=a.Dom.setItemUnselectable(m);this.domEl.appendChild(m)}})});
KISSY.Editor.add("core~menu",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.env.ua,g;a.Menu={generateDropMenu:function(k,j,b){var e=document.createElement("div"),o=this;e.innerHTML='<div class="ks-editor-drop-menu-shadow"></div><div class="ks-editor-drop-menu-content"></div>';e.className="ks-editor-drop-menu";e.style.display="none";document.body.appendChild(e);d.on(j,"click",function(l){d.stopPropagation(l);k.activeDropMenu&&o._hide(k);if(k.activeDropMenu!=e){o._setDropMenuPosition(j,e,b);
k.activeDropMenu=e;k.activeDropButton=j;o._show(k)}else{k.activeDropMenu=null;k.activeDropButton=null}});d.on([document,k.contentDoc],"click",function(){if(k.activeDropMenu){o.hideActiveDropMenu(k);this==k.contentDoc&&k.contentWin.focus()}});this._initResizeEvent(j,e,b);return e.childNodes[1]},_setDropMenuPosition:function(k,j,b){var e=f.getRegion(k);k=e.left;e=e.bottom;if(b){k+=b[0];e+=b[1]}j.style.left=k+"px";j.style.top=e+"px"},_isVisible:function(k){if(!k)return false;return k.style.display!=
"none"},hideActiveDropMenu:function(k){this._hide(k);k.activeDropMenu=null;k.activeDropButton=null},_hide:function(k){var j=k.activeDropMenu;k=k.activeDropButton;if(j){g&&(g.style.display="none");j.style.display="none"}k&&f.removeClass(k,"ks-editor-toolbar-button-selected")},_show:function(k){var j=k.activeDropMenu;k=k.activeDropButton;if(j){j.style.display="";if(m.ie===6){this._updateShimRegion(j);g.style.display=""}}k&&f.addClass(k,"ks-editor-toolbar-button-selected")},_updateShimRegion:function(k){if(k)if(m.ie===
6){g||this._initShim();this._setShimRegion(k)}},_initResizeEvent:function(k,j,b){var e=this,o;d.on(window,"resize",function(){o&&clearTimeout(o);o=setTimeout(function(){e._isVisible(j)&&e._setDropMenuPosition(k,j,b)},50)})},_initShim:function(){g=document.createElement("iframe");g.src="about:blank";g.className="ks-editor-drop-menu-shim";g.style.position="absolute";g.style.display="none";g.style.border="none";document.body.appendChild(g)},_setShimRegion:function(k){if(g&&this._isVisible(k)){k=f.getRegion(k);
if(k.width>0){g.style.left=k.left+"px";g.style.top=k.top+"px";g.style.width=k.width-1+"px";g.style.height=k.height-1+"px"}}}}});KISSY.Editor.add("smilies~config~default",function(a){a.Smilies=a.Smilies||{};a.Smilies["default"]={name:"default",mode:"icons",cols:5,fileNames:["smile","confused","cool","cry","eek","angry","wink","sweat","lol","stun","razz","shy","rolleyes","sad","happy","yes","no","heart","idea","rose"],fileExt:"gif"}});
KISSY.Editor.add("smilies~config~wangwang",function(a){a.Smilies=a.Smilies||{};a.Smilies.wangwang={name:"wangwang",mode:"sprite",base:"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/",spriteStyle:"background: url(http://a.tbcdn.cn/sys/wangwang/smiley/sprite.png) no-repeat -1px 0; width: 288px; height: 235px",unitStyle:"width: 24px; height: 24px",filePattern:{start:0,end:98,step:1},fileExt:"gif"}});
KISSY.Editor.add("plugins~base",function(a){var h=a.PLUGIN_TYPE;a.addPlugin("bold,italic,underline,strikeThrough,insertOrderedList,insertUnorderedList".split(","),{type:h.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});
KISSY.Editor.add("plugins~color",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.env.ua.ie,g=["000","444","666","999","CCC","EEE","F3F3F3","FFF"],k=["F00","F90","FF0","0F0","0FF","00F","90F","F0F"],j=["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D2E9","EAD1DC","EA9999","F9CB9C","FFE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD","E06666","F6B26B","FFD966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BAD","CC0000","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A64D79","990000",
"B45F06","BF9000","38761D","134F5C","0B5394","351C75","741B47","660000","783F04","7F6000","274E13","0C343D","073763","20124D","4C1130"];a.addPlugin(["foreColor","backColor"],{type:a.PLUGIN_TYPE.TOOLBAR_MENU_BUTTON,color:"",_indicator:null,swatches:null,dropMenu:null,range:null,init:function(){var b=this.domEl,e=b.getElementsByTagName("span")[0].parentNode;this.color=this._getDefaultColor();f.addClass(b,"ks-editor-toolbar-color-button");e.innerHTML='<div class="ks-editor-toolbar-color-button-indicator" style="border-bottom-color:'+
this.color+'">'+e.innerHTML+"</div>";this._indicator=e.firstChild;this._renderUI();this._bindUI();this.swatches=f.getElementsByClassName("ks-editor-palette-colorswatch","div",this.dropMenu)},_renderUI:function(){this.dropMenu=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._generatePalettes();m&&a.Dom.setItemUnselectable(this.dropMenu)},_bindUI:function(){this._bindPickEvent();d.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();m&&this.editor.contentDoc.selection.empty();
this._updateSelectedColor(this.color)},this,true)},_generatePalettes:function(){var b="";b+=this._getPaletteTable(g);b+=this._getPaletteTable(k);b+=this._getPaletteTable(j);this.dropMenu.innerHTML=b},_getPaletteTable:function(b){var e,o=b.length,l,n="<tr>";e=0;for(o=b.length;e<o;++e){if(e!=0&&e%8==0)n+="</tr><tr>";l=a.Color.toRGB("#"+b[e]).toUpperCase();n+='<td class="ks-editor-palette-cell"><div class="ks-editor-palette-colorswatch" title="{COLOR}" style="background-color:{COLOR}"></div></td>'.replace(/{COLOR}/g,
l)}n+="</tr>";return'<div class="ks-editor-palette-table"><table><tbody>{TR}</tbody></table></div>'.replace("{TR}",n)},_bindPickEvent:function(){var b=this;d.on(this.dropMenu,"click",function(e){var o=d.getTarget(e).getAttribute("title");o&&o.indexOf("RGB")===0&&b._doAction(o);d.stopPropagation(e);a.Menu.hideActiveDropMenu(b.editor)})},_doAction:function(b){if(b){this.setColor(a.Color.toHex(b));b=this.range;m&&b.select&&b.select();this.editor.execCommand(this.name,this.color)}},setColor:function(b){this.color=
b;this._updateIndicatorColor(b);this._updateSelectedColor(b)},_updateIndicatorColor:function(b){this._indicator.style.borderBottomColor=b},_updateSelectedColor:function(b){var e,o,l,n=this.swatches;e=0;for(o=n.length;e<o;++e){l=n[e];a.Color.toHex(l.style.backgroundColor)==b?f.addClass(l.parentNode,"ks-editor-palette-cell-selected"):f.removeClass(l.parentNode,"ks-editor-palette-cell-selected")}},_getDefaultColor:function(){return this.name=="foreColor"?"#000000":"#ffffff"}})});
KISSY.Editor.add("plugins~font",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.env.ua,g={"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7};a.addPlugin(["fontName","fontSize"],{type:a.PLUGIN_TYPE.TOOLBAR_SELECT,selectedValue:"",selectHead:null,selectList:null,options:[],items:null,selectedItem:null,range:null,init:function(){this.options=this.lang.options;this.selectHead=this.domEl.getElementsByTagName("span")[0];this._renderUI();this._bindUI()},_renderUI:function(){this.selectList=
a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._renderSelectList();this.items=this.selectList.getElementsByTagName("li")},_bindUI:function(){this._bindPickEvent();d.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();m.ie&&this.editor.contentDoc.selection.empty();if(this.selectedValue)this._updateSelectedOption(this.selectedValue);else if(this.selectedItem){f.removeClass(this.selectedItem,"ks-editor-option-selected");this.selectedItem=null}},this,true)},_renderSelectList:function(){var k=
"",j=this.options,b,e;for(b in j){e=j[b];k+='<li class="ks-editor-option" data-value="{VALUE}"><span class="ks-editor-option-checkbox"></span><span style="{STYLE}">{KEY}</span></li>'.replace("{VALUE}",e).replace("{STYLE}",this._getOptionStyle(b,e)).replace("{KEY}",b)}this.selectList.innerHTML='<ul class="ks-editor-select-list">{LI}</ul>'.replace("{LI}",k);f.addClass(this.selectList,"ks-editor-drop-menu-"+this.name)},_bindPickEvent:function(){var k=this;d.on(this.selectList,"click",function(j){var b=
d.getTarget(j);if(b.nodeName!="LI")b=f.getAncestorByTagName(b,"li");if(b){k._doAction(b.getAttribute("data-value"));d.stopPropagation(j);a.Menu.hideActiveDropMenu(k.editor)}});if(m.ie===6){d.on(this.items,"mouseenter",function(){f.addClass(this,"ks-editor-option-hover")});d.on(this.items,"mouseleave",function(){f.removeClass(this,"ks-editor-option-hover")})}},_doAction:function(k){if(k){this.selectedValue=k;this._setOption(k);k=this.range;m.ie&&k.select&&k.select();this.editor.execCommand(this.name,
this.selectedValue)}},_setOption:function(k){this._updateHeadText(this._getOptionKey(k));this._updateSelectedOption(k)},_getOptionStyle:function(k,j){return this.name=="fontName"?"font-family:"+j:"font-size:"+k+"px"},_getOptionKey:function(k){var j=this.options,b;for(b in j)if(j[b]==k)return b;return null},_updateHeadText:function(k){this.selectHead.innerHTML=k},_updateSelectedOption:function(k){var j=this.items,b,e=j.length,o;for(b=0;b<e;++b){o=j[b];if(o.getAttribute("data-value")==k){f.addClass(o,
"ks-editor-option-selected");this.selectedItem=o}else f.removeClass(o,"ks-editor-option-selected")}},updateState:function(){var k=this.editor.contentDoc,j=this.options,b=this.name,e,o;try{if(k.queryCommandEnabled(b)){o=k.queryCommandValue(b);if(m.webkit&&b=="fontSize")o=this._getWebkitFontSize(o);o&&(e=this._getOptionKey(o));if(e in j){if(o!=this.selectedValue){this.selectedValue=o;this._updateHeadText(e)}}else{this.selectedValue="";this._updateHeadText(this.lang.text)}}}catch(l){}},_getWebkitFontSize:function(k){if(k in
g)return g[k];return null}})});
KISSY.Editor.add("plugins~image",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=h.Connect,g=YAHOO.lang,k=YAHOO.env.ua,j=k.ie,b="ks-editor-image-tab-selected",e={local:'<li rel="local" class="'+b+'">{tab_local}</li>',link:'<li rel="link">{tab_link}</li>',album:'<li rel="album">{tab_album}</li>'},o={tabs:["link"],upload:{actionUrl:"",filter:"png|gif|jpg|jpeg",filterMsg:"",enableXdr:false,connectionSwf:"http://a.tbcdn.cn/yui/2.8.0r4/build/connection/connection.swf",formatResponse:function(l){var n=[];
for(var q in l)n.push(l[q]);return n},extraCode:""}};a.addPlugin("image",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,form:null,range:null,currentTab:null,currentPanel:null,uploadingPanel:null,actionsBar:null,init:function(){var l=this.editor.config.pluginsConfig[this.name]||{};o.upload.filterMsg=this.lang.upload_filter;this.config=g.merge(o,l);this.config.upload=g.merge(o.upload,l.upload||{});this._renderUI();this._bindUI();this.actionsBar=f.getElementsByClassName("ks-editor-dialog-actions",
"div",this.dialog)[0];this.uploadingPanel=f.getElementsByClassName("ks-editor-image-uploading","div",this.dialog)[0];this.config.upload.enableXdr&&this._initXdrUpload()},_renderUI:function(){var l=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),n=this.lang;n.local_extraCode=this.config.upload.extraCode;l.className+=" ks-editor-image";l.innerHTML='<form action="javascript: void(0)"><ul class="ks-editor-image-tabs ks-clearfix"></ul><div class="ks-editor-image-tab-content" rel="local" style="display: none"><label>{label_local}</label><input type="file" size="40" name="imgFile" unselectable="on" />{local_extraCode}</div><div class="ks-editor-image-tab-content" rel="link"><label>{label_link}</label><input name="imgUrl" size="50" /></div><div class="ks-editor-image-tab-content" rel="album" style="display: none"><label>{label_album}</label><p style="width: 300px">\u5c1a\u672a\u5b9e\u73b0...</p></div><div class="ks-editor-image-uploading" style="display: none"><p style="width: 300px">{uploading}</p></div><div class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span></div></form>'.replace(/\{([^}]+)\}/g,
function(q,r){return r in n?n[r]:r});this.dialog=l;this.form=l.getElementsByTagName("form")[0];j&&a.Dom.setItemUnselectable(l);this._renderTabs()},_renderTabs:function(){function l(y){for(var B=0,G=y.getAttribute("rel"),E=0;E<x;E++){v[E]&&f.removeClass(v[E],b);c[E].style.display="none";if(c[E].getAttribute("rel")==G)B=E}k.ie===6&&a.Menu._updateShimRegion(q.dialog);f.addClass(y,b);c[B].style.display="";q.currentTab=y.getAttribute("rel");q.currentPanel=c[B]}for(var n=this.lang,q=this,r=f.getElementsByClassName("ks-editor-image-tabs",
"ul",this.dialog)[0],c=f.getElementsByClassName("ks-editor-image-tab-content","div",this.dialog),i=this.config.tabs,p="",s=0,t=i.length;s<t;s++)p+=e[i[s]];r.innerHTML=p.replace(/\{([^}]+)\}/g,function(y,B){return B in n?n[B]:B});var v=r.childNodes,x=c.length;v.length===1&&f.addClass(this.dialog,"ks-editor-image-no-tab");l(v[0]);d.on(v,"click",function(){l(this)})},_bindUI:function(){var l=this;d.on(this.domEl,"click",function(){if(l.dialog.style.visibility===j?"hidden":"visible")l._syncUI()});d.on(this.dialog,
"click",function(n){var q=d.getTarget(n),r=l.currentTab;switch(q.className){case "ks-editor-btn-ok":if(r==="local"){d.stopPropagation(n);l._insertLocalImage()}else l._insertWebImage();break;case "ks-editor-btn-cancel":break;default:d.stopPropagation(n)}})},_initXdrUpload:function(){for(var l=this.config.tabs,n=0,q=l.length;n<q;n++)if(l[n]==="local"){m.transport(this.config.upload.connectionSwf);break}},_insertLocalImage:function(){var l=this.form,n=this.config.upload,q=l.imgFile.value,r=n.actionUrl,
c=this;if(q&&r){if(n.filter!=="*"){q=q.substring(q.lastIndexOf(".")+1).toLowerCase();if(n.filter.indexOf(q)==-1){alert(n.filterMsg);c.form.reset();return}}this.uploadingPanel.style.display="";this.currentPanel.style.display="none";this.actionsBar.style.display="none";k.ie===6&&a.Menu._updateShimRegion(this.dialog);m.setForm(l,true);m.asyncRequest("post",r,{upload:function(i){try{var p=n.formatResponse(g.JSON.parse(i.responseText));if(p[0]=="0"){c._insertImage(p[1]);c._hideDialog()}else c._onUploadError(p[1])}catch(s){c._onUploadError(g.dump(s)+
"\no = "+g.dump(i)+"\n[from upload catch code]")}},xdr:n.enableXdr})}else c._hideDialog()},_onUploadError:function(l){alert(this.lang.upload_error+"\n\n"+l);this._hideDialog()},_insertWebImage:function(){var l=this.form.imgUrl.value;l&&this._insertImage(l)},_hideDialog:function(){var l=this.editor.activeDropMenu;l&&f.isAncestor(l,this.dialog)&&a.Menu.hideActiveDropMenu(this.editor);this.editor.contentWin.focus()},_syncUI:function(){this.range=a.Range.saveRange(this.editor);this.form.reset();this.uploadingPanel.style.display=
"none";this.currentPanel.style.display="";this.actionsBar.style.display=""},_insertImage:function(l,n){l=g.trim(l);if(l.length!==0){var q=this.editor,r=this.range;if(window.getSelection){var c=q.contentDoc.createElement("img");c.src=l;n&&c.setAttribute("alt",n);r.deleteContents();r.insertNode(c);if(k.webkit){n=q.contentWin.getSelection();n.addRange(r);n.collapseToEnd()}else r.setStartAfter(c);q.contentWin.focus()}else if(document.selection){q.contentWin.focus();if("text"in r){r.select();q='<img src="'+
l+'"';n&&(q+=' "alt="'+n+'"');q+=">";r.pasteHTML(q)}else r.execCommand("insertImage",false,l)}}}})});KISSY.Editor.add("plugins~indent",function(a){a.addPlugin(["indent","outdent"],{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});
KISSY.Editor.add("plugins~justify",function(a){var h=["justifyLeft","justifyCenter","justifyRight"];a.addPlugin(h,{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState(h)}})});
KISSY.Editor.add("plugins~keystroke",function(a){var h=YAHOO.util.Event,f=YAHOO.env.ua;a.addPlugin("keystroke",{type:a.PLUGIN_TYPE.FUNC,init:function(){var d=this.editor;f.ie&&f.ie<8&&h.on(d.contentDoc,"keydown",function(g){g.keyCode==9&&this.selection.empty()});var m=d.textarea.form;m&&(new YAHOO.util.KeyListener(d.contentDoc,{ctrl:true,keys:13},{fn:function(){if(!d.sourceMode)d.textarea.value=d.getData();m.submit()}})).enable()}})});
KISSY.Editor.add("plugins~link",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.lang,g=YAHOO.env.ua,k=g.ie;h=a.PLUGIN_TYPE;var j=a.Range,b=(new Date).getTime(),e=/^\w+:\/\/.*|#.*$/,o=['<form onsubmit="return false"><ul><li class="ks-editor-link-href"><label>{href}</label><input name="href" style="width: 220px" value="http://" type="text" /></li><li class="ks-editor-link-target"><input name="target" id="target_"',b,' type="checkbox" /> <label for="target_"',b,'>{target}</label></li><li class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span><span class="ks-editor-link-remove">{remove}</span></li></ul></form>'].join("");
a.addPlugin("link",{type:h.TOOLBAR_BUTTON,dialog:null,form:null,range:null,init:function(){this._renderUI();this._bindUI()},_renderUI:function(){var l=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),n=this.lang;l.className+=" ks-editor-link";l.innerHTML=o.replace(/\{([^}]+)\}/g,function(q,r){return n[r]?n[r]:r});this.dialog=l;this.form=l.getElementsByTagName("form")[0];g.webkit&&(this.form.target.parentNode.style.display="none");k&&a.Dom.setItemUnselectable(l)},_bindUI:function(){var l=this.form,
n=this;d.on(this.domEl,"click",function(){if(n.dialog.style.visibility===k?"hidden":"visible")n._syncUI()});d.on(this.dialog,"click",function(q){switch(d.getTarget(q).className){case "ks-editor-btn-ok":n._createLink(l.href.value,l.target.checked);break;case "ks-editor-btn-cancel":break;case "ks-editor-link-remove":n._unLink();break;default:d.stopPropagation(q)}})},_syncUI:function(){this.range=a.Range.saveRange(this.editor);var l=this.form,n;n=j.getCommonAncestor(this.range);if(n=n.nodeName=="A"?
n:f.getAncestorByTagName(n,"A")){l.href.value=n.href;l.target.checked=n.target==="_blank";f.removeClass(l,"ks-editor-link-newlink-mode")}else{l.href.value="http://";l.target.checked=false;f.addClass(l,"ks-editor-link-newlink-mode")}setTimeout(function(){l.href.select()},50)},_createLink:function(l,n){l=this._getValidHref(l);if(l.length===0)this._unLink();else{var q=this.range,r=document.createElement("div"),c;c=j.getCommonAncestor(q);if(c=c.nodeName=="A"?c:f.getAncestorByTagName(c,"A")){c.href=l;
n?c.setAttribute("target","_blank"):c.removeAttribute("target")}else{c=document.createElement("a");c.href=l;n&&c.setAttribute("target","_blank");if(k){q.select&&q.select();if("text"in q){c.innerHTML=q.htmlText||l;r.innerHTML="";r.appendChild(c);q.pasteHTML(r.innerHTML)}else this.editor.execCommand("createLink",l)}else if(g.webkit)this.editor.execCommand("createLink",l);else{if(q.collapsed)c.innerHTML=l;else for(l=q.cloneContents();l.firstChild;)c.appendChild(l.firstChild);q.deleteContents();q.insertNode(c);
q.selectNode(c)}}}},_getValidHref:function(l){if((l=m.trim(l))&&!e.test(l))l="http://"+l;return l},_unLink:function(){var l=this.editor,n=this.range,q=j.getSelectedText(n),r=j.getCommonAncestor(n);if(!q&&r.nodeType==3){l=r.parentNode;l.nodeName=="A"&&l.parentNode.replaceChild(r,l)}else{n.select&&n.select();l.execCommand("unLink",null)}}})});
KISSY.Editor.add("plugins~resize",function(a){var h=YAHOO.util.Event;a.addPlugin("resize",{type:a.PLUGIN_TYPE.STATUSBAR_ITEM,contentEl:null,currentHeight:0,init:function(){this.contentEl=this.editor.container.childNodes[1];this.currentHeight=parseInt(this.contentEl.style.height);this.renderUI();this.bindUI()},renderUI:function(){var f=this.lang;this.domEl.innerHTML='<span class="ks-editor-resize-larger" title="{larger_title}">{larger_text}</span><span class="ks-editor-resize-smaller" title="{smaller_title}">{smaller_text}</span>'.replace(/\{([^}]+)\}/g,
function(d,m){return f[m]?f[m]:m})},bindUI:function(){var f=this.domEl.getElementsByTagName("span"),d=f[1];h.on(f[0],"click",function(){this.currentHeight+=100;this._doResize()},this,true);h.on(d,"click",function(){if(this.currentHeight<100)this.currentHeight=0;else this.currentHeight-=100;this._doResize()},this,true)},_doResize:function(){this.contentEl.style.height=this.currentHeight+"px";this.editor.textarea.style.height=this.currentHeight+"px"}})});
KISSY.Editor.add("plugins~save",function(a){var h=YAHOO.util.Event,f={b:{tag:"strong"},i:{tag:"em"},u:{tag:"span",style:"text-decoration:underline"},strike:{tag:"span",style:"text-decoration:line-through"}};a.addPlugin("save",{type:a.PLUGIN_TYPE.FUNC,init:function(){var d=this.editor,m=d.textarea,g=m.form;g&&h.on(g,"submit",function(){if(!d.sourceMode)m.value=d.getData()})},filterData:function(d){d=d.replace(/<(\/?)([^>\s]+)([^>]*)>/g,function(m,g,k,j){k=k.toLowerCase();m=f[k];k=k;if(m&&!j){k=m.tag;
if(!g&&m.style)k+=' style="'+m.style+'"'}return"<"+g+k+j+">"});if(d.indexOf("mso")>0)d=this.filterWord(d);return d},filterWord:function(d){d=d.replace(/<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");d=d.replace(/<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");d=d.replace(/<H(\d)([^>]*)>/gi,"<h$1>");d=d.replace(/<(H\d)><FONT[^>]*>([\s\S]*?)<\/FONT><\/\1>/gi,"<$1>$2</$1>");d=d.replace(/<(H\d)><EM>([\s\S]*?)<\/EM><\/\1>/gi,"<$1>$2</$1>");d=d.replace(/<meta[^>]*>/ig,"");d=d.replace(/<link rel="\S+" href="file:[^>]*">/ig,
"");d=d.replace(/<!--\[if gte mso [0-9]{1,2}\]>[\s\S]*?<!\[endif\]--\>/ig,"");d=d.replace(/<style>[\s\S]*?mso[\s\S]*?<\/style>/ig,"");d=d.replace(/ lang=".+?"/ig,"");d=d.replace(/<o:p><\/o:p>/ig,"");return d=d.replace(/ class="Mso.+?"/ig,"")}})});
KISSY.Editor.add("plugins~smiley",function(a){var h=YAHOO.util.Event,f=YAHOO.lang,d=YAHOO.env.ua,m={tabs:["default"]};a.addPlugin("smiley",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,range:null,init:function(){this.config=f.merge(m,this.editor.config.pluginsConfig[this.name]||{});this._renderUI();this._bindUI()},_renderUI:function(){var g=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);g.className+=" ks-editor-smiley-dialog";this.dialog=g;this._renderDialog();d.ie&&a.Dom.setItemUnselectable(g)},
_renderDialog:function(){var g=a.Smilies[this.config.tabs[0]],k=g.mode;if(k==="icons")this._renderIcons(g);else k==="sprite"&&this._renderSprite(g)},_renderIcons:function(g){var k=this.editor.config.base+"smilies/"+g.name+"/",j=g.fileNames,b="."+g.fileExt;g=g.cols;var e=[],o,l=j.length,n;e.push('<div class="ks-editor-smiley-icons">');for(o=0;o<l;o++){n=j[o];e.push('<img src="'+k+n+b+'" alt="'+n+'" title="'+n+'" />');o%g===g-1&&e.push("<br />")}e.push("</div");this.dialog.innerHTML=e.join("")},_renderSprite:function(g){var k=
g.base,j=g.filePattern,b="."+g.fileExt,e=j.end+1;j=j.step;var o,l=[];l.push('<div class="ks-editor-smiley-sprite ks-clearfix" style="'+g.spriteStyle+'">');for(o=0;o<e;o+=j)l.push('<span data-icon="'+k+o+b+'" style="'+g.unitStyle+'"></span>');l.push("</div");this.dialog.innerHTML=l.join("")},_bindUI:function(){var g=this;h.on(this.domEl,"click",function(){g.range=a.Range.saveRange(g.editor)});h.on(this.dialog,"click",function(k){var j=h.getTarget(k);switch(j.nodeName){case "IMG":g._insertImage(j.src,
j.getAttribute("alt"));break;case "SPAN":g._insertImage(j.getAttribute("data-icon"),"");break;default:h.stopPropagation(k)}})},_insertImage:function(g,k){g=f.trim(g);if(g.length!==0){var j=this.editor,b=this.range;if(window.getSelection){var e=j.contentDoc.createElement("img");e.src=g;e.setAttribute("alt",k);b.deleteContents();b.insertNode(e);if(d.webkit){g=j.contentWin.getSelection();g.addRange(b);g.collapseToEnd()}else b.setStartAfter(e);j.contentWin.focus()}else if(document.selection)"text"in b?
b.pasteHTML('<img src="'+g+'" alt="'+k+'" />'):j.execCommand("insertImage",g)}}})});
KISSY.Editor.add("plugins~source",function(a){var h=YAHOO.util.Dom,f=YAHOO.env.ua;a.addPlugin("source",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,init:function(){var d=this.editor;this.iframe=d.contentWin.frameElement;this.textarea=d.textarea;this.iframe.parentNode.appendChild(d.textarea);h.addClass(this.domEl,"ks-editor-toolbar-source-button")},exec:function(){var d=this.editor,m=d.sourceMode;if(m)d.contentDoc.body.innerHTML=this.textarea.value;else this.textarea.value=d.getContentDocData();f.ie&&f.ie<8&&
d.contentDoc.selection.empty();this.textarea.style.display=m?"none":"";this.iframe.style.display=m?"":"none";d.sourceMode=!m;this._updateButtonState()},_updateButtonState:function(){var d=this.editor;if(d.sourceMode){h.addClass(d.container,"ks-editor-src-mode");h.addClass(this.domEl,"ks-editor-toolbar-button-selected")}else{h.removeClass(d.container,"ks-editor-src-mode");h.removeClass(this.domEl,"ks-editor-toolbar-button-selected")}}})});
KISSY.Editor.add("plugins~undo",function(a){a.addPlugin(["undo","redo"],{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name)}})});
KISSY.Editor.add("plugins~wordcount",function(a){var h=YAHOO.util,f=h.Dom,d=h.Event,m=YAHOO.lang,g={total:5E4,threshold:100};a.addPlugin("wordcount",{type:a.PLUGIN_TYPE.STATUSBAR_ITEM,total:Infinity,remain:Infinity,threshold:0,remainEl:null,init:function(){var k=m.merge(g,this.editor.config.pluginsConfig[this.name]||{});this.total=k.total;this.threshold=k.threshold;this.renderUI();this.bindUI();var j=this;setTimeout(function(){j.syncUI()},50)},renderUI:function(){this.domEl.innerHTML=this.lang.tmpl.replace("%remain%",
"<em>"+this.total+"</em>");this.remainEl=this.domEl.getElementsByTagName("em")[0]},bindUI:function(){var k=this.editor;d.on(k.textarea,"keyup",this.syncUI,this,true);d.on(k.contentDoc,"keyup",this.syncUI,this,true);d.on(k.container,"click",this.syncUI,this,true)},syncUI:function(){this.remain=this.total-this.editor.getData().length;this.remainEl.innerHTML=this.remain;this.remain<=this.threshold?f.addClass(this.domEl,"ks-editor-wordcount-alarm"):f.removeClass(this.domEl,"ks-editor-wordcount-alarm")}})});
