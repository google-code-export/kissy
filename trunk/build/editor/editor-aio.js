/*
Copyright 2010, KISSY UI Library v1.0dev
MIT Licensed
build: 416 Jan 17 22:28
*/
if(typeof YAHOO=="undefined"||!YAHOO)var YAHOO={};YAHOO.namespace=function(){var a=arguments,i=null,g,f,m;for(g=0;g<a.length;g+=1){m=(""+a[g]).split(".");i=YAHOO;for(f=m[0]=="YAHOO"?1:0;f<m.length;f+=1){i[m[f]]=i[m[f]]||{};i=i[m[f]]}}return i};YAHOO.log=function(a,i,g){var f=YAHOO.widget.Logger;return f&&f.log?f.log(a,i,g):false};
YAHOO.register=function(a,i,g){var f=YAHOO.env.modules,m,e,j;f[a]||(f[a]={versions:[],builds:[]});f=f[a];m=g.version;g=g.build;e=YAHOO.env.listeners;f.name=a;f.version=m;f.build=g;f.versions.push(m);f.builds.push(g);f.mainClass=i;for(j=0;j<e.length;j+=1)e[j](f);if(i){i.VERSION=m;i.BUILD=g}else YAHOO.log("mainClass is undefined for module "+a,"warn")};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};
YAHOO.env.ua=function(){var a=function(m){var e=0;return parseFloat(m.replace(/\./g,function(){return e++==1?"":"."}))},i={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:navigator.cajaVersion,secure:false,os:null},g=navigator&&navigator.userAgent,f=window&&window.location;f=f&&f.href;i.secure=f&&f.toLowerCase().indexOf("https")===0;if(g){if(/windows|win32/i.test(g))i.os="windows";else if(/macintosh/i.test(g))i.os="macintosh";if(/KHTML/.test(g))i.webkit=1;if((f=g.match(/AppleWebKit\/([^\s]*)/))&&
f[1]){i.webkit=a(f[1]);if(/ Mobile\//.test(g))i.mobile="Apple";else if(f=g.match(/NokiaN[^\/]*/))i.mobile=f[0];if(f=g.match(/AdobeAIR\/([^\s]*)/))i.air=f[0]}if(!i.webkit)if((f=g.match(/Opera[\s\/]([^\s]*)/))&&f[1]){i.opera=a(f[1]);if(f=g.match(/Opera Mini[^;]*/))i.mobile=f[0]}else if((f=g.match(/MSIE\s([^;]*)/))&&f[1])i.ie=a(f[1]);else if(f=g.match(/Gecko\/([^\s]*)/)){i.gecko=1;if((f=g.match(/rv:([^\s\)]*)/))&&f[1])i.gecko=a(f[1])}}return i}();
(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var a=YAHOO_config.listener,i=YAHOO.env.listeners,g=true,f;if(a){for(f=0;f<i.length;f++)if(i[f]==a){g=false;break}g&&i.push(a)}}})();YAHOO.lang=YAHOO.lang||{};
(function(){var a=YAHOO.lang,i=Object.prototype,g=[],f=["toString","valueOf"],m={isArray:function(e){return i.toString.apply(e)==="[object Array]"},isBoolean:function(e){return typeof e==="boolean"},isFunction:function(e){return typeof e==="function"||i.toString.apply(e)==="[object Function]"},isNull:function(e){return e===null},isNumber:function(e){return typeof e==="number"&&isFinite(e)},isObject:function(e){return e&&(typeof e==="object"||a.isFunction(e))||false},isString:function(e){return typeof e===
"string"},isUndefined:function(e){return typeof e==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(e,j){var h,b,c;for(h=0;h<f.length;h+=1){b=f[h];c=j[b];if(a.isFunction(c)&&c!=i[b])e[b]=c}}:function(){},extend:function(e,j,h){if(!j||!e)throw new Error("extend failed, please check that all dependencies are included.");var b=function(){},c;b.prototype=j.prototype;e.prototype=new b;e.prototype.constructor=e;e.superclass=j.prototype;if(j.prototype.constructor==i.constructor)j.prototype.constructor=
j;if(h){for(c in h)if(a.hasOwnProperty(h,c))e.prototype[c]=h[c];a._IEEnumFix(e.prototype,h)}},augmentObject:function(e,j){if(!j||!e)throw new Error("Absorb failed, verify dependencies.");var h=arguments,b,c=h[2];if(c&&c!==true)for(b=2;b<h.length;b+=1)e[h[b]]=j[h[b]];else{for(b in j)if(c||!(b in e))e[b]=j[b];a._IEEnumFix(e,j)}},augmentProto:function(e,j){if(!j||!e)throw new Error("Augment failed, verify dependencies.");var h=[e.prototype,j.prototype],b;for(b=2;b<arguments.length;b+=1)h.push(arguments[b]);
a.augmentObject.apply(this,h)},dump:function(e,j){var h,b,c=[];if(a.isObject(e))if(e instanceof Date||"nodeType"in e&&"tagName"in e)return e;else{if(a.isFunction(e))return"f(){...}"}else return e+"";j=a.isNumber(j)?j:3;if(a.isArray(e)){c.push("[");h=0;for(b=e.length;h<b;h+=1){a.isObject(e[h])?c.push(j>0?a.dump(e[h],j-1):"{...}"):c.push(e[h]);c.push(", ")}c.length>1&&c.pop();c.push("]")}else{c.push("{");for(h in e)if(a.hasOwnProperty(e,h)){c.push(h+" => ");a.isObject(e[h])?c.push(j>0?a.dump(e[h],j-
1):"{...}"):c.push(e[h]);c.push(", ")}c.length>1&&c.pop();c.push("}")}return c.join("")},substitute:function(e,j,h){for(var b,c,n,k,o,q=[],r;;){b=e.lastIndexOf("{");if(b<0)break;c=e.indexOf("}",b);if(b+1>=c)break;k=r=e.substring(b+1,c);o=null;n=k.indexOf(" ");if(n>-1){o=k.substring(n+1);k=k.substring(0,n)}n=j[k];if(h)n=h(k,n,o);if(a.isObject(n))if(a.isArray(n))n=a.dump(n,parseInt(o,10));else{o=o||"";k=o.indexOf("dump");if(k>-1)o=o.substring(4);r=n.toString();n=r==="[object Object]"||k>-1?a.dump(n,
parseInt(o,10)):r}else if(!a.isString(n)&&!a.isNumber(n)){n="~-"+q.length+"-~";q[q.length]=r}e=e.substring(0,b)+n+e.substring(c+1)}for(b=q.length-1;b>=0;b-=1)e=e.replace(new RegExp("~-"+b+"-~"),"{"+q[b]+"}","g");return e},trim:function(e){try{return e.replace(/^\s+|\s+$/g,"")}catch(j){return e}},merge:function(){var e={},j=arguments,h=j.length,b;for(b=0;b<h;b+=1)a.augmentObject(e,j[b],true);return e},later:function(e,j,h,b,c){e=e||0;j=j||{};var n=h,k=b,o;if(a.isString(h))n=j[h];if(!n)throw new TypeError("method undefined");
if(k&&!a.isArray(k))k=[b];h=function(){n.apply(j,k||g)};o=c?setInterval(h,e):setTimeout(h,e);return{interval:c,cancel:function(){this.interval?clearInterval(o):clearTimeout(o)}}},isValue:function(e){return a.isObject(e)||a.isString(e)||a.isNumber(e)||a.isBoolean(e)}};a.hasOwnProperty=i.hasOwnProperty?function(e,j){return e&&e.hasOwnProperty(j)}:function(e,j){return!a.isUndefined(e[j])&&e.constructor.prototype[j]!==e[j]};m.augmentObject(a,m,true);YAHOO.util.Lang=a;a.augment=a.augmentProto;YAHOO.augment=
a.augmentProto;YAHOO.extend=a.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var a=YAHOO.util,i=YAHOO.lang,g=YAHOO.env.ua,f=YAHOO.lang.trim,m={},e={},j=/^t(?:able|d|h)$/i,h=/color$/i,b=window.document,c=b.documentElement,n=g.opera,k=g.webkit,o=g.gecko,q=g.ie;a.Dom={CUSTOM_ATTRIBUTES:!c.hasAttribute?{"for":"htmlFor","class":"className"}:{htmlFor:"for",className:"class"},DOT_ATTRIBUTES:{},get:function(d){var l,p,s,t;if(d){if(d.nodeType||d.item)return d;if(typeof d==="string"){l=d;s=(d=b.getElementById(d))?d.attributes:
null;if(d&&s&&s.id&&s.id.value===l)return d;else if(d&&b.all){d=null;p=b.all[l];s=0;for(t=p.length;s<t;++s)if(p[s].id===l)return p[s]}return d}if(YAHOO.util.Element&&d instanceof YAHOO.util.Element)d=d.get("element");if("length"in d){l=[];s=0;for(t=d.length;s<t;++s)l[l.length]=a.Dom.get(d[s]);return l}return d}return null},getComputedStyle:function(d,l){if(window.getComputedStyle)return d.ownerDocument.defaultView.getComputedStyle(d,null)[l];else if(d.currentStyle)return a.Dom.IE_ComputedStyle.get(d,
l)},getStyle:function(d,l){return a.Dom.batch(d,a.Dom._getStyle,l)},_getStyle:function(){if(window.getComputedStyle)return function(d,l){l=l==="float"?(l="cssFloat"):a.Dom._toCamel(l);var p=d.style[l];if(!p)if(d=d.ownerDocument.defaultView.getComputedStyle(d,null))p=d[l];return p};else if(c.currentStyle)return function(d,l){var p;switch(l){case "opacity":p=100;try{p=d.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{p=d.filters("alpha").opacity}catch(t){}}return p/100;case "float":l=
"styleFloat";default:l=a.Dom._toCamel(l);p=d.currentStyle?d.currentStyle[l]:null;return d.style[l]||p}}}(),setStyle:function(d,l,p){a.Dom.batch(d,a.Dom._setStyle,{prop:l,val:p})},_setStyle:function(){return q?function(d,l){var p=a.Dom._toCamel(l.prop);l=l.val;if(d)switch(p){case "opacity":if(i.isString(d.style.filter)){d.style.filter="alpha(opacity="+l*100+")";if(!d.currentStyle||!d.currentStyle.hasLayout)d.style.zoom=1}break;case "float":p="styleFloat";default:d.style[p]=l}}:function(d,l){var p=
a.Dom._toCamel(l.prop);l=l.val;if(d){if(p=="float")p="cssFloat";d.style[p]=l}}}(),getXY:function(d){return a.Dom.batch(d,a.Dom._getXY)},_canPosition:function(d){return a.Dom._getStyle(d,"display")!=="none"&&a.Dom._inDoc(d)},_getXY:function(){return b.documentElement.getBoundingClientRect?function(d){var l,p,s,t,v,x,y=Math.floor;p=false;if(a.Dom._canPosition(d)){p=d.getBoundingClientRect();s=d.ownerDocument;d=a.Dom.getDocumentScrollLeft(s);l=a.Dom.getDocumentScrollTop(s);p=[y(p.left),y(p.top)];if(q&&
g.ie<8){v=t=2;x=s.compatMode;if(g.ie===6)if(x!=="BackCompat")v=t=0;if(x==="BackCompat"){x=r(s.documentElement,"borderLeftWidth");s=r(s.documentElement,"borderTopWidth");if(x!=="medium")t=parseInt(x,10);if(s!=="medium")v=parseInt(s,10)}p[0]-=t;p[1]-=v}if(l||d){p[0]+=d;p[1]+=l}p[0]=y(p[0]);p[1]=y(p[1])}return p}:function(d){var l,p,s,t=false,v=d;if(a.Dom._canPosition(d)){t=[d.offsetLeft,d.offsetTop];l=a.Dom.getDocumentScrollLeft(d.ownerDocument);p=a.Dom.getDocumentScrollTop(d.ownerDocument);for(s=o||
g.webkit>519?true:false;v=v.offsetParent;){t[0]+=v.offsetLeft;t[1]+=v.offsetTop;if(s)t=a.Dom._calcBorders(v,t)}if(a.Dom._getStyle(d,"position")!=="fixed"){for(v=d;(v=v.parentNode)&&v.tagName;){d=v.scrollTop;s=v.scrollLeft;if(o&&a.Dom._getStyle(v,"overflow")!=="visible")t=a.Dom._calcBorders(v,t);if(d||s){t[0]-=s;t[1]-=d}}t[0]+=l;t[1]+=p}else if(n){t[0]-=l;t[1]-=p}else if(k||o){t[0]+=l;t[1]+=p}t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1])}return t}}(),getX:function(d){return a.Dom.batch(d,function(l){return a.Dom.getXY(l)[0]},
a.Dom,true)},getY:function(d){return a.Dom.batch(d,function(l){return a.Dom.getXY(l)[1]},a.Dom,true)},setXY:function(d,l,p){a.Dom.batch(d,a.Dom._setXY,{pos:l,noRetry:p})},_setXY:function(d,l){var p=a.Dom._getStyle(d,"position"),s=a.Dom.setStyle,t=l.pos;l=l.noRetry;var v=[parseInt(a.Dom.getComputedStyle(d,"left"),10),parseInt(a.Dom.getComputedStyle(d,"top"),10)],x;if(p=="static"){p="relative";s(d,"position",p)}x=a.Dom._getXY(d);if(!t||x===false)return false;if(isNaN(v[0]))v[0]=p=="relative"?0:d.offsetLeft;
if(isNaN(v[1]))v[1]=p=="relative"?0:d.offsetTop;t[0]!==null&&s(d,"left",t[0]-x[0]+v[0]+"px");t[1]!==null&&s(d,"top",t[1]-x[1]+v[1]+"px");if(!l){p=a.Dom._getXY(d);if(t[0]!==null&&p[0]!=t[0]||t[1]!==null&&p[1]!=t[1])a.Dom._setXY(d,{pos:t,noRetry:true})}},setX:function(d,l){a.Dom.setXY(d,[l,null])},setY:function(d,l){a.Dom.setXY(d,[null,l])},getRegion:function(d){return a.Dom.batch(d,function(l){var p=false;if(a.Dom._canPosition(l))p=a.Region.getRegion(l);return p},a.Dom,true)},getClientWidth:function(){return a.Dom.getViewportWidth()},
getClientHeight:function(){return a.Dom.getViewportHeight()},getElementsByClassName:function(d,l,p,s,t,v){l=l||"*";p=p?a.Dom.get(p):b;if(!p)return[];var x=[];l=p.getElementsByTagName(l);p=a.Dom.hasClass;for(var y=0,B=l.length;y<B;++y)if(p(l[y],d))x[x.length]=l[y];s&&a.Dom.batch(x,s,t,v);return x},hasClass:function(d,l){return a.Dom.batch(d,a.Dom._hasClass,l)},_hasClass:function(d,l){var p=false;if(d&&l){d=a.Dom._getAttribute(d,"className")||"";p=l.exec?l.test(d):l&&(" "+d+" ").indexOf(" "+l+" ")>
-1}return p},addClass:function(d,l){return a.Dom.batch(d,a.Dom._addClass,l)},_addClass:function(d,l){var p=false,s;if(d&&l){s=a.Dom._getAttribute(d,"className")||"";if(!a.Dom._hasClass(d,l)){a.Dom.setAttribute(d,"className",f(s+" "+l));p=true}}return p},removeClass:function(d,l){return a.Dom.batch(d,a.Dom._removeClass,l)},_removeClass:function(d,l){var p=false,s;if(d&&l){s=a.Dom._getAttribute(d,"className")||"";a.Dom.setAttribute(d,"className",s.replace(a.Dom._getClassRegex(l),""));l=a.Dom._getAttribute(d,
"className");if(s!==l){a.Dom.setAttribute(d,"className",f(l));p=true;if(a.Dom._getAttribute(d,"className")===""){s=d.hasAttribute&&d.hasAttribute("class")?"class":"className";d.removeAttribute(s)}}}return p},replaceClass:function(d,l,p){return a.Dom.batch(d,a.Dom._replaceClass,{from:l,to:p})},_replaceClass:function(d,l){var p,s,t=false;if(d&&l){p=l.from;if(s=l.to)if(p){if(p!==s){l=a.Dom._getAttribute(d,"className")||"";p=(" "+l.replace(a.Dom._getClassRegex(p)," "+s)).split(a.Dom._getClassRegex(s));
p.splice(1,0," "+s);a.Dom.setAttribute(d,"className",f(p.join("")));t=true}}else t=a.Dom._addClass(d,l.to);else t=false}return t},generateId:function(d,l){l=l||"yui-gen";var p=function(s){if(s&&s.id)return s.id;var t=l+YAHOO.env._id_counter++;if(s){if(s.ownerDocument&&s.ownerDocument.getElementById(t))return a.Dom.generateId(s,t+l);s.id=t}return t};return a.Dom.batch(d,p,a.Dom,true)||p.apply(a.Dom,arguments)},isAncestor:function(d,l){d=a.Dom.get(d);l=a.Dom.get(l);var p=false;if(d&&l&&d.nodeType&&
l.nodeType)if(d.contains&&d!==l)p=d.contains(l);else if(d.compareDocumentPosition)p=!!(d.compareDocumentPosition(l)&16);return p},inDocument:function(d,l){return a.Dom._inDoc(a.Dom.get(d),l)},_inDoc:function(d,l){var p=false;if(d&&d.tagName){l=l||d.ownerDocument;p=a.Dom.isAncestor(l.documentElement,d)}return p},getElementsBy:function(d,l,p,s,t,v,x){l=l||"*";p=p?a.Dom.get(p):b;if(!p)return[];var y=[];l=p.getElementsByTagName(l);p=0;for(var B=l.length;p<B;++p)if(d(l[p]))if(x){y=l[p];break}else y[y.length]=
l[p];s&&a.Dom.batch(y,s,t,v);return y},getElementBy:function(d,l,p){return a.Dom.getElementsBy(d,l,p,null,null,null,true)},batch:function(d,l,p,s){var t=[];s=s?p:window;if((d=d&&(d.tagName||d.item)?d:a.Dom.get(d))&&l){if(d.tagName||d.length===undefined)return l.call(s,d,p);for(var v=0;v<d.length;++v)t[t.length]=l.call(s,d[v],p)}else return false;return t},getDocumentHeight:function(){return Math.max(b.compatMode!="CSS1Compat"||k?b.body.scrollHeight:c.scrollHeight,a.Dom.getViewportHeight())},getDocumentWidth:function(){return Math.max(b.compatMode!=
"CSS1Compat"||k?b.body.scrollWidth:c.scrollWidth,a.Dom.getViewportWidth())},getViewportHeight:function(){var d=self.innerHeight,l=b.compatMode;if((l||q)&&!n)d=l=="CSS1Compat"?c.clientHeight:b.body.clientHeight;return d},getViewportWidth:function(){var d=self.innerWidth,l=b.compatMode;if(l||q)d=l=="CSS1Compat"?c.clientWidth:b.body.clientWidth;return d},getAncestorBy:function(d,l){for(;d=d.parentNode;)if(a.Dom._testElement(d,l))return d;return null},getAncestorByClassName:function(d,l){d=a.Dom.get(d);
if(!d)return null;return a.Dom.getAncestorBy(d,function(p){return a.Dom.hasClass(p,l)})},getAncestorByTagName:function(d,l){d=a.Dom.get(d);if(!d)return null;return a.Dom.getAncestorBy(d,function(p){return p.tagName&&p.tagName.toUpperCase()==l.toUpperCase()})},getPreviousSiblingBy:function(d,l){for(;d;){d=d.previousSibling;if(a.Dom._testElement(d,l))return d}return null},getPreviousSibling:function(d){d=a.Dom.get(d);if(!d)return null;return a.Dom.getPreviousSiblingBy(d)},getNextSiblingBy:function(d,
l){for(;d;){d=d.nextSibling;if(a.Dom._testElement(d,l))return d}return null},getNextSibling:function(d){d=a.Dom.get(d);if(!d)return null;return a.Dom.getNextSiblingBy(d)},getFirstChildBy:function(d,l){return(a.Dom._testElement(d.firstChild,l)?d.firstChild:null)||a.Dom.getNextSiblingBy(d.firstChild,l)},getFirstChild:function(d){d=a.Dom.get(d);if(!d)return null;return a.Dom.getFirstChildBy(d)},getLastChildBy:function(d,l){if(!d)return null;return(a.Dom._testElement(d.lastChild,l)?d.lastChild:null)||
a.Dom.getPreviousSiblingBy(d.lastChild,l)},getLastChild:function(d){d=a.Dom.get(d);return a.Dom.getLastChildBy(d)},getChildrenBy:function(d,l){var p=(d=a.Dom.getFirstChildBy(d,l))?[d]:[];a.Dom.getNextSiblingBy(d,function(s){if(!l||l(s))p[p.length]=s;return false});return p},getChildren:function(d){d=a.Dom.get(d);return a.Dom.getChildrenBy(d)},getDocumentScrollLeft:function(d){d=d||b;return Math.max(d.documentElement.scrollLeft,d.body.scrollLeft)},getDocumentScrollTop:function(d){d=d||b;return Math.max(d.documentElement.scrollTop,
d.body.scrollTop)},insertBefore:function(d,l){d=a.Dom.get(d);l=a.Dom.get(l);if(!d||!l||!l.parentNode)return null;return l.parentNode.insertBefore(d,l)},insertAfter:function(d,l){d=a.Dom.get(d);l=a.Dom.get(l);if(!d||!l||!l.parentNode)return null;return l.nextSibling?l.parentNode.insertBefore(d,l.nextSibling):l.parentNode.appendChild(d)},getClientRegion:function(){var d=a.Dom.getDocumentScrollTop(),l=a.Dom.getDocumentScrollLeft(),p=a.Dom.getViewportWidth()+l,s=a.Dom.getViewportHeight()+d;return new a.Region(d,
p,s,l)},setAttribute:function(d,l,p){a.Dom.batch(d,a.Dom._setAttribute,{attr:l,val:p})},_setAttribute:function(d,l){var p=a.Dom._toCamel(l.attr);l=l.val;if(d&&d.setAttribute)if(a.Dom.DOT_ATTRIBUTES[p])d[p]=l;else{p=a.Dom.CUSTOM_ATTRIBUTES[p]||p;d.setAttribute(p,l)}},getAttribute:function(d,l){return a.Dom.batch(d,a.Dom._getAttribute,l)},_getAttribute:function(d,l){var p;l=a.Dom.CUSTOM_ATTRIBUTES[l]||l;if(d&&d.getAttribute)p=d.getAttribute(l,2);return p},_toCamel:function(d){function l(p,s){return s.toUpperCase()}
return m[d]||(m[d]=d.indexOf("-")===-1?d:d.replace(/-([a-z])/gi,l))},_getClassRegex:function(d){var l;if(d!==undefined)if(d.exec)l=d;else{l=e[d];if(!l){d=d.replace(a.Dom._patterns.CLASS_RE_TOKENS,"\\$1");l=e[d]=new RegExp("(?:^|\\s)"+d+"(?= |$)","g")}}return l},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(d,l){return d&&d.nodeType==1&&(!l||l(d))},_calcBorders:function(d,l){var p=parseInt(a.Dom.getComputedStyle(d,"borderTopWidth"),10)||
0,s=parseInt(a.Dom.getComputedStyle(d,"borderLeftWidth"),10)||0;if(o)if(j.test(d.tagName))s=p=0;l[0]+=s;l[1]+=p;return l}};var r=a.Dom.getComputedStyle;if(g.opera)a.Dom.getComputedStyle=function(d,l){d=r(d,l);if(h.test(l))d=a.Dom.Color.toRGB(d);return d};if(g.webkit)a.Dom.getComputedStyle=function(d,l){d=r(d,l);if(d==="rgba(0, 0, 0, 0)")d="transparent";return d};if(g.ie&&g.ie>=8&&b.documentElement.hasAttribute)a.Dom.DOT_ATTRIBUTES.type=true})();
YAHOO.util.Region=function(a,i,g,f){this.y=this.top=a;this[1]=a;this.right=i;this.bottom=g;this.x=this.left=f;this[0]=f;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(a){return a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom};YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};
YAHOO.util.Region.prototype.intersect=function(a){var i=Math.max(this.top,a.top),g=Math.min(this.right,a.right),f=Math.min(this.bottom,a.bottom);a=Math.max(this.left,a.left);return f>=i&&g>=a?new YAHOO.util.Region(i,g,f,a):null};YAHOO.util.Region.prototype.union=function(a){var i=Math.min(this.top,a.top),g=Math.max(this.right,a.right),f=Math.max(this.bottom,a.bottom);a=Math.min(this.left,a.left);return new YAHOO.util.Region(i,g,f,a)};
YAHOO.util.Region.prototype.toString=function(){return"Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}"};YAHOO.util.Region.getRegion=function(a){var i=YAHOO.util.Dom.getXY(a);return new YAHOO.util.Region(i[1],i[0]+a.offsetWidth,i[1]+a.offsetHeight,i[0])};YAHOO.util.Point=function(a,i){if(YAHOO.lang.isArray(a)){i=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,i,a,i,a)};
YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);
(function(){var a=YAHOO.util,i=/^width|height$/,g=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,f={get:function(e,j){var h="";h=e.currentStyle[j];return h=j==="opacity"?a.Dom.getStyle(e,"opacity"):!h||h.indexOf&&h.indexOf("px")>-1?h:a.Dom.IE_COMPUTED[j]?a.Dom.IE_COMPUTED[j](e,j):g.test(h)?a.Dom.IE.ComputedStyle.getPixel(e,j):h},getOffset:function(e,j){var h=e.currentStyle[j],b=j.charAt(0).toUpperCase()+j.substr(1),c="offset"+b,n="pixel"+b;b="";if(h=="auto"){b=
h=e[c];if(i.test(j)){e.style[j]=h;if(e[c]>h)b=h-(e[c]-h);e.style[j]="auto"}}else{if(!e.style[n]&&!e.style[j])e.style[j]=h;b=e.style[n]}return b+"px"},getBorderWidth:function(e,j){var h=null;if(!e.currentStyle.hasLayout)e.style.zoom=1;switch(j){case "borderTopWidth":h=e.clientTop;break;case "borderBottomWidth":h=e.offsetHeight-e.clientHeight-e.clientTop;break;case "borderLeftWidth":h=e.clientLeft;break;case "borderRightWidth":h=e.offsetWidth-e.clientWidth-e.clientLeft;break}return h+"px"},getPixel:function(e,
j){var h=null,b=e.currentStyle.right;e.style.right=e.currentStyle[j];h=e.style.pixelRight;e.style.right=b;return h+"px"},getMargin:function(e,j){return e.currentStyle[j]=="auto"?"0px":a.Dom.IE.ComputedStyle.getPixel(e,j)},getVisibility:function(e,j){for(var h;(h=e.currentStyle)&&h[j]=="inherit";)e=e.parentNode;return h?h[j]:"visible"},getColor:function(e,j){return a.Dom.Color.toRGB(e.currentStyle[j])||"transparent"},getBorderColor:function(e,j){e=e.currentStyle;return a.Dom.Color.toRGB(a.Dom.Color.toHex(e[j]||
e.color))}},m={};m.top=m.right=m.bottom=m.left=m.width=m.height=f.getOffset;m.color=f.getColor;m.borderTopWidth=m.borderRightWidth=m.borderBottomWidth=m.borderLeftWidth=f.getBorderWidth;m.marginTop=m.marginRight=m.marginBottom=m.marginLeft=f.getMargin;m.visibility=f.getVisibility;m.borderColor=m.borderTopColor=m.borderRightColor=m.borderBottomColor=m.borderLeftColor=f.getBorderColor;a.Dom.IE_COMPUTED=m;a.Dom.IE_ComputedStyle=f})();
(function(){var a=parseInt,i=RegExp,g=YAHOO.util;g.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(f){g.Dom.Color.re_RGB.test(f)||(f=g.Dom.Color.toHex(f));if(g.Dom.Color.re_hex.exec(f))f=
"rgb("+[a(i.$1,16),a(i.$2,16),a(i.$3,16)].join(", ")+")";return f},toHex:function(f){f=g.Dom.Color.KEYWORDS[f]||f;if(g.Dom.Color.re_RGB.exec(f)){f=i.$1.length===1?"0"+i.$1:Number(i.$1);var m=i.$2.length===1?"0"+i.$2:Number(i.$2),e=i.$3.length===1?"0"+i.$3:Number(i.$3);f=[f.toString(16),m.toString(16),e.toString(16)].join("")}if(f.length<6)f=f.replace(g.Dom.Color.re_hex3,"$1$1");if(f!=="transparent"&&f.indexOf("#")<0)f="#"+f;return f.toLowerCase()}}})();
YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.0r4",build:"2449"});YAHOO.util.CustomEvent=function(a,i,g,f,m){this.type=a;this.scope=i||window;this.silent=g;this.fireOnce=m;this.fired=false;this.firedWith=null;this.signature=f||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(a!=="_YUICEOnSubscribe")this.subscribeEvent=new YAHOO.util.CustomEvent("_YUICEOnSubscribe",this,true);this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;
YAHOO.util.CustomEvent.prototype={subscribe:function(a,i,g){if(!a)throw new Error("Invalid callback for subscriber to '"+this.type+"'");this.subscribeEvent&&this.subscribeEvent.fire(a,i,g);a=new YAHOO.util.Subscriber(a,i,g);this.fireOnce&&this.fired?this.notify(a,this.firedWith):this.subscribers.push(a)},unsubscribe:function(a,i){if(!a)return this.unsubscribeAll();for(var g=false,f=0,m=this.subscribers.length;f<m;++f){var e=this.subscribers[f];if(e&&e.contains(a,i)){this._delete(f);g=true}}return g},
fire:function(){this.lastError=null;var a=this.subscribers.length,i=[].slice.call(arguments,0),g=true,f;if(this.fireOnce)if(this.fired)return true;else this.firedWith=i;this.fired=true;if(!a&&this.silent)return true;var m=this.subscribers.slice();for(f=0;f<a;++f){var e=m[f];if(e){g=this.notify(e,i);if(false===g)break}}return g!==false},notify:function(a,i){var g,f=null,m=a.getScope(this.scope),e=YAHOO.util.Event.throwErrors;if(this.signature==YAHOO.util.CustomEvent.FLAT){if(i.length>0)f=i[0];try{g=
a.fn.call(m,f,a.obj)}catch(j){this.lastError=j;if(e)throw j;}}else try{g=a.fn.call(m,this.type,i,a.obj)}catch(h){this.lastError=h;if(e)throw h;}return g},unsubscribeAll:function(){var a=this.subscribers.length,i;for(i=a-1;i>-1;i--)this._delete(i);this.subscribers=[];return a},_delete:function(a){var i=this.subscribers[a];if(i){delete i.fn;delete i.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};
YAHOO.util.Subscriber=function(a,i,g){this.fn=a;this.obj=YAHOO.lang.isUndefined(i)?null:i;this.overrideContext=g};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext)return this.overrideContext===true?this.obj:this.overrideContext;return a};YAHOO.util.Subscriber.prototype.contains=function(a,i){return i?this.fn==a&&this.obj==i:this.fn==a};
YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};
if(!YAHOO.util.Event){YAHOO.util.Event=function(){var a=false,i=[],g=[],f=0,m=[],e=0,j={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},h=YAHOO.env.ua.ie;return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:h,_interval:null,_dri:null,_specialTypes:{focusin:h?"focusin":"focus",focusout:h?"focusout":"blur"},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval)this._interval=
YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)},onAvailable:function(b,c,n,k,o){b=YAHOO.lang.isString(b)?[b]:b;for(var q=0;q<b.length;q+=1)m.push({id:b[q],fn:c,obj:n,overrideContext:k,checkReady:o});f=this.POLL_RETRYS;this.startInterval()},onContentReady:function(b,c,n,k){this.onAvailable(b,c,n,k,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(b,c,n,k,o,q){if(!n||!n.call)return false;if(this._isValidCollection(b)){for(var r=
true,d=0,l=b.length;d<l;++d)r=this.on(b[d],c,n,k,o)&&r;return r}else if(YAHOO.lang.isString(b))if(r=this.getEl(b))b=r;else{this.onAvailable(b,function(){YAHOO.util.Event._addListener(b,c,n,k,o,q)});return true}if(!b)return false;if("unload"==c&&k!==this){g[g.length]=[b,c,n,k,o];return true}var p=b;if(o)p=o===true?k:o;r=function(t){return n.call(p,YAHOO.util.Event.getEvent(t,b),k)};i[i.length]=[b,c,n,r,p,k,o,q];try{this._simpleAdd(b,c,r,q)}catch(s){this.lastError=s;this.removeListener(b,c,n);return false}return true},
_getType:function(b){return this._specialTypes[b]||b},addListener:function(b,c,n,k,o){var q=(c=="focusin"||c=="focusout")&&!YAHOO.env.ua.ie?true:false;return this._addListener(b,this._getType(c),n,k,o,q)},addFocusListener:function(b,c,n,k){return this.on(b,"focusin",c,n,k)},removeFocusListener:function(b,c){return this.removeListener(b,"focusin",c)},addBlurListener:function(b,c,n,k){return this.on(b,"focusout",c,n,k)},removeBlurListener:function(b,c){return this.removeListener(b,"focusout",c)},removeListener:function(b,
c,n,k){var o;c=this._getType(c);if(typeof b=="string")b=this.getEl(b);else if(this._isValidCollection(b)){k=true;for(o=b.length-1;o>-1;o--)k=this.removeListener(b[o],c,n)&&k;return k}if(!n||!n.call)return this.purgeElement(b,false,c);if("unload"==c){for(o=g.length-1;o>-1;o--)if((k=g[o])&&k[0]==b&&k[1]==c&&k[2]==n){g.splice(o,1);return true}return false}o=null;k=k;if("undefined"===typeof k)k=this._getCacheIndex(i,b,c,n);if(k>=0)o=i[k];if(!b||!o)return false;n=o[this.CAPTURE]===true?true:false;try{this._simpleRemove(b,
c,o[this.WFN],n)}catch(q){this.lastError=q;return false}delete i[k][this.WFN];delete i[k][this.FN];i.splice(k,1);return true},getTarget:function(b){return this.resolveTextNode(b.target||b.srcElement)},resolveTextNode:function(b){try{if(b&&3==b.nodeType)return b.parentNode}catch(c){}return b},getPageX:function(b){var c=b.pageX;if(!c&&0!==c){c=b.clientX||0;if(this.isIE)c+=this._getScrollLeft()}return c},getPageY:function(b){var c=b.pageY;if(!c&&0!==c){c=b.clientY||0;if(this.isIE)c+=this._getScrollTop()}return c},
getXY:function(b){return[this.getPageX(b),this.getPageY(b)]},getRelatedTarget:function(b){var c=b.relatedTarget;if(!c)if(b.type=="mouseout")c=b.toElement;else if(b.type=="mouseover")c=b.fromElement;return this.resolveTextNode(c)},getTime:function(b){if(!b.time){var c=(new Date).getTime();try{b.time=c}catch(n){this.lastError=n;return c}}return b.time},stopEvent:function(b){this.stopPropagation(b);this.preventDefault(b)},stopPropagation:function(b){if(b.stopPropagation)b.stopPropagation();else b.cancelBubble=
true},preventDefault:function(b){if(b.preventDefault)b.preventDefault();else b.returnValue=false},getEvent:function(b){b=b||window.event;if(!b)for(var c=this.getEvent.caller;c;){if((b=c.arguments[0])&&Event==b.constructor)break;c=c.caller}return b},getCharCode:function(b){b=b.keyCode||b.charCode||0;if(YAHOO.env.ua.webkit&&b in j)b=j[b];return b},_getCacheIndex:function(b,c,n,k){for(var o=0,q=b.length;o<q;o+=1){var r=b[o];if(r&&r[this.FN]==k&&r[this.EL]==c&&r[this.TYPE]==n)return o}return-1},generateId:function(b){var c=
b.id;if(!c){c="yuievtautoid-"+e;++e;b.id=c}return c},_isValidCollection:function(b){try{return b&&typeof b!=="string"&&b.length&&!b.tagName&&!b.alert&&typeof b[0]!=="undefined"}catch(c){return false}},elCache:{},getEl:function(b){return typeof b==="string"?document.getElementById(b):b},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(){if(!a){a=true;var b=YAHOO.util.Event;b._ready();b._tryPreloadAttach()}},_ready:function(){var b=YAHOO.util.Event;
if(!b.DOMReady){b.DOMReady=true;b.DOMReadyEvent.fire();b._simpleRemove(document,"DOMContentLoaded",b._ready)}},_tryPreloadAttach:function(){if(m.length===0){f=0;if(this._interval){this._interval.cancel();this._interval=null}}else if(!this.locked){if(this.isIE)if(!this.DOMReady){this.startInterval();return}this.locked=true;var b=!a;b||(b=f>0&&m.length>0);var c=[],n=function(l,p){l=l;if(p.overrideContext)l=p.overrideContext===true?p.obj:p.overrideContext;p.fn.call(l,p.obj)},k,o,q,r,d=[];k=0;for(o=m.length;k<
o;k+=1)if(q=m[k])if(r=this.getEl(q.id))if(q.checkReady){if(a||r.nextSibling||!b){d.push(q);m[k]=null}}else{n(r,q);m[k]=null}else c.push(q);k=0;for(o=d.length;k<o;k+=1){q=d[k];n(this.getEl(q.id),q)}f--;if(b){for(k=m.length-1;k>-1;k--){q=m[k];if(!q||!q.id)m.splice(k,1)}this.startInterval()}else if(this._interval){this._interval.cancel();this._interval=null}this.locked=false}},purgeElement:function(b,c,n){b=YAHOO.lang.isString(b)?this.getEl(b):b;var k=this.getListeners(b,n),o;if(k)for(o=k.length-1;o>
-1;o--){var q=k[o];this.removeListener(b,q.type,q.fn)}if(c&&b&&b.childNodes){o=0;for(k=b.childNodes.length;o<k;++o)this.purgeElement(b.childNodes[o],c,n)}},getListeners:function(b,c){var n=[],k;if(c)if(c==="unload")k=[g];else{c=this._getType(c);k=[i]}else k=[i,g];b=YAHOO.lang.isString(b)?this.getEl(b):b;for(var o=0;o<k.length;o+=1){var q=k[o];if(q)for(var r=0,d=q.length;r<d;++r){var l=q[r];if(l&&l[this.EL]===b&&(!c||c===l[this.TYPE]))n.push({type:l[this.TYPE],fn:l[this.FN],obj:l[this.OBJ],adjust:l[this.OVERRIDE],
scope:l[this.ADJ_SCOPE],index:r})}}return n.length?n:null},_unload:function(b){var c=YAHOO.util.Event,n,k,o,q=g.slice(),r;n=0;for(o=g.length;n<o;++n)if(k=q[n]){r=window;if(k[c.ADJ_SCOPE])r=k[c.ADJ_SCOPE]===true?k[c.UNLOAD_OBJ]:k[c.ADJ_SCOPE];k[c.FN].call(r,c.getEvent(b,k[c.EL]),k[c.UNLOAD_OBJ]);q[n]=null}g=null;if(i)for(b=i.length-1;b>-1;b--)(k=i[b])&&c.removeListener(k[c.EL],k[c.TYPE],k[c.FN],b);c._simpleRemove(window,"unload",c._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},
_getScroll:function(){var b=document.documentElement,c=document.body;return b&&(b.scrollTop||b.scrollLeft)?[b.scrollTop,b.scrollLeft]:c?[c.scrollTop,c.scrollLeft]:[0,0]},regCE:function(){},_simpleAdd:function(){return window.addEventListener?function(b,c,n,k){b.addEventListener(c,n,k)}:window.attachEvent?function(b,c,n){b.attachEvent("on"+c,n)}:function(){}}(),_simpleRemove:function(){return window.removeEventListener?function(b,c,n,k){b.removeEventListener(c,n,k)}:window.detachEvent?function(b,c,
n){b.detachEvent("on"+c,n)}:function(){}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE)if(self!==self.top)document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;a._ready()}};else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var i=document.createElement("p");a._dri=setInterval(function(){try{i.doScroll("left");clearInterval(a._dri);
a._dri=null;a._ready();i=null}catch(g){}},a.POLL_INTERVAL)}else if(a.webkit&&a.webkit<525)a._dri=setInterval(function(){var g=document.readyState;if("loaded"==g||"complete"==g){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL);else a._simpleAdd(document,"DOMContentLoaded",a._ready);a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};
YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,i,g,f){this.__yui_events=this.__yui_events||{};var m=this.__yui_events[a];if(m)m.subscribe(i,g,f);else{m=this.__yui_subscribers=this.__yui_subscribers||{};m[a]||(m[a]=[]);m[a].push({fn:i,obj:g,overrideContext:f})}},unsubscribe:function(a,i,g){var f=this.__yui_events=this.__yui_events||{};if(a){if(f=f[a])return f.unsubscribe(i,g)}else{a=true;for(var m in f)if(YAHOO.lang.hasOwnProperty(f,m))a=a&&f[m].unsubscribe(i,
g);return a}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(a,i){this.__yui_events=this.__yui_events||{};var g=i||{};i=this.__yui_events;var f;if(!i[a]){f=new YAHOO.util.CustomEvent(a,g.scope||this,g.silent,YAHOO.util.CustomEvent.FLAT,g.fireOnce);i[a]=f;g.onSubscribeCallback&&f.subscribeEvent.subscribe(g.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};if(g=this.__yui_subscribers[a])for(var m=0;m<g.length;++m)f.subscribe(g[m].fn,g[m].obj,
g[m].overrideContext)}return i[a]},fireEvent:function(a){this.__yui_events=this.__yui_events||{};var i=this.__yui_events[a];if(!i)return null;for(var g=[],f=1;f<arguments.length;++f)g.push(arguments[f]);return i.fire.apply(i,g)},hasEvent:function(a){if(this.__yui_events)if(this.__yui_events[a])return true;return false}};
(function(){var a=YAHOO.util.Event,i=YAHOO.lang;YAHOO.util.KeyListener=function(f,m,e,j){function h(c){if(!m.shift)m.shift=false;if(!m.alt)m.alt=false;if(!m.ctrl)m.ctrl=false;if(c.shiftKey==m.shift&&c.altKey==m.alt&&c.ctrlKey==m.ctrl){var n,k=m.keys,o;if(YAHOO.lang.isArray(k))for(var q=0;q<k.length;q++){n=k[q];o=a.getCharCode(c);if(n==o){b.fire(o,c);break}}else{o=a.getCharCode(c);k==o&&b.fire(o,c)}}}if(!j)j=YAHOO.util.KeyListener.KEYDOWN;var b=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=
new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(i.isString(f))f=document.getElementById(f);i.isFunction(e)?b.subscribe(e):b.subscribe(e.fn,e.scope,e.correctScope);this.enable=function(){if(!this.enabled){a.on(f,j,h);this.enabledEvent.fire(m)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(f,j,h);this.disabledEvent.fire(m)}this.enabled=false};this.toString=function(){return"KeyListener ["+m.keys+"] "+f.tagName+(f.id?"["+
f.id+"]":"")}};var g=YAHOO.util.KeyListener;g.KEYDOWN="keydown";g.KEYUP="keyup";g.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.0r4",build:"2449"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){function a(u){x[u]||(x[u]="\\u"+("0000"+(+u.charCodeAt(0)).toString(16)).slice(-4));return x[u]}function i(u,w){var A=function(J,K){var F,M,D=J[K];if(D&&typeof D==="object")for(F in D)if(c.hasOwnProperty(D,F)){M=A(D,F);if(M===undefined)delete D[F];else D[F]=M}return w.call(J,K,D)};return typeof w==="function"?A({"":u},""):u}function g(u){return u.replace(d,a)}function f(u){return c.isString(u)&&t.test(u.replace(l,"@").replace(p,"]").replace(s,""))}function m(u,w){u=g(u);if(f(u))return i(eval("("+
u+")"),w);throw new SyntaxError("JSON.parse");}function e(u){var w=typeof u;return W[w]||W[q.call(u)]||(w===B?u?B:G:y)}function j(u){return X+u.replace(v,a)+X}function h(u,w){return u.replace(/^/gm,w)}function b(u,w,A){function J(H,C){var z=H[C],L=e(z),I=[],ga=A?fa:Q,N,Y;if(k(z)&&n(z.toJSON))z=z.toJSON(C);else if(L===R)z=M(z);if(n(K))z=K.call(H,C,z);if(z!==H[C])L=e(z);switch(L){case R:case B:break;case E:return j(z);case S:return isFinite(z)?z+T:G;case U:return z+T;case G:return G;default:return}for(C=
D.length-1;C>=0;--C)if(D[C]===z)throw new Error("JSON.stringify. Cyclical reference");H=o(z);D.push(z);if(H)for(C=z.length-1;C>=0;--C)I[C]=J(z,C)||G;else{L=w||z;C=0;for(N in L)if(L.hasOwnProperty(N))if(Y=J(z,N))I[C++]=j(N)+ga+Y}D.pop();return A&&I.length?H?Z+O+h(I.join($),A)+O+aa:ba+O+h(I.join($),A)+O+ca:H?Z+I.join(da)+aa:ba+I.join(da)+ca}if(u!==undefined){var K=n(w)?w:null,F=q.call(A).match(/String|Number/)||[],M=YAHOO.lang.JSON.dateToString,D=[],V,P,ea;if(K||!o(w))w=undefined;if(w){V={};P=0;for(ea=
w.length;P<ea;++P)V[w[P]]=true;w=V}A=F[0]==="Number"?(new Array(Math.min(Math.max(0,A),10)+1)).join(" "):(A||T).slice(0,10);return J({"":u},"")}}var c=YAHOO.lang,n=c.isFunction,k=c.isObject,o=c.isArray,q=Object.prototype.toString,r=(YAHOO.env.ua.caja?window:this).JSON,d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,
t=/^[\],:{}\s]*$/,v=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,x={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y="undefined",B="object",G="null",E="string",S="number",U="boolean",R="date",W={undefined:y,string:E,"[object String]":E,number:S,"[object Number]":S,"boolean":U,"[object Boolean]":U,"[object Date]":R,"[object RegExp]":B},T="",ba="{",ca="}",Z="[",aa="]",da=",",$=",\n",O="\n",Q=":",
fa=": ",X='"';r=q.call(r)==="[object JSON]"&&r;YAHOO.lang.JSON={useNativeParse:!!r,useNativeStringify:!!r,isSafe:function(u){return f(g(u))},parse:function(u,w){return r&&YAHOO.lang.JSON.useNativeParse?r.parse(u,w):m(u,w)},stringify:function(u,w,A){return r&&YAHOO.lang.JSON.useNativeStringify?r.stringify(u,w,A):b(u,w,A)},dateToString:function(u){function w(A){return A<10?"0"+A:A}return u.getUTCFullYear()+"-"+w(u.getUTCMonth()+1)+"-"+w(u.getUTCDate())+"T"+w(u.getUTCHours())+Q+w(u.getUTCMinutes())+
Q+w(u.getUTCSeconds())+"Z"},stringToDate:function(u){var w=u.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(w){u=new Date;u.setUTCFullYear(w[1],w[2]-1,w[3]);u.setUTCHours(w[4],w[5],w[6],w[7]||0);return u}return u}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),
completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a==
"string")this._default_post_header=a;else if(typeof a=="boolean")this._use_default_post_header=a},setDefaultXhrHeader:function(a){if(typeof a=="string")this._default_xhr_header=a;else this._use_default_xhr_header=a},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a))this._polling_interval=a},createXhrObject:function(a){var i,g,f;try{g=new XMLHttpRequest;i={conn:g,tId:a,xhr:true}}catch(m){for(f=0;f<this._msxml_progid.length;++f)try{g=new ActiveXObject(this._msxml_progid[f]);i={conn:g,
tId:a,xhr:true};break}catch(e){}}finally{return i}},getConnectionObject:function(a){var i,g=this._transaction_id;try{if(a){i={tId:g};if(a==="xdr"){i.conn=this._transport;i.xdr=true}else if(a==="upload")i.upload=true}else i=this.createXhrObject(g);i&&this._transaction_id++}catch(f){}return i},asyncRequest:function(a,i,g,f){var m,e=g&&g.argument?g.argument:null;if(this._isFileUpload)m="upload";else if(g.xdr)m="xdr";if(m=this.getConnectionObject(m)){g&&g.customevents&&this.initCustomEvents(m,g);if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(m,
g,i,f);return m}if(a.toUpperCase()=="GET"){if(this._sFormData.length!==0)i+=(i.indexOf("?")==-1?"?":"&")+this._sFormData}else if(a.toUpperCase()=="POST")f=f?this._sFormData+"&"+f:this._sFormData}if(a.toUpperCase()=="GET"&&g&&g.cache===false)i+=(i.indexOf("?")==-1?"?":"&")+"rnd="+(new Date).valueOf().toString();if(this._use_default_xhr_header)this._default_headers["X-Requested-With"]||this.initHeader("X-Requested-With",this._default_xhr_header,true);a.toUpperCase()==="POST"&&this._use_default_post_header&&
this._isFormSubmit===false&&this.initHeader("Content-Type",this._default_post_header);if(m.xdr){this.xdr(m,a,i,g,f);return m}m.conn.open(a,i,true);if(this._has_default_headers||this._has_http_headers)this.setHeader(m);this.handleReadyState(m,g);m.conn.send(f||"");this._isFormSubmit===true&&this.resetFormState();this.startEvent.fire(m,e);m.startEvent&&m.startEvent.fire(m,e);return m}else return null},initCustomEvents:function(a,i){var g;for(g in i.customevents)if(this._customEvents[g][0]){a[this._customEvents[g][0]]=
new YAHOO.util.CustomEvent(this._customEvents[g][1],i.scope?i.scope:null);a[this._customEvents[g][0]].subscribe(i.customevents[g])}},handleReadyState:function(a,i){var g=this,f=i&&i.argument?i.argument:null;if(i&&i.timeout)this._timeOut[a.tId]=window.setTimeout(function(){g.abort(a,i,true)},i.timeout);this._poll[a.tId]=window.setInterval(function(){if(a.conn&&a.conn.readyState===4){window.clearInterval(g._poll[a.tId]);delete g._poll[a.tId];if(i&&i.timeout){window.clearTimeout(g._timeOut[a.tId]);delete g._timeOut[a.tId]}g.completeEvent.fire(a,
f);a.completeEvent&&a.completeEvent.fire(a,f);g.handleTransactionResponse(a,i)}},this._polling_interval)},handleTransactionResponse:function(a,i,g){var f,m=i&&i.argument?i.argument:null,e=a.r&&a.r.statusText==="xdr:success"?true:false,j=a.r&&a.r.statusText==="xdr:failure"?true:false;try{f=a.conn.status!==undefined&&a.conn.status!==0||e?a.conn.status:j&&!g?0:13030}catch(h){f=13030}if(f>=200&&f<300||f===1223||e){g=a.xdr?a.r:this.createResponseObject(a,m);if(i&&i.success)i.scope?i.success.apply(i.scope,
[g]):i.success(g);this.successEvent.fire(g);a.successEvent&&a.successEvent.fire(g)}else{switch(f){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:g=this.createExceptionObject(a.tId,m,g?g:false);if(i&&i.failure)i.scope?i.failure.apply(i.scope,[g]):i.failure(g);break;default:g=a.xdr?a.response:this.createResponseObject(a,m);if(i&&i.failure)i.scope?i.failure.apply(i.scope,[g]):i.failure(g)}this.failureEvent.fire(g);a.failureEvent&&a.failureEvent.fire(g)}this.releaseObject(a)},createResponseObject:function(a,
i){var g={},f={},m,e,j,h;try{e=a.conn.getAllResponseHeaders();j=e.split("\n");for(m=0;m<j.length;m++){h=j[m].indexOf(":");if(h!=-1)f[j[m].substring(0,h)]=YAHOO.lang.trim(j[m].substring(h+2))}}catch(b){}g.tId=a.tId;g.status=a.conn.status==1223?204:a.conn.status;g.statusText=a.conn.status==1223?"No Content":a.conn.statusText;g.getResponseHeader=f;g.getAllResponseHeaders=e;g.responseText=a.conn.responseText;g.responseXML=a.conn.responseXML;if(i)g.argument=i;return g},createExceptionObject:function(a,
i,g){var f={};f.tId=a;if(g){f.status=-1;f.statusText="transaction aborted"}else{f.status=0;f.statusText="communication failure"}if(i)f.argument=i;return f},initHeader:function(a,i,g){(g?this._default_headers:this._http_headers)[a]=i;if(g)this._has_default_headers=true;else this._has_http_headers=true},setHeader:function(a){var i;if(this._has_default_headers)for(i in this._default_headers)YAHOO.lang.hasOwnProperty(this._default_headers,i)&&a.conn.setRequestHeader(i,this._default_headers[i]);if(this._has_http_headers){for(i in this._http_headers)YAHOO.lang.hasOwnProperty(this._http_headers,
i)&&a.conn.setRequestHeader(i,this._http_headers[i]);this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(a,i,g){var f,m=i&&i.argument?i.argument:null;a=a||{};if(a.conn)if(a.xhr){if(this.isCallInProgress(a)){a.conn.abort();window.clearInterval(this._poll[a.tId]);delete this._poll[a.tId];if(g){window.clearTimeout(this._timeOut[a.tId]);delete this._timeOut[a.tId]}f=true}}else{if(a.xdr){a.conn.abort(a.tId);
f=true}}else if(a.upload){var e=document.getElementById("yuiIO"+a.tId);if(e){YAHOO.util.Event.removeListener(e,"load");document.body.removeChild(e);if(g){window.clearTimeout(this._timeOut[a.tId]);delete this._timeOut[a.tId]}f=true}}else f=false;if(f===true){this.abortEvent.fire(a,m);a.abortEvent&&a.abortEvent.fire(a,m);this.handleTransactionResponse(a,i,true)}return f},isCallInProgress:function(a){a=a||{};return a.xhr&&a.conn?a.conn.readyState!==4&&a.conn.readyState!==0:a.xdr&&a.conn?a.conn.isCallInProgress(a.tId):
a.upload===true?document.getElementById("yuiIO"+a.tId)?true:false:false},releaseObject:function(a){if(a&&a.conn)a.conn=null}};
(function(){function a(b){b='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+b+'" width="0" height="0"><param name="movie" value="'+b+'"><param name="allowScriptAccess" value="always"></object>';var c=document.createElement("div");document.body.appendChild(c);c.innerHTML=b}function i(b,c,n,k,o){h[parseInt(b.tId)]={o:b,c:k};if(o){k.method=c;k.data=o}b.conn.send(n,k,b.tId)}function g(b){a(b);j._transport=document.getElementById("YUIConnectionSwf")}function f(){j.xdrReadyEvent.fire()}
function m(b,c){if(b){j.startEvent.fire(b,c.argument);b.startEvent&&b.startEvent.fire(b,c.argument)}}function e(b){var c=h[b.tId].o,n=h[b.tId].c;if(b.statusText==="xdr:start")m(c,n);else{b.responseText=decodeURI(b.responseText);c.r=b;if(n.argument)c.r.argument=n.argument;this.handleTransactionResponse(c,n,b.statusText==="xdr:abort"?true:false);delete h[b.tId]}}var j=YAHOO.util.Connect,h={};j.xdr=i;j.swf=a;j.transport=g;j.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");j.xdrReady=f;j.handleXdrResponse=
e})();
(function(){function a(h,b,c){var n,k=false,o=[],q=0,r,d,l,p;this.resetFormState();if(typeof h=="string")h=document.getElementById(h)||document.forms[h];else if(typeof h=="object")h=h;else return;if(b){this.createFrame(c?c:null);this._isFileUpload=this._isFormSubmit=true;this._formNode=h}else{r=0;for(d=h.elements.length;r<d;++r){b=h.elements[r];n=b.disabled;c=b.name;if(!n&&c){c=encodeURIComponent(c)+"=";n=encodeURIComponent(b.value);switch(b.type){case "select-one":if(b.selectedIndex>-1){p=b.options[b.selectedIndex];
o[q++]=c+encodeURIComponent(p.attributes.value&&p.attributes.value.specified?p.value:p.text)}break;case "select-multiple":if(b.selectedIndex>-1){n=b.selectedIndex;for(l=b.options.length;n<l;++n){p=b.options[n];if(p.selected)o[q++]=c+encodeURIComponent(p.attributes.value&&p.attributes.value.specified?p.value:p.text)}}break;case "radio":case "checkbox":if(b.checked)o[q++]=c+n;break;case "file":case undefined:case "reset":case "button":break;case "submit":if(k===false){if(this._hasSubmitListener&&this._submitElementValue)o[q++]=
this._submitElementValue;k=true}break;default:o[q++]=c+n}}}this._isFormSubmit=true;this._sFormData=o.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}}function i(){this._isFileUpload=this._isFormSubmit=false;this._formNode=null;this._sFormData=""}function g(h){var b="yuiIO"+this._transaction_id,c;if(YAHOO.env.ua.ie){c=document.createElement('<iframe id="'+b+'" name="'+b+'" />');if(typeof h=="boolean")c.src="javascript:false"}else{c=document.createElement("iframe");
c.id=b;c.name=b}c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";document.body.appendChild(c)}function f(h){var b=[];h=h.split("&");var c,n;for(c=0;c<h.length;c++){n=h[c].indexOf("=");if(n!=-1){b[c]=document.createElement("input");b[c].type="hidden";b[c].name=decodeURIComponent(h[c].substring(0,n));b[c].value=decodeURIComponent(h[c].substring(n+1));this._formNode.appendChild(b[c])}}return b}function m(h,b,c,n){var k="yuiIO"+h.tId,o=document.getElementById(k),q=document.documentMode&&
document.documentMode===8?true:false,r=this,d=b&&b.argument?b.argument:null,l,p,s,t,v;t={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",c);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",k);YAHOO.env.ua.ie&&!q?this._formNode.setAttribute("encoding","multipart/form-data"):this._formNode.setAttribute("enctype","multipart/form-data");if(n)l=this.appendPostData(n);
this._formNode.submit();this.startEvent.fire(h,d);h.startEvent&&h.startEvent.fire(h,d);if(b&&b.timeout)this._timeOut[h.tId]=window.setTimeout(function(){r.abort(h,b,true)},b.timeout);if(l&&l.length>0)for(c=0;c<l.length;c++)this._formNode.removeChild(l[c]);for(p in t)if(YAHOO.lang.hasOwnProperty(t,p))t[p]?this._formNode.setAttribute(p,t[p]):this._formNode.removeAttribute(p);this.resetFormState();v=function(){if(b&&b.timeout){window.clearTimeout(r._timeOut[h.tId]);delete r._timeOut[h.tId]}r.completeEvent.fire(h,
d);h.completeEvent&&h.completeEvent.fire(h,d);s={tId:h.tId,argument:b.argument};try{s.responseText=o.contentWindow.document.body?o.contentWindow.document.body.innerHTML:o.contentWindow.document.documentElement.textContent;s.responseXML=o.contentWindow.document.XMLDocument?o.contentWindow.document.XMLDocument:o.contentWindow.document}catch(x){}if(b&&b.upload)b.scope?b.upload.apply(b.scope,[s]):b.upload(s);r.uploadEvent.fire(s);h.uploadEvent&&h.uploadEvent.fire(s);j.removeListener(o,"load",v);setTimeout(function(){document.body.removeChild(o);
r.releaseObject(h)},100)};j.addListener(o,"load",v)}var e=YAHOO.util.Connect,j=YAHOO.util.Event;e._isFormSubmit=false;e._isFileUpload=false;e._formNode=null;e._sFormData=null;e._submitElementValue=null;e.uploadEvent=new YAHOO.util.CustomEvent("upload");e._hasSubmitListener=function(){if(j){j.addListener(document,"click",function(h){h=j.getTarget(h);var b=h.nodeName.toLowerCase();if((b==="input"||b==="button")&&h.type&&h.type.toLowerCase()=="submit")e._submitElementValue=encodeURIComponent(h.name)+
"="+encodeURIComponent(h.value)});return true}return false}();e.setForm=a;e.resetFormState=i;e.createFrame=g;e.appendPostData=f;e.uploadFile=m})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});if(typeof KISSY==="undefined"||!KISSY){function KISSY(a){var i=this;if(!(i instanceof KISSY))return new KISSY(a);i._init();i._config(a);i._setup();return i}}
(function(a,i,g){var f=Array.prototype.slice,m=function(e,j,h,b){if(!j||!e)return e;if(h===g)h=true;var c,n,k;if(b&&(k=b.length))for(c=0;c<k;c++){n=b[c];if(n in j)if(h||!(n in e))e[n]=j[n]}else for(n in j)if(h||!(n in e))e[n]=j[n];return e};m(i.prototype,{add:function(e,j,h,b){i.Env.mods[e]={name:e,fn:j,version:h,details:b||{}};return this},_init:function(){var e=this;e.version="1.0dev";e.Env={mods:{},_used:{},_attached:{}};e.Config={debug:true}},_config:function(e){m(this.Config,e)},_setup:function(){this.use("kissy-core")},
use:function(){function e(r){if(!c[r]){var d=b[r],l;if(d){c[r]=true;l=d.details.submodules}q.push(r);if(l){if(typeof l==="string")l=[l];r=0;for(d=l.length;r<d;r++)e(l[r])}}}var j=this,h=f.call(arguments,0),b=i.Env.mods,c=j.Env._used,n=h.length,k=h[n-1],o,q=[];if(typeof k==="function")h.pop();else k=null;if(h[0]==="*"){h=[];for(o in b)h.push(o);k&&h.push(k);return j.use.apply(j,h)}for(o=0;o<n;o++)e(h[o]);j._attach(q);k&&k(j);return j},_attach:function(e){var j=i.Env.mods,h=this.Env._attached,b,c=e.length,
n,k;for(b=0;b<c;b++){n=e[b];k=j[n];if(!h[n]&&k){h[n]=true;k.fn&&k.fn(this)}}},mix:m,merge:function(){var e=arguments,j={},h,b=e.length;for(h=0;h<b;++h)m(j,e[h]);return j},extend:function(e,j,h,b){if(!j||!e)return e;var c=Object.prototype,n=j.prototype,k=function(o){function q(){}q.prototype=o;return new q}(n);e.prototype=k;k.constructor=e;e.superclass=n;if(j!==Object&&n.constructor===c.constructor)n.constructor=j;h&&m(k,h);b&&m(e,b);return e},augment:function(e,j,h,b){return m(e.prototype,j.prototype,
h,b)},each:function(e,j,h){var b=e&&e.length||0,c;for(c=0;c<b;c++)j.call(h||this,e[c],c,e);return this},ready:function(){},weave:function(e,j,h,b){var c=[h[b],e];j==="before"&&c.reverse();h[b]=function(){for(var n=0;n<2;n++)c[n].apply(this,arguments)};return this},cloneTo:function(e){function j(h){if(!(this instanceof j))return new j(h);j.superclass.constructor.call(this,h)}i.extend(j,i,null,i);return a[e]=j},namespace:function(){var e=arguments,j=e.length,h=this,b,c,n;if(typeof h==="object")h=h.constructor;
for(b=0;b<j;b++){n=(""+e[b]).split(".");for(c=a[n[0]]===h?1:0;c<n.length;c++){h[n[c]]=h[n[c]]||{};h=h[n[c]]}}return h},log:function(e,j,h){if(this.Config.debug){h&&(e=h+": "+e);if(a.console!==g&&console.log)console[j&&console[j]?j:"log"](e)}return this}});m(i,i.prototype);i._init()})(window,KISSY);
KISSY.add("editor",function(a){function i(g,f){var m=i;if(!(this instanceof m))return new m(g,f);m._isReady||m._setup();return new m.Instance(g,f)}a.mix(i,{version:"1.0",lang:{},plugins:{},addPlugin:function(g,f){g=typeof g=="string"?[g]:g;var m=this.plugins,e,j,h;j=0;for(h=g.length;j<h;++j){e=g[j];m[e]||(m[e]=a.merge(f,{name:e}))}},_isReady:false,_setup:function(){this._loadModules();this._isReady=true},_attached:{},_loadModules:function(){var g=KISSY.Editor.Env.mods,f=this._attached,m,e;for(m in g)if(e=
g[m]){f[m]=e;e.fn&&e.fn(this)}}});a.Editor=i});KISSY.Editor={Env:{mods:{}},add:function(a,i,g){this.Env.mods[a]={name:a,fn:i,details:g||{}};return this}};
KISSY.Editor.add("config",function(a){a.config={base:"",language:"zh-cn",theme:"default",toolbar:["source","","fontName","fontSize","bold","italic","underline","strikeThrough","foreColor","backColor","","link","smiley","image","","insertOrderedList","insertUnorderedList","outdent","indent","justifyLeft","justifyCenter","justifyRight"],statusbar:["wordcount","resize"],pluginsConfig:{}}});
KISSY.Editor.add("lang~en",function(a){a.lang.en={source:{text:"Source",title:"Source"},undo:{text:"Undo",title:"Undo (Ctrl+Z)"},redo:{text:"Redo",title:"Redo (Ctrl+Y)"},fontName:{text:"Font Name",title:"Font Name",options:{Arial:"Arial","Times New Roman":"Times New Roman","Arial Black":"Arial Black","Arial Narrow":"Arial Narrow","Comic Sans MS":"Comic Sans MS","Courier New":"Courier New",Garamond:"Garamond",Georgia:"Georgia",Tahoma:"Tahoma","Trebuchet MS":"Trebuchet MS",Verdana:"Verdana"}},fontSize:{text:"Size",
title:"Font size",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"Bold",title:"Bold (Ctrl+B)"},italic:{text:"Italic",title:"Italick (Ctrl+I)"},underline:{text:"Underline",title:"Underline (Ctrl+U)"},strikeThrough:{text:"Strikeout",title:"Strikeout"},link:{text:"Link",title:"Insert/Edit link",href:"URL:",target:"Open link in new window",remove:"Remove link"},blockquote:{text:"Blockquote",title:"Insert blockquote"},smiley:{text:"Smiley",title:"Insert smiley"},image:{text:"Image",
title:"Insert image",tab_link:"Web Image",tab_local:"Local Image",tab_album:"Album Image",label_link:"Enter image web address:",label_local:"Browse your computer for the image file to upload:",label_album:"Select the image from your album:",uploading:"Uploading...",upload_error:"Exception occurs when uploading file.",upload_filter:"Only allow PNG, GIF, JPG image type.",ok:"Insert"},insertOrderedList:{text:"Numbered List",title:"Numbered List (Ctrl+7)"},insertUnorderedList:{text:"Bullet List",title:"Bullet List (Ctrl+8)"},
outdent:{text:"Decrease Indent",title:"Decrease Indent"},indent:{text:"Increase Indent",title:"Increase Indent"},justifyLeft:{text:"Left Justify",title:"Left Justify (Ctrl+L)"},justifyCenter:{text:"Center Justify",title:"Center Justify (Ctrl+E)"},justifyRight:{text:"Right Justify",title:"Right Justify (Ctrl+R)"},foreColor:{text:"Text Color",title:"Text Color"},backColor:{text:"Text Background Color",title:"Text Background Color"},maximize:{text:"Maximize",title:"Maximize"},removeformat:{text:"Remove Format",
title:"Remove Format"},wordcount:{tmpl:"Remain %remain% words (include html code)"},resize:{larger_text:"Larger",larger_title:"Enlarge the editor",smaller_text:"Smaller",smaller_title:"Shrink the editor"},common:{ok:"OK",cancel:"Cancel"}}});
KISSY.Editor.add("lang~zh-cn",function(a){a.lang["zh-cn"]={source:{text:"\u6e90\u7801",title:"\u6e90\u7801"},undo:{text:"\u64a4\u9500",title:"\u64a4\u9500"},redo:{text:"\u91cd\u505a",title:"\u91cd\u505a"},fontName:{text:"\u5b57\u4f53",title:"\u5b57\u4f53",options:{"\u5b8b\u4f53":"\u5b8b\u4f53","\u9ed1\u4f53":"\u9ed1\u4f53","\u96b6\u4e66":"\u96b6\u4e66","\u6977\u4f53":"\u6977\u4f53_GB2312","\u5fae\u8f6f\u96c5\u9ed1":"\u5fae\u8f6f\u96c5\u9ed1",Georgia:"Georgia","Times New Roman":"Times New Roman",Impact:"Impact","Courier New":"Courier New",Arial:"Arial",Verdana:"Verdana",Tahoma:"Tahoma"}},fontSize:{text:"\u5927\u5c0f",title:"\u5927\u5c0f",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"\u7c97\u4f53",
title:"\u7c97\u4f53"},italic:{text:"\u659c\u4f53",title:"\u659c\u4f53"},underline:{text:"\u4e0b\u5212\u7ebf",title:"\u4e0b\u5212\u7ebf"},strikeThrough:{text:"\u5220\u9664\u7ebf",title:"\u5220\u9664\u7ebf"},link:{text:"\u94fe\u63a5",title:"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5",href:"URL:",target:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",remove:"\u79fb\u9664\u94fe\u63a5"},blockquote:{text:"\u5f15\u7528",title:"\u5f15\u7528"},smiley:{text:"\u8868\u60c5",title:"\u63d2\u5165\u8868\u60c5"},image:{text:"\u56fe\u7247",title:"\u63d2\u5165\u56fe\u7247",tab_link:"\u7f51\u7edc\u56fe\u7247",tab_local:"\u672c\u5730\u4e0a\u4f20",tab_album:"\u6211\u7684\u76f8\u518c",label_link:"\u8bf7\u8f93\u5165\u56fe\u7247\u5730\u5740\uff1a",label_local:"\u8bf7\u9009\u62e9\u672c\u5730\u56fe\u7247\uff1a",label_album:"\u8bf7\u9009\u62e9\u76f8\u518c\u56fe\u7247\uff1a",uploading:"\u6b63\u5728\u4e0a\u4f20...",upload_error:"\u5bf9\u4e0d\u8d77\uff0c\u4e0a\u4f20\u6587\u4ef6\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",upload_filter:"\u4ec5\u652f\u6301 JPG, PNG \u548c GIF \u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",
ok:"\u63d2\u5165"},insertOrderedList:{text:"\u6709\u5e8f\u5217\u8868",title:"\u6709\u5e8f\u5217\u8868"},insertUnorderedList:{text:"\u65e0\u5e8f\u5217\u8868",title:"\u65e0\u5e8f\u5217\u8868"},outdent:{text:"\u51cf\u5c11\u7f29\u8fdb",title:"\u51cf\u5c11\u7f29\u8fdb"},indent:{text:"\u589e\u52a0\u7f29\u8fdb",title:"\u589e\u52a0\u7f29\u8fdb"},justifyLeft:{text:"\u5de6\u5bf9\u9f50",title:"\u5de6\u5bf9\u9f50"},justifyCenter:{text:"\u5c45\u4e2d\u5bf9\u9f50",title:"\u5c45\u4e2d\u5bf9\u9f50"},justifyRight:{text:"\u53f3\u5bf9\u9f50",title:"\u53f3\u5bf9\u9f50"},foreColor:{text:"\u6587\u672c\u989c\u8272",title:"\u6587\u672c\u989c\u8272"},backColor:{text:"\u80cc\u666f\u989c\u8272",title:"\u80cc\u666f\u989c\u8272"},maximize:{text:"\u5168\u5c4f\u7f16\u8f91",title:"\u5168\u5c4f\u7f16\u8f91"},removeformat:{text:"\u6e05\u9664\u683c\u5f0f",title:"\u6e05\u9664\u683c\u5f0f"},wordcount:{tmpl:"\u8fd8\u53ef\u4ee5\u8f93\u5165 %remain% \u5b57\uff08\u542b html \u4ee3\u7801\uff09"},resize:{larger_text:"\u589e\u5927",
larger_title:"\u589e\u5927\u7f16\u8f91\u533a\u57df",smaller_text:"\u7f29\u5c0f",smaller_title:"\u7f29\u5c0f\u7f16\u8f91\u533a\u57df"},common:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88"}}});KISSY.Editor.add("core~plugin",function(a){a.PLUGIN_TYPE={CUSTOM:0,TOOLBAR_SEPARATOR:1,TOOLBAR_BUTTON:2,TOOLBAR_MENU_BUTTON:4,TOOLBAR_SELECT:8,STATUSBAR_ITEM:16,FUNC:32}});
KISSY.Editor.add("core~dom",function(a){var i=YAHOO.env.ua;a.Dom={getText:function(g){return g?g.textContent||"":""},setItemUnselectable:function(g){var f,m,e,j,h;f=g.getElementsByTagName("*");m=-1;for(e=f.length;m<e;++m){h=m==-1?g:f[m];(j=h.nodeName)&&j!="INPUT"&&h.setAttribute("unselectable","on")}return g},BLOCK_ELEMENTS:{blockquote:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,p:1,address:1,center:1,pre:1,form:1,fieldset:1,caption:1,table:1,tbody:1,tr:1,th:1,td:1,ul:1,ol:1,dl:1,dt:1,dd:1,li:1}};
if(i.ie)a.Dom.getText=function(g){return g?g.innerText||"":""}});
KISSY.Editor.add("core~color",function(a){var i=parseInt,g=RegExp;a.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(f){this.re_RGB.test(f)||(f=this.toHex(f));if(this.re_hex.exec(f))f=
"rgb("+[i(g.$1,16),i(g.$2,16),i(g.$3,16)].join(", ")+")";return f},toHex:function(f){f=this.KEYWORDS[f]||f;if(this.re_RGB.exec(f)){f=(g.$1>>0).toString(16);var m=(g.$2>>0).toString(16),e=(g.$3>>0).toString(16);f=[f.length==1?"0"+f:f,m.length==1?"0"+m:m,e.length==1?"0"+e:e].join("")}if(f.length<6)f=f.replace(this.re_hex3,"$1$1");if(f!=="transparent"&&f.indexOf("#")<0)f="#"+f;return f.toLowerCase()},int2hex:function(f){f>>=0;return this.toHex("rgb("+(f&255)+","+(f>>8&255)+","+(f>>16&255)+")")}}});
KISSY.Editor.add("core~command",function(a){var i=YAHOO.env.ua,g={backColor:i.gecko?"hiliteColor":"backColor"};a.Command={exec:function(f,m,e,j){m=g[m]||m;this._preExec(f,m,j);f.execCommand(m,false,e)},_preExec:function(f,m,e){if(i.gecko){m=typeof e==="undefined"?"bold,italic,underline,strikeThrough".indexOf(m)===-1:e;f.execCommand("styleWithCSS",false,m)}}}});
KISSY.Editor.add("core~range",function(a){var i=YAHOO.env.ua.ie;a.Range={getSelectionRange:function(g){var f=g.document,m;if(g.getSelection){g=g.getSelection();if(g.getRangeAt)m=g.getRangeAt(0);else{m=f.createRange();m.setStart(g.anchorNode,g.anchorOffset);m.setEnd(g.focusNode,g.focusOffset)}}else if(f.selection)m=f.selection.createRange();return m},getCommonAncestor:function(g){return g.startContainer||g.parentElement&&g.parentElement()||g.commonParentElement&&g.commonParentElement()},getSelectedText:function(g){if("text"in
g)return g.text;return g.toString?g.toString():""},saveRange:function(g){i&&g.contentWin.focus();return g.getSelectionRange()}}});
KISSY.Editor.add("core~instance",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.lang,e=YAHOO.env.ua,j=e.ie;a.Instance=function(h,b){this.textarea=g.get(h);this.config=m.merge(a.config,b||{});this.sourceMode=false;this.toolbar=new a.Toolbar(this);this.statusbar=new a.Statusbar(this);this._init()};m.augmentObject(a.Instance.prototype,{_init:function(){this._renderUI();this._initPlugins();this._initAutoFocus()},_renderUI:function(){this._renderContainer();this._setupContentPanel()},_initPlugins:function(){var h,
b;b=a.plugins;var c=[];for(h in b)c[h]=m.merge(b[h]);this.plugins=c;this.toolbar.init();this.statusbar.init();for(h in c){b=c[h];if(!b.inited)if(b.type===a.PLUGIN_TYPE.FUNC){b.editor=this;b.init&&b.init();b.inited=true}}},_renderContainer:function(){var h=this.textarea,b=g.getRegion(h),c=b.right-b.left-2+"px",n=b.bottom-b.top-2+"px";b=document.createElement("div");b.className="ks-editor";b.style.width=c;b.innerHTML='<div class="ks-editor-toolbar"></div><div class="ks-editor-content"><iframe frameborder="0" allowtransparency="1"></iframe></div><div class="ks-editor-statusbar"></div>';
c=b.childNodes[1];c.style.width="100%";c.style.height=n;c=c.childNodes[0];c.style.width="100%";c.style.height="100%";c.setAttribute("frameBorder",0);h.style.display="none";g.insertBefore(b,h);this.container=b;this.toolbar.domEl=b.childNodes[0];this.contentWin=c.contentWindow;this.contentDoc=c.contentWindow.document;this.statusbar.domEl=b.childNodes[2]},_setupContentPanel:function(){var h=this.contentDoc,b=this.config;b=b.base+"themes/"+b.theme+"/"+("content"+(b.debug?"":"-min")+".css");var c=this;
h.open();h.write('<!doctype html><html><head><title>Rich Text Area</title><meta http-equiv="content-type" content="text/html; charset=gb18030" /><link type="text/css" href="{CONTENT_CSS}" rel="stylesheet" /></head><body spellcheck="false" class="ks-editor-post">{CONTENT}</body></html>'.replace("{CONTENT_CSS}",b).replace("{CONTENT}",this.textarea.value));h.close();if(j)h.body.contentEditable="true";else h.designMode="on";j&&f.on(h,"click",function(){h.activeElement.parentNode.nodeType===9&&c._focusToEnd()})},
_initAutoFocus:function(){this.config.autoFocus&&this._focusToEnd()},_focusToEnd:function(){this.contentWin.focus();var h=this.contentDoc.body.lastChild,b=a.Range.getSelectionRange(this.contentWin);if(e.ie){try{b.moveToElementText(h)}catch(c){}b.collapse(false);b.select()}else{try{b.setEnd(h,h.childNodes.length)}catch(n){}b.collapse(false)}},focus:function(){this._focusToEnd()},execCommand:function(h,b,c){this.contentWin.focus();a.Command.exec(this.contentDoc,h,b,c)},getData:function(){if(this.sourceMode)return this.textarea.value;
return this.getContentDocData()},getContentDocData:function(){var h="",b=a.plugins.save;h=this.contentDoc.body.innerHTML;if(h=="<br>")h="";if(b&&b.filterData)h=b.filterData(h);return h},getSelectionRange:function(){return a.Range.getSelectionRange(this.contentWin)}})});
KISSY.Editor.add("core~toolbar",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.lang,e=YAHOO.env.ua.ie,j=e===6,h=a.PLUGIN_TYPE,b=document.createElement("div");a.Toolbar=function(c){this.editor=c;this.config=c.config;this.lang=a.lang[this.config.language];this.items=[];this.stateItems=[]};m.augmentObject(a.Toolbar.prototype,{init:function(){for(var c=this.config.toolbar,n=this.editor.plugins,k,o=0,q=c.length;o<q;++o)if(k=c[o]){if(k in n){k=n[k];this._addItem(k);this.items.push(k);"fontName,fontSize,bold,italic,underline,strikeThroughinsertOrderedList,insertUnorderedListjustifyLeft,justifyCenter,justifyRight".indexOf(k.name)!==
-1&&this.stateItems.push(k)}}else this._addSeparator();this._initUpdateState()},_addItem:function(c){var n,k=c.type;n=this.lang;if(!c.lang)c.lang=m.merge(n.common,this.lang[c.name]||{});n='<div class="ks-editor-toolbar-button ks-inline-block" title="{TITLE}"><div class="ks-editor-toolbar-button-outer-box"><div class="ks-editor-toolbar-button-inner-box"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div></div></div>'.replace("{TITLE}",c.lang.title||"").replace("{NAME}",
c.name).replace("{TEXT}",c.lang.text||"");if(j)n=n.replace("outer-box","outer-box ks-inline-block").replace("inner-box","inner-box ks-inline-block");b.innerHTML=n;c.domEl=n=b.firstChild;if(k==h.TOOLBAR_MENU_BUTTON||k==h.TOOLBAR_SELECT){this._renderMenuButton(c);k==h.TOOLBAR_SELECT&&this._renderSelect(c)}this._bindItemUI(c);this._addToToolbar(n);c.editor=this.editor;c.init&&c.init();c.inited=true},_renderMenuButton:function(c){var n=c.domEl,k=n.getElementsByTagName("span")[0].parentNode;g.addClass(n,
"ks-editor-toolbar-menu-button");k.innerHTML='<div class="ks-editor-toolbar-menu-button-caption ks-inline-block"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div><div class="ks-editor-toolbar-menu-button-dropdown ks-inline-block"></div>'.replace("{NAME}",c.name).replace("{TEXT}",c.lang.text||"")},_renderSelect:function(c){g.addClass(c.domEl,"ks-editor-toolbar-select")},_bindItemUI:function(c){var n=c.domEl;c.exec&&f.on(n,"click",function(){c.exec()});f.on(n,"mousedown",
function(){g.addClass(n,"ks-editor-toolbar-button-active")});f.on(n,"mouseup",function(){g.removeClass(n,"ks-editor-toolbar-button-active")});f.on(n,"mouseout",function(k){k=f.getRelatedTarget(k);var o;try{if(n.contains)o=n.contains(k);else if(n.compareDocumentPosition)o=n.compareDocumentPosition(k)&8}catch(q){o=false}o||g.removeClass(n,"ks-editor-toolbar-button-active")});if(j){f.on(n,"mouseenter",function(){g.addClass(n,"ks-editor-toolbar-button-hover")});f.on(n,"mouseleave",function(){g.removeClass(n,
"ks-editor-toolbar-button-hover")})}},_addSeparator:function(){b.innerHTML='<div class="ks-editor-stripbar-sep ks-inline-block"></div>';this._addToToolbar(b.firstChild)},_addToToolbar:function(c){if(e)c=a.Dom.setItemUnselectable(c);this.domEl.appendChild(c)},_initUpdateState:function(){var c=this.editor.contentDoc,n=this;f.on(c,"click",function(){n.updateState()});f.on(c,"keyup",function(k){k=k.keyCode;if(k>=33&&k<=40||k===8||k===13||k===46)n.updateState()})},updateState:function(c){var n=this.stateItems,
k;c=c?c.join("|"):"";for(var o=0,q=n.length;o<q;o++){k=n[o];c&&c.indexOf(k.name)===-1||(k.updateState?k.updateState():this.updateItemState(k))}},updateItemState:function(c){var n=this.editor.contentDoc;try{if(n.queryCommandEnabled(c.name))n.queryCommandState(c.name)?g.addClass(c.domEl,"ks-editor-toolbar-button-selected"):g.removeClass(c.domEl,"ks-editor-toolbar-button-selected")}catch(k){}}})});
KISSY.Editor.add("core~statusbar",function(a){var i=YAHOO.lang,g=YAHOO.env.ua.ie,f=document.createElement("div");a.Statusbar=function(m){this.editor=m;this.config=m.config;this.lang=a.lang[this.config.language]};i.augmentObject(a.Statusbar.prototype,{init:function(){for(var m=this.config.statusbar,e=this.editor.plugins,j,h=0,b=m.length;h<b;++h)if(j=m[h])j in e&&this._addItem(e[j]);else this._addSep()},_addItem:function(m){var e;e=this.lang;if(!m.lang)m.lang=i.merge(e.common,this.lang[m.name]||{});
f.innerHTML='<div class="ks-editor-statusbar-item ks-editor-{NAME} ks-inline-block"></div>'.replace("{NAME}",m.name);m.domEl=e=f.firstChild;this._addToToolbar(e);m.editor=this.editor;m.init&&m.init();m.inited=true},_addSep:function(){f.innerHTML='<div class="ks-editor-stripbar-sep kissy-inline-block"></div>';this._addToToolbar(f.firstChild)},_addToToolbar:function(m){if(g)m=a.Dom.setItemUnselectable(m);this.domEl.appendChild(m)}})});
KISSY.Editor.add("core~menu",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.env.ua,e;a.Menu={generateDropMenu:function(j,h,b){var c=document.createElement("div"),n=this;c.innerHTML='<div class="ks-editor-drop-menu-shadow"></div><div class="ks-editor-drop-menu-content"></div>';c.className="ks-editor-drop-menu";c.style.display="none";document.body.appendChild(c);f.on(h,"click",function(k){f.stopPropagation(k);j.activeDropMenu&&n._hide(j);if(j.activeDropMenu!=c){n._setDropMenuPosition(h,c,b);
j.activeDropMenu=c;j.activeDropButton=h;n._show(j)}else{j.activeDropMenu=null;j.activeDropButton=null}});f.on([document,j.contentDoc],"click",function(){if(j.activeDropMenu){n.hideActiveDropMenu(j);this==j.contentDoc&&j.contentWin.focus()}});this._initResizeEvent(h,c,b);return c.childNodes[1]},_setDropMenuPosition:function(j,h,b){var c=g.getRegion(j);j=c.left;c=c.bottom;if(b){j+=b[0];c+=b[1]}h.style.left=j+"px";h.style.top=c+"px"},_isVisible:function(j){if(!j)return false;return j.style.display!=
"none"},hideActiveDropMenu:function(j){this._hide(j);j.activeDropMenu=null;j.activeDropButton=null},_hide:function(j){var h=j.activeDropMenu;j=j.activeDropButton;if(h){e&&(e.style.display="none");h.style.display="none"}j&&g.removeClass(j,"ks-editor-toolbar-button-selected")},_show:function(j){var h=j.activeDropMenu;j=j.activeDropButton;if(h){h.style.display="";if(m.ie===6){this._updateShimRegion(h);e.style.display=""}}j&&g.addClass(j,"ks-editor-toolbar-button-selected")},_updateShimRegion:function(j){if(j)if(m.ie===
6){e||this._initShim();this._setShimRegion(j)}},_initResizeEvent:function(j,h,b){var c=this,n;f.on(window,"resize",function(){n&&clearTimeout(n);n=setTimeout(function(){c._isVisible(h)&&c._setDropMenuPosition(j,h,b)},50)})},_initShim:function(){e=document.createElement("iframe");e.src="about:blank";e.className="ks-editor-drop-menu-shim";e.style.position="absolute";e.style.display="none";e.style.border="none";document.body.appendChild(e)},_setShimRegion:function(j){if(e&&this._isVisible(j)){j=g.getRegion(j);
if(j.width>0){e.style.left=j.left+"px";e.style.top=j.top+"px";e.style.width=j.width-1+"px";e.style.height=j.height-1+"px"}}}}});KISSY.Editor.add("smilies~config~default",function(a){a.Smilies=a.Smilies||{};a.Smilies["default"]={name:"default",mode:"icons",cols:5,fileNames:["smile","confused","cool","cry","eek","angry","wink","sweat","lol","stun","razz","shy","rolleyes","sad","happy","yes","no","heart","idea","rose"],fileExt:"gif"}});
KISSY.Editor.add("smilies~config~wangwang",function(a){a.Smilies=a.Smilies||{};a.Smilies.wangwang={name:"wangwang",mode:"sprite",base:"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/",spriteStyle:"background: url(http://a.tbcdn.cn/sys/wangwang/smiley/sprite.png) no-repeat -1px 0; width: 288px; height: 235px",unitStyle:"width: 24px; height: 24px",filePattern:{start:0,end:98,step:1},fileExt:"gif"}});
KISSY.Editor.add("plugins~base",function(a){var i=a.PLUGIN_TYPE;a.addPlugin("bold,italic,underline,strikeThrough,insertOrderedList,insertUnorderedList".split(","),{type:i.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});
KISSY.Editor.add("plugins~color",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.env.ua.ie,e=["000","444","666","999","CCC","EEE","F3F3F3","FFF"],j=["F00","F90","FF0","0F0","0FF","00F","90F","F0F"],h=["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D2E9","EAD1DC","EA9999","F9CB9C","FFE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD","E06666","F6B26B","FFD966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BAD","CC0000","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A64D79","990000",
"B45F06","BF9000","38761D","134F5C","0B5394","351C75","741B47","660000","783F04","7F6000","274E13","0C343D","073763","20124D","4C1130"];a.addPlugin(["foreColor","backColor"],{type:a.PLUGIN_TYPE.TOOLBAR_MENU_BUTTON,color:"",_indicator:null,swatches:null,dropMenu:null,range:null,init:function(){var b=this.domEl,c=b.getElementsByTagName("span")[0].parentNode;this.color=this._getDefaultColor();g.addClass(b,"ks-editor-toolbar-color-button");c.innerHTML='<div class="ks-editor-toolbar-color-button-indicator" style="border-bottom-color:'+
this.color+'">'+c.innerHTML+"</div>";this._indicator=c.firstChild;this._renderUI();this._bindUI();this.swatches=g.getElementsByClassName("ks-editor-palette-colorswatch","div",this.dropMenu)},_renderUI:function(){this.dropMenu=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._generatePalettes();m&&a.Dom.setItemUnselectable(this.dropMenu)},_bindUI:function(){this._bindPickEvent();f.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();m&&this.editor.contentDoc.selection.empty();
this._updateSelectedColor(this.color)},this,true)},_generatePalettes:function(){var b="";b+=this._getPaletteTable(e);b+=this._getPaletteTable(j);b+=this._getPaletteTable(h);this.dropMenu.innerHTML=b},_getPaletteTable:function(b){var c,n=b.length,k,o="<tr>";c=0;for(n=b.length;c<n;++c){if(c!=0&&c%8==0)o+="</tr><tr>";k=a.Color.toRGB("#"+b[c]).toUpperCase();o+='<td class="ks-editor-palette-cell"><div class="ks-editor-palette-colorswatch" title="{COLOR}" style="background-color:{COLOR}"></div></td>'.replace(/{COLOR}/g,
k)}o+="</tr>";return'<div class="ks-editor-palette-table"><table><tbody>{TR}</tbody></table></div>'.replace("{TR}",o)},_bindPickEvent:function(){var b=this;f.on(this.dropMenu,"click",function(c){var n=f.getTarget(c).getAttribute("title");n&&n.indexOf("RGB")===0&&b._doAction(n);f.stopPropagation(c);a.Menu.hideActiveDropMenu(b.editor)})},_doAction:function(b){if(b){this.setColor(a.Color.toHex(b));b=this.range;m&&b.select&&b.select();this.editor.execCommand(this.name,this.color)}},setColor:function(b){this.color=
b;this._updateIndicatorColor(b);this._updateSelectedColor(b)},_updateIndicatorColor:function(b){this._indicator.style.borderBottomColor=b},_updateSelectedColor:function(b){var c,n,k,o=this.swatches;c=0;for(n=o.length;c<n;++c){k=o[c];a.Color.toHex(k.style.backgroundColor)==b?g.addClass(k.parentNode,"ks-editor-palette-cell-selected"):g.removeClass(k.parentNode,"ks-editor-palette-cell-selected")}},_getDefaultColor:function(){return this.name=="foreColor"?"#000000":"#ffffff"}})});
KISSY.Editor.add("plugins~font",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.env.ua,e={"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7};a.addPlugin(["fontName","fontSize"],{type:a.PLUGIN_TYPE.TOOLBAR_SELECT,selectedValue:"",selectHead:null,selectList:null,options:[],items:null,selectedItem:null,range:null,init:function(){this.options=this.lang.options;this.selectHead=this.domEl.getElementsByTagName("span")[0];this._renderUI();this._bindUI()},_renderUI:function(){this.selectList=
a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._renderSelectList();this.items=this.selectList.getElementsByTagName("li")},_bindUI:function(){this._bindPickEvent();f.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();m.ie&&this.editor.contentDoc.selection.empty();if(this.selectedValue)this._updateSelectedOption(this.selectedValue);else if(this.selectedItem){g.removeClass(this.selectedItem,"ks-editor-option-selected");this.selectedItem=null}},this,true)},_renderSelectList:function(){var j=
"",h=this.options,b,c;for(b in h){c=h[b];j+='<li class="ks-editor-option" data-value="{VALUE}"><span class="ks-editor-option-checkbox"></span><span style="{STYLE}">{KEY}</span></li>'.replace("{VALUE}",c).replace("{STYLE}",this._getOptionStyle(b,c)).replace("{KEY}",b)}this.selectList.innerHTML='<ul class="ks-editor-select-list">{LI}</ul>'.replace("{LI}",j);g.addClass(this.selectList,"ks-editor-drop-menu-"+this.name)},_bindPickEvent:function(){var j=this;f.on(this.selectList,"click",function(h){var b=
f.getTarget(h);if(b.nodeName!="LI")b=g.getAncestorByTagName(b,"li");if(b){j._doAction(b.getAttribute("data-value"));f.stopPropagation(h);a.Menu.hideActiveDropMenu(j.editor)}});if(m.ie===6){f.on(this.items,"mouseenter",function(){g.addClass(this,"ks-editor-option-hover")});f.on(this.items,"mouseleave",function(){g.removeClass(this,"ks-editor-option-hover")})}},_doAction:function(j){if(j){this.selectedValue=j;this._setOption(j);j=this.range;m.ie&&j.select&&j.select();this.editor.execCommand(this.name,
this.selectedValue)}},_setOption:function(j){this._updateHeadText(this._getOptionKey(j));this._updateSelectedOption(j)},_getOptionStyle:function(j,h){return this.name=="fontName"?"font-family:"+h:"font-size:"+j+"px"},_getOptionKey:function(j){var h=this.options,b;for(b in h)if(h[b]==j)return b;return null},_updateHeadText:function(j){this.selectHead.innerHTML=j},_updateSelectedOption:function(j){var h=this.items,b,c=h.length,n;for(b=0;b<c;++b){n=h[b];if(n.getAttribute("data-value")==j){g.addClass(n,
"ks-editor-option-selected");this.selectedItem=n}else g.removeClass(n,"ks-editor-option-selected")}},updateState:function(){var j=this.editor.contentDoc,h=this.options,b=this.name,c,n;try{if(j.queryCommandEnabled(b)){n=j.queryCommandValue(b);if(m.webkit&&b=="fontSize")n=this._getWebkitFontSize(n);n&&(c=this._getOptionKey(n));if(c in h){if(n!=this.selectedValue){this.selectedValue=n;this._updateHeadText(c)}}else{this.selectedValue="";this._updateHeadText(this.lang.text)}}}catch(k){}},_getWebkitFontSize:function(j){if(j in
e)return e[j];return null}})});
KISSY.Editor.add("plugins~image",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=i.Connect,e=YAHOO.lang,j=YAHOO.env.ua,h=j.ie,b="ks-editor-image-tab-selected",c={local:'<li rel="local" class="'+b+'">{tab_local}</li>',link:'<li rel="link">{tab_link}</li>',album:'<li rel="album">{tab_album}</li>'},n={tabs:["link"],upload:{actionUrl:"",filter:"png|gif|jpg|jpeg",filterMsg:"",enableXdr:false,connectionSwf:"http://a.tbcdn.cn/yui/2.8.0r4/build/connection/connection.swf",formatResponse:function(k){var o=[];
for(var q in k)o.push(k[q]);return o},extraCode:""}};a.addPlugin("image",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,form:null,range:null,currentTab:null,currentPanel:null,uploadingPanel:null,actionsBar:null,init:function(){var k=this.editor.config.pluginsConfig[this.name]||{};n.upload.filterMsg=this.lang.upload_filter;this.config=e.merge(n,k);this.config.upload=e.merge(n.upload,k.upload||{});this._renderUI();this._bindUI();this.actionsBar=g.getElementsByClassName("ks-editor-dialog-actions",
"div",this.dialog)[0];this.uploadingPanel=g.getElementsByClassName("ks-editor-image-uploading","div",this.dialog)[0];this.config.upload.enableXdr&&this._initXdrUpload()},_renderUI:function(){var k=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),o=this.lang;o.local_extraCode=this.config.upload.extraCode;k.className+=" ks-editor-image";k.innerHTML='<form action="javascript: void(0)"><ul class="ks-editor-image-tabs ks-clearfix"></ul><div class="ks-editor-image-tab-content" rel="local" style="display: none"><label>{label_local}</label><input type="file" size="40" name="imgFile" unselectable="on" />{local_extraCode}</div><div class="ks-editor-image-tab-content" rel="link"><label>{label_link}</label><input name="imgUrl" size="50" /></div><div class="ks-editor-image-tab-content" rel="album" style="display: none"><label>{label_album}</label><p style="width: 300px">\u5c1a\u672a\u5b9e\u73b0...</p></div><div class="ks-editor-image-uploading" style="display: none"><p style="width: 300px">{uploading}</p></div><div class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span></div></form>'.replace(/\{([^}]+)\}/g,
function(q,r){return r in o?o[r]:r});this.dialog=k;this.form=k.getElementsByTagName("form")[0];h&&a.Dom.setItemUnselectable(k);this._renderTabs()},_renderTabs:function(){function k(y){for(var B=0,G=y.getAttribute("rel"),E=0;E<x;E++){v[E]&&g.removeClass(v[E],b);d[E].style.display="none";if(d[E].getAttribute("rel")==G)B=E}j.ie===6&&a.Menu._updateShimRegion(q.dialog);g.addClass(y,b);d[B].style.display="";q.currentTab=y.getAttribute("rel");q.currentPanel=d[B]}for(var o=this.lang,q=this,r=g.getElementsByClassName("ks-editor-image-tabs",
"ul",this.dialog)[0],d=g.getElementsByClassName("ks-editor-image-tab-content","div",this.dialog),l=this.config.tabs,p="",s=0,t=l.length;s<t;s++)p+=c[l[s]];r.innerHTML=p.replace(/\{([^}]+)\}/g,function(y,B){return B in o?o[B]:B});var v=r.childNodes,x=d.length;v.length===1&&g.addClass(this.dialog,"ks-editor-image-no-tab");k(v[0]);f.on(v,"click",function(){k(this)})},_bindUI:function(){var k=this;f.on(this.domEl,"click",function(){if(k.dialog.style.visibility===h?"hidden":"visible")k._syncUI()});f.on(this.dialog,
"click",function(o){var q=f.getTarget(o),r=k.currentTab;switch(q.className){case "ks-editor-btn-ok":if(r==="local"){f.stopPropagation(o);k._insertLocalImage()}else k._insertWebImage();break;case "ks-editor-btn-cancel":break;default:f.stopPropagation(o)}})},_initXdrUpload:function(){for(var k=this.config.tabs,o=0,q=k.length;o<q;o++)if(k[o]==="local"){m.transport(this.config.upload.connectionSwf);break}},_insertLocalImage:function(){var k=this.form,o=this.config.upload,q=k.imgFile.value,r=o.actionUrl,
d=this;if(q&&r){if(o.filter!=="*"){q=q.substring(q.lastIndexOf(".")+1).toLowerCase();if(o.filter.indexOf(q)==-1){alert(o.filterMsg);d.form.reset();return}}this.uploadingPanel.style.display="";this.currentPanel.style.display="none";this.actionsBar.style.display="none";j.ie===6&&a.Menu._updateShimRegion(this.dialog);m.setForm(k,true);m.asyncRequest("post",r,{upload:function(l){try{var p=o.formatResponse(e.JSON.parse(l.responseText));if(p[0]=="0"){d._insertImage(p[1]);d._hideDialog()}else d._onUploadError(p[1])}catch(s){d._onUploadError(e.dump(s)+
"\no = "+e.dump(l)+"\n[from upload catch code]")}},xdr:o.enableXdr})}else d._hideDialog()},_onUploadError:function(k){alert(this.lang.upload_error+"\n\n"+k);this._hideDialog()},_insertWebImage:function(){var k=this.form.imgUrl.value;k&&this._insertImage(k)},_hideDialog:function(){var k=this.editor.activeDropMenu;k&&g.isAncestor(k,this.dialog)&&a.Menu.hideActiveDropMenu(this.editor);this.editor.contentWin.focus()},_syncUI:function(){this.range=a.Range.saveRange(this.editor);this.form.reset();this.uploadingPanel.style.display=
"none";this.currentPanel.style.display="";this.actionsBar.style.display=""},_insertImage:function(k,o){k=e.trim(k);if(k.length!==0){var q=this.editor,r=this.range;if(window.getSelection){var d=q.contentDoc.createElement("img");d.src=k;o&&d.setAttribute("alt",o);r.deleteContents();r.insertNode(d);if(j.webkit){o=q.contentWin.getSelection();o.addRange(r);o.collapseToEnd()}else r.setStartAfter(d);q.contentWin.focus()}else if(document.selection){q.contentWin.focus();if("text"in r){r.select();q='<img src="'+
k+'"';o&&(q+=' "alt="'+o+'"');q+=">";r.pasteHTML(q)}else r.execCommand("insertImage",false,k)}}}})});KISSY.Editor.add("plugins~indent",function(a){a.addPlugin(["indent","outdent"],{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});
KISSY.Editor.add("plugins~justify",function(a){var i=["justifyLeft","justifyCenter","justifyRight"];a.addPlugin(i,{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState(i)}})});
KISSY.Editor.add("plugins~keystroke",function(a){var i=YAHOO.util.Event,g=YAHOO.env.ua;a.addPlugin("keystroke",{type:a.PLUGIN_TYPE.FUNC,init:function(){var f=this.editor;g.ie&&g.ie<8&&i.on(f.contentDoc,"keydown",function(e){e.keyCode==9&&this.selection.empty()});var m=f.textarea.form;m&&(new YAHOO.util.KeyListener(f.contentDoc,{ctrl:true,keys:13},{fn:function(){if(!f.sourceMode)f.textarea.value=f.getData();m.submit()}})).enable()}})});
KISSY.Editor.add("plugins~link",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.lang,e=YAHOO.env.ua,j=e.ie;i=a.PLUGIN_TYPE;var h=a.Range,b=(new Date).getTime(),c=/^\w+:\/\/.*|#.*$/,n=['<form onsubmit="return false"><ul><li class="ks-editor-link-href"><label>{href}</label><input name="href" style="width: 220px" value="http://" type="text" /></li><li class="ks-editor-link-target"><input name="target" id="target_"',b,' type="checkbox" /> <label for="target_"',b,'>{target}</label></li><li class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span><span class="ks-editor-link-remove">{remove}</span></li></ul></form>'].join("");
a.addPlugin("link",{type:i.TOOLBAR_BUTTON,dialog:null,form:null,range:null,init:function(){this._renderUI();this._bindUI()},_renderUI:function(){var k=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),o=this.lang;k.className+=" ks-editor-link";k.innerHTML=n.replace(/\{([^}]+)\}/g,function(q,r){return o[r]?o[r]:r});this.dialog=k;this.form=k.getElementsByTagName("form")[0];e.webkit&&(this.form.target.parentNode.style.display="none");j&&a.Dom.setItemUnselectable(k)},_bindUI:function(){var k=this.form,
o=this;f.on(this.domEl,"click",function(){if(o.dialog.style.visibility===j?"hidden":"visible")o._syncUI()});f.on(this.dialog,"click",function(q){switch(f.getTarget(q).className){case "ks-editor-btn-ok":o._createLink(k.href.value,k.target.checked);break;case "ks-editor-btn-cancel":break;case "ks-editor-link-remove":o._unLink();break;default:f.stopPropagation(q)}})},_syncUI:function(){this.range=a.Range.saveRange(this.editor);var k=this.form,o;o=h.getCommonAncestor(this.range);if(o=o.nodeName=="A"?
o:g.getAncestorByTagName(o,"A")){k.href.value=o.href;k.target.checked=o.target==="_blank";g.removeClass(k,"ks-editor-link-newlink-mode")}else{k.href.value="http://";k.target.checked=false;g.addClass(k,"ks-editor-link-newlink-mode")}setTimeout(function(){k.href.select()},50)},_createLink:function(k,o){k=this._getValidHref(k);if(k.length===0)this._unLink();else{var q=this.range,r=document.createElement("div"),d;d=h.getCommonAncestor(q);if(d=d.nodeName=="A"?d:g.getAncestorByTagName(d,"A")){d.href=k;
o?d.setAttribute("target","_blank"):d.removeAttribute("target")}else{d=document.createElement("a");d.href=k;o&&d.setAttribute("target","_blank");if(j){q.select&&q.select();if("text"in q){d.innerHTML=q.htmlText||k;r.innerHTML="";r.appendChild(d);q.pasteHTML(r.innerHTML)}else this.editor.execCommand("createLink",k)}else if(e.webkit)this.editor.execCommand("createLink",k);else{if(q.collapsed)d.innerHTML=k;else for(k=q.cloneContents();k.firstChild;)d.appendChild(k.firstChild);q.deleteContents();q.insertNode(d);
q.selectNode(d)}}}},_getValidHref:function(k){if((k=m.trim(k))&&!c.test(k))k="http://"+k;return k},_unLink:function(){var k=this.editor,o=this.range,q=h.getSelectedText(o),r=h.getCommonAncestor(o);if(!q&&r.nodeType==3){k=r.parentNode;k.nodeName=="A"&&k.parentNode.replaceChild(r,k)}else{o.select&&o.select();k.execCommand("unLink",null)}}})});
KISSY.Editor.add("plugins~resize",function(a){var i=YAHOO.util.Event;a.addPlugin("resize",{type:a.PLUGIN_TYPE.STATUSBAR_ITEM,contentEl:null,currentHeight:0,init:function(){this.contentEl=this.editor.container.childNodes[1];this.currentHeight=parseInt(this.contentEl.style.height);this.renderUI();this.bindUI()},renderUI:function(){var g=this.lang;this.domEl.innerHTML='<span class="ks-editor-resize-larger" title="{larger_title}">{larger_text}</span><span class="ks-editor-resize-smaller" title="{smaller_title}">{smaller_text}</span>'.replace(/\{([^}]+)\}/g,
function(f,m){return g[m]?g[m]:m})},bindUI:function(){var g=this.domEl.getElementsByTagName("span"),f=g[1];i.on(g[0],"click",function(){this.currentHeight+=100;this._doResize()},this,true);i.on(f,"click",function(){if(this.currentHeight<100)this.currentHeight=0;else this.currentHeight-=100;this._doResize()},this,true)},_doResize:function(){this.contentEl.style.height=this.currentHeight+"px";this.editor.textarea.style.height=this.currentHeight+"px"}})});
KISSY.Editor.add("plugins~save",function(a){var i=YAHOO.util.Event,g={b:{tag:"strong"},i:{tag:"em"},u:{tag:"span",style:"text-decoration:underline"},strike:{tag:"span",style:"text-decoration:line-through"}};a.addPlugin("save",{type:a.PLUGIN_TYPE.FUNC,init:function(){var f=this.editor,m=f.textarea,e=m.form;e&&i.on(e,"submit",function(){if(!f.sourceMode)m.value=f.getData()})},filterData:function(f){f=f.replace(/<(\/?)([^>\s]+)([^>]*)>/g,function(m,e,j,h){j=j.toLowerCase();m=g[j];j=j;if(m&&!h){j=m.tag;
if(!e&&m.style)j+=' style="'+m.style+'"'}return"<"+e+j+h+">"});if(f.indexOf("mso")>0)f=this.filterWord(f);return f},filterWord:function(f){f=f.replace(/<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");f=f.replace(/<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");f=f.replace(/<H(\d)([^>]*)>/gi,"<h$1>");f=f.replace(/<(H\d)><FONT[^>]*>([\s\S]*?)<\/FONT><\/\1>/gi,"<$1>$2</$1>");f=f.replace(/<(H\d)><EM>([\s\S]*?)<\/EM><\/\1>/gi,"<$1>$2</$1>");f=f.replace(/<meta[^>]*>/ig,"");f=f.replace(/<link rel="\S+" href="file:[^>]*">/ig,
"");f=f.replace(/<!--\[if gte mso [0-9]{1,2}\]>[\s\S]*?<!\[endif\]--\>/ig,"");f=f.replace(/<style>[\s\S]*?mso[\s\S]*?<\/style>/ig,"");f=f.replace(/ lang=".+?"/ig,"");f=f.replace(/<o:p><\/o:p>/ig,"");return f=f.replace(/ class="Mso.+?"/ig,"")}})});
KISSY.Editor.add("plugins~smiley",function(a){var i=YAHOO.util.Event,g=YAHOO.lang,f=YAHOO.env.ua,m={tabs:["default"]};a.addPlugin("smiley",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,range:null,init:function(){this.config=g.merge(m,this.editor.config.pluginsConfig[this.name]||{});this._renderUI();this._bindUI()},_renderUI:function(){var e=a.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);e.className+=" ks-editor-smiley-dialog";this.dialog=e;this._renderDialog();f.ie&&a.Dom.setItemUnselectable(e)},
_renderDialog:function(){var e=a.Smilies[this.config.tabs[0]],j=e.mode;if(j==="icons")this._renderIcons(e);else j==="sprite"&&this._renderSprite(e)},_renderIcons:function(e){var j=this.editor.config.base+"smilies/"+e.name+"/",h=e.fileNames,b="."+e.fileExt;e=e.cols;var c=[],n,k=h.length,o;c.push('<div class="ks-editor-smiley-icons">');for(n=0;n<k;n++){o=h[n];c.push('<img src="'+j+o+b+'" alt="'+o+'" title="'+o+'" />');n%e===e-1&&c.push("<br />")}c.push("</div");this.dialog.innerHTML=c.join("")},_renderSprite:function(e){var j=
e.base,h=e.filePattern,b="."+e.fileExt,c=h.end+1;h=h.step;var n,k=[];k.push('<div class="ks-editor-smiley-sprite ks-clearfix" style="'+e.spriteStyle+'">');for(n=0;n<c;n+=h)k.push('<span data-icon="'+j+n+b+'" style="'+e.unitStyle+'"></span>');k.push("</div");this.dialog.innerHTML=k.join("")},_bindUI:function(){var e=this;i.on(this.domEl,"click",function(){e.range=a.Range.saveRange(e.editor)});i.on(this.dialog,"click",function(j){var h=i.getTarget(j);switch(h.nodeName){case "IMG":e._insertImage(h.src,
h.getAttribute("alt"));break;case "SPAN":e._insertImage(h.getAttribute("data-icon"),"");break;default:i.stopPropagation(j)}})},_insertImage:function(e,j){e=g.trim(e);if(e.length!==0){var h=this.editor,b=this.range;if(window.getSelection){var c=h.contentDoc.createElement("img");c.src=e;c.setAttribute("alt",j);b.deleteContents();b.insertNode(c);if(f.webkit){e=h.contentWin.getSelection();e.addRange(b);e.collapseToEnd()}else b.setStartAfter(c);h.contentWin.focus()}else if(document.selection)"text"in b?
b.pasteHTML('<img src="'+e+'" alt="'+j+'" />'):h.execCommand("insertImage",e)}}})});
KISSY.Editor.add("plugins~source",function(a){var i=YAHOO.util.Dom,g=YAHOO.env.ua;a.addPlugin("source",{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,init:function(){var f=this.editor;this.iframe=f.contentWin.frameElement;this.textarea=f.textarea;this.iframe.parentNode.appendChild(f.textarea);i.addClass(this.domEl,"ks-editor-toolbar-source-button")},exec:function(){var f=this.editor,m=f.sourceMode;if(m)f.contentDoc.body.innerHTML=this.textarea.value;else this.textarea.value=f.getContentDocData();g.ie&&g.ie<8&&
f.contentDoc.selection.empty();this.textarea.style.display=m?"none":"";this.iframe.style.display=m?"":"none";f.sourceMode=!m;this._updateButtonState()},_updateButtonState:function(){var f=this.editor;if(f.sourceMode){i.addClass(f.container,"ks-editor-src-mode");i.addClass(this.domEl,"ks-editor-toolbar-button-selected")}else{i.removeClass(f.container,"ks-editor-src-mode");i.removeClass(this.domEl,"ks-editor-toolbar-button-selected")}}})});
KISSY.Editor.add("plugins~undo",function(a){a.addPlugin(["undo","redo"],{type:a.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name)}})});
KISSY.Editor.add("plugins~wordcount",function(a){var i=YAHOO.util,g=i.Dom,f=i.Event,m=YAHOO.lang,e={total:5E4,threshold:100};a.addPlugin("wordcount",{type:a.PLUGIN_TYPE.STATUSBAR_ITEM,total:Infinity,remain:Infinity,threshold:0,remainEl:null,init:function(){var j=m.merge(e,this.editor.config.pluginsConfig[this.name]||{});this.total=j.total;this.threshold=j.threshold;this.renderUI();this.bindUI();var h=this;setTimeout(function(){h.syncUI()},50)},renderUI:function(){this.domEl.innerHTML=this.lang.tmpl.replace("%remain%",
"<em>"+this.total+"</em>");this.remainEl=this.domEl.getElementsByTagName("em")[0]},bindUI:function(){var j=this.editor;f.on(j.textarea,"keyup",this.syncUI,this,true);f.on(j.contentDoc,"keyup",this.syncUI,this,true);f.on(j.container,"click",this.syncUI,this,true)},syncUI:function(){this.remain=this.total-this.editor.getData().length;this.remainEl.innerHTML=this.remain;this.remain<=this.threshold?g.addClass(this.domEl,"ks-editor-wordcount-alarm"):g.removeClass(this.domEl,"ks-editor-wordcount-alarm")}})});
