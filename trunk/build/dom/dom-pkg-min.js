/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 801 Jul 4 22:05
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function o(b,a){var h,d=[],g,n;a=p(a);if(c.isString(b)){b=c.trim(b);if(l.test(b)){if(b=q(b.slice(1)))d=[b]}else if(h=u.exec(b)){g=h[1];n=h[2];h=h[3];if(a=g?q(g):a)if(h)if(!g||b.indexOf(e)!==-1)d=i(h,n,a);else{if((b=q(g))&&m.hasClass(b,h))d=[b]}else if(n)d=t(a,n)}else if(c.ExternalSelector)return c.ExternalSelector(b,a);else f(b)}else if(b&&b.nodeType)d=[b];else if(b&&(b.item||c.isArray(b)))d=b;if(d.item)d=c.makeArray(d);return d}function p(b){if(b===r)b=j;else if(c.isString(b)&&
l.test(b))b=q(b.slice(1));else if(b&&b.nodeType!==1&&b.nodeType!==9)b=null;return b}function q(b){return j.getElementById(b)}function t(b,a){return b.getElementsByTagName(a)}function i(b,a,h){h=b=h.getElementsByClassName(b);var d=0,g=0,n=b.length,s;if(a&&a!==k){h=[];for(a=a.toUpperCase();d<n;++d){s=b[d];if(s.tagName===a)h[g++]=s}}return h}function f(b){c.error("Unsupported selector: "+b)}var j=document,m=c.DOM,e=" ",k="*",l=/^#[\w-]+$/,u=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var b=
j.createElement("div");b.appendChild(j.createComment(""));if(b.getElementsByTagName(k).length>0)t=function(a,h){a=a.getElementsByTagName(h);if(h===k){h=[];for(var d=0,g=0,n;n=a[d++];)if(n.nodeType===1)h[g++]=n;a=h}return a}})();j.getElementsByClassName||(i=j.querySelectorAll?function(b,a,h){return h.querySelectorAll((a?a:"")+"."+b)}:function(b,a,h){a=h.getElementsByTagName(a||k);h=[];var d=0,g=0,n=a.length,s,v;for(b=e+b+e;d<n;++d){s=a[d];if((v=s.className)&&(e+v+e).indexOf(b)>-1)h[g++]=s}return h});
c.query=o;c.get=function(b,a){return o(b,a)[0]||null};c.mix(m,{query:o,get:c.get,filter:function(b,a){var h=o(b),d,g,n,s=[];if(c.isString(a)&&(d=u.exec(a))&&!d[1]){g=d[2];n=d[3];a=function(v){return!(g&&v.tagName!==g.toUpperCase()||n&&!m.hasClass(v,n))}}if(c.isFunction(a))s=c.filter(h,a);else if(a&&c.ExternalSelector)s=c.ExternalSelector._filter(b,a);else f(a);return s},test:function(b,a){b=o(b);return m.filter(b,a).length===b.length}})});
KISSY.add("dom-class",function(c,r){function o(i,f,j,m){if(!(f=c.trim(f)))return m?false:r;i=c.query(i);var e=0,k=i.length;f=f.split(q);for(var l;e<k;e++){l=i[e];if(l.nodeType===1){l=j(l,f,f.length);if(l!==r)return l}}if(m)return false}var p=c.DOM,q=/[\.\s]\s*\.?/,t=/[\n\t]/g;c.mix(p,{hasClass:function(i,f){return o(i,f,function(j,m,e){if(j=j.className){j=" "+j+" ";for(var k=0,l=true;k<e;k++)if(j.indexOf(" "+m[k]+" ")<0){l=false;break}if(l)return true}},true)},addClass:function(i,f){o(i,f,function(j,
m,e){var k=j.className;if(k){var l=" "+k+" ";k=k;for(var u=0;u<e;u++)if(l.indexOf(" "+m[u]+" ")<0)k+=" "+m[u];j.className=c.trim(k)}else j.className=f})},removeClass:function(i,f){o(i,f,function(j,m,e){var k=j.className;if(k)if(e){k=(" "+k+" ").replace(t," ");for(var l=0;l<e;l++)k=k.replace(" "+m[l]+" "," ");j.className=c.trim(k)}else j.className=""})},replaceClass:function(i,f,j){p.removeClass(i,f);p.addClass(i,j)},toggleClass:function(i,f,j){var m=c.isBoolean(j),e;o(i,f,function(k,l,u){for(var b=
0,a;b<u;b++){a=l[b];e=m?!j:p.hasClass(k,a);p[e?"removeClass":"addClass"](k,a)}})}})});
KISSY.add("dom-attr",function(c,r){function o(b,a){return a&&a.nodeName.toUpperCase()===b.toUpperCase()}var p=c.UA,q=p.ie,t=q&&q<8,i=document.documentElement.textContent!==r?"textContent":"innerText",f=c.DOM,j=f._isElementNode,m=/href|src|style/,e=/href|src|colspan|rowspan/,k=/\r/g,l=/radio|checkbox/,u={readonly:"readOnly"};t&&c.mix(u,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(b,a,h){if(a=c.trim(a)){a=a.toLowerCase();a=u[a]||a;if(h===r){b=c.get(b);if(!j(b))return r;var d;m.test(a)||
(d=b[a]);if(d===r)d=b.getAttribute(a);if(t)if(e.test(a))d=b.getAttribute(a,2);else if(a==="style")d=b.style.cssText;return d===null?r:d}c.each(c.query(b),function(g){if(j(g))if(t&&a==="style")g.style.cssText=h;else g.setAttribute(a,""+h)})}},removeAttr:function(b,a){c.each(c.query(b),function(h){j(h)&&h.removeAttribute(a)})},val:function(b,a){if(a===r){var h=c.get(b);if(!j(h))return r;if(o("option",h))return(h.attributes.value||{}).specified?h.value:h.text;if(o("select",h)){var d=h.selectedIndex;
b=h.options;if(d<0)return null;else if(h.type==="select-one")return f.val(b[d]);h=[];for(var g=0,n=b.length;g<n;++g)b[g].selected&&h.push(f.val(b[g]));return h}if(p.webkit&&l.test(h.type))return h.getAttribute("value")===null?"on":h.value;return(h.value||"").replace(k,"")}c.each(c.query(b),function(s){if(o("select",s)){var v=c.makeArray(a),x=s.options,w;g=0;for(n=x.length;g<n;++g){w=x[g];w.selected=c.inArray(f.val(w),v)}if(!v.length)s.selectedIndex=-1}else if(j(s))s.value=a})},text:function(b,a){if(a===
r){b=c.get(b);if(j(b))return b[i]||""}else c.each(c.query(b),function(h){if(j(h))h[i]=a})}})});
KISSY.add("dom-style",function(c,r){var o=c.DOM,p=document,q=p.documentElement,t=/width|height|top|left|right|bottom|margin|padding/i,i=/-([a-z])/ig,f=function(m,e){return e.toUpperCase()},j={};c.mix(o,{_CUSTOM_STYLES:j,_getComputedStyle:function(m,e){var k="",l=m.ownerDocument;if(m.style)k=l.defaultView.getComputedStyle(m,null)[e];return k},css:function(m,e,k){if(c.isPlainObject(e))for(var l in e)o.css(m,l,e[l]);else{if(e.indexOf("-")>0)e=e.replace(i,f);e=j[e]||e;if(k===r){m=c.get(m);l="";if(m&&
m.style){l=e.get?e.get(m):m.style[e];if(l===""&&!e.get)l=o._getComputedStyle(m,e)}return l===r?"":l}else{if(k===null||k==="")k="";else if(!isNaN(new Number(k))&&t.test(e))k+="px";(e==="width"||e==="height")&&parseFloat(k)<0||c.each(c.query(m),function(u){if(u&&u.style)e.set?e.set(u,k):(u.style[e]=k)})}}},addStyleSheet:function(m,e){var k;if(e)k=c.get(e);k||(k=o.create("<style>",{id:e}));c.get("head").appendChild(k);if(k.styleSheet)k.styleSheet.cssText=m;else k.appendChild(p.createTextNode(m))}});
if(q.style.cssFloat!==r)j["float"]="cssFloat";else if(q.style.styleFloat!==r)j["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var o=c.DOM,p=document,q=p.documentElement,t=o._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,f=/^-?\d/,j=/^auto$/i;try{if(q.style.opacity===r&&q.filters)t.opacity={get:function(e){var k=100;try{k=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(l){try{k=e.filters("alpha").opacity}catch(u){}}return k/100+""},set:function(e,k){e=e.style;e.zoom=1;e.filter="alpha(opacity="+k*100+")"}}}catch(m){c.log("IE filters ActiveX is disabled. ex = "+m)}if(!(p.defaultView||
{}).getComputedStyle&&q.currentStyle)o._getComputedStyle=function(e,k){var l=e.style;e=e.currentStyle[k];if(!i.test(e)&&f.test(e)||j.test(e)){var u=l.left;l.left=k==="fontSize"?"1em":e||0;e=l.pixelLeft+"px";l.left=u}return e}}});
KISSY.add("dom-offset",function(c,r){function o(a){var h=0,d=0;if(a!==f.body&&a!==j&&a[b]){a=a[b]();h=a.left+q.scrollLeft();d=a.top+q.scrollTop()}return{left:h,top:d}}function p(a,h){var d=q.css(a,l);if(d==="static")d=a.style[l]=u;var g=o(a);d=d===u;var n=k(q.css(a,"left"),10),s=k(q.css(a,"top"),10);n=c.isNumber(n)?n:d?0:a.offsetLeft;s=c.isNumber(s)?s:d?0:a.offsetTop;q.css(a,{left:n+h.left-g.left,top:s+h.top-g.top})}var q=c.DOM,t=c.UA,i=window,f=document,j=f.documentElement,m=f.compatMode==="CSS1Compat",
e=Math.max,k=parseInt,l="position",u="relative",b="getBoundingClientRect";c.mix(q,{offset:function(a,h){if(!(a=c.get(a))||!a.ownerDocument)return null;if(h===r)return o(a);p(a,h)},scrollLeft:function(){return i.pageXOffset||j.scrollLeft||f.body.scrollLeft},scrollTop:function(){return i.pageYOffset||j.scrollTop||f.body.scrollTop},docHeight:function(){return e(!m?f.body.scrollHeight:j.scrollHeight,q.viewportHeight())},docWidth:function(){return e(!m?f.body.scrollWidth:j.scrollWidth,q.viewportWidth())},
viewportHeight:function(){return t.ie?m?j.clientHeight:f.body.clientHeight:i.innerHeight},viewportWidth:function(){return!m&&!t.opera?f.body.clientWidth:t.ie?j.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(c,r){function o(i,f,j,m){if(!(i=c.get(i)))return null;if(f===r)f=1;var e=null,k,l;if(c.isNumber(f)&&f>=0){if(f===0)return i;k=0;l=f;f=function(){return++k===l}}for(;i=i[j];)if(t(i)&&(!f||q.test(i,f))&&(!m||m(i))){e=i;break}return e}function p(i,f,j){var m=[];var e=i=c.get(i);if(i&&j)e=i.parentNode;if(e){j=0;for(e=e.firstChild;e;e=e.nextSibling)if(t(e)&&e!==i&&(!f||q.test(e,f)))m[j++]=e}return m}var q=c.DOM,t=q._isElementNode;c.mix(q,{parent:function(i,f){return o(i,
f,"parentNode",function(j){return j.nodeType!=11})},next:function(i,f){return o(i,f,"nextSibling")},prev:function(i,f){return o(i,f,"previousSibling")},siblings:function(i,f){return p(i,f,true)},children:function(i,f){return p(i,f)},contains:function(i,f){var j=false;if((i=c.get(i))&&(f=c.get(f)))if(i.contains)return i.contains(f);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(f)&16);else for(;!j&&(f=f.parentNode);)j=f==i;return j}})});
KISSY.add("dom-create",function(c,r){function o(d,g){if(j(d)&&g)for(var n in g)t.attr(d,n,g[n]);return d}function p(d,g){var n=null,s;if(d&&(d.push||d.item)&&d[0]){g=g||d[0].ownerDocument;n=g.createDocumentFragment();if(d.item)d=c.makeArray(d);g=0;for(s=d.length;g<s;g++)n.appendChild(d[g])}else c.log("Unable to convert "+d+" to fragment.");return n}var q=document,t=c.DOM,i=c.UA,f=i.ie,j=t._isElementNode,m=q.createElement("div"),e=/<(\w+)/,k=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(t,{create:function(d,
g,n){if(j(d))return d;if(!(d=c.trim(d)))return null;var s=null;s=t._creators;var v,x="div",w;if(v=k.exec(d))s=(n||q).createElement(v[1]);else{if((v=e.exec(d))&&(w=v[1])&&c.isFunction(s[w=w.toLowerCase()]))x=w;d=s[x](d,n).childNodes;s=d.length===1?d[0].parentNode.removeChild(d[0]):p(d,n||q)}return o(s,g)},_creators:{div:function(d,g){g=g?g.createElement("div"):m;g.innerHTML=d;return g}},html:function(d,g){if(g===r){d=c.get(d);if(j(d))return d.innerHTML}else c.each(c.query(d),function(n){if(j(n)){n.innerHTML=
"";g&&n.appendChild(t.create(g))}})}});var l=t._creators,u=t.create,b=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,a={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||f){for(var h in a)(function(d){l[h]=function(g,n){return u("<"+d+">"+g+"</"+d+">",null,n)}})(a[h]);if(f){l.script=function(d,g){g=g?g.createElement("div"):m;g.innerHTML="-"+d;g.removeChild(g.firstChild);return g};if(f<8)l.tbody=function(d,g){g=u("<table>"+d+"</table>",null,g);
var n=g.children.tags("tbody")[0];g.children.length>1&&n&&!b.test(d)&&n.parentNode.removeChild(n);return g}}c.mix(l,{optgroup:l.option,th:l.td,thead:l.tbody,tfoot:l.tbody,caption:l.tbody,colgroup:l.tbody})}});
KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(o,p){o=r.create(o);p=c.get(p);o&&p&&p.parentNode&&p.parentNode.insertBefore(o,p);return o},insertAfter:function(o,p){o=r.create(o);p=c.get(p);if(o&&p&&p.parentNode)p.nextSibling?p.parentNode.insertBefore(o,p.nextSibling):p.parentNode.appendChild(o);return o}})});
