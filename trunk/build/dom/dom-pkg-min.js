/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 824 Jul 9 09:38
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function p(a,b){var j,d=[],g,m;b=o(b);if(c.isString(a)){a=c.trim(a);if(e.test(a)){if(a=s(a.slice(1)))d=[a]}else if(j=l.exec(a)){g=j[1];m=j[2];j=j[3];if(b=g?s(g):b)if(j)if(!g||a.indexOf(n)!==-1)d=i(j,m,b);else{if((a=s(g))&&q.hasClass(a,j))d=[a]}else if(m)d=u(b,m)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else h(a)}else if(a&&a.nodeType)d=[a];else if(a&&(c.isArray(a)||a.item||a.getDOMNode))d=a;if(d.item)d=c.makeArray(d);return d}function o(a){if(a===
r)a=k;else if(c.isString(a)&&e.test(a))a=s(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function s(a){return k.getElementById(a)}function u(a,b){return a.getElementsByTagName(b)}function i(a,b,j){j=a=j.getElementsByClassName(a);var d=0,g=0,m=a.length,t;if(b&&b!==f){j=[];for(b=b.toUpperCase();d<m;++d){t=a[d];if(t.tagName===b)j[g++]=t}}return j}function h(a){c.error("Unsupported selector: "+a)}var k=document,q=c.DOM,n=" ",f="*",e=/^#[\w-]+$/,l=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var a=k.createElement("div");a.appendChild(k.createComment(""));if(a.getElementsByTagName(f).length>0)u=function(b,j){b=b.getElementsByTagName(j);if(j===f){j=[];for(var d=0,g=0,m;m=b[d++];)if(m.nodeType===1)j[g++]=m;b=j}return b}})();k.getElementsByClassName||(i=k.querySelectorAll?function(a,b,j){return j.querySelectorAll((b?b:"")+"."+a)}:function(a,b,j){b=j.getElementsByTagName(b||f);j=[];var d=0,g=0,m=b.length,t,v;for(a=n+a+n;d<m;++d){t=b[d];if((v=t.className)&&(n+v+n).indexOf(a)>-1)j[g++]=
t}return j});c.query=p;c.get=function(a,b){return p(a,b)[0]||null};c.mix(q,{query:p,get:c.get,filter:function(a,b){var j=p(a),d,g,m,t=[];if(c.isString(b)&&(d=l.exec(b))&&!d[1]){g=d[2];m=d[3];b=function(v){return!(g&&v.tagName!==g.toUpperCase()||m&&!q.hasClass(v,m))}}if(c.isFunction(b))t=c.filter(j,b);else if(b&&c.ExternalSelector)t=c.ExternalSelector._filter(a,b);else h(b);return t},test:function(a,b){a=p(a);return q.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function p(i,h,k,q){if(!(h=c.trim(h)))return q?false:r;i=c.query(i);var n=0,f=i.length;h=h.split(s);for(var e;n<f;n++){e=i[n];if(e.nodeType===1){e=k(e,h,h.length);if(e!==r)return e}}if(q)return false}var o=c.DOM,s=/[\.\s]\s*\.?/,u=/[\n\t]/g;c.mix(o,{hasClass:function(i,h){return p(i,h,function(k,q,n){if(k=k.className){k=" "+k+" ";for(var f=0,e=true;f<n;f++)if(k.indexOf(" "+q[f]+" ")<0){e=false;break}if(e)return true}},true)},addClass:function(i,h){p(i,h,function(k,
q,n){var f=k.className;if(f){var e=" "+f+" ";f=f;for(var l=0;l<n;l++)if(e.indexOf(" "+q[l]+" ")<0)f+=" "+q[l];k.className=c.trim(f)}else k.className=h})},removeClass:function(i,h){p(i,h,function(k,q,n){var f=k.className;if(f)if(n){f=(" "+f+" ").replace(u," ");for(var e=0,l;e<n;e++)for(l=" "+q[e]+" ";f.indexOf(l)>=0;)f=f.replace(l," ");k.className=c.trim(f)}else k.className=""})},replaceClass:function(i,h,k){o.removeClass(i,h);o.addClass(i,k)},toggleClass:function(i,h,k){var q=c.isBoolean(k),n;p(i,
h,function(f,e,l){for(var a=0,b;a<l;a++){b=e[a];n=q?!k:o.hasClass(f,b);o[n?"removeClass":"addClass"](f,b)}})}})});
KISSY.add("dom-attr",function(c,r){function p(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}var o=c.UA,s=o.ie,u=s&&s<8,i=document.documentElement.textContent!==r?"textContent":"innerText",h=c.DOM,k=h._isElementNode,q=/href|src|style/,n=/href|src|colspan|rowspan/,f=/\r/g,e=/radio|checkbox/,l={readonly:"readOnly"};u&&c.mix(l,{"for":"htmlFor","class":"className"});c.mix(h,{attr:function(a,b,j){if(b=c.trim(b)){b=b.toLowerCase();b=l[b]||b;if(j===r){a=c.get(a);if(!k(a))return r;var d;q.test(b)||
(d=a[b]);if(d===r)d=a.getAttribute(b);if(u)if(n.test(b))d=a.getAttribute(b,2);else if(b==="style")d=a.style.cssText;return d===null?r:d}c.each(c.query(a),function(g){if(k(g))if(u&&b==="style")g.style.cssText=j;else g.setAttribute(b,""+j)})}},removeAttr:function(a,b){c.each(c.query(a),function(j){k(j)&&j.removeAttribute(b)})},val:function(a,b){if(b===r){var j=c.get(a);if(!k(j))return r;if(p("option",j))return(j.attributes.value||{}).specified?j.value:j.text;if(p("select",j)){var d=j.selectedIndex;
a=j.options;if(d<0)return null;else if(j.type==="select-one")return h.val(a[d]);j=[];for(var g=0,m=a.length;g<m;++g)a[g].selected&&j.push(h.val(a[g]));return j}if(o.webkit&&e.test(j.type))return j.getAttribute("value")===null?"on":j.value;return(j.value||"").replace(f,"")}c.each(c.query(a),function(t){if(p("select",t)){if(c.isNumber(b))b+="";var v=c.makeArray(b),x=t.options,w;g=0;for(m=x.length;g<m;++g){w=x[g];w.selected=c.inArray(h.val(w),v)}if(!v.length)t.selectedIndex=-1}else if(k(t))t.value=b})},
text:function(a,b){if(b===r){a=c.get(a);if(k(a))return a[i]||""}else c.each(c.query(a),function(j){if(k(j))j[i]=b})}})});
KISSY.add("dom-style",function(c,r){function p(f,e){var l=c.get(f),a=e===i?l.offsetWidth:l.offsetHeight;c.each(e===i?["Left","Right"]:["Top","Bottom"],function(b){a-=parseFloat(o._getComputedStyle(l,"padding"+b))||0;a-=parseFloat(o._getComputedStyle(l,"border"+b+"Width"))||0});return a}var o=c.DOM,s=document,u=s.documentElement,i="width",h=/width|height|top|left|right|bottom|margin|padding/i,k=/-([a-z])/ig,q=function(f,e){return e.toUpperCase()},n={};c.mix(o,{_CUSTOM_STYLES:n,_getComputedStyle:function(f,
e){var l="",a=f.ownerDocument;if(f.style)l=a.defaultView.getComputedStyle(f,null)[e];return l},css:function(f,e,l){if(c.isPlainObject(e))for(var a in e)o.css(f,a,e[a]);else{if(e.indexOf("-")>0)e=e.replace(k,q);e=n[e]||e;if(l===r){f=c.get(f);a="";if(f&&f.style){a=e.get?e.get(f):f.style[e];if(a===""&&!e.get)a=o._getComputedStyle(f,e)}return a===r?"":a}else{if(l===null||l==="")l="";else if(!isNaN(new Number(l))&&h.test(e))l+="px";(e===i||e==="height")&&parseFloat(l)<0||c.each(c.query(f),function(b){if(b&&
b.style)e.set?e.set(b,l):(b.style[e]=l)})}}},width:function(f,e){if(e===r)return p(f,i);else o.css(f,i,e)},height:function(f,e){if(e===r)return p(f,"height");else o.css(f,"height",e)},addStyleSheet:function(f,e){var l;if(e)l=c.get(e);l||(l=o.create("<style>",{id:e}));c.get("head").appendChild(l);if(l.styleSheet)l.styleSheet.cssText=f;else l.appendChild(s.createTextNode(f))}});if(u.style.cssFloat!==r)n["float"]="cssFloat";else if(u.style.styleFloat!==r)n["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var p=c.DOM,o=document,s=o.documentElement,u=p._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,h=/^-?\d/,k=/^auto$/i,q=/^width|height$/;try{if(s.style.opacity===r&&s.filters)u.opacity={get:function(f){var e=100;try{e=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(l){try{e=f.filters("alpha").opacity}catch(a){}}return e/100+""},set:function(f,e){f=f.style;f.zoom=1;f.filter="alpha(opacity="+e*100+")"}}}catch(n){c.log("IE filters ActiveX is disabled. ex = "+
n)}if(!(o.defaultView||{}).getComputedStyle&&s.currentStyle)p._getComputedStyle=function(f,e){var l=f.style,a=f.currentStyle[e];if(q.test(e))a=p[e](f)+"px";else if(!i.test(a)&&h.test(a)||k.test(a)){f=l.left;l.left=e==="fontSize"?"1em":a||0;a=l.pixelLeft+"px";l.left=f}return a}}});
KISSY.add("dom-offset",function(c,r){function p(b){var j=0,d=0;if(b!==h.body&&b!==k&&b[a]){b=b[a]();j=b.left+s.scrollLeft();d=b.top+s.scrollTop()}return{left:j,top:d}}function o(b,j){var d=s.css(b,e);if(d==="static")d=b.style[e]=l;var g=p(b);d=d===l;var m=f(s.css(b,"left"),10),t=f(s.css(b,"top"),10);m=c.isNumber(m)?m:d?0:b.offsetLeft;t=c.isNumber(t)?t:d?0:b.offsetTop;s.css(b,{left:m+j.left-g.left,top:t+j.top-g.top})}var s=c.DOM,u=c.UA,i=window,h=document,k=h.documentElement,q=h.compatMode==="CSS1Compat",
n=Math.max,f=parseInt,e="position",l="relative",a="getBoundingClientRect";c.mix(s,{offset:function(b,j){if(!(b=c.get(b))||!b.ownerDocument)return null;if(j===r)return p(b);o(b,j)},scrollLeft:function(){return i.pageXOffset||k.scrollLeft||h.body.scrollLeft},scrollTop:function(){return i.pageYOffset||k.scrollTop||h.body.scrollTop},docHeight:function(){return n(!q?h.body.scrollHeight:k.scrollHeight,s.viewportHeight())},docWidth:function(){return n(!q?h.body.scrollWidth:k.scrollWidth,s.viewportWidth())},
viewportHeight:function(){return u.ie?q?k.clientHeight:h.body.clientHeight:i.innerHeight},viewportWidth:function(){return!q&&!u.opera?h.body.clientWidth:u.ie?k.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(c,r){function p(i,h,k,q){if(!(i=c.get(i)))return null;if(h===r)h=1;var n=null,f,e;if(c.isNumber(h)&&h>=0){if(h===0)return i;f=0;e=h;h=function(){return++f===e}}for(;i=i[k];)if(u(i)&&(!h||s.test(i,h))&&(!q||q(i))){n=i;break}return n}function o(i,h,k){var q=[];var n=i=c.get(i);if(i&&k)n=i.parentNode;if(n){k=0;for(n=n.firstChild;n;n=n.nextSibling)if(u(n)&&n!==i&&(!h||s.test(n,h)))q[k++]=n}return q}var s=c.DOM,u=s._isElementNode;c.mix(s,{parent:function(i,h){return p(i,
h,"parentNode",function(k){return k.nodeType!=11})},next:function(i,h){return p(i,h,"nextSibling")},prev:function(i,h){return p(i,h,"previousSibling")},siblings:function(i,h){return o(i,h,true)},children:function(i,h){return o(i,h)},contains:function(i,h){var k=false;if((i=c.get(i))&&(h=c.get(h)))if(i.contains)return i.contains(h);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(h)&16);else for(;!k&&(h=h.parentNode);)k=h==i;return k}})});
KISSY.add("dom-create",function(c,r){function p(d,g){if(k(d)&&g)for(var m in g)u.attr(d,m,g[m]);return d}function o(d,g){var m=null,t;if(d&&(d.push||d.item)&&d[0]){g=g||d[0].ownerDocument;m=g.createDocumentFragment();if(d.item)d=c.makeArray(d);g=0;for(t=d.length;g<t;g++)m.appendChild(d[g])}else c.log("Unable to convert "+d+" to fragment.");return m}var s=document,u=c.DOM,i=c.UA,h=i.ie,k=u._isElementNode,q=s.createElement("div"),n=/<(\w+)/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(u,{create:function(d,
g,m){if(k(d))return d;if(!(d=c.trim(d)))return null;var t=null;t=u._creators;var v,x="div",w;if(v=f.exec(d))t=(m||s).createElement(v[1]);else{if((v=n.exec(d))&&(w=v[1])&&c.isFunction(t[w=w.toLowerCase()]))x=w;d=t[x](d,m).childNodes;t=d.length===1?d[0].parentNode.removeChild(d[0]):o(d,m||s)}return p(t,g)},_creators:{div:function(d,g){g=g?g.createElement("div"):q;g.innerHTML=d;return g}},html:function(d,g){if(g===r){d=c.get(d);if(k(d))return d.innerHTML}else c.each(c.query(d),function(m){if(k(m)){try{m.innerHTML=
""}catch(t){for(;m.firstChild;)m.removeChild(m.firstChild)}g&&m.appendChild(u.create(g))}})},remove:function(d){c.each(c.query(d),function(g){k(g)&&g.parentNode&&g.parentNode.removeChild(g)})}});var e=u._creators,l=u.create,a=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,b={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||h){for(var j in b)(function(d){e[j]=function(g,m){return l("<"+d+">"+g+"</"+d+">",null,m)}})(b[j]);if(h){e.script=function(d,
g){g=g?g.createElement("div"):q;g.innerHTML="-"+d;g.removeChild(g.firstChild);return g};if(h<8)e.tbody=function(d,g){g=l("<table>"+d+"</table>",null,g);var m=g.children.tags("tbody")[0];g.children.length>1&&m&&!a.test(d)&&m.parentNode.removeChild(m);return g}}c.mix(e,{optgroup:e.option,th:e.td,thead:e.tbody,tfoot:e.tbody,caption:e.tbody,colgroup:e.tbody})}});
KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(p,o){p=r.create(p);o=c.get(o);p&&o&&o.parentNode&&o.parentNode.insertBefore(p,o);return p},insertAfter:function(p,o){p=r.create(p);o=c.get(o);if(p&&o&&o.parentNode)o.nextSibling?o.parentNode.insertBefore(p,o.nextSibling):o.parentNode.appendChild(p);return p}})});
