/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 793 Jul 2 09:50
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function o(b,a){var h,d=[],g,n;a=p(a);if(c.isString(b)){b=c.trim(b);if(m.test(b)){if(b=q(b.slice(1)))d=[b]}else if(h=u.exec(b)){g=h[1];n=h[2];h=h[3];if(a=g?q(g):a)if(h)if(!g||b.indexOf(e)!==-1)d=i(h,n,a);else{if((b=q(g))&&j.hasClass(b,h))d=[b]}else if(n)d=t(a,n)}else if(c.ExternalSelector)return c.ExternalSelector(b,a);else f(b)}else if(b&&b.nodeType)d=[b];else if(b&&(b.item||c.isArray(b)))d=b;if(d.item)d=c.makeArray(d);return d}function p(b){if(b===r)b=k;else if(c.isString(b)&&
m.test(b))b=q(b.slice(1));else if(b&&b.nodeType!==1&&b.nodeType!==9)b=null;return b}function q(b){return k.getElementById(b)}function t(b,a){return b.getElementsByTagName(a)}function i(b,a,h){h=b=h.getElementsByClassName(b);var d=0,g=0,n=b.length,s;if(a&&a!==l){h=[];for(a=a.toUpperCase();d<n;++d){s=b[d];if(s.tagName===a)h[g++]=s}}return h}function f(b){c.error("Unsupported selector: "+b)}var k=document,j=c.DOM,e=" ",l="*",m=/^#[\w-]+$/,u=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var b=
k.createElement("div");b.appendChild(k.createComment(""));if(b.getElementsByTagName(l).length>0)t=function(a,h){a=a.getElementsByTagName(h);if(h===l){h=[];for(var d=0,g=0,n;n=a[d++];)if(n.nodeType===1)h[g++]=n;a=h}return a}})();k.getElementsByClassName||(i=k.querySelectorAll?function(b,a,h){return h.querySelectorAll((a?a:"")+"."+b)}:function(b,a,h){a=h.getElementsByTagName(a||l);h=[];var d=0,g=0,n=a.length,s,v;for(b=e+b+e;d<n;++d){s=a[d];if((v=s.className)&&(e+v+e).indexOf(b)>-1)h[g++]=s}return h});
c.query=o;c.get=function(b,a){return o(b,a)[0]||null};c.mix(j,{query:o,get:c.get,filter:function(b,a){var h=o(b),d,g,n,s=[];if(c.isString(a)&&(d=u.exec(a))&&!d[1]){g=d[2];n=d[3];a=function(v){return!(g&&v.tagName!==g.toUpperCase()||n&&!j.hasClass(v,n))}}if(c.isFunction(a))s=c.filter(h,a);else if(a&&c.ExternalSelector)s=c.ExternalSelector._filter(b,a);else f(a);return s},test:function(b,a){b=o(b);return j.filter(b,a).length===b.length}})});
KISSY.add("dom-class",function(c,r){function o(i,f,k,j){if(!(f=c.trim(f)))return j?false:r;i=c.query(i);var e=0,l=i.length;f=f.split(q);for(var m;e<l;e++){m=i[e];if(m.nodeType===1){m=k(m,f,f.length);if(m!==r)return m}}if(j)return false}var p=c.DOM,q=/[\.\s]\s*\.?/,t=/[\n\t]/g;c.mix(p,{hasClass:function(i,f){return o(i,f,function(k,j,e){if(k=k.className){k=" "+k+" ";for(var l=0,m=true;l<e;l++)if(k.indexOf(" "+j[l]+" ")<0){m=false;break}if(m)return true}},true)},addClass:function(i,f){o(i,f,function(k,
j,e){var l=k.className;if(l){var m=" "+l+" ";l=l;for(var u=0;u<e;u++)if(m.indexOf(" "+j[u]+" ")<0)l+=" "+j[u];k.className=c.trim(l)}else k.className=f})},removeClass:function(i,f){o(i,f,function(k,j,e){var l=k.className;if(l)if(e){l=(" "+l+" ").replace(t," ");for(var m=0;m<e;m++)l=l.replace(" "+j[m]+" "," ");k.className=c.trim(l)}else k.className=""})},replaceClass:function(i,f,k){p.removeClass(i,f);p.addClass(i,k)},toggleClass:function(i,f,k){var j=c.isBoolean(k),e;o(i,f,function(l,m,u){for(var b=
0,a;b<u;b++){a=m[b];e=j?!k:p.hasClass(l,a);p[e?"removeClass":"addClass"](l,a)}})}})});
KISSY.add("dom-attr",function(c,r){function o(b,a){return a&&a.nodeName.toUpperCase()===b.toUpperCase()}var p=c.UA,q=p.ie,t=q&&q<8,i=document.documentElement.textContent!==r?"textContent":"innerText",f=c.DOM,k=f._isElementNode,j=/href|src|style/,e=/href|src|colspan|rowspan/,l=/\r/g,m=/radio|checkbox/,u={readonly:"readOnly"};t&&c.mix(u,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(b,a,h){if(a=c.trim(a)){a=a.toLowerCase();a=u[a]||a;if(h===r){b=c.get(b);if(!k(b))return r;var d;j.test(a)||
(d=b[a]);if(d===r)d=b.getAttribute(a);if(t)if(e.test(a))d=b.getAttribute(a,2);else if(a==="style")d=b.style.cssText;return d===null?r:d}c.each(c.query(b),function(g){if(k(g))if(t&&a==="style")g.style.cssText=h;else g.setAttribute(a,""+h)})}},removeAttr:function(b,a){c.each(c.query(b),function(h){k(h)&&h.removeAttribute(a)})},val:function(b,a){if(a===r){var h=c.get(b);if(!k(h))return r;if(o("option",h))return(h.attributes.value||{}).specified?h.value:h.text;if(o("select",h)){var d=h.selectedIndex;
b=h.options;if(d<0)return null;else if(h.type==="select-one")return f.val(b[d]);h=[];for(var g=0,n=b.length;g<n;++g)b[g].selected&&h.push(f.val(b[g]));return h}if(p.webkit&&m.test(h.type))return h.getAttribute("value")===null?"on":h.value;return(h.value||"").replace(l,"")}c.each(c.query(b),function(s){if(o("select",s)){var v=c.makeArray(a),x=s.options,w;g=0;for(n=x.length;g<n;++g){w=x[g];w.selected=c.inArray(f.val(w),v)}if(!v.length)s.selectedIndex=-1}else if(k(s))s.value=a})},text:function(b,a){if(a===
r){b=c.get(b);if(k(b))return b[i]||""}else c.each(c.query(b),function(h){if(k(h))h[i]=a})}})});
KISSY.add("dom-style",function(c,r){var o=c.DOM,p=document,q=p.documentElement,t=/width|height|top|left|right|bottom|margin|padding/i,i=/-([a-z])/ig,f=function(j,e){return e.toUpperCase()},k={};c.mix(o,{_CUSTOM_STYLES:k,_getComputedStyle:function(j,e){var l="",m=j.ownerDocument;if(j.style)l=m.defaultView.getComputedStyle(j,null)[e];return l},css:function(j,e,l){if(c.isPlainObject(e))for(var m in e)o.css(j,m,e[m]);else{if(e.indexOf("-")>0)e=e.replace(i,f);e=k[e]||e;if(l===r){j=c.get(j);m="";if(j&&
j.style){m=e.get?e.get(j):j.style[e];if(m===""&&!e.get)m=o._getComputedStyle(j,e)}return m===r?"":m}else{if(l===null||l==="")l="";else if(!isNaN(new Number(l))&&t.test(e))l+="px";(e==="width"||e==="height")&&parseFloat(l)<0||c.each(c.query(j),function(u){if(u&&u.style)e.set?e.set(u,l):(u.style[e]=l)})}}},addStyleSheet:function(j,e){var l;if(e)l=c.get(e);l||(l=o.create("<style>",{id:e}));c.get("head").appendChild(l);if(l.styleSheet)l.styleSheet.cssText=j;else l.appendChild(p.createTextNode(j))}});
if(q.style.cssFloat!==r)k["float"]="cssFloat";else if(q.style.styleFloat!==r)k["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var o=c.DOM,p=document,q=p.documentElement,t=o._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,f=/^-?\d/;try{if(q.style.opacity===r&&q.filters)t.opacity={get:function(j){var e=100;try{e=j.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(l){try{e=j.filters("alpha").opacity}catch(m){}}return e/100+""},set:function(j,e){j=j.style;j.zoom=1;j.filter="alpha(opacity="+e*100+")"}}}catch(k){c.log("IE filters ActiveX is disabled. ex = "+k)}if(!(p.defaultView||
{}).getComputedStyle&&q.currentStyle)o._getComputedStyle=function(j,e){var l=j.style;j=j.currentStyle[e];if(!i.test(j)&&f.test(j)){var m=l.left;l.left=e==="fontSize"?"1em":j||0;j=l.pixelLeft+"px";l.left=m}return j}}});
KISSY.add("dom-offset",function(c,r){function o(a){var h=0,d=0;if(a!==f.body&&a!==k&&a[b]){a=a[b]();h=a.left+q.scrollLeft();d=a.top+q.scrollTop()}return{left:h,top:d}}function p(a,h){var d=q.css(a,m);if(d==="static")d=a.style[m]=u;var g=o(a);d=d===u;var n=l(q.css(a,"left"),10),s=l(q.css(a,"top"),10);n=c.isNumber(n)?n:d?0:a.offsetLeft;s=c.isNumber(s)?s:d?0:a.offsetTop;q.css(a,{left:n+h.left-g.left,top:s+h.top-g.top})}var q=c.DOM,t=c.UA,i=window,f=document,k=f.documentElement,j=f.compatMode==="CSS1Compat",
e=Math.max,l=parseInt,m="position",u="relative",b="getBoundingClientRect";c.mix(q,{offset:function(a,h){if(!(a=c.get(a))||!a.ownerDocument)return null;if(h===r)return o(a);p(a,h)},scrollLeft:function(){return i.pageXOffset||k.scrollLeft||f.body.scrollLeft},scrollTop:function(){return i.pageYOffset||k.scrollTop||f.body.scrollTop},docHeight:function(){return e(!j?f.body.scrollHeight:k.scrollHeight,q.viewportHeight())},docWidth:function(){return e(!j?f.body.scrollWidth:k.scrollWidth,q.viewportWidth())},
viewportHeight:function(){return t.ie?j?k.clientHeight:f.body.clientHeight:i.innerHeight},viewportWidth:function(){return!j&&!t.opera?f.body.clientWidth:t.ie?k.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(c,r){function o(i,f,k,j){if(!(i=c.get(i)))return null;if(f===r)f=1;var e=null,l,m;if(c.isNumber(f)&&f>=0){if(f===0)return i;l=0;m=f;f=function(){return++l===m}}for(;i=i[k];)if(t(i)&&(!f||q.test(i,f))&&(!j||j(i))){e=i;break}return e}function p(i,f,k){var j=[];var e=i=c.get(i);if(i&&k)e=i.parentNode;if(e){k=0;for(e=e.firstChild;e;e=e.nextSibling)if(t(e)&&e!==i&&(!f||q.test(e,f)))j[k++]=e}return j}var q=c.DOM,t=q._isElementNode;c.mix(q,{parent:function(i,f){return o(i,
f,"parentNode",function(k){return k.nodeType!=11})},next:function(i,f){return o(i,f,"nextSibling")},prev:function(i,f){return o(i,f,"previousSibling")},siblings:function(i,f){return p(i,f,true)},children:function(i,f){return p(i,f)},contains:function(i,f){var k=false;if((i=c.get(i))&&(f=c.get(f)))if(i.contains)return i.contains(f);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(f)&16);else for(;!k&&(f=f.parentNode);)k=f==i;return k}})});
KISSY.add("dom-create",function(c,r){function o(d,g){if(k(d)&&g)for(var n in g)t.attr(d,n,g[n]);return d}function p(d,g){var n=null,s;if(d&&(d.push||d.item)&&d[0]){g=g||d[0].ownerDocument;n=g.createDocumentFragment();if(d.item)d=c.makeArray(d);g=0;for(s=d.length;g<s;g++)n.appendChild(d[g])}else c.log("Unable to convert "+d+" to fragment.");return n}var q=document,t=c.DOM,i=c.UA,f=i.ie,k=t._isElementNode,j=q.createElement("div"),e=/<(\w+)/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(t,{create:function(d,
g,n){if(k(d))return d;if(!(d=c.trim(d)))return null;var s=null;s=t._creators;var v,x="div",w;if(v=l.exec(d))s=(n||q).createElement(v[1]);else{if((v=e.exec(d))&&(w=v[1])&&c.isFunction(s[w=w.toLowerCase()]))x=w;d=s[x](d,n).childNodes;s=d.length===1?d[0].parentNode.removeChild(d[0]):p(d,n||q)}return o(s,g)},_creators:{div:function(d,g){g=g?g.createElement("div"):j;g.innerHTML=d;return g}},html:function(d,g){if(g===r){d=c.get(d);if(k(d))return d.innerHTML}else c.each(c.query(d),function(n){if(k(n)){n.innerHTML=
"";g&&n.appendChild(t.create(g))}})}});var m=t._creators,u=t.create,b=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,a={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||f){for(var h in a)(function(d){m[h]=function(g,n){return u("<"+d+">"+g+"</"+d+">",null,n)}})(a[h]);if(f){m.script=function(d,g){g=g?g.createElement("div"):j;g.innerHTML="-"+d;g.removeChild(g.firstChild);return g};if(f<8)m.tbody=function(d,g){g=u("<table>"+d+"</table>",null,g);
var n=g.children.tags("tbody")[0];g.children.length>1&&n&&!b.test(d)&&n.parentNode.removeChild(n);return g}}c.mix(m,{optgroup:m.option,th:m.td,thead:m.tbody,tfoot:m.tbody,caption:m.tbody,colgroup:m.tbody})}});
KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(o,p){o=r.create(o);p=c.get(p);o&&p&&p.parentNode&&p.parentNode.insertBefore(o,p);return o},insertAfter:function(o,p){o=r.create(o);p=c.get(p);if(o&&p&&p.parentNode)p.nextSibling?p.parentNode.insertBefore(o,p.nextSibling):p.parentNode.appendChild(o);return o}})});
