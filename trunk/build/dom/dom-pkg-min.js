/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 722 Jun 23 16:50
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function m(a,e){var b,d=[],n,q;if(c.isString(a)){a=c.trim(a);if(t.test(a)){if(e=s(a.slice(1)))d=[e]}else if(b=o.exec(a)){n=b[1];q=b[2];b=b[3];if(e=n?s(n):p(e))if(b)if(!n||a.indexOf(i)!==-1)d=k(b,q,e);else{if((e=s(n))&&f.hasClass(e,b))d=[e]}else if(q)d=u(e,q)}else if(a.indexOf(",")>-1)if(h.querySelectorAll)d=h.querySelectorAll(a);else{n=a.split(",");q=[];d=0;for(a=n.length;d<a;++d)q=q.concat(m(n[d],e));d=j(q)}else if(c.ExternalSelector)return c.ExternalSelector(a,
e);else l(a)}else if(a&&a.nodeType)d=[a];else if(a&&(a.item||c.isArray(a)))d=a;if(d.item)d=c.makeArray(d);return d}function p(a){if(a===r)a=h;else if(c.isString(a)&&t.test(a))a=s(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function s(a){return h.getElementById(a)}function u(a,e){return a.getElementsByTagName(e)}function k(a,e,b){b=a=b.getElementsByClassName(a);var d=0,n=0,q=a.length,v;if(e&&e!==g){b=[];for(e=e.toUpperCase();d<q;++d){v=a[d];if(v.tagName===e)b[n++]=v}}return b}
function j(a){var e=false;a.sort(function(d,n){d=d.sourceIndex-n.sourceIndex;if(d===0)e=true;return d});if(e)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a}function l(a){c.error("Unsupported selector: "+a)}var h=document,f=c.DOM,i=" ",g="*",t=/^#[\w-]+$/,o=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=h.createElement("div");a.appendChild(h.createComment(""));if(a.getElementsByTagName(g).length>0)u=function(e,b){e=e.getElementsByTagName(b);if(b===g){b=[];for(var d=
0,n=0,q;q=e[d++];)if(q.nodeType===1)b[n++]=q;e=b}return e}})();h.getElementsByClassName||(k=h.querySelectorAll?function(a,e,b){return b.querySelectorAll((e?e:"")+"."+a)}:function(a,e,b){e=b.getElementsByTagName(e||g);b=[];var d=0,n=0,q=e.length,v,w;for(a=i+a+i;d<q;++d){v=e[d];if((w=v.className)&&(i+w+i).indexOf(a)>-1)b[n++]=v}return b});c.query=m;c.get=function(a,e){return m(a,e)[0]||null};c.mix(f,{query:m,get:c.get,filter:function(a,e){var b=m(a),d,n,q,v=[];if(c.isString(e)&&(d=o.exec(e))&&!d[1]){n=
d[2];q=d[3];e=function(w){return!(n&&w.tagName!==n.toUpperCase()||q&&!f.hasClass(w,q))}}if(c.isFunction(e))v=c.filter(b,e);else if(e&&c.ExternalSelector)v=c.ExternalSelector._filter(a,e);else l(e);return v},test:function(a,e){a=m(a);return f.filter(a,e).length===a.length}})});
KISSY.add("dom-class",function(c,r){function m(k,j,l,h){if(!(j=c.trim(j)))return h?false:r;k=c.query(k);var f=0,i=k.length;j=j.split(s);for(var g;f<i;f++){g=k[f];if(g.nodeType===1){g=l(g,j,j.length);if(g!==r)return g}}if(h)return false}var p=c.DOM,s=/[\.\s]\s*\.?/,u=/[\n\t]/g;c.mix(p,{hasClass:function(k,j){return m(k,j,function(l,h,f){if(l=l.className){l=" "+l+" ";for(var i=0,g=true;i<f;i++)if(l.indexOf(" "+h[i]+" ")<0){g=false;break}if(g)return true}},true)},addClass:function(k,j){m(k,j,function(l,
h,f){var i=l.className;if(i){var g=" "+i+" ";i=i;for(var t=0;t<f;t++)if(g.indexOf(" "+h[t]+" ")<0)i+=" "+h[t];l.className=c.trim(i)}else l.className=j})},removeClass:function(k,j){m(k,j,function(l,h,f){var i=l.className;if(i)if(f){i=(" "+i+" ").replace(u," ");for(var g=0;g<f;g++)i=i.replace(" "+h[g]+" "," ");l.className=c.trim(i)}else l.className=""})},replaceClass:function(k,j,l){p.removeClass(k,j);p.addClass(k,l)},toggleClass:function(k,j,l){var h=c.isBoolean(l),f;m(k,j,function(i,g,t){for(var o=
0,a;o<t;o++){a=g[o];f=h?!l:p.hasClass(i,a);p[f?"removeClass":"addClass"](i,a)}})}})});
KISSY.add("dom-attr",function(c,r){function m(o,a){return a&&a.nodeName.toUpperCase()===o.toUpperCase()}var p=c.UA,s=p.ie,u=s&&s<8,k=document.documentElement.textContent!==r?"textContent":"innerText",j=c.DOM,l=j._isElementNode,h=/href|src|style/,f=/href|src|colspan|rowspan/,i=/\r/g,g=/radio|checkbox/,t={readonly:"readOnly"};u&&c.mix(t,{"for":"htmlFor","class":"className"});c.mix(j,{attr:function(o,a,e){if(a=c.trim(a)){a=a.toLowerCase();a=t[a]||a;if(e===r){o=c.get(o);if(!l(o))return r;var b;h.test(a)||
(b=o[a]);if(b===r)b=o.getAttribute(a);if(u)if(f.test(a))b=o.getAttribute(a,2);else if(a==="style")b=o.style.cssText;return b===null?r:b}c.each(c.query(o),function(d){if(l(d))if(u&&a==="style")d.style.cssText=e;else d.setAttribute(a,""+e)})}},removeAttr:function(o,a){c.each(c.query(o),function(e){l(e)&&e.removeAttribute(a)})},val:function(o,a){if(a===r){var e=c.get(o);if(!l(e))return r;if(m("option",e))return(e.attributes.value||{}).specified?e.value:e.text;if(m("select",e)){var b=e.selectedIndex;
o=e.options;if(b<0)return null;else if(e.type==="select-one")return j.val(o[b]);e=[];for(var d=0,n=o.length;d<n;++d)o[d].selected&&e.push(j.val(o[d]));return e}if(p.webkit&&g.test(e.type))return e.getAttribute("value")===null?"on":e.value;return(e.value||"").replace(i,"")}c.each(c.query(o),function(q){if(m("select",q)){var v=c.makeArray(a),w=q.options,x;d=0;for(n=w.length;d<n;++d){x=w[d];x.selected=c.inArray(j.val(x),v)}if(!v.length)q.selectedIndex=-1}else if(l(q))q.value=a})},text:function(o,a){if(a===
r){o=c.get(o);if(l(o))return o[k]||""}else c.each(c.query(o),function(e){if(l(e))e[k]=a})}})});
KISSY.add("dom-style",function(c,r){var m=c.DOM,p=document,s=p.documentElement,u=/width|height|top|left|right|bottom|margin|padding/i,k=/-([a-z])/ig,j=function(h,f){return f.toUpperCase()},l={};c.mix(m,{_CUSTOM_STYLES:l,_getComputedStyle:function(h,f){var i="",g=h.ownerDocument;if(h.style)i=g.defaultView.getComputedStyle(h,null)[f];return i},css:function(h,f,i){if(c.isPlainObject(f))for(var g in f)m.css(h,g,f[g]);else{if(f.indexOf("-")>0)f=f.replace(k,j);f=l[f]||f;if(i===r){h=c.get(h);g="";if(h&&
h.style){g=f.get?f.get(h):h.style[f];if(g===""&&!f.get)g=m._getComputedStyle(h,f)}return g===r?"":g}else{if(i===null||i==="")i="";else if(!isNaN(new Number(i))&&u.test(f))i+="px";(f==="width"||f==="height")&&parseFloat(i)<0||c.each(c.query(h),function(t){if(t&&t.style)f.set?f.set(t,i):(t.style[f]=i)})}}},addStyleSheet:function(h,f){var i;if(f)i=c.get(f);i||(i=m.create("<style>",{id:f}));c.get("head").appendChild(i);if(i.styleSheet)i.styleSheet.cssText=h;else i.appendChild(p.createTextNode(h))}});
if(s.style.cssFloat!==r)l["float"]="cssFloat";else if(s.style.styleFloat!==r)l["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var m=c.DOM,p=document,s=p.documentElement,u=m._CUSTOM_STYLES,k=/^-?\d+(?:px)?$/i,j=/^-?\d/;try{if(s.style.opacity===r&&s.filters)u.opacity={get:function(h){var f=100;try{f=h.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{f=h.filters("alpha").opacity}catch(g){}}return f/100+""},set:function(h,f){h=h.style;h.zoom=1;h.filter="alpha(opacity="+f*100+")"}}}catch(l){c.log("IE filters ActiveX is disabled. ex = "+l)}if(!(p.defaultView||
{}).getComputedStyle&&s.currentStyle)m._getComputedStyle=function(h,f){var i=h.style;h=h.currentStyle[f];if(!k.test(h)&&j.test(h)){var g=i.left;i.left=f==="fontSize"?"1em":h||0;h=i.pixelLeft+"px";i.left=g}return h}}});
KISSY.add("dom-offset",function(c,r){function m(g){var t=0,o=0;if(g!==k.body&&g!==j&&g[i]){g=g[i]();t=g.left+s.scrollLeft();o=g.top+s.scrollTop()}return{left:t,top:o}}function p(g,t){var o=s.css(g,h);if(o==="static")o=g.style[h]=f;var a=m(g);o=o===f;var e=l(s.css(g,"left"),10),b=l(s.css(g,"top"),10);e=c.isNumber(e)?e:o?0:g.offsetLeft;b=c.isNumber(b)?b:o?0:g.offsetTop;s.css(g,{left:e+t.left-a.left,top:b+t.top-a.top})}var s=c.DOM,u=window,k=document,j=k.documentElement,l=parseInt,h="position",f="relative",
i="getBoundingClientRect";c.mix(s,{offset:function(g,t){if(!(g=c.get(g))||!g.ownerDocument)return null;if(t===r)return m(g);p(g,t)},scrollLeft:function(){return u.pageXOffset||j.scrollLeft||k.body.scrollLeft},scrollTop:function(){return u.pageYOffset||j.scrollTop||k.body.scrollTop}})});
KISSY.add("dom-traversal",function(c,r){function m(k,j,l,h){if(!(k=c.get(k)))return null;if(j===r)j=1;var f=null,i,g;if(c.isNumber(j)&&j>=0){if(j===0)return k;i=0;g=j;j=function(){return++i===g}}for(;k=k[l];)if(u(k)&&(!j||s.test(k,j))&&(!h||h(k))){f=k;break}return f}function p(k,j,l){var h=[];var f=k=c.get(k);if(k&&l)f=k.parentNode;if(f){l=0;for(f=f.firstChild;f;f=f.nextSibling)if(u(f)&&f!==k&&(!j||s.test(f,j)))h[l++]=f}return h}var s=c.DOM,u=s._isElementNode;c.mix(s,{parent:function(k,j){return m(k,
j,"parentNode",function(l){return l.nodeType!=11})},next:function(k,j){return m(k,j,"nextSibling")},prev:function(k,j){return m(k,j,"previousSibling")},siblings:function(k,j){return p(k,j,true)},children:function(k,j){return p(k,j)}})});
KISSY.add("dom-create",function(c,r){function m(b,d){if(l(b)&&d)for(var n in d)u.attr(b,n,d[n]);return b}function p(b,d){var n=null,q;if(b&&(b.push||b.item)&&b[0]){d=d||b[0].ownerDocument;n=d.createDocumentFragment();if(b.item)b=c.makeArray(b);d=0;for(q=b.length;d<q;d++)n.appendChild(b[d])}else c.log("Unable to convert "+b+" to fragment.");return n}var s=document,u=c.DOM,k=c.UA,j=k.ie,l=u._isElementNode,h=s.createElement("div"),f=/<(\w+)/,i=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(u,{create:function(b,
d,n){if(l(b))return b;if(!(b=c.trim(b)))return null;var q=null;q=u._creators;var v,w="div",x;if(v=i.exec(b))q=(n||s).createElement(v[1]);else{if((v=f.exec(b))&&(x=v[1])&&c.isFunction(q[x=x.toLowerCase()]))w=x;b=q[w](b,n).childNodes;q=b.length===1?b[0].parentNode.removeChild(b[0]):p(b,n||s)}return m(q,d)},_creators:{div:function(b,d){d=d?d.createElement("div"):h;d.innerHTML=b;return d}},html:function(b,d){if(d===r){b=c.get(b);if(l(b))return b.innerHTML}else c.each(c.query(b),function(n){if(l(n)){n.innerHTML=
"";n.appendChild(u.create(d))}})}});var g=u._creators,t=u.create,o=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,a={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(k.gecko||j){for(var e in a)(function(b){g[e]=function(d,n){return t("<"+b+">"+d+"</"+b+">",null,n)}})(a[e]);if(j){g.script=function(b,d){d=d?d.createElement("div"):h;d.innerHTML="-"+b;d.removeChild(d.firstChild);return d};if(j<8)g.tbody=function(b,d){d=t("<table>"+b+"</table>",null,d);var n=
d.children.tags("tbody")[0];d.children.length>1&&n&&!o.test(b)&&n.parentNode.removeChild(n);return d}}c.mix(g,{optgroup:g.option,th:g.td,thead:g.tbody,tfoot:g.tbody,caption:g.tbody,colgroup:g.tbody})}});
KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(m,p){m=r.create(m);p=c.get(p);m&&p&&p.parentNode&&p.parentNode.insertBefore(m,p);return m},insertAfter:function(m,p){m=r.create(m);p=c.get(p);if(m&&p&&p.parentNode)p.nextSibling?p.parentNode.insertBefore(m,p.nextSibling):p.parentNode.appendChild(m);return m}})});
