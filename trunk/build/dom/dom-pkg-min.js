/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 527 Apr 6 22:39
*/
KISSY.add("selector",function(i,l){function o(c,e,h){var a,b=[],d,f;if(typeof c===t){c=i.trim(c);if(v.test(c)){if(e=p(c.slice(1)))b=[e]}else if(a=w.exec(c)){d=a[1];f=a[2];a=a[3];if(e=d?p(d):m(e))if(a){if(!d||c.indexOf(q)!==-1)b=n(a,f,e)}else if(f)b=r(e,f)}else if(c.indexOf(",")>-1)if(k.querySelectorAll)b=k.querySelectorAll(c);else{d=c.split(",");f=[];b=0;for(c=d.length;b<c;++b)f=f.concat(o(d[b],e));b=g(f)}}else if(c&&c.nodeType)b=[c];else if(c&&c.item)b=c;if(b.item)b=i.makeArray(b);h||j(b);return b}
function m(c){if(c===l)c=k;else if(typeof c===t&&v.test(c))c=p(c.slice(1));else if(c&&c.nodeType!==1&&c.nodeType!==9)c=null;return c}function p(c){return k.getElementById(c)}function r(c,e){return c.getElementsByTagName(e)}function n(c,e,h){h=c=h.getElementsByClassName(c);var a=0,b=0,d=c.length,f;if(e&&e!==s){h=[];for(e=e.toUpperCase();a<d;++a){f=c[a];if(f.tagName===e)h[b++]=f}}return h}function g(c){var e=false;c.sort(function(a,b){a=a.sourceIndex-b.sourceIndex;if(a===0)e=true;return a});if(e)for(var h=
1;h<c.length;h++)c[h]===c[h-1]&&c.splice(h--,1);return c}function j(c){c.each=function(e,h){i.each(c,e,h)}}var k=document,t="string",q=" ",s="*",v=/^#[\w-]+$/,w=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var c=k.createElement("div");c.appendChild(k.createComment(""));if(c.getElementsByTagName(s).length>0)r=function(e,h){e=e.getElementsByTagName(h);if(h===s){h=[];for(var a=0,b=0,d;d=e[a++];)if(d.nodeType===1)h[b++]=d;e=h}return e}})();k.getElementsByClassName||(n=k.querySelectorAll?
function(c,e,h){return h.querySelectorAll((e?e:"")+"."+c)}:function(c,e,h){e=h.getElementsByTagName(e||s);h=[];var a=0,b=0,d=e.length,f,u;for(c=q+c+q;a<d;++a){f=e[a];if((u=f.className)&&(q+u+q).indexOf(c)>-1)h[b++]=f}return h});i.query=o;i.get=function(c,e){return o(c,e,true)[0]||null}});
KISSY.add("dom-base",function(i,l){function o(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}function m(a,b){for(var d=[],f=0;a;a=a.nextSibling)if(a.nodeType===1&&a!==b)d[f++]=a;return d}function p(a,b,d){b=b||0;for(var f=0;a;a=a[d])if(a.nodeType===1&&f++===b)break;return a}function r(a,b){var d=null,f;if(a&&(a.push||a.item)&&a[0]){b=b||a[0].ownerDocument;d=b.createDocumentFragment();if(a.item)a=i.makeArray(a);b=0;for(f=a.length;b<f;++b)d.appendChild(a[b])}else i.error("unable to convert "+
a+" to fragment");return d}var n=document,g=n.documentElement.textContent!==l?"textContent":"innerText",j=i.UA,k=j.ie,t=k&&k<8,q={readonly:"readOnly"},s=/href|src|style/,v=/href|src|colspan|rowspan/,w=/\r/g,c=/radio|checkbox/,e=n.createElement("DIV"),h=/^[a-z]+$/i;t&&i.mix(q,{"for":"htmlFor","class":"className"});i.DOM={query:i.query,get:i.get,attr:function(a,b,d){if(!a||a.nodeType!==1)return l;var f;b=b.toLowerCase();b=q[b]||b;if(d===l){if(s.test(b)){if(b==="style")f=a.style.cssText}else f=a[b];
if(f===l)f=a.getAttribute(b);if(t&&v.test(b))f=a.getAttribute(b,2);return f===null?l:f}if(b==="style")a.style.cssText=d;else a.setAttribute(b,""+d)},removeAttr:function(a,b){a&&a.nodeType===1&&a.removeAttribute(b)},val:function(a,b){if(!a||a.nodeType!==1)return l;if(b===l){if(o("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(o("select",a)){b=a.selectedIndex;var d=a.options;if(b<0)return null;else if(a.type==="select-one")return i.DOM.val(d[b]);a=[];b=0;for(var f=d.length;b<
f;++b)d[b].selected&&a.push(i.DOM.val(d[b]));return a}if(j.webkit&&c.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(w,"")}if(o("select",a)){d=i.makeArray(b);var u=a.options,x;b=0;for(f=u.length;b<f;++b){x=u[b];x.selected=i.inArray(i.DOM.val(x),d)}if(!d.length)a.selectedIndex=-1}else a.value=b},css:function(a,b,d){if(d===l)return a.style[b];i.each(i.makeArray(a),function(f){f.style[b]=d})},text:function(a,b){if(b===l)return(a||{})[g]||"";if(a)a[g]=b},html:function(a,
b){if(b===l)return a.innerHTML;a.innerHTML=b},children:function(a){if(a.children)return i.makeArray(a.children);return m(a.firstChild)},siblings:function(a){return m(a.parentNode.firstChild,a)},next:function(a){return p(a,1,"nextSibling")},prev:function(a){return p(a,1,"previousSibling")},parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},create:function(a,b){if(typeof a==="string")a=i.trim(a);if(h.test(a))return(b||n).createElement(a);var d=null;d=b?b.createElement("DIV"):e;d.innerHTML=
a;a=d.childNodes;return d=a.length===1?a[0].parentNode.removeChild(a[0]):r(a,b||n)}}});
KISSY.add("dom-class",function(i,l){function o(g,j,k){if(i.isArray(g)){i.each(g,function(){j.apply(k,Array.prototype.slice.call(arguments,3))});return true}}var m=i.DOM;i.mix(m,{hasClass:function(g,j){if(!j||!g||!g.className)return false;return(" "+g.className+" ").indexOf(" "+j+" ")>-1},addClass:function(g,j){if(!o(g,r,m,j))if(j&&g)p(g,j)||(g.className+=" "+j)},removeClass:function(g,j){if(!o(g,n,m,j))if(p(g,j)){g.className=(" "+g.className+" ").replace(" "+j+" "," ");p(g,j)&&n(g,j)}},replaceClass:function(g,
j,k){n(g,j);r(g,k)},toggleClass:function(g,j,k){o(g,m.toggleClass,m,j,k)||((k!==l?k:!p(g,j))?r(g,j):n(g,j))}});var p=m.hasClass,r=m.addClass,n=m.removeClass});
