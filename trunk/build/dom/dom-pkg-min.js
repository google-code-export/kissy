/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 671 May 23 14:23
*/
KISSY.add("selector",function(j,m){function q(c,d){var f,h=[],a,b;if(typeof c===n){c=j.trim(c);if(u.test(c)){if(d=p(c.slice(1)))h=[d]}else if(f=v.exec(c)){a=f[1];b=f[2];f=f[3];if(d=a?p(a):o(d))if(f)if(!a||c.indexOf(r)!==-1)h=l(f,b,d);else{if((d=p(a))&&j.DOM.hasClass(d,f))h=[d]}else if(b)h=s(d,b)}else if(c.indexOf(",")>-1)if(g.querySelectorAll)h=g.querySelectorAll(c);else{a=c.split(",");b=[];h=0;for(c=a.length;h<c;++h)b=b.concat(q(a[h],d));h=i(b)}else if(j.externalSelector)return j.externalSelector(c,
d);else j.error("Unsupported selector: "+c)}else if(c&&c.nodeType)h=[c];else if(c&&c.item)h=c;if(h.item)h=j.makeArray(h);return h}function o(c){if(c===m)c=g;else if(typeof c===n&&u.test(c))c=p(c.slice(1));else if(c&&c.nodeType!==1&&c.nodeType!==9)c=null;return c}function p(c){return g.getElementById(c)}function s(c,d){return c.getElementsByTagName(d)}function l(c,d,f){f=c=f.getElementsByClassName(c);var h=0,a=0,b=c.length,e;if(d&&d!==t){f=[];for(d=d.toUpperCase();h<b;++h){e=c[h];if(e.tagName===d)f[a++]=
e}}return f}function i(c){var d=false;c.sort(function(h,a){h=h.sourceIndex-a.sourceIndex;if(h===0)d=true;return h});if(d)for(var f=1;f<c.length;f++)c[f]===c[f-1]&&c.splice(f--,1);return c}var g=document,n="string",r=" ",t="*",u=/^#[\w-]+$/,v=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var c=g.createElement("div");c.appendChild(g.createComment(""));if(c.getElementsByTagName(t).length>0)s=function(d,f){d=d.getElementsByTagName(f);if(f===t){f=[];for(var h=0,a=0,b;b=d[h++];)if(b.nodeType===
1)f[a++]=b;d=f}return d}})();g.getElementsByClassName||(l=g.querySelectorAll?function(c,d,f){return f.querySelectorAll((d?d:"")+"."+c)}:function(c,d,f){d=f.getElementsByTagName(d||t);f=[];var h=0,a=0,b=d.length,e,k;for(c=r+c+r;h<b;++h){e=d[h];if((k=e.className)&&(r+k+r).indexOf(c)>-1)f[a++]=e}return f});j.query=q;j.get=function(c,d){return q(c,d)[0]||null}});
KISSY.add("dom-base",function(j,m){function q(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}function o(a,b){for(var e=[],k=0;a;a=a.nextSibling)if(a.nodeType===1&&a!==b)e[k++]=a;return e}function p(a,b,e){b=b||0;for(var k=0;a;a=a[e])if(a.nodeType===1&&k++===b)break;return a}function s(a,b){var e=null,k;if(a&&(a.push||a.item)&&a[0]){b=b||a[0].ownerDocument;e=b.createDocumentFragment();if(a.item)a=j.makeArray(a);b=0;for(k=a.length;b<k;++b)e.appendChild(a[b])}else j.error("unable to convert "+
a+" to fragment");return e}var l=document,i=l.documentElement.textContent!==m?"textContent":"innerText",g=j.UA,n=g.ie,r=n&&n<8,t={readonly:"readOnly"},u=/href|src|style/,v=/href|src|colspan|rowspan/,c=/\r/g,d=/radio|checkbox/,f=l.createElement("DIV"),h=/^[a-z]+$/i;r&&j.mix(t,{"for":"htmlFor","class":"className"});j.DOM={query:j.query,get:j.get,attr:function(a,b,e){if(!a||a.nodeType!==1)return m;var k;b=b.toLowerCase();b=t[b]||b;if(e===m){if(u.test(b)){if(b==="style")k=a.style.cssText}else k=a[b];
if(k===m)k=a.getAttribute(b);if(r&&v.test(b))k=a.getAttribute(b,2);return k===null?m:k}if(b==="style")a.style.cssText=e;else a.setAttribute(b,""+e)},removeAttr:function(a,b){a&&a.nodeType===1&&a.removeAttribute(b)},val:function(a,b){if(!a||a.nodeType!==1)return m;if(b===m){if(q("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(q("select",a)){b=a.selectedIndex;var e=a.options;if(b<0)return null;else if(a.type==="select-one")return j.DOM.val(e[b]);a=[];b=0;for(var k=e.length;b<
k;++b)e[b].selected&&a.push(j.DOM.val(e[b]));return a}if(g.webkit&&d.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(c,"")}if(q("select",a)){e=j.makeArray(b);var x=a.options,w;b=0;for(k=x.length;b<k;++b){w=x[b];w.selected=j.inArray(j.DOM.val(w),e)}if(!e.length)a.selectedIndex=-1}else a.value=b},css:function(a,b,e){if(e===m)return a.style[b];j.each(j.makeArray(a),function(k){k.style[b]=e})},text:function(a,b){if(b===m)return(a||{})[i]||"";if(a)a[i]=b},html:function(a,
b){if(b===m)return a.innerHTML;a.innerHTML=b},children:function(a){if(a.children)return j.makeArray(a.children);return o(a.firstChild)},siblings:function(a){return o(a.parentNode.firstChild,a)},next:function(a){return p(a,1,"nextSibling")},prev:function(a){return p(a,1,"previousSibling")},parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},create:function(a,b){if(typeof a==="string")a=j.trim(a);if(h.test(a))return(b||l).createElement(a);var e=null;e=b?b.createElement("DIV"):f;e.innerHTML=
a;a=e.childNodes;return e=a.length===1?a[0].parentNode.removeChild(a[0]):s(a,b||l)},addStyleSheet:function(a,b){var e=l.getElementsByTagName("head")[0],k=l.createElement("style");b&&(k.id=b);e.appendChild(k);if(k.styleSheet)k.styleSheet.cssText=a;else k.appendChild(l.createTextNode(a))}}});
KISSY.add("dom-class",function(j,m){function q(i,g,n){if(j.isArray(i)){j.each(i,function(){g.apply(n,Array.prototype.slice.call(arguments,3))});return true}}var o=j.DOM;j.mix(o,{hasClass:function(i,g){if(!g||!i||!i.className)return false;return(" "+i.className+" ").indexOf(" "+g+" ")>-1},addClass:function(i,g){if(!q(i,s,o,g))if(g&&i)p(i,g)||(i.className+=" "+g)},removeClass:function(i,g){if(!q(i,l,o,g))if(p(i,g)){i.className=(" "+i.className+" ").replace(" "+g+" "," ");p(i,g)&&l(i,g)}},replaceClass:function(i,
g,n){l(i,g);s(i,n)},toggleClass:function(i,g,n){q(i,o.toggleClass,o,g,n)||((n!==m?n:!p(i,g))?s(i,g):l(i,g))}});var p=o.hasClass,s=o.addClass,l=o.removeClass});
