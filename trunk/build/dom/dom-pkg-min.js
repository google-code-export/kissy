/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 850 Jul 12 15:09
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function p(a,b){var h,k=[],s,u;b=o(b);if(c.isString(a)){a=c.trim(a);if(e.test(a)){if(a=t(a.slice(1)))k=[a]}else if(h=m.exec(a)){s=h[1];u=h[2];h=h[3];if(b=s?t(s):b)if(h)if(!s||a.indexOf(n)!==-1)k=g(h,u,b);else{if((a=t(s))&&q.hasClass(a,h))k=[a]}else if(u)k=x(b,u)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else d(a)}else if(a&&a.nodeType)k=[a];else if(a&&(c.isArray(a)||a.item||a.getDOMNode))k=a;if(k.item)k=c.makeArray(k);return k}function o(a){if(a===
r)a=i;else if(c.isString(a)&&e.test(a))a=t(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function t(a){return i.getElementById(a)}function x(a,b){return a.getElementsByTagName(b)}function g(a,b,h){h=a=h.getElementsByClassName(a);var k=0,s=0,u=a.length,v;if(b&&b!==f){h=[];for(b=b.toUpperCase();k<u;++k){v=a[k];if(v.tagName===b)h[s++]=v}}return h}function d(a){c.error("Unsupported selector: "+a)}var i=document,q=c.DOM,n=" ",f="*",e=/^#[\w-]+$/,m=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var a=i.createElement("div");a.appendChild(i.createComment(""));if(a.getElementsByTagName(f).length>0)x=function(b,h){b=b.getElementsByTagName(h);if(h===f){h=[];for(var k=0,s=0,u;u=b[k++];)if(u.nodeType===1)h[s++]=u;b=h}return b}})();i.getElementsByClassName||(g=i.querySelectorAll?function(a,b,h){return h.querySelectorAll((b?b:"")+"."+a)}:function(a,b,h){b=h.getElementsByTagName(b||f);h=[];var k=0,s=0,u=b.length,v,j;for(a=n+a+n;k<u;++k){v=b[k];if((j=v.className)&&(n+j+n).indexOf(a)>-1)h[s++]=
v}return h});c.query=p;c.get=function(a,b){return p(a,b)[0]||null};c.mix(q,{query:p,get:c.get,filter:function(a,b){var h=p(a),k,s,u,v=[];if(c.isString(b)&&(k=m.exec(b))&&!k[1]){s=k[2];u=k[3];b=function(j){return!(s&&j.tagName!==s.toUpperCase()||u&&!q.hasClass(j,u))}}if(c.isFunction(b))v=c.filter(h,b);else if(b&&c.ExternalSelector)v=c.ExternalSelector._filter(a,b);else d(b);return v},test:function(a,b){a=p(a);return q.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function p(g,d,i,q){if(!(d=c.trim(d)))return q?false:r;g=c.query(g);var n=0,f=g.length;d=d.split(t);for(var e;n<f;n++){e=g[n];if(e.nodeType===1){e=i(e,d,d.length);if(e!==r)return e}}if(q)return false}var o=c.DOM,t=/[\.\s]\s*\.?/,x=/[\n\t]/g;c.mix(o,{hasClass:function(g,d){return p(g,d,function(i,q,n){if(i=i.className){i=" "+i+" ";for(var f=0,e=true;f<n;f++)if(i.indexOf(" "+q[f]+" ")<0){e=false;break}if(e)return true}},true)},addClass:function(g,d){p(g,d,function(i,
q,n){var f=i.className;if(f){var e=" "+f+" ";f=f;for(var m=0;m<n;m++)if(e.indexOf(" "+q[m]+" ")<0)f+=" "+q[m];i.className=c.trim(f)}else i.className=d})},removeClass:function(g,d){p(g,d,function(i,q,n){var f=i.className;if(f)if(n){f=(" "+f+" ").replace(x," ");for(var e=0,m;e<n;e++)for(m=" "+q[e]+" ";f.indexOf(m)>=0;)f=f.replace(m," ");i.className=c.trim(f)}else i.className=""})},replaceClass:function(g,d,i){o.removeClass(g,d);o.addClass(g,i)},toggleClass:function(g,d,i){var q=c.isBoolean(i),n;p(g,
d,function(f,e,m){for(var a=0,b;a<m;a++){b=e[a];n=q?!i:o.hasClass(f,b);o[n?"removeClass":"addClass"](f,b)}})}})});
KISSY.add("dom-attr",function(c,r){function p(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}var o=c.UA,t=o.ie,x=t&&t<8,g=document.documentElement.textContent!==r?"textContent":"innerText",d=c.DOM,i=d._isElementNode,q=/href|src|style/,n=/href|src|colspan|rowspan/,f=/\r/g,e=/radio|checkbox/,m={readonly:"readOnly"};x&&c.mix(m,{"for":"htmlFor","class":"className"});c.mix(d,{attr:function(a,b,h){if(b=c.trim(b)){b=b.toLowerCase();b=m[b]||b;if(h===r){a=c.get(a);if(!i(a))return r;var k;q.test(b)||
(k=a[b]);if(k===r)k=a.getAttribute(b);if(x)if(n.test(b))k=a.getAttribute(b,2);else if(b==="style")k=a.style.cssText;return k===null?r:k}c.each(c.query(a),function(s){if(i(s))if(x&&b==="style")s.style.cssText=h;else s.setAttribute(b,""+h)})}},removeAttr:function(a,b){c.each(c.query(a),function(h){i(h)&&h.removeAttribute(b)})},val:function(a,b){if(b===r){var h=c.get(a);if(!i(h))return r;if(p("option",h))return(h.attributes.value||{}).specified?h.value:h.text;if(p("select",h)){var k=h.selectedIndex;
a=h.options;if(k<0)return null;else if(h.type==="select-one")return d.val(a[k]);h=[];for(var s=0,u=a.length;s<u;++s)a[s].selected&&h.push(d.val(a[s]));return h}if(o.webkit&&e.test(h.type))return h.getAttribute("value")===null?"on":h.value;return(h.value||"").replace(f,"")}c.each(c.query(a),function(v){if(p("select",v)){if(c.isNumber(b))b+="";var j=c.makeArray(b),l=v.options,w;s=0;for(u=l.length;s<u;++s){w=l[s];w.selected=c.inArray(d.val(w),j)}if(!j.length)v.selectedIndex=-1}else if(i(v))v.value=b})},
text:function(a,b){if(b===r){a=c.get(a);if(i(a))return a[g]||""}else c.each(c.query(a),function(h){if(i(h))h[g]=b})}})});
KISSY.add("dom-style",function(c,r){function p(f,e){var m=c.get(f),a=e===g?m.offsetWidth:m.offsetHeight;c.each(e===g?["Left","Right"]:["Top","Bottom"],function(b){a-=parseFloat(o._getComputedStyle(m,"padding"+b))||0;a-=parseFloat(o._getComputedStyle(m,"border"+b+"Width"))||0});return a}var o=c.DOM,t=document,x=t.documentElement,g="width",d=/width|height|top|left|right|bottom|margin|padding/i,i=/-([a-z])/ig,q=function(f,e){return e.toUpperCase()},n={};c.mix(o,{_CUSTOM_STYLES:n,_getComputedStyle:function(f,
e){var m="",a=f.ownerDocument;if(f.style)m=a.defaultView.getComputedStyle(f,null)[e];return m},css:function(f,e,m){if(c.isPlainObject(e))for(var a in e)o.css(f,a,e[a]);else{if(e.indexOf("-")>0)e=e.replace(i,q);e=n[e]||e;if(m===r){f=c.get(f);a="";if(f&&f.style){a=e.get?e.get(f):f.style[e];if(a===""&&!e.get)a=o._getComputedStyle(f,e)}return a===r?"":a}else{if(m===null||m==="")m="";else if(!isNaN(new Number(m))&&d.test(e))m+="px";(e===g||e==="height")&&parseFloat(m)<0||c.each(c.query(f),function(b){if(b&&
b.style)e.set?e.set(b,m):(b.style[e]=m)})}}},width:function(f,e){if(e===r)return p(f,g);else o.css(f,g,e)},height:function(f,e){if(e===r)return p(f,"height");else o.css(f,"height",e)},addStyleSheet:function(f,e){var m;if(e)m=c.get(e);m||(m=o.create("<style>",{id:e}));c.get("head").appendChild(m);if(m.styleSheet)m.styleSheet.cssText=f;else m.appendChild(t.createTextNode(f))}});if(x.style.cssFloat!==r)n["float"]="cssFloat";else if(x.style.styleFloat!==r)n["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var p=c.DOM,o=document,t=o.documentElement,x=p._CUSTOM_STYLES,g=/^-?\d+(?:px)?$/i,d=/^-?\d/,i=/^auto$/i,q=/^width|height$/;try{if(t.style.opacity===r&&t.filters)x.opacity={get:function(f){var e=100;try{e=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(m){try{e=f.filters("alpha").opacity}catch(a){}}return e/100+""},set:function(f,e){f=f.style;f.zoom=1;f.filter="alpha(opacity="+e*100+")"}}}catch(n){c.log("IE filters ActiveX is disabled. ex = "+
n)}if(!(o.defaultView||{}).getComputedStyle&&t.currentStyle)p._getComputedStyle=function(f,e){var m=f.style,a=f.currentStyle[e];if(q.test(e))a=p[e](f)+"px";else if(!g.test(a)&&d.test(a)||i.test(a)){f=m.left;m.left=e==="fontSize"?"1em":a||0;a=m.pixelLeft+"px";m.left=f}return a}}});
KISSY.add("dom-offset",function(c,r){function p(b){var h=0,k=0;if(b!==d.body&&b!==i&&b[a]){b=b[a]();h=b.left+t.scrollLeft();k=b.top+t.scrollTop()}return{left:h,top:k}}function o(b,h){var k=t.css(b,e);if(k==="static")k=b.style[e]=m;var s=p(b);k=k===m;var u=f(t.css(b,"left"),10),v=f(t.css(b,"top"),10);u=c.isNumber(u)?u:k?0:b.offsetLeft;v=c.isNumber(v)?v:k?0:b.offsetTop;t.css(b,{left:u+h.left-s.left,top:v+h.top-s.top})}var t=c.DOM,x=c.UA,g=window,d=document,i=d.documentElement,q=d.compatMode==="CSS1Compat",
n=Math.max,f=parseInt,e="position",m="relative",a="getBoundingClientRect";c.mix(t,{offset:function(b,h){if(!(b=c.get(b))||!b.ownerDocument)return null;if(h===r)return p(b);o(b,h)},scrollLeft:function(){return g.pageXOffset||i.scrollLeft||d.body.scrollLeft},scrollTop:function(){return g.pageYOffset||i.scrollTop||d.body.scrollTop},docHeight:function(){return n(!q?d.body.scrollHeight:i.scrollHeight,t.viewportHeight())},docWidth:function(){return n(!q?d.body.scrollWidth:i.scrollWidth,t.viewportWidth())},
viewportHeight:function(){return x.ie?q?i.clientHeight:d.body.clientHeight:g.innerHeight},viewportWidth:function(){return!q&&!x.opera?d.body.clientWidth:x.ie?i.clientWidth:g.innerWidth}})});
KISSY.add("dom-traversal",function(c,r){function p(g,d,i,q){if(!(g=c.get(g)))return null;if(d===r)d=1;var n=null,f,e;if(c.isNumber(d)&&d>=0){if(d===0)return g;f=0;e=d;d=function(){return++f===e}}for(;g=g[i];)if(x(g)&&(!d||t.test(g,d))&&(!q||q(g))){n=g;break}return n}function o(g,d,i){var q=[];var n=g=c.get(g);if(g&&i)n=g.parentNode;if(n){i=0;for(n=n.firstChild;n;n=n.nextSibling)if(x(n)&&n!==g&&(!d||t.test(n,d)))q[i++]=n}return q}var t=c.DOM,x=t._isElementNode;c.mix(t,{parent:function(g,d){return p(g,
d,"parentNode",function(i){return i.nodeType!=11})},next:function(g,d){return p(g,d,"nextSibling")},prev:function(g,d){return p(g,d,"previousSibling")},siblings:function(g,d){return o(g,d,true)},children:function(g,d){return o(g,d)},contains:function(g,d){var i=false;if((g=c.get(g))&&(d=c.get(d)))if(g.contains)return g.contains(d);else if(g.compareDocumentPosition)return!!(g.compareDocumentPosition(d)&16);else for(;!i&&(d=d.parentNode);)i=d==g;return i}})});
KISSY.add("dom-create",function(c,r){function p(j,l){if(n(j)&&l)for(var w in l)d.attr(j,w,l[w]);return j}function o(j,l){var w=null,y;if(j&&(j.push||j.item)&&j[0]){l=l||j[0].ownerDocument;w=l.createDocumentFragment();if(j.item)j=c.makeArray(j);l=0;for(y=j.length;l<y;l++)w.appendChild(j[l])}else c.log("Unable to convert "+j+" to fragment.");return w}function t(j,l,w,y){if(w){var A=c.guid("ks-tmp-");l+='<span id="'+A+'"></span>';c.available(A,function(){var B=c.get("head"),z,C,D,E,G,F;for(a.lastIndex=
0;z=a.exec(l);)if((D=(C=z[1])?C.match(b):false)&&D[2]){z=g.createElement("script");z.src=D[2];if((E=C.match(h))&&E[2])z.charset=E[2];z.async=true;B.appendChild(z)}else if((F=z[2])&&F.length>0)c.globalEval(F);(G=g.getElementById(A))&&d.remove(G);c.isFunction(y)&&y()});x(j,l)}else{x(j,l);c.isFunction(y)&&y()}}function x(j,l){l=l.replace(a,"");try{j.innerHTML=l}catch(w){for(;j.firstChild;)j.removeChild(j.firstChild);l&&j.appendChild(d.create(l))}}var g=document,d=c.DOM,i=c.UA,q=i.ie,n=d._isElementNode,
f=g.createElement("div"),e=/<(\w+)/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/\ssrc=(['"])(.*?)\1/i,h=/\scharset=(['"])(.*?)\1/i;c.mix(d,{create:function(j,l,w){if(n(j))return j;if(!(j=c.trim(j)))return null;var y=null;y=d._creators;var A,B="div",z;if(A=m.exec(j))y=(w||g).createElement(A[1]);else{if((A=e.exec(j))&&(z=A[1])&&c.isFunction(y[z=z.toLowerCase()]))B=z;j=y[B](j,w).childNodes;y=j.length===1?j[0].parentNode.removeChild(j[0]):o(j,w||g)}return p(y,l)},_creators:{div:function(j,
l){l=l?l.createElement("div"):f;l.innerHTML=j;return l}},html:function(j,l,w,y){if(l===r){j=c.get(j);if(n(j))return j.innerHTML}else c.each(c.query(j),function(A){n(A)&&t(A,l,w,y)})},remove:function(j){c.each(c.query(j),function(l){n(l)&&l.parentNode&&l.parentNode.removeChild(l)})}});if(i.gecko||q){var k=d._creators,s=d.create,u=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/;i={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var v in i)(function(j){k[v]=
function(l,w){return s("<"+j+">"+l+"</"+j+">",null,w)}})(i[v]);if(q){k.script=function(j,l){l=l?l.createElement("div"):f;l.innerHTML="-"+j;l.removeChild(l.firstChild);return l};if(q<8)k.tbody=function(j,l){l=s("<table>"+j+"</table>",null,l);var w=l.children.tags("tbody")[0];l.children.length>1&&w&&!u.test(j)&&w.parentNode.removeChild(w);return l}}c.mix(k,{optgroup:k.option,th:k.td,thead:k.tbody,tfoot:k.tbody,caption:k.tbody,colgroup:k.tbody})}});
KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(p,o){p=r.create(p);o=c.get(o);p&&o&&o.parentNode&&o.parentNode.insertBefore(p,o);return p},insertAfter:function(p,o){p=r.create(p);o=c.get(o);if(p&&o&&o.parentNode)o.nextSibling?o.parentNode.insertBefore(p,o.nextSibling):o.parentNode.appendChild(p);return p}})});
