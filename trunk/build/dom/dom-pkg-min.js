/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 865 Jul 17 21:52
*/
KISSY.add("dom",function(b){b.DOM={_isElementNode:function(q){return q&&q.nodeType===1}}});
KISSY.add("selector",function(b,q){function p(c,g){var f,d=[],j,n;g=r(g);if(b.isString(c)){c=b.trim(c);if(s.test(c)){if(c=u(c.slice(1)))d=[c]}else if(f=y.exec(c)){j=f[1];n=f[2];f=f[3];if(g=j?u(j):g)if(f)if(!j||c.indexOf(l)!==-1)d=i(f,n,g);else{if((c=u(j))&&w.hasClass(c,f))d=[c]}else if(n)d=t(g,n)}else if(b.ExternalSelector)return b.ExternalSelector(c,g);else h(c)}else if(c&&c.nodeType)d=[c];else if(c&&(b.isArray(c)||c.item||c.getDOMNode))d=c;if(d.item)d=b.makeArray(d);return d}function r(c){if(c===
q)c=k;else if(b.isString(c)&&s.test(c))c=u(c.slice(1));else if(c&&c.nodeType!==1&&c.nodeType!==9)c=null;return c}function u(c){return k.getElementById(c)}function t(c,g){return c.getElementsByTagName(g)}function i(c,g,f){f=c=f.getElementsByClassName(c);var d=0,j=0,n=c.length,x;if(g&&g!==m){f=[];for(g=g.toUpperCase();d<n;++d){x=c[d];if(x.tagName===g)f[j++]=x}}return f}function h(c){b.error("Unsupported selector: "+c)}var k=document,w=b.DOM,l=" ",m="*",s=/^#[\w-]+$/,y=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var c=k.createElement("div");c.appendChild(k.createComment(""));if(c.getElementsByTagName(m).length>0)t=function(g,f){g=g.getElementsByTagName(f);if(f===m){f=[];for(var d=0,j=0,n;n=g[d++];)if(n.nodeType===1)f[j++]=n;g=f}return g}})();k.getElementsByClassName||(i=k.querySelectorAll?function(c,g,f){return f.querySelectorAll((g?g:"")+"."+c)}:function(c,g,f){g=f.getElementsByTagName(g||m);f=[];var d=0,j=0,n=g.length,x,a;for(c=l+c+l;d<n;++d){x=g[d];if((a=x.className)&&(l+a+l).indexOf(c)>-1)f[j++]=
x}return f});b.query=p;b.get=function(c,g){return p(c,g)[0]||null};b.mix(w,{query:p,get:b.get,filter:function(c,g){var f=p(c),d,j,n,x=[];if(b.isString(g)&&(d=y.exec(g))&&!d[1]){j=d[2];n=d[3];g=function(a){return!(j&&a.tagName!==j.toUpperCase()||n&&!w.hasClass(a,n))}}if(b.isFunction(g))x=b.filter(f,g);else if(g&&b.ExternalSelector)x=b.ExternalSelector._filter(c,g);else h(g);return x},test:function(c,g){c=p(c);return w.filter(c,g).length===c.length}})});
KISSY.add("dom-class",function(b,q){function p(i,h,k,w){if(!(h=b.trim(h)))return w?false:q;i=b.query(i);var l=0,m=i.length;h=h.split(u);for(var s;l<m;l++){s=i[l];if(s.nodeType===1){s=k(s,h,h.length);if(s!==q)return s}}if(w)return false}var r=b.DOM,u=/[\.\s]\s*\.?/,t=/[\n\t]/g;b.mix(r,{hasClass:function(i,h){return p(i,h,function(k,w,l){if(k=k.className){k=" "+k+" ";for(var m=0,s=true;m<l;m++)if(k.indexOf(" "+w[m]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(i,h){p(i,h,function(k,
w,l){var m=k.className;if(m){var s=" "+m+" ";m=m;for(var y=0;y<l;y++)if(s.indexOf(" "+w[y]+" ")<0)m+=" "+w[y];k.className=b.trim(m)}else k.className=h})},removeClass:function(i,h){p(i,h,function(k,w,l){var m=k.className;if(m)if(l){m=(" "+m+" ").replace(t," ");for(var s=0,y;s<l;s++)for(y=" "+w[s]+" ";m.indexOf(y)>=0;)m=m.replace(y," ");k.className=b.trim(m)}else k.className=""})},replaceClass:function(i,h,k){r.removeClass(i,h);r.addClass(i,k)},toggleClass:function(i,h,k){var w=b.isBoolean(k),l;p(i,
h,function(m,s,y){for(var c=0,g;c<y;c++){g=s[c];l=w?!k:r.hasClass(m,g);r[l?"removeClass":"addClass"](m,g)}})}})});
KISSY.add("dom-attr",function(b,q){function p(c,g){return g&&g.nodeName.toUpperCase()===c.toUpperCase()}var r=b.UA,u=r.ie,t=u&&u<8,i=document.documentElement.textContent!==q?"textContent":"innerText",h=b.DOM,k=h._isElementNode,w=/href|src|style/,l=/href|src|colspan|rowspan/,m=/\r/g,s=/radio|checkbox/,y={readonly:"readOnly"};t&&b.mix(y,{"for":"htmlFor","class":"className"});b.mix(h,{attr:function(c,g,f){if(g=b.trim(g)){g=g.toLowerCase();g=y[g]||g;if(f===q){c=b.get(c);if(!k(c))return q;var d;w.test(g)||
(d=c[g]);if(d===q)d=c.getAttribute(g);if(t)if(l.test(g))d=c.getAttribute(g,2);else if(g==="style")d=c.style.cssText;return d===null?q:d}b.each(b.query(c),function(j){if(k(j))if(t&&g==="style")j.style.cssText=f;else j.setAttribute(g,""+f)})}},removeAttr:function(c,g){b.each(b.query(c),function(f){k(f)&&f.removeAttribute(g)})},val:function(c,g){if(g===q){var f=b.get(c);if(!k(f))return q;if(p("option",f))return(f.attributes.value||{}).specified?f.value:f.text;if(p("select",f)){var d=f.selectedIndex;
c=f.options;if(d<0)return null;else if(f.type==="select-one")return h.val(c[d]);f=[];for(var j=0,n=c.length;j<n;++j)c[j].selected&&f.push(h.val(c[j]));return f}if(r.webkit&&s.test(f.type))return f.getAttribute("value")===null?"on":f.value;return(f.value||"").replace(m,"")}b.each(b.query(c),function(x){if(p("select",x)){if(b.isNumber(g))g+="";var a=b.makeArray(g),e=x.options,o;j=0;for(n=e.length;j<n;++j){o=e[j];o.selected=b.inArray(h.val(o),a)}if(!a.length)x.selectedIndex=-1}else if(k(x))x.value=g})},
text:function(c,g){if(g===q){c=b.get(c);if(k(c))return c[i]||""}else b.each(b.query(c),function(f){if(k(f))f[i]=g})}})});
KISSY.add("dom-style",function(b,q){function p(f,d){var j=b.get(f),n=d===k?j.offsetWidth:j.offsetHeight;b.each(d===k?["Left","Right"]:["Top","Bottom"],function(x){n-=parseFloat(u._getComputedStyle(j,"padding"+x))||0;n-=parseFloat(u._getComputedStyle(j,"border"+x+"Width"))||0});return n}function r(f,d,j){var n=j;if(j===w&&m.test(d)){n=0;if(u.css(f,"position")==="absolute"){j=f[d==="left"?"offsetLeft":"offsetTop"];if(t.ie===8||t.opera)j-=l(u.css(f.offsetParent,"border-"+d+"-width"))||0;n=j-(l(u.css(f,
"margin-"+d))||0)}}return n}var u=b.DOM,t=b.UA,i=document,h=i.documentElement,k="width",w="auto",l=parseInt,m=/^left|top$/,s=/width|height|top|left|right|bottom|margin|padding/i,y=/-([a-z])/ig,c=function(f,d){return d.toUpperCase()},g={};b.mix(u,{_CUSTOM_STYLES:g,_getComputedStyle:function(f,d){var j="",n=f.ownerDocument;if(f.style)j=n.defaultView.getComputedStyle(f,null)[d];return j},css:function(f,d,j){if(b.isPlainObject(d))for(var n in d)u.css(f,n,d[n]);else{if(d.indexOf("-")>0)d=d.replace(y,c);
d=g[d]||d;if(j===q){f=b.get(f);n="";if(f&&f.style){n=d.get?d.get(f):f.style[d];if(n===""&&!d.get)n=r(f,d,u._getComputedStyle(f,d))}return n===q?"":n}else{if(j===null||j==="")j="";else if(!isNaN(new Number(j))&&s.test(d))j+="px";(d===k||d==="height")&&parseFloat(j)<0||b.each(b.query(f),function(x){if(x&&x.style)d.set?d.set(x,j):(x.style[d]=j)})}}},width:function(f,d){if(d===q)return p(f,k);else u.css(f,k,d)},height:function(f,d){if(d===q)return p(f,"height");else u.css(f,"height",d)},addStyleSheet:function(f,
d){var j;if(d)j=b.get(d);j||(j=u.create("<style>",{id:d}));b.get("head").appendChild(j);if(j.styleSheet)j.styleSheet.cssText=f;else j.appendChild(i.createTextNode(f))}});if(h.style.cssFloat!==q)g["float"]="cssFloat";else if(h.style.styleFloat!==q)g["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,q){if(b.UA.ie){var p=b.DOM,r=document,u=r.documentElement,t=p._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,h=/^-?\d/,k=/^width|height$/;try{if(u.style.opacity===q&&u.filters)t.opacity={get:function(l){var m=100;try{m=l.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{m=l.filters("alpha").opacity}catch(y){}}return m/100+""},set:function(l,m){l=l.style;l.zoom=1;l.filter="alpha(opacity="+m*100+")"}}}catch(w){b.log("IE filters ActiveX is disabled. ex = "+w)}if(!(r.defaultView||
{}).getComputedStyle&&u.currentStyle)p._getComputedStyle=function(l,m){var s=l.style,y=l.currentStyle[m];if(k.test(m))y=p[m](l)+"px";else if(!i.test(y)&&h.test(y)){l=s.left;s.left=m==="fontSize"?"1em":y||0;y=s.pixelLeft+"px";s.left=l}return y}}});
KISSY.add("dom-offset",function(b,q){function p(a){var e=0,o=0,v=u(a[g]);if(a[x]){a=a[x]();e=a[f]+t[j](v);o=a[d]+t[n](v)}return{left:e,top:o}}function r(a,e){if(t.css(a,s)==="static")a.style[s]=y;var o=p(a),v={},z,B;for(B in e){z=m(t.css(a,B),10)||0;v[B]=z+e[B]-o[B]}t.css(a,v)}function u(a){return a&&"scrollTo"in a&&a[c]?a:a&&a.nodeType===9?a.defaultView||a.parentWindow:false}var t=b.DOM,i=window,h=document,k=t._isElementNode,w=h.compatMode==="CSS1Compat",l=Math.max,m=parseInt,s="position",y="relative",
c="document",g="ownerDocument",f="left",d="top",j="scrollLeft",n="scrollTop",x="getBoundingClientRect";b.mix(t,{offset:function(a,e){if(!(a=b.get(a))||!a[g])return null;if(e===q)return p(a);r(a,e)},scrollIntoView:function(a,e,o,v){if((a=b.get(a))&&a[g]){e=b.get(e);v=v===q?true:!!v;o=o===q?true:!!o;if(!k(e))return a.scrollIntoView(o);var z=t.offset(a),B=t.offset(e),A={left:z[f]-B[f],top:z[d]-B[d]};z=e.clientHeight;B=e.clientWidth;var C=t[j](e),D=t[n](e),F=C+B,G=D+z,E=a.offsetHeight;a=a.offsetWidth;
var H=A.left+C-(m(t.css(e,"borderLeftWidth"))||0);A=A.top+D-(m(t.css(e,"borderTopWidth"))||0);var I=H+a,J=A+E;if(E>z||A<D||o)e[n]=A;else if(J>G)e[n]=J-z;if(v)if(a>B||H<C||o)e[j]=H;else if(I>F)e[j]=I-B}}});b.each(["Left","Top"],function(a,e){var o="scroll"+a;t[o]=function(v){var z=0,B=v===q?i:u(v),A;if(B&&(A=B[c]))z=B[e?"pageYOffset":"pageXOffset"]||A.documentElement[o]||A.body[o];else if(k(v=b.get(v)))z=v[o];return z}});b.each(["Width","Height"],function(a){t["doc"+a]=function(e){e=e||h;return l(w?
e.documentElement["scroll"+a]:e.body["scroll"+a],t["viewport"+a](e))};t["viewport"+a]=function(e){var o="inner"+a;e=u(e)||i;var v=e[c];return o in e?e[o]:w?v.documentElement["client"+a]:v.body["client"+a]}})});
KISSY.add("dom-traversal",function(b,q){function p(i,h,k,w){if(!(i=b.get(i)))return null;if(h===q)h=1;var l=null,m,s;if(b.isNumber(h)&&h>=0){if(h===0)return i;m=0;s=h;h=function(){return++m===s}}for(;i=i[k];)if(t(i)&&(!h||u.test(i,h))&&(!w||w(i))){l=i;break}return l}function r(i,h,k){var w=[];var l=i=b.get(i);if(i&&k)l=i.parentNode;if(l){k=0;for(l=l.firstChild;l;l=l.nextSibling)if(t(l)&&l!==i&&(!h||u.test(l,h)))w[k++]=l}return w}var u=b.DOM,t=u._isElementNode;b.mix(u,{parent:function(i,h){return p(i,
h,"parentNode",function(k){return k.nodeType!=11})},next:function(i,h){return p(i,h,"nextSibling")},prev:function(i,h){return p(i,h,"previousSibling")},siblings:function(i,h){return r(i,h,true)},children:function(i,h){return r(i,h)},contains:function(i,h){var k=false;if((i=b.get(i))&&(h=b.get(h)))if(i.contains)return i.contains(h);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(h)&16);else for(;!k&&(h=h.parentNode);)k=h==i;return k}})});
KISSY.add("dom-create",function(b,q){function p(a,e){if(l(a)&&e)for(var o in e)h.attr(a,o,e[o]);return a}function r(a,e){var o=null,v;if(a&&(a.push||a.item)&&a[0]){e=e||a[0].ownerDocument;o=e.createDocumentFragment();if(a.item)a=b.makeArray(a);e=0;for(v=a.length;e<v;e++)o.appendChild(a[e])}else b.log("Unable to convert "+a+" to fragment.");return o}function u(a,e,o,v){if(o){var z=b.guid("ks-tmp-");e+='<span id="'+z+'"></span>';b.available(z,function(){var B=b.get("head"),A,C,D,F,G,E;for(c.lastIndex=
0;A=c.exec(e);)if((D=(C=A[1])?C.match(g):false)&&D[2]){A=i.createElement("script");A.src=D[2];if((F=C.match(f))&&F[2])A.charset=F[2];A.async=true;B.appendChild(A)}else if((E=A[2])&&E.length>0)b.globalEval(E);(G=i.getElementById(z))&&h.remove(G);b.isFunction(v)&&v()});t(a,e)}else{t(a,e);b.isFunction(v)&&v()}}function t(a,e){e=e.replace(c,"");try{a.innerHTML=e}catch(o){for(;a.firstChild;)a.removeChild(a.firstChild);e&&a.appendChild(h.create(e))}}var i=document,h=b.DOM,k=b.UA,w=k.ie,l=h._isElementNode,
m=i.createElement("div"),s=/<(\w+)/,y=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,c=/<script([^>]*)>([\s\S]*?)<\/script>/ig,g=/\ssrc=(['"])(.*?)\1/i,f=/\scharset=(['"])(.*?)\1/i;b.mix(h,{create:function(a,e,o){if(l(a))return a;if(!(a=b.trim(a)))return null;var v=null;v=h._creators;var z,B="div",A;if(z=y.exec(a))v=(o||i).createElement(z[1]);else{if((z=s.exec(a))&&(A=z[1])&&b.isFunction(v[A=A.toLowerCase()]))B=A;a=v[B](a,o).childNodes;v=a.length===1?a[0].parentNode.removeChild(a[0]):r(a,o||i)}return p(v,e)},_creators:{div:function(a,
e){e=e?e.createElement("div"):m;e.innerHTML=a;return e}},html:function(a,e,o,v){if(e===q){a=b.get(a);if(l(a))return a.innerHTML}else b.each(b.query(a),function(z){l(z)&&u(z,e,o,v)})},remove:function(a){b.each(b.query(a),function(e){l(e)&&e.parentNode&&e.parentNode.removeChild(e)})}});if(k.gecko||w){var d=h._creators,j=h.create,n=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/;k={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var x in k)(function(a){d[x]=
function(e,o){return j("<"+a+">"+e+"</"+a+">",null,o)}})(k[x]);if(w){d.script=function(a,e){e=e?e.createElement("div"):m;e.innerHTML="-"+a;e.removeChild(e.firstChild);return e};if(w<8)d.tbody=function(a,e){e=j("<table>"+a+"</table>",null,e);var o=e.children.tags("tbody")[0];e.children.length>1&&o&&!n.test(a)&&o.parentNode.removeChild(o);return e}}b.mix(d,{optgroup:d.option,th:d.td,thead:d.tbody,tfoot:d.tbody,caption:d.tbody,colgroup:d.tbody})}});
KISSY.add("dom-insertion",function(b){var q=b.DOM;b.mix(q,{insertBefore:function(p,r){p=q.create(p);r=b.get(r);p&&r&&r.parentNode&&r.parentNode.insertBefore(p,r);return p},insertAfter:function(p,r){p=q.create(p);r=b.get(r);if(p&&r&&r.parentNode)r.nextSibling?r.parentNode.insertBefore(p,r.nextSibling):r.parentNode.appendChild(p);return p}})});
