/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 520 Apr 2 22:20
*/
KISSY.add("selector",function(f,k){function l(c,a,b){var d,e=[],j,i;if(typeof c===s){c=f.trim(c);if(t.test(c)){if(a=m(c.slice(1)))e=[a]}else if(d=v.exec(c)){j=d[1];i=d[2];d=d[3];if(a=j?m(j):q(a))if(d){if(!j||c.indexOf(p)!==-1)e=h(d,i,a)}else if(i)e=g(a,i)}else if(c.indexOf(",")>-1)if(n.querySelectorAll)e=n.querySelectorAll(c);else{j=c.split(",");i=[];e=0;for(c=j.length;e<c;++e)i=i.concat(l(j[e],a));e=o(i)}}else if(c&&c.nodeType)e=[c];else if(c&&c.item)e=c;if(e.item)e=f.makeArray(e);b||u(e);return e}
function q(c){if(c===k)c=n;else if(typeof c===s&&t.test(c))c=m(c.slice(1));else if(c&&c.nodeType!==1&&c.nodeType!==9)c=null;return c}function m(c){return n.getElementById(c)}function g(c,a){return c.getElementsByTagName(a)}function h(c,a,b){b=c=b.getElementsByClassName(c);var d=0,e=0,j=c.length,i;if(a&&a!==r){b=[];for(a=a.toUpperCase();d<j;++d){i=c[d];if(i.tagName===a)b[e++]=i}}return b}function o(c){var a=false;c.sort(function(d,e){d=d.sourceIndex-e.sourceIndex;if(d===0)a=true;return d});if(a)for(var b=
1;b<c.length;b++)c[b]===c[b-1]&&c.splice(b--,1);return c}function u(c){c.each=function(a,b){f.each(c,a,b)}}var n=document,s="string",p=" ",r="*",t=/^#[\w-]+$/,v=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var c=n.createElement("div");c.appendChild(n.createComment(""));if(c.getElementsByTagName(r).length>0)g=function(a,b){a=a.getElementsByTagName(b);if(b===r){b=[];for(var d=0,e=0,j;j=a[d++];)if(j.nodeType===1)b[e++]=j;a=b}return a}})();n.getElementsByClassName||(h=n.querySelectorAll?
function(c,a,b){return b.querySelectorAll((a?a:"")+"."+c)}:function(c,a,b){a=b.getElementsByTagName(a||r);b=[];var d=0,e=0,j=a.length,i,w;for(c=p+c+p;d<j;++d){i=a[d];if((w=i.className)&&(p+w+p).indexOf(c)>-1)b[e++]=i}return b});f.query=l;f.get=function(c,a){return l(c,a,true)[0]||null}});
KISSY.add("dom-base",function(f,k){function l(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}function q(a,b){var d=null,e;if(a&&(a.push||a.item)&&a[0]){b=b||a[0].ownerDocument;d=b.createDocumentFragment();if(a.item)a=f.makeArray(a);b=0;for(e=a.length;b<e;++b)d.appendChild(a[b])}else f.error("unable to convert "+a+" to fragment");return d}var m=document,g=m.documentElement.textContent!==k?"textContent":"innerText",h=f.UA,o=h.ie,u=o&&o<8,n={readonly:"readOnly"},s=/href|src|style/,p=/href|src|colspan|rowspan/,
r=/\r/g,t=/radio|checkbox/,v=m.createElement("DIV"),c=/^[a-z]+$/i;u&&f.mix(n,{"for":"htmlFor","class":"className"});f.DOM={query:f.query,get:f.get,attr:function(a,b,d){if(!a||a.nodeType!==1)return k;var e;b=b.toLowerCase();b=n[b]||b;if(d===k){if(s.test(b)){if(b==="style")e=a.style.cssText}else e=a[b];if(e===k)e=a.getAttribute(b);if(u&&p.test(b))e=a.getAttribute(b,2);return e===null?k:e}if(b==="style")a.style.cssText=d;else a.setAttribute(b,""+d)},removeAttr:function(a,b){a&&a.nodeType===1&&a.removeAttribute(b)},
val:function(a,b){if(!a||a.nodeType!==1)return k;if(b===k){if(l("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(l("select",a)){b=a.selectedIndex;var d=a.options;if(b<0)return null;else if(a.type==="select-one")return f.DOM.val(d[b]);a=[];b=0;for(var e=d.length;b<e;++b)d[b].selected&&a.push(f.DOM.val(d[b]));return a}if(h.webkit&&t.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(r,"")}if(l("select",a)){d=f.makeArray(b);var j=a.options,
i;b=0;for(e=j.length;b<e;++b){i=j[b];i.selected=f.inArray(f.DOM.val(i),d)}if(!d.length)a.selectedIndex=-1}else a.value=b},css:function(){f.error("not implemented")},text:function(a,b){if(b===k)return(a||{})[g]||"";if(a)a[g]=b},html:function(){f.error("not implemented")},create:function(a,b){if(typeof a==="string")a=f.trim(a);if(c.test(a))return(b||m).createElement(a);var d=null;d=b?b.createElement("DIV"):v;d.innerHTML=a;a=d.childNodes;return d=a.length===1?a[0].parentNode.removeChild(a[0]):q(a,b||
m)}}});KISSY.add("dom-class",function(f,k){f.mix(f.DOM,{hasClass:function(g,h){if(!h||!g.className)return false;return(" "+g.className+" ").indexOf(" "+h+" ")>-1},addClass:function(g,h){if(h)l(g,h)||(g.className+=" "+h)},removeClass:function(g,h){if(l(g,h)){g.className=(" "+g.className+" ").replace(" "+h+" "," ");l(g,h)&&m(g,h)}},replaceClass:function(g,h,o){m(g,h);q(g,o)},toggleClass:function(g,h,o){(o!==k?o:!l(g,h))?q(g,h):m(g,h)}});var l=f.DOM.hasClass,q=f.DOM.addClass,m=f.DOM.removeClass});
