/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 846 Jul 11 00:09
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function p(a,b){var j,n=[],s,g;b=o(b);if(c.isString(a)){a=c.trim(a);if(d.test(a)){if(a=t(a.slice(1)))n=[a]}else if(j=l.exec(a)){s=j[1];g=j[2];j=j[3];if(b=s?t(s):b)if(j)if(!s||a.indexOf(m)!==-1)n=i(j,g,b);else{if((a=t(s))&&q.hasClass(a,j))n=[a]}else if(g)n=v(b,g)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else f(a)}else if(a&&a.nodeType)n=[a];else if(a&&(c.isArray(a)||a.item||a.getDOMNode))n=a;if(n.item)n=c.makeArray(n);return n}function o(a){if(a===
r)a=k;else if(c.isString(a)&&d.test(a))a=t(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function t(a){return k.getElementById(a)}function v(a,b){return a.getElementsByTagName(b)}function i(a,b,j){j=a=j.getElementsByClassName(a);var n=0,s=0,g=a.length,h;if(b&&b!==e){j=[];for(b=b.toUpperCase();n<g;++n){h=a[n];if(h.tagName===b)j[s++]=h}}return j}function f(a){c.error("Unsupported selector: "+a)}var k=document,q=c.DOM,m=" ",e="*",d=/^#[\w-]+$/,l=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var a=k.createElement("div");a.appendChild(k.createComment(""));if(a.getElementsByTagName(e).length>0)v=function(b,j){b=b.getElementsByTagName(j);if(j===e){j=[];for(var n=0,s=0,g;g=b[n++];)if(g.nodeType===1)j[s++]=g;b=j}return b}})();k.getElementsByClassName||(i=k.querySelectorAll?function(a,b,j){return j.querySelectorAll((b?b:"")+"."+a)}:function(a,b,j){b=j.getElementsByTagName(b||e);j=[];var n=0,s=0,g=b.length,h,u;for(a=m+a+m;n<g;++n){h=b[n];if((u=h.className)&&(m+u+m).indexOf(a)>-1)j[s++]=
h}return j});c.query=p;c.get=function(a,b){return p(a,b)[0]||null};c.mix(q,{query:p,get:c.get,filter:function(a,b){var j=p(a),n,s,g,h=[];if(c.isString(b)&&(n=l.exec(b))&&!n[1]){s=n[2];g=n[3];b=function(u){return!(s&&u.tagName!==s.toUpperCase()||g&&!q.hasClass(u,g))}}if(c.isFunction(b))h=c.filter(j,b);else if(b&&c.ExternalSelector)h=c.ExternalSelector._filter(a,b);else f(b);return h},test:function(a,b){a=p(a);return q.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function p(i,f,k,q){if(!(f=c.trim(f)))return q?false:r;i=c.query(i);var m=0,e=i.length;f=f.split(t);for(var d;m<e;m++){d=i[m];if(d.nodeType===1){d=k(d,f,f.length);if(d!==r)return d}}if(q)return false}var o=c.DOM,t=/[\.\s]\s*\.?/,v=/[\n\t]/g;c.mix(o,{hasClass:function(i,f){return p(i,f,function(k,q,m){if(k=k.className){k=" "+k+" ";for(var e=0,d=true;e<m;e++)if(k.indexOf(" "+q[e]+" ")<0){d=false;break}if(d)return true}},true)},addClass:function(i,f){p(i,f,function(k,
q,m){var e=k.className;if(e){var d=" "+e+" ";e=e;for(var l=0;l<m;l++)if(d.indexOf(" "+q[l]+" ")<0)e+=" "+q[l];k.className=c.trim(e)}else k.className=f})},removeClass:function(i,f){p(i,f,function(k,q,m){var e=k.className;if(e)if(m){e=(" "+e+" ").replace(v," ");for(var d=0,l;d<m;d++)for(l=" "+q[d]+" ";e.indexOf(l)>=0;)e=e.replace(l," ");k.className=c.trim(e)}else k.className=""})},replaceClass:function(i,f,k){o.removeClass(i,f);o.addClass(i,k)},toggleClass:function(i,f,k){var q=c.isBoolean(k),m;p(i,
f,function(e,d,l){for(var a=0,b;a<l;a++){b=d[a];m=q?!k:o.hasClass(e,b);o[m?"removeClass":"addClass"](e,b)}})}})});
KISSY.add("dom-attr",function(c,r){function p(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}var o=c.UA,t=o.ie,v=t&&t<8,i=document.documentElement.textContent!==r?"textContent":"innerText",f=c.DOM,k=f._isElementNode,q=/href|src|style/,m=/href|src|colspan|rowspan/,e=/\r/g,d=/radio|checkbox/,l={readonly:"readOnly"};v&&c.mix(l,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(a,b,j){if(b=c.trim(b)){b=b.toLowerCase();b=l[b]||b;if(j===r){a=c.get(a);if(!k(a))return r;var n;q.test(b)||
(n=a[b]);if(n===r)n=a.getAttribute(b);if(v)if(m.test(b))n=a.getAttribute(b,2);else if(b==="style")n=a.style.cssText;return n===null?r:n}c.each(c.query(a),function(s){if(k(s))if(v&&b==="style")s.style.cssText=j;else s.setAttribute(b,""+j)})}},removeAttr:function(a,b){c.each(c.query(a),function(j){k(j)&&j.removeAttribute(b)})},val:function(a,b){if(b===r){var j=c.get(a);if(!k(j))return r;if(p("option",j))return(j.attributes.value||{}).specified?j.value:j.text;if(p("select",j)){var n=j.selectedIndex;
a=j.options;if(n<0)return null;else if(j.type==="select-one")return f.val(a[n]);j=[];for(var s=0,g=a.length;s<g;++s)a[s].selected&&j.push(f.val(a[s]));return j}if(o.webkit&&d.test(j.type))return j.getAttribute("value")===null?"on":j.value;return(j.value||"").replace(e,"")}c.each(c.query(a),function(h){if(p("select",h)){if(c.isNumber(b))b+="";var u=c.makeArray(b),w=h.options,x;s=0;for(g=w.length;s<g;++s){x=w[s];x.selected=c.inArray(f.val(x),u)}if(!u.length)h.selectedIndex=-1}else if(k(h))h.value=b})},
text:function(a,b){if(b===r){a=c.get(a);if(k(a))return a[i]||""}else c.each(c.query(a),function(j){if(k(j))j[i]=b})}})});
KISSY.add("dom-style",function(c,r){function p(e,d){var l=c.get(e),a=d===i?l.offsetWidth:l.offsetHeight;c.each(d===i?["Left","Right"]:["Top","Bottom"],function(b){a-=parseFloat(o._getComputedStyle(l,"padding"+b))||0;a-=parseFloat(o._getComputedStyle(l,"border"+b+"Width"))||0});return a}var o=c.DOM,t=document,v=t.documentElement,i="width",f=/width|height|top|left|right|bottom|margin|padding/i,k=/-([a-z])/ig,q=function(e,d){return d.toUpperCase()},m={};c.mix(o,{_CUSTOM_STYLES:m,_getComputedStyle:function(e,
d){var l="",a=e.ownerDocument;if(e.style)l=a.defaultView.getComputedStyle(e,null)[d];return l},css:function(e,d,l){if(c.isPlainObject(d))for(var a in d)o.css(e,a,d[a]);else{if(d.indexOf("-")>0)d=d.replace(k,q);d=m[d]||d;if(l===r){e=c.get(e);a="";if(e&&e.style){a=d.get?d.get(e):e.style[d];if(a===""&&!d.get)a=o._getComputedStyle(e,d)}return a===r?"":a}else{if(l===null||l==="")l="";else if(!isNaN(new Number(l))&&f.test(d))l+="px";(d===i||d==="height")&&parseFloat(l)<0||c.each(c.query(e),function(b){if(b&&
b.style)d.set?d.set(b,l):(b.style[d]=l)})}}},width:function(e,d){if(d===r)return p(e,i);else o.css(e,i,d)},height:function(e,d){if(d===r)return p(e,"height");else o.css(e,"height",d)},addStyleSheet:function(e,d){var l;if(d)l=c.get(d);l||(l=o.create("<style>",{id:d}));c.get("head").appendChild(l);if(l.styleSheet)l.styleSheet.cssText=e;else l.appendChild(t.createTextNode(e))}});if(v.style.cssFloat!==r)m["float"]="cssFloat";else if(v.style.styleFloat!==r)m["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var p=c.DOM,o=document,t=o.documentElement,v=p._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,f=/^-?\d/,k=/^auto$/i,q=/^width|height$/;try{if(t.style.opacity===r&&t.filters)v.opacity={get:function(e){var d=100;try{d=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(l){try{d=e.filters("alpha").opacity}catch(a){}}return d/100+""},set:function(e,d){e=e.style;e.zoom=1;e.filter="alpha(opacity="+d*100+")"}}}catch(m){c.log("IE filters ActiveX is disabled. ex = "+
m)}if(!(o.defaultView||{}).getComputedStyle&&t.currentStyle)p._getComputedStyle=function(e,d){var l=e.style,a=e.currentStyle[d];if(q.test(d))a=p[d](e)+"px";else if(!i.test(a)&&f.test(a)||k.test(a)){e=l.left;l.left=d==="fontSize"?"1em":a||0;a=l.pixelLeft+"px";l.left=e}return a}}});
KISSY.add("dom-offset",function(c,r){function p(b){var j=0,n=0;if(b!==f.body&&b!==k&&b[a]){b=b[a]();j=b.left+t.scrollLeft();n=b.top+t.scrollTop()}return{left:j,top:n}}function o(b,j){var n=t.css(b,d);if(n==="static")n=b.style[d]=l;var s=p(b);n=n===l;var g=e(t.css(b,"left"),10),h=e(t.css(b,"top"),10);g=c.isNumber(g)?g:n?0:b.offsetLeft;h=c.isNumber(h)?h:n?0:b.offsetTop;t.css(b,{left:g+j.left-s.left,top:h+j.top-s.top})}var t=c.DOM,v=c.UA,i=window,f=document,k=f.documentElement,q=f.compatMode==="CSS1Compat",
m=Math.max,e=parseInt,d="position",l="relative",a="getBoundingClientRect";c.mix(t,{offset:function(b,j){if(!(b=c.get(b))||!b.ownerDocument)return null;if(j===r)return p(b);o(b,j)},scrollLeft:function(){return i.pageXOffset||k.scrollLeft||f.body.scrollLeft},scrollTop:function(){return i.pageYOffset||k.scrollTop||f.body.scrollTop},docHeight:function(){return m(!q?f.body.scrollHeight:k.scrollHeight,t.viewportHeight())},docWidth:function(){return m(!q?f.body.scrollWidth:k.scrollWidth,t.viewportWidth())},
viewportHeight:function(){return v.ie?q?k.clientHeight:f.body.clientHeight:i.innerHeight},viewportWidth:function(){return!q&&!v.opera?f.body.clientWidth:v.ie?k.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(c,r){function p(i,f,k,q){if(!(i=c.get(i)))return null;if(f===r)f=1;var m=null,e,d;if(c.isNumber(f)&&f>=0){if(f===0)return i;e=0;d=f;f=function(){return++e===d}}for(;i=i[k];)if(v(i)&&(!f||t.test(i,f))&&(!q||q(i))){m=i;break}return m}function o(i,f,k){var q=[];var m=i=c.get(i);if(i&&k)m=i.parentNode;if(m){k=0;for(m=m.firstChild;m;m=m.nextSibling)if(v(m)&&m!==i&&(!f||t.test(m,f)))q[k++]=m}return q}var t=c.DOM,v=t._isElementNode;c.mix(t,{parent:function(i,f){return p(i,
f,"parentNode",function(k){return k.nodeType!=11})},next:function(i,f){return p(i,f,"nextSibling")},prev:function(i,f){return p(i,f,"previousSibling")},siblings:function(i,f){return o(i,f,true)},children:function(i,f){return o(i,f)},contains:function(i,f){var k=false;if((i=c.get(i))&&(f=c.get(f)))if(i.contains)return i.contains(f);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(f)&16);else for(;!k&&(f=f.parentNode);)k=f==i;return k}})});
KISSY.add("dom-create",function(c,r){function p(g,h){var u=setInterval(function(){if(i.getElementById(g)){clearInterval(u);h&&h()}},100)}function o(g,h,u,w){if(typeof h=="undefined")h="";if(u!==true){g.innerHTML=h;w&&w()}else{var x="kissy_tmp_"+c.id();h+='<span id="'+x+'"></span>';p(x,function(){for(var z=document.getElementsByTagName("head")[0],A=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,D=/\ssrc=([\'\"])(.*?)\1/i,E=/\stype=([\'\"])(.*?)\1/i,y;y=A.exec(h);){var B=y[1],C=B?B.match(D):false;
if(C&&C[2]){y=document.createElement("script");y.src=C[2];if((B=B.match(E))&&B[2])y.type=B[2];z.appendChild(y)}else y[2]&&y[2].length>0&&c.globalEval(y[2])}(z=document.getElementById(x))&&z.parentNode.removeChild(z);w&&w()});g.innerHTML=h.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,"")}}function t(g,h){if(m(g)&&h)for(var u in h)f.attr(g,u,h[u]);return g}function v(g,h){var u=null,w;if(g&&(g.push||g.item)&&g[0]){h=h||g[0].ownerDocument;u=h.createDocumentFragment();if(g.item)g=c.makeArray(g);
h=0;for(w=g.length;h<w;h++)u.appendChild(g[h])}else c.log("Unable to convert "+g+" to fragment.");return u}var i=document,f=c.DOM,k=c.UA,q=k.ie,m=f._isElementNode,e=i.createElement("div"),d=/<(\w+)/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(f,{create:function(g,h,u){if(m(g))return g;if(!(g=c.trim(g)))return null;var w=null;w=f._creators;var x,z="div",A;if(x=l.exec(g))w=(u||i).createElement(x[1]);else{if((x=d.exec(g))&&(A=x[1])&&c.isFunction(w[A=A.toLowerCase()]))z=A;g=w[z](g,u).childNodes;w=g.length===
1?g[0].parentNode.removeChild(g[0]):v(g,u||i)}return t(w,h)},_creators:{div:function(g,h){h=h?h.createElement("div"):e;h.innerHTML=g;return h}},html:function(g,h,u,w){if(h===r){g=c.get(g);if(m(g))return g.innerHTML}else c.each(c.query(g),function(x){m(x)&&o(x,h,u,w)})},remove:function(g){c.each(c.query(g),function(h){m(h)&&h.parentNode&&h.parentNode.removeChild(h)})}});var a=f._creators,b=f.create,j=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,n={option:"select",td:"tr",tr:"tbody",tbody:"table",
col:"colgroup",legend:"fieldset"};if(k.gecko||q){for(var s in n)(function(g){a[s]=function(h,u){return b("<"+g+">"+h+"</"+g+">",null,u)}})(n[s]);if(q){a.script=function(g,h){h=h?h.createElement("div"):e;h.innerHTML="-"+g;h.removeChild(h.firstChild);return h};if(q<8)a.tbody=function(g,h){h=b("<table>"+g+"</table>",null,h);var u=h.children.tags("tbody")[0];h.children.length>1&&u&&!j.test(g)&&u.parentNode.removeChild(u);return h}}c.mix(a,{optgroup:a.option,th:a.td,thead:a.tbody,tfoot:a.tbody,caption:a.tbody,
colgroup:a.tbody})}});KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(p,o){p=r.create(p);o=c.get(o);p&&o&&o.parentNode&&o.parentNode.insertBefore(p,o);return p},insertAfter:function(p,o){p=r.create(p);o=c.get(o);if(p&&o&&o.parentNode)o.nextSibling?o.parentNode.insertBefore(p,o.nextSibling):o.parentNode.appendChild(p);return p}})});
