/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 524 Apr 6 09:10
*/
KISSY.add("selector",function(h,k){function l(c,e,g){var a,b=[],d,f;if(typeof c===s){c=h.trim(c);if(u.test(c)){if(e=n(c.slice(1)))b=[e]}else if(a=w.exec(c)){d=a[1];f=a[2];a=a[3];if(e=d?n(d):q(e))if(a){if(!d||c.indexOf(p)!==-1)b=i(a,f,e)}else if(f)b=j(e,f)}else if(c.indexOf(",")>-1)if(m.querySelectorAll)b=m.querySelectorAll(c);else{d=c.split(",");f=[];b=0;for(c=d.length;b<c;++b)f=f.concat(l(d[b],e));b=o(f)}}else if(c&&c.nodeType)b=[c];else if(c&&c.item)b=c;if(b.item)b=h.makeArray(b);g||v(b);return b}
function q(c){if(c===k)c=m;else if(typeof c===s&&u.test(c))c=n(c.slice(1));else if(c&&c.nodeType!==1&&c.nodeType!==9)c=null;return c}function n(c){return m.getElementById(c)}function j(c,e){return c.getElementsByTagName(e)}function i(c,e,g){g=c=g.getElementsByClassName(c);var a=0,b=0,d=c.length,f;if(e&&e!==r){g=[];for(e=e.toUpperCase();a<d;++a){f=c[a];if(f.tagName===e)g[b++]=f}}return g}function o(c){var e=false;c.sort(function(a,b){a=a.sourceIndex-b.sourceIndex;if(a===0)e=true;return a});if(e)for(var g=
1;g<c.length;g++)c[g]===c[g-1]&&c.splice(g--,1);return c}function v(c){c.each=function(e,g){h.each(c,e,g)}}var m=document,s="string",p=" ",r="*",u=/^#[\w-]+$/,w=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var c=m.createElement("div");c.appendChild(m.createComment(""));if(c.getElementsByTagName(r).length>0)j=function(e,g){e=e.getElementsByTagName(g);if(g===r){g=[];for(var a=0,b=0,d;d=e[a++];)if(d.nodeType===1)g[b++]=d;e=g}return e}})();m.getElementsByClassName||(i=m.querySelectorAll?
function(c,e,g){return g.querySelectorAll((e?e:"")+"."+c)}:function(c,e,g){e=g.getElementsByTagName(e||r);g=[];var a=0,b=0,d=e.length,f,t;for(c=p+c+p;a<d;++a){f=e[a];if((t=f.className)&&(p+t+p).indexOf(c)>-1)g[b++]=f}return g});h.query=l;h.get=function(c,e){return l(c,e,true)[0]||null}});
KISSY.add("dom-base",function(h,k){function l(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}function q(a,b){for(var d=[],f=0;a;a=a.nextSibling)if(a.nodeType===1&&a!==b)d[f++]=a;return d}function n(a,b,d){b=b||0;for(var f=0;a;a=a[d])if(a.nodeType===1&&f++===b)break;return a}function j(a,b){var d=null,f;if(a&&(a.push||a.item)&&a[0]){b=b||a[0].ownerDocument;d=b.createDocumentFragment();if(a.item)a=h.makeArray(a);b=0;for(f=a.length;b<f;++b)d.appendChild(a[b])}else h.error("unable to convert "+
a+" to fragment");return d}var i=document,o=i.documentElement.textContent!==k?"textContent":"innerText",v=h.UA,m=v.ie,s=m&&m<8,p={readonly:"readOnly"},r=/href|src|style/,u=/href|src|colspan|rowspan/,w=/\r/g,c=/radio|checkbox/,e=i.createElement("DIV"),g=/^[a-z]+$/i;s&&h.mix(p,{"for":"htmlFor","class":"className"});h.DOM={query:h.query,get:h.get,attr:function(a,b,d){if(!a||a.nodeType!==1)return k;var f;b=b.toLowerCase();b=p[b]||b;if(d===k){if(r.test(b)){if(b==="style")f=a.style.cssText}else f=a[b];
if(f===k)f=a.getAttribute(b);if(s&&u.test(b))f=a.getAttribute(b,2);return f===null?k:f}if(b==="style")a.style.cssText=d;else a.setAttribute(b,""+d)},removeAttr:function(a,b){a&&a.nodeType===1&&a.removeAttribute(b)},val:function(a,b){if(!a||a.nodeType!==1)return k;if(b===k){if(l("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(l("select",a)){b=a.selectedIndex;var d=a.options;if(b<0)return null;else if(a.type==="select-one")return h.DOM.val(d[b]);a=[];b=0;for(var f=d.length;b<
f;++b)d[b].selected&&a.push(h.DOM.val(d[b]));return a}if(v.webkit&&c.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(w,"")}if(l("select",a)){d=h.makeArray(b);var t=a.options,x;b=0;for(f=t.length;b<f;++b){x=t[b];x.selected=h.inArray(h.DOM.val(x),d)}if(!d.length)a.selectedIndex=-1}else a.value=b},css:function(a,b,d){if(d===k)return a.style[b];h.each(h.makeArray(a),function(f){f.style[b]=d})},text:function(a,b){if(b===k)return(a||{})[o]||"";if(a)a[o]=b},html:function(a,
b){if(b===k)return a.innerHTML;a.innerHTML=b},children:function(a){if(a.children)return h.makeArray(a.children);return q(a.firstChild)},siblings:function(a){return q(a.parentNode.firstChild,a)},next:function(a){return n(a,1,"nextSibling")},prev:function(a){return n(a,1,"previousSibling")},parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},create:function(a,b){if(typeof a==="string")a=h.trim(a);if(g.test(a))return(b||i).createElement(a);var d=null;d=b?b.createElement("DIV"):e;d.innerHTML=
a;a=d.childNodes;return d=a.length===1?a[0].parentNode.removeChild(a[0]):j(a,b||i)}}});
KISSY.add("dom-class",function(h,k){h.mix(h.DOM,{hasClass:function(j,i){if(!i||!j||!j.className)return false;return(" "+j.className+" ").indexOf(" "+i+" ")>-1},addClass:function(j,i){if(i&&j)l(j,i)||(j.className+=" "+i)},removeClass:function(j,i){if(l(j,i)){j.className=(" "+j.className+" ").replace(" "+i+" "," ");l(j,i)&&n(j,i)}},replaceClass:function(j,i,o){n(j,i);q(j,o)},toggleClass:function(j,i,o){(o!==k?o:!l(j,i))?q(j,i):n(j,i)}});var l=h.DOM.hasClass,q=h.DOM.addClass,n=h.DOM.removeClass});
