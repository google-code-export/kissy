/*
Copyright 2010, KISSY UI Library v1.0dev
MIT Licensed
build: 430 Jan 21 13:13
*/
KISSY=window.KISSY||{};
(function(d,l,s){function o(){l.Test.init()}var h=d.document,i=function(a){return typeof a==="string"?h.getElementById(a):a},p=function(){return(new Date).getTime()},m=function(a){return a<10?"0"+a:a},t=function(){var a=new Date;return m(a.getHours())+":"+m(a.getMinutes())+":"+m(a.getSeconds())},c=[],j,q,k,g,n,f={init:function(){j=i("log");q=i("hidepasses").checked;k=i("times").value;g=i("wl").value},time:function(a){a.startTime=p()},timeEnd:function(a){a.tookTime=p()-a.startTime},echo:function(a,
b){if(b===s)b="<br />";j.innerHTML+=t()+"  "+a+b;this.scrollToEnd()},scrollToEnd:function(){n||(n=setTimeout(function(){j.scrollTop=j.scrollHeight;n=null},5))},log:function(a){var b="";b+='<span class="'+a.status+'">';b+="["+a.status.toUpperCase()+"] ";b+=a.name+": ";b+=a.tookTime+"ms ";if(a.extraMsg)b+=a.extraMsg;b+="</span>";this.echo(b)}};c.add=function(a,b){c.push({name:a,fn:function(){b.call(d,this)},fail:function(e){this.status="failed";if(e)this.extraMsg+=e},status:"passed",extraMsg:""})};
c.reset=function(){for(var a=0,b=c.length;a<b;a++){c[a].status="passed";c[a].extraMsg=""}};l.Test={init:function(){var a=d.RuntimeObject?d.RuntimeObject("test_*"):d;for(var b in a)b.indexOf("test_")===0&&typeof d[b]==="function"&&c.add(b,d[b]);navigator.userAgent.indexOf("Firefox")!==-1&&c.reverse()},render:function(){var a=h.getElementsByTagName("script");a='<link rel="stylesheet" href="'+a[a.length-1].src.replace(".js",".css")+'" /><form onsubmit="return false" action="" class="ks-test-form"><button type="button" onclick="KISSY.Test.start()">Start</button><div id="konsole"><div id="log"></div></div><div class="settings">Settings:<br/><input type="checkbox" id="hidepasses" name="hidepasses"/><label for="hidepasses">Hide passes</label><br/><input type="text" value="1" id="times" size="4"/><label for="times">Iteration times for each test function</label><br/><input type="text" value="" id="wl" size="12"/><label for="wl">The whitelist of test names</label></div></form>';
h.body.className+=" ks-test";h.write(a)},start:function(){f.init();c.reset();var a=c.length,b,e,r;k=k||1;g=g||"";f.echo("[START]");for(e=0;e<a;e++){b=c[e];if(!(g&&g.indexOf(b.name)===-1)){r=k;for(f.time(b);r--;)b.fn();f.timeEnd(b);q&&b.status==="passed"||f.log(b)}}f.echo("[DONE]","<hr />")}};l.Test.render();d.attachEvent?d.attachEvent("onload",o):d.addEventListener("load",o,false)})(window,KISSY);
