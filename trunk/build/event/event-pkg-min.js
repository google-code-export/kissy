/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 524 Apr 6 09:10
*/
KISSY.add("event",function(e,i){function l(a){var b=-1;if(a.nodeType===3||a.nodeType===8)return b;return b=a.nodeType?c.attr(a,s):a.isCustomEventTarget?a.eventTargetId:a[s]}function g(a,b){if(a.nodeType)c.attr(a,s,b);else if(a.isCustomEventTarget)a.eventTargetId=b;else try{a[s]=b}catch(f){e.error(f)}}function m(a){if(a.nodeType)c.removeAttr(a,s);else if(a.isCustomEventTarget)a.eventTargetId=i;else a[s]=i}var c=e.DOM,d=window,o=document,v=o.addEventListener?function(a,b,f){a.addEventListener&&a.addEventListener(b,
f,false)}:function(a,b,f){a.attachEvent&&a.attachEvent("on"+b,f)},w=o.removeEventListener?function(a,b,f){a.removeEventListener&&a.removeEventListener(b,f,false)}:function(a,b,f){a.detachEvent&&a.detachEvent("on"+b,f)},s="data-ks-event-guid",x=e.now(),p={},q={special:{},add:function(a,b,f){if((b=e.trim(b))&&b.indexOf(" ")>0)e.each(b.split(" "),function(k){q.add(a,k,f)});else{var h=l(a),j,n;if(!(h===-1||!b||!e.isFunction(f))){if(!h){g(a,h=x++);p[h]={target:a,events:{}}}n=p[h].events;j=!a.isCustomEventTarget&&
q.special[b]||{};if(!n[b]){h=function(k,r){if(!k||!k.fixed){k=new e.EventObject(a,k,b);e.isPlainObject(r)&&e.mix(k,r)}j.setup&&j.setup(k);return(j.handle||q._handle)(a,k,n[b].listeners)};n[b]={handle:h,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(b,h);else v(a,j.fix||b,h)}n[b].listeners.push(f)}}},remove:function(a,b,f){var h=l(a),j,n,k,r,t,u;if(h!==-1)if(h&&(j=p[h]))if(j.target===a){j=j.events||{};if(n=j[b]){k=n.listeners;t=k.length;if(e.isFunction(f)&&t&&e.inArray(f,k)){u=[];
for(r=0;r<t;++r)f!==k[r]&&u.push(k[r]);t=u.length}if(f===i||t===0){a.isCustomEventTarget||w(a,b,n.handle);delete p[h].type}}if(b===i||e.isEmptyObject(j)){for(b in j)q.remove(a,b);delete p[h];m(a)}}},_handle:function(a,b,f){for(var h,j=0,n=f.length;j<n;++j){h=f[j].call(a,b);if(b.isImmediatePropagationStopped)break;h===false&&b.halt()}return h},_getCache:function(a){return p[a]},_simpleAdd:v,_simpleRemove:w};q.on=q.add;e.Event=q;d.attachEvent&&!d.addEventListener&&d.attachEvent("onunload",function(){var a,
b;for(a in p)if(b=p[a].target)try{q.remove(b)}catch(f){}})});
KISSY.add("event-object",function(e,i){function l(c,d,o){this.currentTarget=c;this.originalEvent=d||{};if(d){this.type=d.type;this._fix()}else{this.type=o;this.target=c}this.fixed=true}var g=document,m="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");e.mix(l.prototype,
{_fix:function(){for(var c=this.originalEvent,d=m.length,o;d;){o=m[--d];this[o]=c[o]}if(!this.target)this.target=this.srcElement||g;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===i&&this.clientX!==i){c=g.documentElement;d=g.body;this.pageX=this.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0);this.pageY=this.clientY+
(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0)}if(this.which===i)this.which=this.charCode!==i?this.charCode:this.keyCode;if(this.metaKey===i)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==i)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var c=this.originalEvent;if(c.preventDefault)c.preventDefault();else c.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var c=this.originalEvent;if(c.stopPropagation)c.stopPropagation();
else c.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var c=this.originalEvent;c.stopImmediatePropagation?c.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(c){c?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});e.EventObject=l});
KISSY.add("event-target",function(e,i){var l=e.Event;e.EventTarget={eventTargetId:i,isCustomEventTarget:true,fire:function(g,m){(g=((l._getCache(this.eventTargetId||-1)||{}).events||{})[g])&&e.isFunction(g.handle)&&g.handle(i,m)},on:function(g,m){l.add(this,g,m)},detach:function(g,m){l.remove(this,g,m)}}});
KISSY.add("event-mouseenter",function(e){var i=e.Event;e.UA.ie||e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(l){i.special[l.name]={fix:l.fix,setup:function(g){g.type=l.name},handle:function(g,m,c){var d=m.relatedTarget;try{for(;d&&d!==g;)d=d.parentNode;d!==g&&i._handle(g,m,c)}catch(o){}}}})});
