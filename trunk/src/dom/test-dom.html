<!doctype html>
<html>
<head>
<meta charset="gbk"/>
<title>Dom Base Test</title>
</head>
<body>
<script src="../test/test.js"></script>
<script>
    KISSY.Test.Config.times = 1;
</script>

<h2>Test Data</h2>

<script src="../kissy/kissy.js"></script>
<script src="selector.js"></script>
<script src="dom.js"></script>
<script src="../../third-party/jquery/jquery-1.4.2.js"></script>

<div id="test-data">
    <p id="foo">
        <a href="../kissy/" title="test">test link</a>
        <input type="text" id="test-input" readonly><label class="test" for="test-input">label</label>
    </p>
</div>

<!-- Test Cases -->
<script>
    var S = KISSY, D = S.DOM;

    function test_attr(test) {
        var a = S.get('#foo a'),
            input = S.get('#foo input'),
            label = S.get('#foo label');

        // alert(a.href); // a.href 和 a['href'] 都返回绝对地址
        // alert(a.getAttribute('href')); // ie7- 下，会返回绝对地址
        alert(input.getAttribute('readOnly')); // ie 下，有设置时，返回 true, 没设置时，返回 false. 其它浏览器无特殊处理
        alert(input['readOnly']); // ie 下，有设置时，返回 true, 没设置时，返回 false. 其它浏览器无特殊处理
debugger
        alert(jQuery.attr(input, 'readonly')); // ie 下，有设置时，返回 true, 没设置时，返回 false. 其它浏览器无特殊处理

        if(D.attr(label, 'class') !== 'test') test.fail(); // ie7- 要用 className
        if(D.attr(label, 'for') !== 'test-input') test.fail(); // ie7- 要用 htmlFor

        if(D.attr(a, 'none') !== null) test.fail(); // 不存在的属性返回 null
        
        if(D.attr(a, 'title') !== 'test') test.fail();
    }

</script>
</body>
</html>
