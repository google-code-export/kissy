<!doctype html>
<html>
<head>
<meta charset="gbk"/>
<title>Dom Test</title>
</head>
<body>
<script src="../test/test.js"></script>
<script>
    KISSY.Test.Config.times = 1;
</script>

<h2>Test Data</h2>

<script src="../kissy/kissy.js"></script>
<script src="../kissy/kissy-lang.js"></script>
<script src="../kissy/kissy-ua.js"></script>

<script src="selector.js"></script>
<script src="dom.js"></script>

<script src="../../third-party/jquery/jquery-1.4.2.js"></script>

<!-- Test Cases -->
<script>
    var S = KISSY, D = S.DOM,
        foo, a, input, radio, radio2, button, label, table, td, select, select2, select3, opt, opt2, area, div;

    KISSY.ready(function() {
        foo = S.get('#foo');
        a = S.get('#foo a');
        input = S.get('#foo input');
        radio = S.get('#test-radio');
        radio2 = S.get('#test-radio2');
        button = S.get('#foo button');
        label = S.get('#foo label');
        table = S.get('#test-table');
        td = S.get('#test-table td');
        select = S.get('#test-select');
        select2 = S.get('#test-select2');
        select3 = S.get('#test-select3');
        opt = S.get('#test-opt');
        div = S.get('#test-div');
        opt2 = S.query('#test-select option')[1];
        area = S.get('#foo textarea');
    });

    function test_val(test) {
        // normal
        if (D.val(input) !== 'hello') test.fail();

        // area
        if (D.val(area).length !== 25) test.fail();

        // option
        if(D.val(opt) != 1) test.fail();
        if(D.val(opt2) != 2) test.fail();

        // select
        if(D.val(select) != 1) test.fail();
        if(D.val(select2) != 2) test.fail();
        if(D.val(select3).toString() != '1,2') test.fail();

        // radio
        if(D.val(radio) != 'on') test.fail();
        if(D.val(radio2) != 'on') test.fail();

        // set value
        D.val(a, 'test');
        if(D.val(a) !== 'test') test.fail();
        D.removeAttr(a, 'value');

        // select set value
        D.val(select, '3');
        if(D.val(select) != 3) test.fail();
        D.val(select, 0); // restore

        D.val(select3, ['2','3']);
        if(D.val(select3).length != 2) test.fail();
    }

    function test_text(test) {
        D.text(div, 'hello, are you ok?');
        if(D.text(div) !== 'hello, are you ok?') test.fail();
    }

    function test_html(test) {
        D.html(div, '<p>hello, are you ok?</p>');
        if(D.html(div).toLowerCase() !== '<p>hello, are you ok?</p>') test.fail();
    }

    function test_children(test) {
        if(D.children(foo).length !== 7) test.fail();
    }

    function test_siblings(test) {
        if(D.siblings(a).length !== 6) test.fail();
    }

    function test_next(test) {
        if(D.next(a) !== input) test.fail();
    }

    function test_prev(test) {
        if(D.prev(input) !== a) test.fail();
    }

    function test_parent(test) {
        if(D.parent(input).id !== 'foo') test.fail();
    }

    function test_create(test) {
        var div, bd = document.body, el;

        div = D.create('div');
        div.id = 'test-create';
        bd.appendChild(div);
        if(!S.get('#test-create')) test.fail();

        div = D.create('<div id="test-create2">create2</div>');
        bd.appendChild(div);
        el = S.get('#test-create2');
        if(!el) test.fail();
        if(D.text(el) !== 'create2') test.fail();
    }

    // temp code
    S.ready(function() {
    });
</script>

<div id="test-data">
    <p id="foo">
        <a href="../kissy/" style="color:red" class="link" title="test" data-test="test">test link</a>
        <input type="text" id="test-input" readonly maxlength="20" value="hello"/>
        <input type="radio" id="test-radio" />
        <input type="radio" id="test-radio2" checked />
        <label class="test" for="test-input">label</label>
        <button type="button" tabindex="3">Submit</button>
        <textarea rows="2" cols="2">
            test
        </textarea>
    </p>
    <div id="test-div"></div>
    <table id="test-table" cellspacing="10">
        <tbody>
        <tr>
            <td rowspan="2" colspan="3">td</td>
        </tr>
        </tbody>
    </table>
    <select id="test-select">
        <option id="test-opt" value="1">0</option>
        <option>2</option>
        <option>3</option>
    </select>
    <select id="test-select2">
        <option>2</option>
    </select>
    <select id="test-select3" multiple autocomplete="off">
        <option selected>1</option>
        <option selected>2</option>
        <option>3</option>
    </select>
</div>

</body>
</html>
