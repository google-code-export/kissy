KISSY.add("digital-clock",function(e){function f(b){f.superclass.constructor.call(this,b);this._domNode=new h(l);this._bars=this._domNode.children();for(b=0;b<this._bars.length;b++)this._bars[b]=new h(this._bars[b]);this.on("afterValueChange",this.repaint,this);this.on("afterZoomChange",this.zoom,this)}function i(b){i.superclass.constructor.call(this,b);this._ns=[];this._container=new h(m);for(b=0;b<2;b++)this._ns.push((new f({zoomLimit:this.get("zoomLimit")})).appendTo(this._container));this._colon=
(new h(n)).appendTo(this._container[0]);this._colonVisible=true;for(b=0;b<2;b++)this._ns.push((new f({zoomLimit:this.get("zoomLimit")})).appendTo(this._container));for(b=0;b<2;b++)this._ns.push((new f({zoomLimit:this.get("zoomLimit")})).appendTo(this._container));this._container.appendTo(this.get("container"));this.repaint({newVal:this.get("date")});this.zoom({newVal:this.get("zoom")});this.on("afterDateChange",this.repaint,this);this.on("afterZoomChange",this.zoom,this)}var l='<div class="Kcontainer"><div class="Kelement  Kvertical Ke1"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div><div class="Kelement Kvertical Ke2"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div><div class="Kelement Khorizonal Ke3"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div><div class="Kelement  Kvertical Ke4"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div><div class="Kelement Kvertical Ke5"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div><div class="Kelement Khorizonal Ke6"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div><div class="Kelement Khorizonal Kex"><s class="Kfirst"></s><div class="Kbar"></div><b class="Klast"></b></div></div>'.replace(/K/g,
"ks-digitalclock-"),d=function(b){return parseInt(b,2)},n='<div class="Kcontainer"><div class="Kcolon1"><s class="Kcolon-top"></s><b class="Kcolon-bottom"></b></div><div class="Kcolon2"><s class="Kcolon-top"></s><b class="Kcolon-bottom"></b></div></div>'.replace(/K/g,"ks-digitalclock-"),m="<div class='ks-digitalclock-border clearfix'></div>",h=e.Node,j={0:d("01111110"),1:d("0110000"),2:d("11101100"),3:d("11111000"),4:d("10110010"),5:d("11011010"),6:d("11011110"),7:d("01110010"),8:d("11111111"),9:d("11111011")};
f.ATTRS={value:{value:8},zoomLimit:{value:0.2},zoom:1};e.extend(f,e.Base,{appendTo:function(b){this._domNode.appendTo(b[0]);return this},zoom:function(b){var a=b.newVal;this._domNode.css("margin","0 "+10*a+"px");this._domNode.css("width",120*a+"px");this._domNode.css("height",200*a+"px");this._domNode.all(".ks-digitalclock-element").each(function(c){c.css("height",97*a+"px")});this._domNode.all(".ks-digitalclock-vertical").each(function(c){c.css("width",20*a+"px")});this._domNode.all(".ks-digitalclock-bar").each(function(c){c.css("height",
67*a+"px")});this._bars[1].css("top",104*a+"px");this._bars[3].css("top",104*a+"px");if(a>=this.get("zoomLimit")){this._domNode.all(".ks-digitalclock-element").each(function(c){c.css("background-color","transparent")});this._domNode.all(".ks-digitalclock-last").each(function(c){c.css("border-width",10*a+"px")});this._domNode.all(".ks-digitalclock-first").each(function(c){c.css("border-width",10*a+"px")});this._bars[0].one(".ks-digitalclock-first").css("border-width",10*a+"px");this._bars[4].one(".ks-digitalclock-first").css("border-width",
10*a+"px");this._bars[0].one(".ks-digitalclock-last").css("border-width",5*a+"px "+10*a+"px");this._bars[1].one(".ks-digitalclock-first").css("border-width",5*a+"px "+10*a+"px");this._bars[1].one(".ks-digitalclock-last").css("border-width",10*a+"px");this._bars[3].one(".ks-digitalclock-last").css("border-width",10*a+"px");this._bars[3].one(".ks-digitalclock-first").css("border-width",5*a+"px "+10*a+"px");this._bars[4].one(".ks-digitalclock-last").css("border-width",5*a+"px "+10*a+"px")}else this._domNode.all(".ks-digitalclock-element").each(function(c){c.css("background-color",
"#565656")});this._bars[3].css("left",99*a+"px");this._bars[4].css("left",99*a+"px");this._domNode.all(".ks-digitalclock-horizonal").each(function(c){var g=20*a;c.css("width",107*a+"px");c.css("height",g+"px");c.css("left",6*a+"px");c.one(".ks-digitalclock-bar").css("width",67*a+"px");c.one(".ks-digitalclock-bar").css("height",g+"px")});this._bars[2].css("left",6*a+"px");this._bars[2].css("top",180*a+"px");this._bars[6].css("top",90*a+"px")},repaint:function(b){var a=j[b.newVal];b=a^j[b.preVal];for(var c=
0;c<this._bars.length;c++){a>>=1;b>>=1;var g=this._bars[c],k=b&1;if(a&1&&k)g.css("display","");else k&&g.css("display","none")}}});i.ATTRS={date:{value:new Date},zoom:{value:1},zoomLimit:{value:0.2},container:{valueFn:function(){return document.body}}};e.extend(i,e.Base,{zoom:function(b){var a=b.newVal;for(b=0;b<4;b++)this._ns[b].set("zoom",a);for(b=4;b<6;b++)this._ns[b].set("zoom",a*0.4);this._colon.css("width",30*a+"px");this._colon.css("height",200*a+"px");this._colon.all(".ks-digitalclock-colon-top").each(function(c){c.css("border-width",
10*a+"px")});this._colon.all(".ks-digitalclock-colon-bottom").each(function(c){c.css("border-width",10*a+"px")});this._colon.one(".ks-digitalclock-colon1").css("left",0*a+"px");this._colon.one(".ks-digitalclock-colon2").css("left",0*a+"px");this._colon.one(".ks-digitalclock-colon1").css("top",60*a+"px");this._colon.one(".ks-digitalclock-colon2").css("top",90*a+"px");this._container.css("width",710*a+"px")},repaint:function(b){var a=b.newVal;b=a.getHours();var c=a.getMinutes();a=a.getSeconds();this._ns[0].set("value",
Math.floor(b/10));this._ns[1].set("value",Math.floor(b%10));this._ns[2].set("value",Math.floor(c/10));this._ns[3].set("value",Math.floor(c%10));this._ns[4].set("value",Math.floor(a/10));this._ns[5].set("value",Math.floor(a%10));this._colonVisible=!this._colonVisible;this._colon.css("visibility",this._colonVisible?"visible":"hidden")}});e.DigitalClock=i});
