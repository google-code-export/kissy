<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
        <style type="text/css">
            #swf {
                width: 500px;
                height: 300px;
                border: 2px solid #ccc;
            }
        </style>
    </head>
    <body>
        <div>

        </div>
        <div id="swf"></div>
        <br />
        <button id="display">displaySettings</button>
        <button id="clear">clearAll</button>
        &nbsp; &nbsp;
        <button id="set">setItem</button>
        <button id="get">getValue</button>
		<script type="text/javascript" src="http://a.tbcdn.cn/yui/2.8.0r4/build/yuiloader/yuiloader-min.js?t=20091214111700"></script>
        <!--
        <script type="text/javascript" src="http://a.tbcdn.cn/yui/2.8.0r4/build/swfstore/swfstore-min.js?t=20091214111700"></script>
        -->
        <script type="text/javascript">
        // 实际可不用 loader ，可以在项目中直接将 swfstore 打包进去
        var loader = new YAHOO.util.YUILoader({ 
            require: ["swfstore"], 
            base: 'http://a.tbcdn.cn/yui/2.8.0r4/build/',
            onSuccess: function() {
                // 自定义 Flash 地址
                // 增加傲游浏览器判断 http://blog.maxthon.cn/?p=50
              //YAHOO.util.SWFStore.SWFURL = this.base + 'swfstore/swfstore.swf';
             // YAHOO.util.SWFStore.SWFURL = "http://t-mingcheng/yui/build/swfstore/swfstore.swf";
              YAHOO.util.SWFStore.SWFURL = "Swfstore.swf" +"?tmp=" + new Date().getTime();
//            YAHOO.util.SWFStore.SWFURL = 'http://127.0.0.1/yui/build/swfstore/swfstore.swf';
                    // + (navigator.userAgent.indexOf('Maxthon') != -1 ? '?t=' + +new Date().getTime() : '');

                var onSave = function(event) {
                    //added
                    if(event.info == "add") {
                        alert("'" + event.key + "'" + " was added successfully")
                    }

                    //updated
                    else if(event.info == "update") {
                        alert("'" + event.key + "'" + " was updated successfully")
                    }

                    //removed
                    else if(event.info == "delete") {
                        alert("'" + event.key + "'" + " was removed successfully")
                    }
					
					alert(swfstore.getValueOf('sample'));
                }

                var onError = function(event) {
                    alert("Event " + event.message);
                }

                var onInadequateDimensions = function() {
                    alert('onInadequateDimensions');
                }

                var onContentReady = function() {
                    // 绑定事件，这段可以查看调用方式
                    YUE = YAHOO.util.Event;

                    //swfstore.setItem('_a', '');

                    YUE.on('display', 'click', function(e) {
                        YUE.stopEvent(e);
                        swfstore.displaySettings();
                    });

                    YUE.on('set', 'click', function(e) {
                        YUE.stopEvent(e);
                        var str = prompt('Enter your string:');
                        //swfstore.setItem('_a', '');
                        if (str && str.length) {
                           alert("setBTN:" + swfstore.setItem('sample', str));
                        }
                    });

                    YUE.on('get', 'click', function(e) {
                        YUE.stopEvent(e);
                        //swfstore.setItem('_a', '');
                        alert(swfstore.getValueOf('sample'));
                    });

                    YUE.on('clear', 'click', function(e) {
                        YUE.stopEvent(e);
                        if (confirm('Sure?') && swfstore.clear()) {
                            alert("All data was successfully removed from storage")
                        }
                    });

                    // 组件载入完成
                    alert('swfstore is ready');
                }

                var swfstore = new YAHOO.util.SWFStore('swf', true, true);
                swfstore.addListener("save", onSave);
                swfstore.addListener("error", onError);
                swfstore.addListener("contentReady", onContentReady);
                swfstore.addListener("inadequateDimensions", onInadequateDimensions);
                swfstore.addListener("securityError", onError);
				
				//添加	Pennding	事件
				var onPending = function (evt){
					alert(evt.type);
				}
					
				swfstore.addListener("pending", onPending);
				
            },
            timeout: 1000
        });

        loader.insert();
        </script>
    </body>
</html>
