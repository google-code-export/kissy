KISSY.add("attribute-base",function(c,b){var i=c.EventTarget,f="before",d="Change",g="after";function h(j){var k=j.charAt(0);return k.toUpperCase()+j.substring(1)}function a(){this._state={};this._values={}}c.augment(a,{addAttribute:function(j,k){this._state[j]=k},set:function(j,m){var l=this;var k=l.get(j);if(k===m){return}if(l.fire(f+h(j)+d,{preVal:k,newVal:m})===false){return}l._set.apply(this,arguments);l.fire(g+h(j)+d,{preVal:k,newVal:this._values[j]})},_set:function(j,l){var k=this._state[j],m=b,n=k&&k.setter;if(n){m=n.apply(this,[l])}if(m!==b){l=m}this._values[j]=l},_getDefaultValue:function(j){var k=this._state[j];if(!k){return}if(k.valueFn){k.value=k.valueFn.call(this);delete k.valueFn}return k.value},get:function(k){var l=this;var n=l._state[k],j=n&&n.getter,m=k in l._values?l._values[k]:l._getDefaultValue(k);if(j){m=j.call(l,m)}return m},reset:function(j){var k=this;if(j!==b){k.set(j,k._getDefaultValue(j));return}for(var j in k._state){if(this._state.hasOwnProperty(j)){this.reset(j)}}}});function e(j){var k=this;a.call(k);k._initAttr();k._initial(j)}c.augment(e,i,a,{constructor:e,_initAttr:function(){var k=this.constructor;while(k){if(k.ATTRS){for(var j in k.ATTRS){if(k.ATTRS.hasOwnProperty(j)){this.addAttribute(j,k.ATTRS[j])}}}k=k.superclass?k.superclass.constructor:null}},_initial:function(k){for(var j in k){if(k.hasOwnProperty(j)){this._set(j,k[j])}}}});c.Base=e});
